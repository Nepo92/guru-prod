var $paymentMethodList,$statusesList,HIDE_DEAL_FORM;function setPaymentMethodList(e){$paymentMethodList=e}function setStatusesList(e){$statusesList=e}function setStreams(e,t){var i=new FormData;i.set("idCourse",Number(t)),$.ajax({type:"POST",url:"/deals/getStreamsByIdCourse",data:i,processData:!1,contentType:!1,cache:!1,success:function(t){var i='<option value="" disabled selected>Выберите дату старта</option>';$.each(t,(function(e,t){i+='<option value="'+t.id+'">'+t.startDate+"</option>"})),e.html(i)},error:function(e){}})}function closeEdit(){$("[js-client-card-name]").attr("disabled",!0),$("[js-client-card-comment]").attr("disabled",!0),$("[js-client-card-link]").attr("disabled",!0),$("[js-client-card-phone]").attr("disabled",!0),$("[js-client-card-email]").attr("disabled",!0),$("[js-edit-footer]").removeClass("is-open")}function updateDealStatusOnList(e){var t=$('[data-deal="'+e.id+'"]').find("[js-form-status]");t.parent($("form")).removeClassWild("deal-status__form_*").addClass("deal-status__form_"+e.code),$(t).find("option:selected").removeAttr("selected"),$(t).val(e.status)}function updateDealCard(e){void 0!==e&&$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDeals",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){var i=$("[js-deals-list]");i.html(""),$.each(t,(function(t,n){updateDealPriceOnList(n);var a="";$.each($statusesList,(function(e,t){a+='<option js-deal-form-status value="'+t.id+'" data-code="'+t.code+'" '+(t.id===n.status?'selected="selected" ':"")+'">'+t.title+"</option>"}));n.reminder&&(n.reminderMessage,n.reminderMessage);var s=$("<div/>").attr("class","deal deal_told deal_white").append($("<div/>").attr("class","deal-wrapper").append($("<div/>").attr("class","deal__wrapper deal__wrapper_bordered deal__wrapper_column").append($("<div/>").attr("class","deal__title").html(1===n.status?"Целевая заявка":n.course)).append($("<div/>").attr("class","deal__subtitle").append($("<div/>").attr("class",null!==n.kind?"deal__kind deal__kind_del":"deal__kind").html(n.kind)).append($("<div/>").attr("class","deal__date").html(n.createDate)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_overflow deal__wrapper_bordered c-tooltip").attr("js-deal-id",n.id).append($("<div/>").attr("class","c-tooltip__wrapper").append($("<div/>").attr("class","c-tooltip__text").html(n.managerAccessName))).append($("<div/>").attr("class","deal__social").append($("<div/>").attr("class","deal-social deal-social_"+n.socialCode))).append($("<div/>").attr("class","deal__manager").html(n.managerName)).append($("<div/>").attr("class","deal__sale-type").html(n.type))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_between deal__wrapper_bordered ").append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Стоимость")).append($("<div/>").attr("class","deal__sum-value").html(n.price))).append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Получено")).append($("<div/>").attr("class","deal__sum-value deal__sum-value_blue").html(n.paid))).append(1!==n.status?$("<div/>").attr("class","deal_bill").append($("<form/>").attr("js-add-bill-form","").attr("action","#").attr("class",n.isHidden?"hidden-deal":"").append($("<input/>").attr("type","hidden").attr("name","id").val(n.id)).append($("<button/>").attr("js-add-bill-button","").attr("class","add-btn"))):"")).append(1!==n.status?$("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<form/>").attr("js-deal-status-form","").attr("class","deal__select deal__select_"+n.statusCode).append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<select/>").attr("class","deal-select menu-input__input_select").attr("name","status").attr("js-deal-form-status","").html(a))):$("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__select deal__select_"+n.statusCode).append($("<div/>").attr("class","deal-select menu-input__input_select").html(n.statusName)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__reminder").append($("<div/>").attr("class",n.reminder?n.reminderExpiration?"deal__reminder-title deal-reminder deal-reminder_red ":n.reminderToday?"deal__reminder-title deal-reminder deal-reminder_green ":"deal__reminder-title deal-reminder deal-reminder_gray ":"deal__reminder-title deal__reminder-title_left").html(n.reminder?n.reminderDate:"Нет напоминания")).append(1!==n.status?$("<div/>").attr("class","add-reminder").append($("<form/>").attr("js-add-reminder-form","").attr("action","#").append($("<input/>").attr("type","hidden").attr("name","idDeal").val(n.id)).append($("<button/>").attr("js-add-reminder-button","").attr("class","add-btn"))):""))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column").append($("<form/>").attr("class","button_full").attr("action","#").attr("js-update-deal-form","").append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_white button_full").attr("js-update-deal-btn","").html("Редактировать сделку"))).append(n.isHidden?$("<form/>").attr("class","button_full").attr("action","#").attr("js-reveal-deal-form","").append($("<input/>").attr("data-hide-deal",n.id).attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_red button_full").attr("js-reveal-deal-btn","").append($("<span/>").attr("class","hidden-btn hidden-btn_left hidden-btn_reveal").html("Восстановить сделку"))):$("<form/>").attr("class","button_full").attr("action","#").attr("js-hide-deal-form","").append($("<input/>").attr("data-hide-deal",n.id).attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_red button_full").attr("js-hide-deal-btn","").append($("<span/>").attr("class","hidden-btn hidden-btn_left hidden-btn_hide").html("Скрыть сделку"))))));i.append(s),loadModules(e,n.id)}))}})}function loadModules(e,t){$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDealsModulesInfo",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(i){i.modules.length>0&&($modulesRoot=$("<div/>").attr("class","deal__access-lessons "),$lessons=$("<div/>").attr("class","deal__lessons"),$.each(i.modules,(function(n,a){$lessons.append($("<div/>").attr("js-module",a.idModule).attr("js-module-deal",t).attr("js-module-client",e).attr("js-allowed",i.allowed).attr("class","deal__lessons-item "+(a.enabled?"deal__lessons-item_active":"")).html(a.number))})),$access=$("<div/>").attr("class","deal__access").append($("<div/>").attr("class","deal__access-text")).html("Доступ к продукту").append($("<div/>").attr("class","deal__access-btn slide-toggle "+(i.allowed?"slide-toggle_active":"")).attr("js-id-deal-toggle",t).append($("<div/>").attr("class","slide-toggle__thumb"))),$modulesRoot.append($access),$modulesRoot.append($lessons),$modulesRoot.insertAfter($("[js-deal-id="+t+"]")),$(".slide-toggle[js-id-deal-toggle="+t+"]").click((function(t){var i=$(this),n=i.attr("js-id-deal-toggle"),a=i.hasClass("slide-toggle_active");a?i.removeClass("slide-toggle_active"):(i.addClass("slide-toggle_active"),$(".deal__lessons-item[js-module-deal="+n+"]").toggleClass("deal__lessons-item_active",!0)),changeAllowed(n,e,!a)})),$(".deal__lessons-item[js-module-deal="+t+"]").click((function(e){var t=$(this),i=t.attr("js-module"),n=t.attr("js-module-deal"),a=$(".slide-toggle[js-id-deal-toggle="+n+"]").hasClass("slide-toggle_active"),s=t.attr("js-module-client"),o=t.hasClass("deal__lessons-item_active");a&&(o?t.removeClass("deal__lessons-item_active"):t.addClass("deal__lessons-item_active"),changeEnabledModule(s,n,i,!o))})))}})}function changeAllowed(e,t,i){console.log("Change allowed",e,t,i),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/changeModulesAllowed",data:JSON.stringify({id:e,idClient:t,value:i}),dataType:"json",cache:!1,success:function(e){console.log(e)}})}function changeEnabledModule(e,t,i,n){console.log("Change enabled",e,t,i,n),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/changeModulesEnabled",data:JSON.stringify({idDeal:t,idModule:i,idClient:e,value:n}),dataType:"json",cache:!1,success:function(e){console.log(e)}})}function updateClient(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/updateClient",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){closeEdit(),updateClientNameOnFront(e),updateClientLinkOnFront(e),updateClientPhoneOnFront(e),updateClientNameOnList(e),$("[js-update-deal]").prop("disabled",!1),$("[js-client-name-copy]").text(e.name),$("[js-client-name-copy]").attr("data-link",e.name)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateClientNameOnFront(e){$('[data-client="'+e.id+'"]').siblings("span").html(e.name)}function updateClientLinkOnFront(e){var t=$('[data-link-client="'+e.id+'"]');null===e.link||""===e.link?t.html("<div>—</div>"):t.html('<div class="column-links"><div js-copy-link class="column_mwidth column_mwidth-copy" data-link="'+e.link+'"></div><a href="'+e.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div>')}function updateClientPhoneOnFront(e){var t=$('[data-phone-client="'+e.id+'"]');null===e.phone||""===e.phone?t.html("<div>—</div>"):t.html('<div js-copy-link class="client-phone" data-link="'+e.phone+'">'+e.phone+"</div>")}function updateClientNameOnList(e){var t=$('[value="'+e.id+'"].js-client-id-l').closest("[js-client-card]");t.find(".client-card__title").html(e.name),t.find(".client-card__info-link").html(e.link),t.find(".client-card__info-phone").html(e.phone)}function hideDeal(e){$("[js-hide-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/hideDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-hide-deal-btn]").prop("disabled",!1),updateHideForm(e.id,!0)},error:function(e){$("[js-hide-deal-btn]").prop("disabled",!1)}})}function revealDeal(e){$("[js-reveal-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/revealDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-reveal-deal-btn]").prop("disabled",!1),updateHideForm(e.id,!1)},error:function(e){$("[js-reveal-deal-btn]").prop("disabled",!1)}})}function updateHideForm(e,t){var i,n=$('[data-hide-deal="'+e+'"]').closest("form"),a=$("[js-add-bill-form]").find('input[name="id"][value="'+e+'"]').closest("[js-add-bill-form]");t?(n.removeAttr("js-hide-deal-form").attr("js-reveal-deal-form",""),(i=n.find("[js-hide-deal-btn]")).removeAttr("js-hide-deal-btn").attr("js-reveal-deal-btn",""),i.find(".hidden-btn_hide").removeClass("hidden-btn_hide").addClass("hidden-btn_reveal"),i.find("span").html("Восстановить сделку"),a.addClass("hidden-deal")):(n.removeAttr("js-reveal-deal-form").attr("js-hide-deal-form",""),(i=n.find("[js-reveal-deal-btn]")).removeAttr("js-reveal-deal-btn").attr("js-hide-deal-btn",""),i.find(".hidden-btn_reveal").removeClass("hidden-btn_reveal").addClass("hidden-btn_hide"),i.find("span").html("Скрыть сделку"),a.removeClass("hidden-deal"))}function setDealInfo(e){$("[js-update-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setUpdateDealInfo(e),$("[js-update-deal-btn]").prop("disabled",!1)},error:function(e){$("[js-update-deal-btn]").prop("disabled",!1)}})}function setUpdateStreams(e){var t=new FormData;t.set("idCourse",Number(e)),$.ajax({type:"POST",url:"/deals/getStreamsByIdCourse",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){var t="";$.each(e,(function(e,i){t+='<option value="'+i.id+'">'+i.startDate+"</option>"})),$("[js-update-form-deal-start-date]").append(t)},error:function(e){}})}function updateDeal(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard(e.idClient),$("[js-menu-update-deal]").removeClass("is-open"),checkBodyHidden(),updateDealAfterUpdateOnList(e),$("[js-update-deal]").prop("disabled",!1)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateDealAfterUpdateOnList(e){var t=$('[data-deal="'+e.id+'"]');t.find("[data-deal-date-deal]").html(e.dealDate),t.find("[data-deal-social]").removeClassWild("deal-social_*").addClass("deal-social_"+e.socialCode).addClass("deal-social_big");var i=null!=e.course?e.course+(null!==e.kind&&""!==e.kind?" ("+e.kind+")":""):"Целевая заявка";t.find("[data-deal-course]").attr("title",i).html(i),t.find("[data-deal-type]").html(e.type),t.find("[data-deal-price]").html(e.price);var n=t.find(".column-paid");n.removeClassWild("column-paid_*"),e.price<=t.find("[data-deal-paid]").html().replace(/\D+/g,"")&&n.addClass("column-paid_green"),t.find("[data-deal-start-date]").html(e.startDate),null===e.tag?t.find("[data-deal-tag]").html("<div>—</div>"):t.find("[data-deal-tag]").html('<div title="'+e.tag+'" class="column-msg">'+e.tag+"</div>"),t.find("[data-deal-mailing]").html(e.coupling);var a=t.find("[js-form-status]");a.parent($("form")).removeClassWild("deal-status__form_*").addClass("deal-status__form_"+e.statusCode),a.on("change",(function(e){e.preventDefault()})),$("#"+$(a).attr("id")+" option:selected").removeAttr("selected"),$("#"+$(a).attr("id")).val(e.status);var s="";e.reminder&&(s+='<div class="reminder-wrapper"><div class="reminder-date" >'+e.reminderDate+'</div><div class="reminder-msg">'+e.reminderMessage+"</div></div>"),s+='<div class="reminder '+(e.reminder?e.reminderExpiration?"reminder_red":e.reminderToday?"reminder_green":"reminder_gray":"")+'"></div>',e.reminder&&(s+='<div class="reminder-d">'+e.reminderDate+"</div>"),t.find("[data-deal-reminder]").html(s)}function openBills(e,t){$("[js-add-bill-form]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:t,data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-bills-deal-id]").val(e.id),createBills(t),$("[js-menu-bills]").addClass("is-open"),checkBodyHidden(),$("[js-add-bill-form]").prop("disabled",!1)},error:function(e){$("[js-add-bill-form]").prop("disabled",!1)}})}function createBills(e){$("[js-bills-body]").html(""),e.length>0?$("[js-bills]").addClass("is-open"):$("[js-bills]").removeClass("is-open"),checkBodyHidden(),$.each(e,(function(e,t){var i="";i+='<div class="div-table__body-row">';var n="";$.each($paymentMethodList,(function(e,t){n+='<option value="'+t.title+'" data-code="'+t.code+'">'+t.title+"</option>"})),2===t.status?i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_checked"></div></div>':i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_unchecked"></div></div>',i+='<div class="div-table__body-col div-table__body-col_medium"><div class="column-text">'+t.manager+"</div></div>",i+='<form b-update-bill-form action="#" class="edit-form-bill"><input type="hidden" b-id-bill value="'+t.id+'" name="id" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input type="hidden" b-pm value="'+t.paymentMethod+'" name="paymentMethod"><input type="hidden" b-pm-code value="'+t.paymentMethodCode+'" name="paymentMethodCode"><div class="div-table__body-col div-table__body-col_small">'+t.billDate+"</div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xsmall"><input b-sum disabled name="sum" class="menu-input__input menu-input__input_small editable" value="'+t.sum+'" placeholder="0 ₽"></div>',i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div b-pm-wrapper class="pmethod-wrapper disabled"><select b-pm-selector disabled class="column_pmethod-select column_pmethod_'+t.paymentMethodCode+'">'+n+"</select></div></div>",i+='<div class="div-table__body-col div-table__body-col_medium  div-table__body-col_center div-table__body-col_r10"><input b-account-number disabled name="accountNumber" class="menu-input__input menu-input__input_small editable" value="'+(null===t.accountNumber?"":t.accountNumber)+'" placeholder="—"></div>',i+='<div class="div-table__body-col col-pay-date div-table__body-col_center div-table__body-col_medium "><div class="menu-input__wrapper menu-input__wrapper_xsmall"><input b-pay-date disabled name="payDate" class="datepicker-here-cs menu-input__input menu-input__input_small editable" autocomplete="off" value="'+(null===t.payDate?"":t.payDate)+'" data-autoclose="true" placeholder="—"/></div></div>',null===t.payDate?i+='<div class="div-table__body-col div-table__body-col_small col-status">Выставлен</div>':i+='<div class="div-table__body-col div-table__body-col_small col-status div-table__body-col_green">Оплачен</div>',i+='<div class="div-table__body-col div-table__body-col_small">'+("Новый клиент"===t.paymentType?"Первый":"Доплата")+"</div>",null!==t.link&&""!==t.link?i+='<div class="div-table__body-col div-table__body-col_xxsmall div-table__body-col_center"><div class="column-links"><div js-copy-link data-link="'+t.link+'" class="column_mwidth column_mwidth-copy"></div><a js-open-link href="'+t.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div></div>':i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div>—</div></div>',i+="</form>",i+='<div data-bill-id="'+t.id+'" class="div-table__body-col div-table__body-col_medium div-table__body-col_center"><div class="column-links">'+(null===t.comment?'<div js-add-sms-check js-check-btn class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-add-check"></div>':'<div js-delete-sms-check js-check-btn title="'+t.comment+'" class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-delete-check"></div>')+(null!==t.billImage&&""!==t.billImage?'<a class="column-img column_mwidth column-img_large div-table__body-col_center" data-fancybox="gallery" href="../'+t.billImage+'"><img src="/'+t.billImage+'"></a>':'<form js-upload-bill-form action="#" class="column_mwidth column_mwidth-large div-table__body-col_center div-table__body-col_fl" enctype="multipart/form-data"><input type="hidden" value="'+t.id+'" name="id" required><input type="hidden" value="'+t.isHidden+'" name="isHidden" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input js-upload-bill accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="file'+e+'"/><label for="file'+e+'" class="js-labelFile"><span class="js-upload-file js-upload-file_small"></span></label></form>')+"</div></div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xxsmall">',t.isEditable&&(i+='<div js-edit-btns class="column-links display-flex-none"><div js-edit-bill-accept class="column_mwidth column_mwidth-accept"></div><div js-edit-bill-cancel class="column_mwidth column_mwidth-cancel"></div></div><div js-edit-menu class="column-links display-flex-none is-open"><div js-edit-bill class="column_mwidth div-table__body-col_center column_mwidth-edit"></div><form js-delete-bill-form class="column-form" action="#"><input type="hidden" value="'+t.id+'" name="id" required><button js-delete-bill type="button" class="column_mwidth column_mwidth-delete"></button></form></div>'),i+="</div></div>",$("[js-bills-body]").html($("[js-bills-body]").html()+i)})),initDatePicker(),initFancy(),initEditBillForm(),initCancelEditBill(),initAcceptEditBill()}function initDatePicker(){$(".datepicker-here-cs").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}function initFancy(){$('[data-fancybox="gallery"]').fancybox({infobar:!1,buttons:["close"]})}function updateBillImageOnList(e){$('[js-upload-bill-form][bill-image="'+e.id+'"]').replaceWith('<a class="column-img column-img_mr5" data-fancybox="gallery'+e.id+'" href="/'+e.billImage+'">  <img src="/'+e.billImage+'"></a>')}$(document).on("click",".datepicker-here",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-deal",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-cs",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click","[js-update-open-reminder]",(function(e){$("[js-update-form-deal-reminder-btn]").removeClass("is-open"),$("[js-update-form-deal-reminder-block]").addClass("is-open"),$("[js-update-form-deal-reminder-date]").val(""),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!0)})),$(document).on("click","[js-update-close-reminder]",(function(e){$("[js-update-form-deal-reminder-btn]").addClass("is-open"),$("[js-update-form-deal-reminder-block]").removeClass("is-open"),$("[js-update-form-deal-reminder-date]").val("—"),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!1)})),$(document).on("change","[js-update-form-deal-sale-type]",(function(e){"traffic"===$(this).val()?$("[js-update-form-deal-mailing-block]").addClass("is-open"):($("[js-update-form-deal-mailing-block]").removeClass("is-open"),$("[js-update-form-deal-mailing]").prop("checked",!1))})),$(document).on("change","[js-update-form-deal-pr]",(function(e){$("[js-update-form-deal-price]").val($("option:selected",this).attr("data-price")),$("[js-update-form-deal-product-type]").val($("option:selected",this).attr("data-type")),$("[js-update-form-deal-product-id]").val($("option:selected",this).attr("data-id")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-update-form-kind]").html(createKindOptions($list)),$("[js-update-form-kind-block]").addClass("is-open")):($("[js-update-form-kind-block]").removeClass("is-open"),$("[js-update-form-kind]").html("")),"курс"==$("[u-product-types]").val()&&setStreams($("[js-update-form-deal-start-date]"),$("option:selected",this).attr("data-id"))})),$(document).ready((function(){$(".datepicker-here-deal").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0}),$(".datepicker-here").datepicker({autoClose:!0,todayButton:!0});const e=$("[js-menu-create-client]"),t=$("[js-menu-client-card]");$("[js-menu-client-card-close-btn]").on("click",(function(){e.removeClass("is-open"),t.removeClass("is-open"),closeEdit(),checkBodyHidden()}));const i=$("[js-menu-update-deal]");$("[js-menu-update-deal-close-btn]").on("click",(function(){i.removeClass("is-open"),checkBodyHidden()}));const n=$("[js-menu-update-reminder-close-btn]"),a=$("[js-menu-update-reminder]");n.on("click",(function(){clearReminderForm(),a.removeClass("is-open"),checkBodyHidden()}));const s=$("[js-menu-bills-close-btn]"),o=$("[js-menu-bills]");s.on("click",(function(){o.removeClass("is-open"),checkBodyHidden(),BILLS_TEMP_INFO={}})),initDatePicker()})),$(document).on("click","[close-dialog]",(function(e){$(this).closest(".dialog").removeClass("is-open")})),$(document).on("click","[js-edit-btn]",(function(e){$("[js-client-card-name]").removeAttr("disabled"),$("[js-client-card-comment]").removeAttr("disabled"),$("[js-client-card-link]").removeAttr("disabled"),$("[js-client-card-phone]").removeAttr("disabled"),$("[js-client-card-email]").removeAttr("disabled"),$("[js-edit-footer]").addClass("is-open")})),$(document).on("change","[js-form-status]",(function(e){var t=$(this).parent($("[js-status-form]"));t.removeClassWild("deal-status__form_*"),t.addClass("deal-status__form_"+$("option:selected",this).attr("data-code"));var i=t.serializeObject();$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDealStatus",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){},error:function(e){}})})),$(document).on("change","[js-deal-form-status]",(function(e){var t=$(this).parent($("[js-deal-status-form]"));t.removeClassWild("deal__select_*");var i=$("option:selected",this).attr("data-code");t.addClass("deal__select_"+i);var n=t.serializeObject();n.code=i,$("[js-deal-form-status]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDealStatus",data:JSON.stringify(n),dataType:"json",cache:!1,success:function(e){updateDealStatusOnList(n),$("[js-deal-form-status]").prop("disabled",!1)},error:function(e){$("[js-deal-form-status]").prop("disabled",!1)}})})),$(document).on("click","[js-edit-client-btn]",(function(e){e.preventDefault(),$(this).closest("[js-edit-client-form]").trigger("submit")})),$(document).on("submit","[js-edit-client-form]",(function(e){e.preventDefault(),updateClient($(this).serializeObject())})),$(document).on("click","[js-hide-deal-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите скрыть сделку?"),$("[dialog]").find(".dialog__text").html("В данном случае информация о сделке не будет учитываться"),$("[dialog]").find("[accept-dialog]").attr("hide-deal",""),$("[dialog]").addClass("is-open"),HIDE_DEAL_FORM=$(this).closest("[js-hide-deal-form]")})),$(document).on("click","[hide-deal]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),HIDE_DEAL_FORM.trigger("submit")})),$(document).on("submit","[js-hide-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();hideDeal(t)}})),$(document).on("click","[js-reveal-deal-btn]",(function(e){e.preventDefault(),$(this).closest("[js-reveal-deal-form]").trigger("submit")})),$(document).on("submit","[js-reveal-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();revealDeal(t)}})),$(document).on("click","[js-update-deal-btn]",(function(e){e.preventDefault(),$(this).closest("[js-update-deal-form]").trigger("submit")})),$(document).on("submit","[js-update-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();setDealInfo(t)}})),$(document).on("click","[js-update-deal]",(function(e){e.preventDefault(),$("[js-update-form-deal]").trigger("submit")})),$(document).on("submit","[js-update-form-deal]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateDeal(t)}})),$(document).on("submit","[js-add-bill-form]",(function(e){e.preventDefault(),$(this).hasClass("hidden-deal")?openBills($(this).serializeObject(),"/api/bills/getHiddenBills"):openBills($(this).serializeObject(),"/api/bills/getBills")})),$(document).on("click","[js-add-bill-up-client]",(function(e){var t=$(this).closest(".custom-table__body-row").find("[js-client-id]").siblings("span").html();$("[js-client-name-copy]").text(t),$("[js-client-name-copy]").attr("data-link",t)})),$(document).on("change","[js-upload-bill]",(function(e){var t=$(this).closest("[js-upload-bill-form]"),i=new FormData(t[0]);$("[js-upload-bill]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/api/bills/uploadBill",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){updateBillImageOnList(e);var i=t.serializeObject();i.id=i.idDeal,e.isHidden?openBills(i,"/api/bills/getHiddenBills"):openBills(i,"/api/bills/getBills"),$("[js-upload-bill]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill]").prop("disabled",!1)}})})),$(document).on("change","[js-upload-bill-front]",(function(e){var t=$(this).closest("[js-upload-bill-form]"),i=new FormData(t[0]);$("[js-upload-bill-front]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/api/bills/uploadBill",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){updateBillImageOnList(e),$("[js-upload-bill-front]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill-front]").prop("disabled",!1)}})}));var BILLS_INFO_TEMP={},ACCEPT_EDITE_BTN,$coursesList,$productMap;function openUpdateReminder(e){$("[js-add-reminder-button]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getReminder",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){openReminderMenu(e),$("[js-add-reminder-button]").prop("disabled",!1)},error:function(e){$("[js-add-reminder-button]").prop("disabled",!1)}})}function openReminderMenu(e){$("[js-update-form-reminder-id-deal]").val(e.idDeal),$("[js-update-form-reminder-date]").val(e.reminderDate),$("[js-update-form-reminder-msg]").html(e.reminderMessage),e.reminder&&$("[js-delete-reminder-block]").addClass("is-open"),$("[js-menu-update-reminder]").addClass("is-open"),checkBodyHidden()}function clearReminderForm(){$("[js-update-form-reminder]").trigger("reset"),$("[js-update-form-reminder-msg]").html(""),$("[js-delete-reminder-block]").removeClass("is-open")}function updateReminder(e){$("[js-update-reminder]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveReminder",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),updateReminderOnList(e),clearReminderForm(),$("[js-menu-update-reminder]").removeClass("is-open"),checkBodyHidden(),$("[js-update-reminder]").prop("disabled",!1)},error:function(e){$("[js-update-reminder]").prop("disabled",!1)}})}function updateReminderOnList(e){var t=$('[data-deal="'+e.idDeal+'"]'),i="";e.reminder&&(i+='<div class="reminder-wrapper"><div class="reminder-date" >'+e.reminderDate+'</div><div class="reminder-msg">'+e.reminderMessage+"</div></div>"),i+='<div class="reminder '+(e.reminder?e.reminderExpiration?"reminder_red":e.reminderToday?"reminder_green":"reminder_gray":"")+'"></div>',e.reminder&&(i+='<div class="reminder-d">'+e.reminderDate+"</div>"),t.find("[data-deal-reminder]").html(i)}function setCoursesList(e){$coursesList=e}function createProductOptions(e,t){var i="";i+='<option value="" disabled selected>Выберите продукт</option>',$.each(e,(function(e,t){i+='<option data-id="'+t.id+'" value="'+t.name+'" data-type="'+t.type+'" data-price="'+t.price+'"">'+t.name+"</option>"})),$("["+t+"]").html(i)}function createEmptyProductOptions(e){$("["+e+"]").html('<option value="" disabled selected>Выберите продукт</option>')}function setProductMap(e){$productMap=e}function createRow(e){$("[js-save-row]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveManagerAccess",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateRowOnFront(e),$("[js-menu-create-row]").removeClass("is-open"),$("[js-row-form]").trigger("reset"),$("[js-save-row]").prop("disabled",!1)},error:function(e){$("[js-save-row]").prop("disabled",!1)}})}function updateRowOnFront(e){if(!$('[ma-id][value="'+e.id+'"]').length){var t=$("[table-body]");t.html('<tr class="custom-table__body-row">                        <input type="hidden" ma-id value="'+e.id+'" name="id" required>                        <td class="custom-table__body-col"></td>                        <td class="custom-table__body-col custom-table__body-col_xlarge">'+e.managerName+'</td>                        <td class="custom-table__body-col custom-table__body-col_xlarge">'+e.managerAccessName+'</td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-menu class="column-links display-flex-none is-open">                                <div delete-ma-form class="column-form">                                    <button delete-ma type="button" class="column_mwidth column_mwidth-delete"></button>                                </div>                            </div>                        </td>                    </tr>'+t.html())}}function addLevelValues(e){let t=0;for(let n=1;n<=DEFAULT_LEVEL_COUNT;n++){var i=$('div[data-level="'+n+'"]');e.append("levels["+t+"].level",i.attr("data-level")),e.append("levels["+t+"].value",i.find("[js-action-form-value]").val()),e.append("levels["+t+"].bonus",i.find("[js-action-form-bonus]").val()),t++}}function initDatePickerStart(){$(".datepicker-here-start").datepicker({autoClose:!0,minDate:new Date})}function initDatePickerCs(){$(".datepicker-here-cs").datepicker({autoClose:!0})}$(document).on("click","[edit-bill]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[b-pay-date]");i.removeAttr("disabled"),t.payDate=i.val();var n=$(this).closest(".custom-table__body-row").find("[b-sum]");t.sum=n.val(),n.val(n.val().replace(" ₽","")).removeAttr("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeAttr("disabled");var a=$(this).closest(".custom-table__body-row").find("[b-pm]");t.paymentMethod=a.val();var s=$(this).closest(".custom-table__body-row").find("[b-pm-code]");t.paymentMethodCode=s.val();var o=$(this).closest(".custom-table__body-row").find("[b-account-number]");o.removeAttr("disabled"),t.accountNumber=o.val(),BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]=t})),$(document).on("click","[edit-bill-cancel]",(function(e){e.preventDefault();var t=BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()];$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(t.payDate).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-sum]").val(t.sum).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-account-number]").val(t.accountNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+t.paymentMethodCode).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm]").val(t.paymentMethod),$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(t.paymentMethodCode),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]})),$(document).on("click","[edit-bill-accept]",(function(e){e.preventDefault(),ACCEPT_EDITE_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[b-id-bill]").val(),t.idDeal=$(this).closest(".custom-table__body-row").find("[b-id-deal]").val(),t.paymentMethod=$(this).closest(".custom-table__body-row").find("[b-pm]").val(),t.paymentMethodCode=$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(),t.sum=$(this).closest(".custom-table__body-row").find("[b-sum]").val(),t.accountNumber=$(this).closest(".custom-table__body-row").find("[b-account-number]").val(),t.payDate=$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(),$("[edit-bill-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/updateBill",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(e.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(e.sum+" ₽").attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(e.accountNumber).attr("disabled",!0),null===e.payDate||""===e.payDate?ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").removeClass("column-bill__status_paid").html("Выставлен"):ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").addClass("column-bill__status_paid").html("Оплачен"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+e.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(e.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(e.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)},error:function(e){var i=BILLS_INFO_TEMP[t.id];ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(i.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(i.sum).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(i.accountNumber).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+i.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(i.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(i.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)}})})),$(document).on("click","[js-add-reminder-button]",(function(e){e.preventDefault(),$(this).closest("[js-add-reminder-form]").trigger("submit")})),$(document).on("submit","[js-add-reminder-form]",(function(e){e.preventDefault(),openUpdateReminder($(this).find('[name="idDeal"]').val())})),$(document).on("click","[js-delete-reminder]",(function(e){e.preventDefault();var t=$(this).closest("[js-update-form-reminder]").find('[name="idDeal"]').val();$("[js-delete-reminder]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/deleteReminder",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),$('[data-deal="'+t+'"]').find("[data-deal-reminder]").html('<div class="reminder"></div>'),clearReminderForm(),$("[js-menu-update-reminder]").removeClass("is-open"),checkBodyHidden(),$("[js-delete-reminder]").prop("disabled",!1)},error:function(e){$("[js-delete-reminder]").prop("disabled",!1)}})})),$(document).on("click","[js-update-reminder]",(function(e){e.preventDefault(),$("[js-update-form-reminder]").trigger("submit")})),$(document).on("submit","[js-update-form-reminder]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateReminder(t)}})),$(document).on("change","[product-category]",(function(e){$("[js-deal-form-price]").val(0);var t=$("option:selected",this).val();createProductOptions($productMap[t],"js-deal-form-product"),$("[product-block]").removeClass("menu-input_close")})),$(document).on("change","[u-product-category]",(function(e){$("[js-update-form-deal-price]").val(0);var t=$("option:selected",this).val();createProductOptions($productMap[t],"js-update-form-deal-pr"),$("[u-product-block]").removeClass("menu-input_close")})),$(document).on("change","[u-product-types]",(function(e){$("[js-update-form-deal-price]").val(0),$("[js-update-form-deal-start-date]").html('<option value="" disabled selected>Выберите дату старта</option>');var t=$("option:selected",this).attr("data-id");$("#u-product-category option:selected").removeAttr("selected"),$("#u-product-category option:first").prop("selected",!0),$("#js-update-form-deal-pr option:selected").removeAttr("selected"),$("#js-update-form-deal-pr option:first").prop("selected",!0),2==t?(createProductOptions($coursesList,"js-update-form-deal-pr"),$("[u-product-block]").removeClass("menu-input_close"),$("[u-trial-block]").removeClass("menu-input_close"),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-start-date-block]").removeClass("menu-input_close")):3==t?(createEmptyProductOptions("js-update-form-deal-pr"),$("[u-product-category-block]").removeClass("menu-input_close"),$("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-start-date-block]").addClass("menu-input_close")):($("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-start-date-block]").removeClass("menu-input_close"))})),$(document).on("click","[delete-ma]",(function(e){var t=$(this).closest(".custom-table__body-row"),i=new Object;i.id=t.find("[ma-id]").val(),$("[ma]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteManagerAccess",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){t.remove(),$("[delete-ma]").prop("disabled",!1)},error:function(e){$("[delete-ma]").prop("disabled",!1)}})})),$(document).ready((function(){const e=$("[js-create-row]"),t=$("[js-menu-create-row-close-btn]"),i=$("[js-menu-create-row]"),n=$("[js-save-row]"),a=$("[js-row-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=a.serializeObject();createRow(t)}}))})),$(document).on("change","[js-action-form-action-type]",(function(e){const t=$("[js-action-rank]"),i=$("[js-action-unrank]"),n=$("[js-action-indiv]");1==$(this).val()?(t.css("display","none"),n.css("display","none"),i.css("display","flex"),$("input[js-bonus]").val(null),$("input[js-mech]").val(null),$("input[js-place]").val(null),$("input[js-min]").val(null)):2==$(this).val()?(i.css("display","none"),n.css("display","none"),t.css("display","flex"),$("input[js-bonus]").val("0"),$("input[js-mech]").val(0),$("input[js-place]").val(null),$("input[js-min]").val(null)):3==$(this).val()&&(t.css("display","none"),i.css("display","none"),n.css("display","flex"),$("input[js-bonus]").val(null),$("input[js-mech]").val(null),$("input[js-place]").val(null),$("input[js-min]").val(null))})),$(document).on("click","[js-action-form-mech]",(function(e){const t=$("[js-action-form-value]"),i=$("[js-action-form-minimum]");2==$(this).children().first().val()?(t.parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_count"),i.parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_count")):(t.parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum"),i.parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum"))})),$(document).on("change","[js-action-form-bonus-type]",(function(e){const t=$("[js-bonus]"),i=$("[js-place]");1==$(this).val()?(t.parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum"),i.parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum")):(t.parent().removeClassWild("menu-input__wrapper_*"),i.parent().removeClassWild("menu-input__wrapper_*"))})),$(document).ready((function(){const e=$("[js-create-action]"),t=$("[js-menu-create-action]"),i=$("[js-menu-create-action-close-btn]");e.on("click",(function(){t.addClass("is-open"),checkBodyHidden()})),i.on("click",(function(){t.removeClass("is-open"),resetForm(),checkBodyHidden()}));const n=$("[js-save-action]"),a=$("[js-action-form]");n.on("click",(function(){event.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=$("#actionForm")[0],i=new FormData(t);"3"===i.get("actionType")&&addLevelValues(i),saveAction(i)}})),initDatePickerStart(),initDatePickerCs(),initActionManagersTypeSelector(),initDeleteLevel(),initAddLevel()}));var DEFAULT_LEVEL_COUNT=1;function initDeleteLevel(){$("[js-delete-level]").on("click",(function(){DEFAULT_LEVEL_COUNT>1&&($('div[data-level="'+DEFAULT_LEVEL_COUNT+'"]').remove(),DEFAULT_LEVEL_COUNT-=1)}))}function initAddLevel(){$("[js-add-level]").on("click",(function(){var e=$('div[data-level="'+DEFAULT_LEVEL_COUNT+'"]'),t=$("[js-action-form-bonus-type]").val();DEFAULT_LEVEL_COUNT+=1,e.after('<div js-action-indiv data-level="'+DEFAULT_LEVEL_COUNT+'" class="menu-input__wrapper menu-input__wrapper_row menu-input__wrapper_margin">                        <div class="menu-input menu-input_m menu-input_full">                            <div class="menu-input__title">Значение ур.'+DEFAULT_LEVEL_COUNT+' *</div>                            <div class="menu-input__wrapper menu-input__wrapper_sum">                                <input js-mech js-action-form-value name="value'+DEFAULT_LEVEL_COUNT+'" class="menu-input__input menu-input__input_small" placeholder="Введите значение" required/>                            </div>                        </div>                        <div class="menu-input menu-input_m  menu-input_full">                            <div class="menu-input__title">Награда ур.'+DEFAULT_LEVEL_COUNT+' *</div>                            <div class="menu-input__wrapper '+(1==t?"menu-input__wrapper_sum":"")+'">                                <input js-bonus js-action-form-bonus name="bonus'+DEFAULT_LEVEL_COUNT+'" class="menu-input__input menu-input__input_small" placeholder="Введите награду" required/>                            </div>                        </div>                    </div>')}))}function initActionManagersTypeSelector(){$("input[name=managers]").prop("checked",!0);const e=$("[js-action-form-manager-type]"),t=$("[js-managers-row]");e.on("change",(function(){1==e.val()?(t.css("display","none"),$("input[name=managers]").prop("checked",!0)):2==e.val()&&(t.css("display","flex"),$("input[name=managers]").prop("checked",!1))}))}function resetForm(){$("[js-action-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите изображение акции 420х340"),$("[js-managers-row]").removeAttr("style"),$("input[name=managers]").prop("checked",!0),$("[js-action-unrank]").removeAttr("style"),$("[js-action-rank]").removeAttr("style"),$("[js-action-indiv]").removeAttr("style"),$("[js-bonus]").parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum"),$("[js-place]").parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum"),$("[js-action-form-value]").parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum"),$("[js-action-form-minimum]").parent().removeClassWild("menu-input__wrapper_*").addClass("menu-input__wrapper_sum")}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.parent().last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function saveAction(e){$("[js-save-action]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"saveAction",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[js-menu-create-action]").removeClass("is-open"),checkBodyHidden(),resetForm(),$("[js-save-action]").prop("disabled",!1),location.reload()},error:function(e){$("[js-save-action]").prop("disabled",!1)}})}var DEFAULT_PLACE_COUNT=1,DELETE_LINK_FORM,LINK_ROW;function deleteInsideLink(e){$("[delete-inside-link-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteInsideLink",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){LINK_ROW.closest("tr").remove(),$("[delete-inside-link-btn]").prop("disabled",!1)},error:function(e){$("[delete-inside-link-btn]").prop("disabled",!1)}})}function deleteOutsideLink(e){$("[delete-outside-link-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteOutsideLink",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){LINK_ROW.closest("tr").remove(),$('[parent="'+e.id+'"]').remove(),$("[delete-outside-link-btn]").prop("disabled",!1)},error:function(e){$("[delete-outside-link-btn]").prop("disabled",!1)}})}function saveLink(e){$("[js-add]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveLink",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateLinkInTable(e),$("[js-menu-add]").removeClass("is-open"),$("[js-menu-add-form]").trigger("reset"),checkBodyHidden(),$("[js-add]").prop("disabled",!1)},error:function(e){$("[js-add]").prop("disabled",!1)}})}function updateLinkInTable(e){var t=$("[links-table]");t.html('<tr class="custom-table__body-row">   <td class="custom-table__body-col">'+e.name+'</td>   <td class="custom-table__body-col">'+e.advertiser+'</td>   <td class="custom-table__body-col">'+e.link+"</td></tr>"+t.html())}$(document).on("click","[js-delete-place]",(function(e){DEFAULT_PLACE_COUNT>1&&($('div[data-place="'+DEFAULT_PLACE_COUNT+'"]').remove(),DEFAULT_PLACE_COUNT-=1)})),$(document).on("click","[js-add-place]",(function(e){var t=$('div[data-place="'+DEFAULT_PLACE_COUNT+'"]'),i=$("[js-action-form-bonus-type]").val();DEFAULT_PLACE_COUNT<3&&(DEFAULT_PLACE_COUNT+=1,t.after(' <div js-action-rank data-place="'+DEFAULT_PLACE_COUNT+'" class="menu-input__wrapper menu-input__wrapper_row menu-input__wrapper_margin">   <div class="menu-input menu-input_m  menu-input_full">       <div class="menu-input__title">'+DEFAULT_PLACE_COUNT+' место *</div>           <div class="menu-input__wrapper '+(1==i?"menu-input__wrapper_sum":"")+'">                <input js-place name="places" class="menu-input__input menu-input__input_small" placeholder="Введите награду" required/>           </div>       </div>   </div>'))})),$(document).on("click","[delete-inside-link-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите удалить ссылку?"),$("[dialog]").find(".dialog__text").html("Внутренняя ссылка будет удалена"),$("[dialog]").find("[accept-dialog]").attr("accept-delete-link",""),$("[dialog]").addClass("is-open"),DELETE_LINK_FORM=$(this).closest("[delete-inside-link-form]"),LINK_ROW=$(this)})),$(document).on("click","[accept-delete-link]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),DELETE_LINK_FORM.trigger("submit")})),$(document).on("click","[close-dialog]",(function(e){removeAcceptBtnAttribute($(this).siblings("[accept-dialog]")),$(this).closest(".dialog").removeClass("is-open")})),$(document).on("submit","[delete-inside-link-form]",(function(e){(e.preventDefault(),validateForm(this))&&deleteInsideLink($(this).serializeObject())})),$(document).on("click","[delete-outside-link-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите удалить ссылку?"),$("[dialog]").find(".dialog__text").html("Внешняя и внутренние ссылки будут удалены"),$("[dialog]").find("[accept-dialog]").attr("accept-delete-olink",""),$("[dialog]").addClass("is-open"),DELETE_LINK_FORM=$(this).closest("[delete-outside-link-form]"),LINK_ROW=$(this)})),$(document).on("click","[accept-delete-olink]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),DELETE_LINK_FORM.trigger("submit")})),$(document).on("submit","[delete-outside-link-form]",(function(e){(e.preventDefault(),validateForm(this))&&deleteOutsideLink($(this).serializeObject())})),$(document).on("click","[js-add-link]",(function(e){$("[js-menu-add]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-close-btn]",(function(e){$("[js-menu-add]").removeClass("is-open"),$("[js-menu-add-form]").trigger("reset"),checkBodyHidden()})),$(document).on("click","[js-add]",(function(e){e.preventDefault(),$("[js-menu-add-form]").trigger("submit")})),$(document).on("submit","[js-menu-add-form]",(function(e){e.preventDefault(),validateForm(this)&&saveLink($(this).serializeObject())})),$(document).on("keyup","[link-search]",(function(e){var t=$(this).val().toLowerCase();$(".link-row").each((function(){~$(this).find(".link-name").text().toLowerCase().indexOf(t)||~$(this).find(".link-name").val().toLowerCase().indexOf(t)?($(this).removeClass("none"),$('[parent="'+$(this).data("outside")+'"]').removeClass("none")):($(this).addClass("none"),$('[parent="'+$(this).data("outside")+'"]').addClass("none"))}))}));var OUTSIDE_INFO_TEMP={},OUTSIDE_ACCEPT_BTN;function saveOutsideLink(e){$("[js-add-outside]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveOutsideLink",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateOutsideLinkInTable(e),$("[js-menu-add-outside]").removeClass("is-open"),$("[js-menu-add-outside-form]").trigger("reset"),checkBodyHidden(),$("[js-add-outside]").prop("disabled",!1)},error:function(e){$("[js-add-outside]").prop("disabled",!1)}})}function updateOutsideLinkInTable(e){var t=$("[links-table]");t.html('<tr class="custom-table__body-row link-row" data-outside="'+e.id+'">                                <td class="custom-table__body-col">                                    <input o-name name="name" class="menu-input__input menu-input__input_small link-name editable" value="'+e.name+'" disabled required placeholder="Введите название">                                </td>                                <td class="custom-table__body-col">                                    <div class="column-wrapper">                                        <div class="column-full-text">'+e.link+'</div>                                        <div class="column-links">                                            <div js-copy-link class="column_mwidth column_mwidth-copy" data-link="'+e.link+'"></div>                                            <a target="_blank" class="column_mwidth column_mwidth-open" href="'+e.link+'"></a>                                        </div>                                    </div>                                </td>                                <td>                                    <div class="div-table__body-col div-table__body-col_center div-table__body-col_xxsmall div-table__body-col_lauto">                                        <div js-edit-btns class="column-links display-flex-none">                                            <div js-edit-outside-accept class="column_mwidth column_mwidth-accept"></div>                                            <div js-edit-outside-cancel class="column_mwidth column_mwidth-cancel"></div>                                        </div>                                        <div js-edit-menu class="column-links display-flex-none is-open">                                            <div js-edit-outside class="column_mwidth div-table__body-col_center column_mwidth-edit"></div>                                            <form delete-outside-link-form= class="column-form" action="#">                                                <input type="hidden" value="'+e.id+'" name="id" required="">                                                <button delete-outside-link-btn= type="button" class="column_mwidth column_mwidth-delete"></button>                                            </form>                                        </div>                                    </div>                                </td>                                <td class="custom-table__body-col">                                    <div class="accordion-btn">                                        <div data-toggle="collapse" aria-expanded="false" class="accordion-btn__wrapper collapsed" data-target="#out'+e.id+'" aria-controls="out'+e.id+'">                                        </div>                                    </div>                                </td>                            </tr>                            <tr id="out'+e.id+'" class="custom-table__body-row collapse" parent="'+e.id+'">                                <td colspan="4" class="custom-table__body-col custom-table__body-col_center">                                    <table class="custom-table custom-table_inset">                                        <tbody><tr class="custom-table__body-row">                                            <td colspan="5" class="custom-table__body-col custom-table__body-col_p18 custom-table__body-col_r30">                                                <div class="column-wrapper">                                                    <div js-add-inside-link class="add-button add-button_right add-button_medium">+ Добавить внутреннюю ссылку</div>                                                </div>                                            </td>                                        </tr>                                    </tbody></table>                                </td>                            </tr>'+t.html())}$(document).on("click","[js-edit-outside]",(function(e){e.preventDefault(),$(this).closest("[js-edit-menu]").removeClass("is-open").siblings("[js-edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[o-name]");i.removeAttr("disabled"),t.name=i.val(),OUTSIDE_INFO_TEMP[$(this).closest("[data-outside]").data("outside")]=t})),$(document).on("click","[js-edit-outside-cancel]",(function(e){e.preventDefault();var t=OUTSIDE_INFO_TEMP[$(this).closest("[data-outside]").data("outside")];$(this).closest(".custom-table__body-row").find("[o-name]").val(t.name).attr("disabled",!0),$(this).closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete OUTSIDE_INFO_TEMP[$(this).closest("[data-outside]").data("outside")]})),$(document).on("click","[js-edit-outside-accept]",(function(e){e.preventDefault(),OUTSIDE_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest("[data-outside]").data("outside"),t.name=$(this).closest(".custom-table__body-row").find("[o-name]").val(),$("[js-edit-outside-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateOutsideLink",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){OUTSIDE_ACCEPT_BTN.closest(".custom-table__body-row").find("[o-name]").attr("disabled",!0),OUTSIDE_ACCEPT_BTN.closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete OUTSIDE_INFO_TEMP[t.id],$("[js-edit-outside-accept]").prop("disabled",!1)},error:function(e){var i=OUTSIDE_INFO_TEMP[t.id];OUTSIDE_ACCEPT_BTN.closest(".custom-table__body-row").find("[o-name]").val(i.name).attr("disabled",!0),delete OUTSIDE_INFO_TEMP[t.id],$("[js-edit-outside-accept]").prop("disabled",!1)}})})),$(document).on("click","[js-add-outside-link]",(function(e){$("[js-menu-add-outside]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-outside-close-btn]",(function(e){$("[js-menu-add-outside]").removeClass("is-open"),$("[js-menu-add-outside-form]").trigger("reset"),checkBodyHidden()})),$(document).on("click","[js-add-outside]",(function(e){e.preventDefault(),$("[js-menu-add-outside-form]").trigger("submit")})),$(document).on("submit","[js-menu-add-outside-form]",(function(e){e.preventDefault(),validateForm(this)&&saveOutsideLink($(this).serializeObject())}));var INSIDE_INFO_TEMP={},INSIDE_ACCEPT_BTN,$filterFromBack,BILL_ROW,DELETE_BILL_FORM;function saveInsideLink(e){$("[js-add-inside]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveInsideLink",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateInsideLinkInTable(e),$("[js-menu-add-inside]").removeClass("is-open"),$("[js-menu-add-inside-form]").trigger("reset"),checkBodyHidden(),$("[js-add-inside]").prop("disabled",!1)},error:function(e){$("[js-add-inside]").prop("disabled",!1)}})}function updateInsideLinkInTable(e){$('[parent="'+e.idParent+'"]').find("tbody").prepend('<tr class="custom-table__body-row custom-table__body-row_gray" data-inside="'+e.id+'">                                                <td class="custom-table__body-col custom-table__body-col_15per">                                                    <input i-name name="name" class="menu-input__input menu-input__input_small editable" value="'+e.name+'" disabled required placeholder="Введите имя">                                                </td>                                                <td class="custom-table__body-col custom-table__body-col custom-table__body-col_15per">'+e.counter+' переходов</td>                                                <td class="custom-table__body-col custom-table__body-col_center custom-table__body-col_35per">                                                    <div class="column-wrapper">                                                        <div class="column-full-text">                                                            <input i-link name="link" class="menu-input__input menu-input__input_small editable" value="'+e.link+'" disabled required placeholder="Введите ссылку">                                                        </div>                                                        <div class="column-links">                                                            <div js-copy-link class="column_mwidth column_mwidth-copy" data-link="'+e.link+'"></div>                                                            <a target="_blank" class="column_mwidth column_mwidth-open" href="'+e.link+'"></a>                                                        </div>                                                    </div>                                                </td>                                                <td class="custom-table__body-col custom-table__body-col_center">                                                    <form action="#" js-link-active-form class="input-element__input input-element__input_status input-element__input_max input-element__input_right input-element__input_row">                                                        <div class="input-element__radio input-element__input_xxsmall">                                                            <input js-link-active type="radio" id="active'+e.id+'" class="radio radio_green" name="isActive" value="true" checked="checked">                                                            <label for="active'+e.id+'" class="label">Включена</label>                                                        </div>                                                        <div class="input-element__radio input-element__input_xxsmall">                                                            <input js-link-active type="radio" id="inactive'+e.id+'" class="radio radio_red" name="isActive" value="false">                                                            <label for="inactive'+e.id+'" class="label">Выключена</label>                                                        </div>                                                        <input type="hidden" name="id" value="'+e.id+'">                                                    </form>                                                </td>                                                <td class="custom-table__body-col custom-table__body-col_lsmall">                                                    <div class="div-table__body-col div-table__body-col_center div-table__body-col_xxsmall">                                                        <div js-edit-btns class="column-links display-flex-none">                                                            <div js-edit-inside-accept class="column_mwidth column_mwidth-accept"></div>                                                            <div js-edit-inside-cancel class="column_mwidth column_mwidth-cancel"></div>                                                        </div>                                                        <div js-edit-menu class="column-links display-flex-none is-open">                                                            <div js-edit-inside class="column_mwidth div-table__body-col_center column_mwidth-edit"></div>                                                            <form delete-inside-link-form class="column-form" action="#">                                                                <input type="hidden" value="'+e.id+'" name="id" required>                                                                <button delete-inside-link-btn type="button" class="column_mwidth column_mwidth-delete"></button>                                                            </form>                                                        </div>                                                    </div>                                                </td>                                            </tr>')}function updateStatusLink(e){$.ajax({type:"POST",contentType:"application/json",url:"updateStatusLink",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){},error:function(e){}})}function initDeleteArticle(){$("[js-delete-article]").on("click",(function(e){var t=$("[js-update-article-form-id]").val();$("[js-delete-article]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteArticle",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('.theme[data-article="'+t+'"]').remove(),$("[js-menu-update-article]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm(),$("[js-delete-article]").prop("disabled",!1)},error:function(e){$("[js-delete-article]").prop("disabled",!1)}})}))}function createArticle(e){$("[js-save-article]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"saveArticle",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateArticleInContainer(e),$("[js-menu-create-article]").removeClass("is-open"),checkBodyHidden(),resetCreateForm(),$("[js-save-article]").prop("disabled",!1)},error:function(e){$("[js-save-article]").prop("disabled",!1)}})}function initChangeKindRadiobutton(){$("[js-article-kind]").on("click",(function(){changeKind($(this).children().first().val())}))}function changeKind(e){const t=$("[js-kind-link]"),i=$("[js-kind-editor]");1==e?(t.removeClass("is-open"),i.removeClass("is-open")):2==e?(t.removeClass("is-open"),i.addClass("is-open")):3==e&&(t.addClass("is-open"),i.removeClass("is-open"))}function resetCreateForm(){$("[js-article-form]").trigger("reset"),$("[js-kind-link]").removeClass("is-open"),$("[js-kind-editor]").removeClass("is-open"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 900x100")}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.parent().last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function updateArticleInContainer(e){$(".article-container").html($(".article-container").html()+'<div class="theme" data-article="'+e.id+'">   <div class="theme-wrapper theme-wrapper_row">       <div class="theme__text-wrapper">'+(1==e.kind?'<img class="article__img" src="/'+e.previewImg+'">':2==e.kind?'<img js-open-article class="article__img article__img_modal" src="/'+e.previewImg+'">':3==e.kind?'<a target="_blank" href="'+e.link+'">                            <img class="article__img" src="/'+e.previewImg+'">                      </a>':"")+'       </div>       <div js-update-article class="theme-setting theme-setting_top theme-setting_big"></div>   </div></div>')}function resetUpdateForm(){$("[js-update-article-form]").trigger("reset"),$("[js-kind-link]").removeClass("is-open"),$("[js-kind-editor]").removeClass("is-open"),$("#js-update-article-form-type option:selected").removeAttr("selected"),$("input[name=kind]").prop("checked",!1),$("input[name=kind][value='1']").prop("checked",!0),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 900x100")}function setUpdateArticleFormData(e){$("[js-update-article]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getArticle",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-update-article-form-id]").val(e.id),$("[js-update-article-form-name]").val(e.name),$("[js-update-article-form-link]").val(e.link),$("[js-update-article-form-type]").val(e.type),$("[js-update-article-form-img]").val(e.previewImg),$("#editor-update .ql-editor").html(e.text),$("#editor-hidden-update").val(e.text),$("input[name=kind][value='"+e.kind+"']").prop("checked",!0),changeKind(e.kind),$("[js-update-article]").prop("disabled",!1)},error:function(e){$("[js-update-article]").prop("disabled",!1)}})}function initEditor(){const e=$("#editor-hidden");var t=new Quill("#editor",{theme:"snow",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic"],[{list:"bullet"}],[{align:["","center","right"]}],["video"],["image"],["clean"]]}});t.on("text-change",(function(i,n,a){e.val(t.root.innerHTML)}))}function initUpdateEditor(){const e=$("#editor-hidden-update");var t=new Quill("#editor-update",{theme:"snow",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic"],[{list:"bullet"}],[{align:["","center","right"]}],["video"],["image"],["clean"]]}});t.on("text-change",(function(i,n,a){e.val(t.root.innerHTML)}))}function updateTextArticle(e){$("[js-save-update-article]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"updateArticle",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateArticleAfterUpdate(e),$("[js-menu-update-article]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm(),$("[js-save-update-article]").prop("disabled",!1)},error:function(e){$("[js-save-update-article]").prop("disabled",!1)}})}function updateArticleAfterUpdate(e){e.type===$("[js-type]").attr("type")?$('.theme[data-article="'+e.id+'"]').find(".theme__text-wrapper").html(1==e.kind?'<img class="article__img" src="/'+e.previewImg+'">':2==e.kind?'<img js-open-article class="article__img article__img_modal" src="/'+e.previewImg+'">':3==e.kind?'<a target="_blank" href="'+e.link+'">                            <img class="article__img" src="/'+e.previewImg+'">                          </a>':""):$('.theme[data-article="'+e.id+'"]').remove()}function setFilter(e){$filterFromBack=e}function resetFilter(e){$("#idManager option:selected").removeAttr("selected"),$("#idManager").val(e.idManager),$("#product option:selected").removeAttr("selected"),$("#product").val(e.product),$("#projectId option:selected").removeAttr("selected"),$("#projectId").val(e.projectId),setKindToFilter($("[filter-courses]")),selectKind($filterFromBack.kind),$("#status option:selected").removeAttr("selected"),$("#status").val(e.status),$("#paymentMethod option:selected").removeAttr("selected"),$("#paymentMethod").val(e.paymentMethod),$("#paidFrom").val(e.paidFrom),$("#paidTo").val(e.paidTo),$("#startDateFrom").val(e.startDateFrom),$("#startDateTo").val(e.startDateTo),$("#client").val(e.client),$("#accountNumber").val(e.accountNumber),$("#dealDateFrom").val(e.dealDateFrom),$("#dealDateTo").val(e.dealDateTo),$("#payDateFrom").val(e.payDateFrom),$("#payDateTo").val(e.payDateTo),$('input:checkbox[name="empties"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$.each(e.statuses,(function(e,t){$('input:checkbox[name="empties"]').filter('[value="'+t+'"]').attr("checked",!0).prop("checked",!0)}))}function deleteBill(e){$("[js-delete-bill]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/deleteBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){BILL_ROW.closest(".div-table__body-row").remove(),BILL_ROW.closest(".custom-table__body-row").remove(),updateDealCard($CLIENT),$("[js-delete-bill]").prop("disabled",!1)},error:function(e){$("[js-delete-bill]").prop("disabled",!1)}})}$(document).on("click","[js-edit-inside]",(function(e){e.preventDefault(),$(this).closest("[js-edit-menu]").removeClass("is-open").siblings("[js-edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[i-name]");i.removeAttr("disabled"),t.name=i.val();var n=$(this).closest(".custom-table__body-row").find("[i-link]");n.removeAttr("disabled"),t.link=n.val(),INSIDE_INFO_TEMP[$(this).closest("[data-inside]").data("inside")]=t})),$(document).on("click","[js-edit-inside-cancel]",(function(e){e.preventDefault();var t=INSIDE_INFO_TEMP[$(this).closest("[data-inside]").data("inside")];$(this).closest(".custom-table__body-row").find("[i-name]").val(t.name).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[i-link]").val(t.link).attr("disabled",!0),$(this).closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete INSIDE_INFO_TEMP[$(this).closest("[data-inside]").data("inside")]})),$(document).on("click","[js-edit-inside-accept]",(function(e){e.preventDefault(),INSIDE_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest("[data-inside]").data("inside"),t.name=$(this).closest(".custom-table__body-row").find("[i-name]").val(),t.link=$(this).closest(".custom-table__body-row").find("[i-link]").val(),$("[js-edit-inside-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateInsideLink",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){INSIDE_ACCEPT_BTN.closest(".custom-table__body-row").find("[i-name]").attr("disabled",!0),INSIDE_ACCEPT_BTN.closest(".custom-table__body-row").find("[i-link]").attr("disabled",!0),INSIDE_ACCEPT_BTN.closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete INSIDE_INFO_TEMP[t.id],$("[js-edit-inside-accept]").prop("disabled",!1)},error:function(e){var i=INSIDE_INFO_TEMP[t.id];INSIDE_ACCEPT_BTN.closest(".custom-table__body-row").find("[i-name]").val(i.name).attr("disabled",!0),INSIDE_ACCEPT_BTN.closest(".custom-table__body-row").find("[i-link]").val(i.link).attr("disabled",!0),delete INSIDE_INFO_TEMP[t.id],$("[js-edit-inside-accept]").prop("disabled",!1)}})})),$(document).on("click","[js-add-inside-link]",(function(e){$("[inside-parent]").val($(this).closest("[parent]").attr("parent")),$("[js-menu-add-inside]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-inside-close-btn]",(function(e){$("[js-menu-add-inside]").removeClass("is-open"),$("[js-menu-add-inside-form]").trigger("reset"),checkBodyHidden()})),$(document).on("click","[js-add-inside]",(function(e){e.preventDefault(),$("[js-menu-add-inside-form]").trigger("submit")})),$(document).on("submit","[js-menu-add-inside-form]",(function(e){e.preventDefault(),validateForm(this)&&saveInsideLink($(this).serializeObject())})),$(document).on("change","[js-link-active]",(function(e){e.preventDefault(),$(this).closest("[js-link-active-form]").trigger("submit")})),$(document).on("submit","[js-link-active-form]",(function(e){e.preventDefault(),validateForm(this)&&updateStatusLink($(this).serializeObject())})),$(document).on("click","[js-update-article]",(function(e){setUpdateArticleFormData($(this).closest(".theme").attr("data-article")),$("[js-menu-update-article]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-update-article-close-btn]",(function(e){$("[js-menu-update-article]").removeClass("is-open"),resetUpdateForm(),checkBodyHidden()})),$(document).on("click","[js-update-save-article]",(function(e){e.preventDefault(),$("[js-update-article-form]").trigger("submit")})),$(document).on("submit","[js-update-article-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("#update-article-form")[0];updateTextArticle(new FormData(t))}})),$(document).ready((function(){const e=$("[js-create-article]"),t=$("[js-menu-create-article-close-btn]"),i=$("[js-menu-create-article]"),n=$("[js-save-article]"),a=$("[js-article-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),resetCreateForm(),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=a[0],i=new FormData(t);createArticle(i)}})),initChangeKindRadiobutton(),initDeleteArticle(),initEditor(),initUpdateEditor()})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter($filterFromBack)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")})),$(".datepicker-here-f").datepicker({autoClose:!0}),setKindToFilter($("[filter-courses]")),selectKind($filterFromBack.kind)})),$(document).ready((function(){$("[js-update-open-reminder]").on("click",(function(){$("[js-update-form-deal-reminder-btn]").removeClass("is-open"),$("[js-update-form-deal-reminder-block]").addClass("is-open"),$("[js-update-form-deal-reminder-date]").val(""),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!0)})),$("[js-update-close-reminder]").on("click",(function(){$("[js-update-form-deal-reminder-btn]").addClass("is-open"),$("[js-update-form-deal-reminder-block]").removeClass("is-open"),$("[js-update-form-deal-reminder-date]").val("—"),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!1)})),$("[js-open-reminder]").on("click",(function(){$("[js-deal-form-reminder-btn]").removeClass("is-open"),$("[js-deal-form-reminder-block]").addClass("is-open"),$("[js-deal-form-reminder-date]").val(""),$("[js-deal-form-reminder-msg]").val(""),$("[js-deal-form-reminder]").prop("checked",!0)})),$("[js-close-reminder]").on("click",(function(){$("[js-deal-form-reminder-btn]").addClass("is-open"),$("[js-deal-form-reminder-block]").removeClass("is-open"),$("[js-deal-form-reminder-date]").val("—"),$("[js-deal-form-reminder-msg]").val(""),$("[js-deal-form-reminder]").prop("checked",!1)})),$("[filter-courses]").on("change",(function(){setKindToFilter($(this)),selectKind("all")}))})),$(document).on("click","[js-delete-bill]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите удалить счет?"),$("[dialog]").find(".dialog__text").html("Вся информация о выставленном счете будет удалена"),$("[dialog]").find("[accept-dialog]").attr("accept-delete-bill",""),$("[dialog]").addClass("is-open"),DELETE_BILL_FORM=$(this).closest("[js-delete-bill-form]"),BILL_ROW=$(this)})),$(document).on("click","[accept-delete-bill]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),DELETE_BILL_FORM.trigger("submit")})),$(document).on("submit","[js-delete-bill-form]",(function(e){(e.preventDefault(),validateForm(this))&&deleteBill($(this).serializeObject())}));var BILLS_TEMP_INFO={},ACCEPT_BTN,$courseKindsList,PAYFORM,$CLIENT,$statusesList,$paymentMethodList;function initEditBillForm(){$("[js-edit-bill]").on("click",(function(e){e.preventDefault(),$(this).closest("[js-edit-menu]").removeClass("is-open").siblings("[js-edit-btns]").addClass("is-open");var t={},i=$(this).closest(".div-table__body-row").find("[b-pay-date]");i.removeAttr("disabled"),t.payDate=i.val();var n=$(this).closest(".div-table__body-row").find("[b-sum]");n.removeAttr("disabled"),t.sum=n.val(),$(this).closest(".div-table__body-row").find("[b-pm-wrapper]").removeClass("disabled"),$(this).closest(".div-table__body-row").find("[b-pm-selector]").removeAttr("disabled");var a=$(this).closest(".div-table__body-row").find("[b-pm]");t.paymentMethod=a.val();var s=$(this).closest(".div-table__body-row").find("[b-pm-code]");t.paymentMethodCode=s.val();var o=$(this).closest(".div-table__body-row").find("[b-account-number]");o.removeAttr("disabled"),t.accountNumber=o.val(),BILLS_TEMP_INFO[$(this).closest(".div-table__body-row").find("[b-id-bill]").val()]=t}))}function initCancelEditBill(){$("[js-edit-bill-cancel]").on("click",(function(e){e.preventDefault();var t=BILLS_TEMP_INFO[$(this).closest(".div-table__body-row").find("[b-id-bill]").val()];$(this).closest(".div-table__body-row").find("[b-pay-date]").val(t.payDate).attr("disabled",!0),$(this).closest(".div-table__body-row").find("[b-sum]").val(t.sum).attr("disabled",!0),$(this).closest(".div-table__body-row").find("[b-account-number]").val(t.accountNumber).attr("disabled",!0),$(this).closest(".div-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),$(this).closest(".div-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+t.paymentMethodCode).attr("disabled",!0),$(this).closest(".div-table__body-row").find("[b-pm]").val(t.paymentMethod),$(this).closest(".div-table__body-row").find("[b-pm-code]").val(t.paymentMethodCode),$(this).closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete BILLS_TEMP_INFO[$(this).closest(".div-table__body-row").find("[b-id-bill]").val()]}))}function initAcceptEditBill(){$("[js-edit-bill-accept]").on("click",(function(e){e.preventDefault(),ACCEPT_BTN=$(this);var t=$(this).closest(".div-table__body-row").find("[b-update-bill-form]").serializeObject();$("[js-edit-bill-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/updateBill",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){ACCEPT_BTN.closest(".div-table__body-row").find("[b-pay-date]").val(e.payDate).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-sum]").val(e.sum).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-account-number]").val(e.accountNumber).attr("disabled",!0),null===e.payDate||""===e.payDate?ACCEPT_BTN.closest(".div-table__body-row").find(".col-status").removeClass("div-table__body-col_green").html("Выставлен"):ACCEPT_BTN.closest(".div-table__body-row").find(".col-status").addClass("div-table__body-col_green").html("Оплачен"),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+e.paymentMethodCode).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm]").val(e.paymentMethod),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm-code]").val(e.paymentMethodCode),ACCEPT_BTN.closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete BILLS_TEMP_INFO[e.id],updateDealCard($CLIENT),updateBillOnFrontCard(e),$("[js-edit-bill-accept]").prop("disabled",!1)},error:function(e){var i=BILLS_TEMP_INFO[t.id];ACCEPT_BTN.closest(".div-table__body-row").find("[b-pay-date]").val(i.payDate).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-sum]").val(i.sum).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-account-number]").val(i.accountNumber).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+i.paymentMethodCode).attr("disabled",!0),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm]").val(i.paymentMethod),ACCEPT_BTN.closest(".div-table__body-row").find("[b-pm-code]").val(i.paymentMethodCode),ACCEPT_BTN.closest("[js-edit-btns]").removeClass("is-open").siblings("[js-edit-menu]").addClass("is-open"),delete BILLS_TEMP_INFO[e.id],$("[js-edit-bill-accept]").prop("disabled",!1)}})}))}function setCourseKindsList(e){$courseKindsList=e}function createKindList(e){return $courseKindsList.filter(t=>t.courseName===e)}function createKindOptions(e){var t='<option value="" disabled selected>Выберите тип</option>';return e.forEach((function(e){t+='<option value="'+e.name+'">'+e.name+"</option>"})),t}function createKindOptionsWithAll(e){var t='<option value="all">Все типы</option>';return e.forEach((function(e){t+='<option value="'+e.name+'">'+e.name+"</option>"})),t}function createKindOptionsAll(){return'<option value="all">Все типы</option>'}function setKindToFilter(e){$list=createKindList($("option:selected",e).val()),$list.length>0?$("[filter-course-kinds]").html(createKindOptionsWithAll($list)):$("[filter-course-kinds]").html(createKindOptionsAll())}function selectKind(e){$("#kind option:selected").removeAttr("selected"),$("#kind").val(e)}function updateBillOnFrontCard(e){var t=$('[data-bill="'+e.id+'"]');0!==t.length&&(t.find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+e.paymentMethodCode),t.find("[b-pm]").val(e.paymentMethod),t.find("[b-pm-code]").val(e.paymentMethodCode),t.find("[b-account-number]").val(e.accountNumber),t.find("[b-sum]").val(e.sum+" ₽"),t.find("[b-pay-date]").val(e.payDate),null===e.payDate||""===e.payDate?t.find("[data-bill-status]").html('<div class="column-bill__status">Выставлен</div>'):t.find("[data-bill-status]").html('<div class="column-bill__status column-bill__status_paid">Оплачен</div>'))}function initPayForm(){$("[js-pay-date]").on("click",(function(){PAYFORM=$(this).closest("[js-pay-form]")})),$("[js-pay-form]").submit((function(e){e.preventDefault(),updateBillPayInfo($(this).serializeObject())}))}function updateBillPayInfo(e){$("[js-pay-date]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateBillPayDate",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){var i=PAYFORM.closest(".custom-table__body-row");i.find(".column-bill__status").addClass("column-bill__status_paid").html("Оплачен");var n='<td class="custom-table__body-col col-pay-date custom-table__body-col_center"><form js-pay-clear-form action="#" class="menu-input__wrapper menu-input__wrapper_small menu-input__wrapper_close"><input type="hidden" value="'+e.id+'" name="id" required><div js-pay-clear-date name="payDate" class="menu-input__input menu-input__input_small">'+e.payDate+"</div></form></td>";i.find(".col-pay-date").html(n),initClearPayForm(),$("[js-pay-date]").prop("disabled",!1)},error:function(e){$("[js-pay-date]").prop("disabled",!1)}})}function initClearPayForm(){$("[js-pay-clear-date]").on("click",(function(){(PAYFORM=$(this).closest("[js-pay-clear-form]")).trigger("submit")})),$("[js-pay-clear-form]").submit((function(e){e.preventDefault(),clearBillPayInfo($(this).serializeObject())}))}function clearBillPayInfo(e){$("[js-pay-clear-date]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"clearBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){var i=PAYFORM.closest(".custom-table__body-row");i.find(".column-bill__status").removeClass("column-bill__status_paid").html("Выставлен");var n='<td class="custom-table__body-col col-pay-date custom-table__body-col_center"><form js-pay-form action="#" class="menu-input__wrapper menu-input__wrapper_small menu-input__wrapper_cal"><input type="hidden" value="'+e.id+'" name="id" required><input js-pay-date name="payDate" autocomplete="off" class="datepicker-here-b menu-input__input menu-input__input_small" data-autoclose="true" placeholder="Дата оплаты" required/></form></td>';i.find(".col-pay-date").html(n),initPayForm(),initDatePicker(),$("[js-pay-clear-date]").prop("disabled",!1)},error:function(e){$("[js-pay-clear-date]").prop("disabled",!1)}})}function initDatePicker(){$(".datepicker-here-b").datepicker({autoClose:!0,todayButton:!0,onSelect:function(e,t,i){PAYFORM.trigger("submit")}})}function initDatePickerCs(){$(".datepicker-here-cs").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}function openUpdateDealMenuF(){var e=$("[js-update-deal-f]");$("[js-update-deal-b]").on("click",(function(e){e.preventDefault(),$(this).closest("[js-update-deal-f]").trigger("submit")})),e.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();setDealInfo(t)}}))}function setDealInfo(e){$("[js-update-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setUpdateDealInfo(e),$("[js-update-deal-btn]").prop("disabled",!1)},error:function(e){$("[js-update-deal-btn]").prop("disabled",!1)}})}function setUpdateDealInfo(e){$("#js-update-form-deal-status option:selected").removeAttr("selected"),$("#js-update-form-deal-social option:selected").removeAttr("selected"),$("#js-update-form-deal-pr option:selected").removeAttr("selected"),$("#js-update-form-deal-sale-type option:selected").removeAttr("selected"),$("#js-update-form-deal-status").val(e.status),$("#js-update-form-deal-social").val(e.social),$("[js-update-form-deal-deal-date]").val(e.dealDate),$("#js-update-form-deal-pr").val(e.course),$("#js-update-form-deal-sale-type").val(e.type),$("[js-update-form-deal-start-date]").val(e.startDate),$("[js-update-form-kind-block]").removeClass("is-open"),$("[js-update-form-kind]").html("");var t=createKindList(e.course);t.length>0&&($("[js-update-form-kind]").html(createKindOptions(t)),$("[js-update-form-kind]").val(e.kind),$("[js-update-form-kind-block]").addClass("is-open")),$("[js-update-form-deal-mailing]").prop("checked",!1),"traffic"===e.type?($("[js-update-form-deal-mailing-block]").addClass("is-open"),e.isMailing?$("[js-update-form-deal-mailing]").prop("checked",!0):$("[js-update-form-deal-mailing]").prop("checked",!1)):($("[js-update-form-deal-mailing-block]").removeClass("is-open"),$("[js-update-form-deal-mailing]").prop("checked",!1)),$("[js-update-form-deal-trial]").prop("checked",e.trial),$("[js-update-form-deal-price]").val(e.price),$("[js-update-form-deal-tag]").val(e.tag),$("[js-update-form-deal-comment]").val(e.comment),$("[js-deal-open-lessons]").prop("checked",e.allModulesHomeworkAllowed),$("[js-update-form-deal-reminder]").prop("checked",!1),e.reminder?($("[js-update-form-deal-reminder-block]").addClass("is-open"),$("[js-update-form-deal-reminder-btn]").removeClass("is-open"),$("[js-update-form-deal-reminder]").prop("checked",!0),$("[js-update-form-deal-reminder-date]").val(e.reminderDate),$("[js-update-form-deal-reminder-msg]").val(e.reminderMessage)):($("[js-update-form-deal-reminder-block]").removeClass("is-open"),$("[js-update-form-deal-reminder-btn]").addClass("is-open"),$("[js-update-form-deal-reminder]").prop("checked",!1),$("[js-update-form-deal-reminder-date]").val(""),$("[js-update-form-deal-reminder-msg]").val("")),$("[js-update-form-deal-product-type]").val(e.product),$("[js-update-form-deal-client]").val(e.idClient),$("[js-update-form-deal-manager]").val(e.idManager),$("[js-update-form-deal-id]").val(e.id),$("[js-menu-update-deal]").addClass("is-open"),checkBodyHidden()}function updateDeal(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard(e.idClient),$("[js-menu-update-deal]").removeClass("is-open"),checkBodyHidden(),updateBillAfterUpdateOnList(e),$("[js-update-deal]").prop("disabled",!1)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateBillAfterUpdateOnList(e){var t=$('[data-deal="'+e.id+'"]'),i=e.course+(null!==e.kind&&""!==e.kind?" ("+e.kind+")":"");t.siblings("[data-bill-course]").attr("title",i).html(i)}function openClientCard(){$("[js-client-card]").on("click",(function(){var e=$(this).find("[js-client-id]").val();$.ajax({type:"POST",contentType:"application/json",url:"getClientInfo",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setClientCardInfo(e)}})}))}function setClientCardInfo(e){$("[js-client-card-name]").val(e.name),$("[js-client-card-date]").text(e.createDate),$("[js-client-card-manager]").text(e.manager),$("[js-client-card-link]").val(e.link),$("[js-client-card-phone]").val(e.phone),$("[js-client-card-email]").val(e.email),$("[js-client-card-comment]").val(e.comment),$("[js-client-card-id]").val(e.id),$("[js-client-name-copy]").text(e.name),$("[js-client-name-copy]").attr("data-link",e.name),setIdClient(e.id),updateDealCard($CLIENT),$("[js-menu-client-card]").addClass("is-open"),checkBodyHidden()}function closeEdit(){$("[js-client-card-name]").attr("disabled",!0),$("[js-client-card-comment]").attr("disabled",!0),$("[js-client-card-link]").attr("disabled",!0),$("[js-client-card-phone]").attr("disabled",!0),$("[js-client-card-email]").attr("disabled",!0),$("[js-edit-footer]").removeClass("is-open")}function editClientInfo(){$("[js-edit-btn]").on("click",(function(){$("[js-client-card-name]").removeAttr("disabled"),$("[js-client-card-comment]").removeAttr("disabled"),$("[js-client-card-link]").removeAttr("disabled"),$("[js-client-card-phone]").removeAttr("disabled"),$("[js-client-card-email]").removeAttr("disabled"),$("[js-edit-footer]").addClass("is-open")}))}function updateClient(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateClient",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){closeEdit(),updateClientNameOnFront(e),$("[js-update-deal]").prop("disabled",!1),$("[js-client-name-copy]").text(e.name),$("[js-client-name-copy]").attr("data-link",e.name)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateClientNameOnFront(e){$('[data-client="'+e.id+'"]').siblings("span").html(e.name)}function updateDealCard(e){$.ajax({type:"POST",contentType:"application/json",url:"getDeals",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){var t=$("[js-deals-list]");t.html(""),$.each(e,(function(e,i){var n="";$.each($statusesList,(function(e,t){n+='<option js-deal-form-status value="'+t.id+'" data-code="'+t.code+'" '+(t.id===i.status?'selected="selected" ':"")+'">'+t.title+"</option>"}));var a="";i.reminder?a+='<div class="menu-comment__input menu-comment__input menu-comment__input_deal menu-comment__input_deal-violet"><div class="deal__comment" title="'+i.reminderMessage+'">'+i.reminderMessage+"</div></div>":a+='<div class="menu-comment__input menu-comment__input menu-comment__input_deal menu-comment__input_deal-empty"><div class="deal__comment">Нет напоминаний</div></div>';var s=$("<div/>").attr("class","deal deal_white").append($("<div/>").attr("class","deal-wrapper").append($("<div/>").attr("class","deal__wrapper deal__wrapper_bordered deal__wrapper_column").append($("<div/>").attr("class","deal__title").html(i.course)).append($("<div/>").attr("class","deal__subtitle").append($("<div/>").attr("class",null!==i.kind?"deal__kind deal__kind_del":"deal__kind").html(i.kind)).append($("<div/>").attr("class","deal__date").html(i.createDate)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_bordered ").append($("<div/>").attr("class","deal__social").append($("<div/>").attr("class","deal-social deal-social_"+i.socialCode))).append($("<div/>").attr("class","deal__manager").html(i.managerName)).append($("<div/>").attr("class","deal__sale-type").html(i.type))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_between deal__wrapper_bordered ").append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Стоимость")).append($("<div/>").attr("class","deal__sum-value").html(i.price))).append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Получено")).append($("<div/>").attr("class","deal__sum-value deal__sum-value_blue").html(i.paid))).append($("<div/>").attr("class","deal_bill").append($("<form/>").attr("js-add-bill-form","").attr("action","#").append($("<input/>").attr("type","hidden").attr("name","id").val(i.id)).append($("<button/>").attr("js-add-bill-button","").attr("class","add-btn"))))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<form/>").attr("js-deal-status-form","").attr("class","deal__select deal__select_"+i.statusCode).append($("<input/>").attr("name","id").attr("type","hidden").val(i.id)).append($("<select/>").attr("class","deal-select menu-input__input_select").attr("name","status").attr("js-deal-form-status","").html(n)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__reminder").append($("<div/>").attr("class","deal__reminder-title").html("Напоминание")).append($("<div/>").attr("class","deal__reminder-date").html(i.reminderDate))).append(a)).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","menu-comment__input menu-comment__input menu-comment__input_deal menu-comment__input_deal-small").append($("<div/>").attr("class","deal__comment").attr("title",i.comment).html(i.comment)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column").append($("<form/>").attr("class","button_full").attr("action","#").attr("js-update-deal-form","").append($("<input/>").attr("name","id").attr("type","hidden").val(i.id)).append($("<button/>").attr("type","button").attr("class","button button_white button_full").attr("js-update-deal-btn","").html("Редактировать сделку")))));t.append(s)})),changeStatus(),$("[js-add-bill-form]").on("submit",(function(e){e.preventDefault(),openBills($(this).serializeObject())}));var i=$("<div/>").attr("js-create-deal","").attr("class","deal deal_create").append($("<div/>").attr("class","deal__btm-message").html("Добавить сделку"));t.append(i),$("[js-create-deal]").on("click",(function(){$("[js-menu-create-deal]").addClass("is-open"),checkBodyHidden()})),openUpdateDealMenu()}})}function setIdClient(e){$("[js-deal-form-client]").val(e),$CLIENT=e}function changeStatus(){$("[js-deal-form-status]").on("change",(function(){var e=$(this).parent($("[js-deal-status-form]"));e.removeClassWild("deal__select_*");var t=$("option:selected",this).attr("data-code");e.addClass("deal__select_"+t);var i=e.serializeObject();i.code=t,$.ajax({type:"POST",contentType:"application/json",url:"updateDealStatus",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){},error:function(e){}})}))}function openUpdateDealMenu(){var e=$("[js-update-deal-form]");$("[js-update-deal-btn]").on("click",(function(e){e.preventDefault(),$(this).closest("[js-update-deal-form]").trigger("submit")})),e.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();setDealInfo(t)}}))}function openBills(e){$("[js-add-bill-form]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getBills",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-bills-deal-id]").val(e.id),createBills(t),$("[js-menu-bills]").addClass("is-open"),checkBodyHidden(),$("[js-add-bill-form]").prop("disabled",!1)},error:function(e){$("[js-add-bill-form]").prop("disabled",!1)}})}function createBills(e){$("[js-bills-body]").html(""),e.length>0?$("[js-bills]").addClass("is-open"):$("[js-bills]").removeClass("is-open"),checkBodyHidden(),$.each(e,(function(e,t){var i="";i+='<div class="div-table__body-row">';var n="";$.each($paymentMethodList,(function(e,t){n+='<option value="'+t.title+'" data-code="'+t.code+'">'+t.title+"</option>"})),2===t.status?i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_checked"></div></div>':i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_unchecked"></div></div>',i+='<div class="div-table__body-col div-table__body-col_medium"><div class="column-text">'+t.manager+"</div></div>",i+='<form b-update-bill-form action="#" class="edit-form-bill"><input type="hidden" b-id-bill value="'+t.id+'" name="id" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input type="hidden" b-pm value="'+t.paymentMethod+'" name="paymentMethod"><input type="hidden" b-pm-code value="'+t.paymentMethodCode+'" name="paymentMethodCode"><div class="div-table__body-col div-table__body-col_small">'+t.billDate+"</div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xsmall"><input b-sum disabled name="sum" class="menu-input__input menu-input__input_small editable" value="'+t.sum+'" placeholder="0 ₽"></div>',i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div b-pm-wrapper class="pmethod-wrapper disabled"><select b-pm-selector disabled class="column_pmethod-select column_pmethod_'+t.paymentMethodCode+'">'+n+"</select></div></div>",i+='<div class="div-table__body-col div-table__body-col_medium  div-table__body-col_center div-table__body-col_r10"><input b-account-number disabled name="accountNumber" class="menu-input__input menu-input__input_small editable" value="'+(null===t.accountNumber?"":t.accountNumber)+'" placeholder="—"></div>',i+='<div class="div-table__body-col col-pay-date div-table__body-col_center div-table__body-col_medium "><div class="menu-input__wrapper menu-input__wrapper_xsmall"><input b-pay-date disabled name="payDate" class="datepicker-here-cs menu-input__input menu-input__input_small editable" autocomplete="off" value="'+(null===t.payDate?"":t.payDate)+'" data-autoclose="true" placeholder="—"/></div></div>',null===t.payDate?i+='<div class="div-table__body-col div-table__body-col_small col-status">Выставлен</div>':i+='<div class="div-table__body-col div-table__body-col_small col-status div-table__body-col_green">Оплачен</div>',i+='<div class="div-table__body-col div-table__body-col_small">'+("Новый клиент"===t.paymentType?"Первый":"Доплата")+"</div>",null!==t.link&&""!==t.link?i+='<div class="div-table__body-col div-table__body-col_xxsmall div-table__body-col_center"><div class="column-links"><div js-copy-link data-link="'+t.link+'" class="column_mwidth column_mwidth-copy"></div><a js-open-link href="'+t.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div></div>':i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div>—</div></div>',i+="</form>",i+='<div data-bill-id="'+t.id+'" class="div-table__body-col div-table__body-col_medium div-table__body-col_center"><div class="column-links">'+(null===t.comment?'<div js-add-sms-check js-check-btn class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-add-check"></div>':'<div js-delete-sms-check js-check-btn title="'+t.comment+'" class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-delete-check"></div>')+(null!==t.billImage&&""!==t.billImage?'<a class="column-img column_mwidth column-img_large div-table__body-col_center" data-fancybox="gallery" href="../'+t.billImage+'"><img src="/'+t.billImage+'"></a>':'<form js-upload-bill-form action="#" class="column_mwidth column_mwidth-large div-table__body-col_center div-table__body-col_fl" enctype="multipart/form-data"><input type="hidden" value="'+t.id+'" name="id" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input js-upload-bill accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="file'+e+'"/><label for="file'+e+'" class="js-labelFile"><span class="js-upload-file js-upload-file_small"></span></label></form>')+"</div></div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xxsmall">',1===t.status&&t.isEditable&&(i+='<div js-edit-btns class="column-links display-flex-none"><div js-edit-bill-accept class="column_mwidth column_mwidth-accept"></div><div js-edit-bill-cancel class="column_mwidth column_mwidth-cancel"></div></div><div js-edit-menu class="column-links display-flex-none is-open"><div js-edit-bill class="column_mwidth div-table__body-col_center column_mwidth-edit"></div><form js-delete-bill-form class="column-form" action="#"><input type="hidden" value="'+t.id+'" name="id" required><button js-delete-bill type="button" class="column_mwidth column_mwidth-delete"></button></form></div>'),i+="</div></div>",$("[js-bills-body]").html($("[js-bills-body]").html()+i)})),initDatePickerCs(),uploadImage(),initFancy(),initEditBillForm(),initCancelEditBill(),initAcceptEditBill()}function uploadImage(){$("[js-upload-bill]").on("change",(function(){var e=$(this).closest("[js-upload-bill-form]"),t=new FormData(e[0]);$("[js-upload-bill]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"uploadBill",data:t,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(t){var i=e.serializeObject();i.id=i.idDeal,openBills(i),$("[js-upload-bill]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill]").prop("disabled",!1)}})}))}function initFancy(){$("[data-fancybox]").fancybox({infobar:!1,buttons:["close"]})}function saveBillWithUpdate(e){$("[js-save-bills]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard($CLIENT),e.id=e.idDeal,openBills(e),$("[js-bills-form]").trigger("reset"),$("[js-bills-form]").find("[js-bill-account-number-wrapper]").removeClass("is-open"),$("[js-save-bills]").prop("disabled",!1),BILLS_TEMP_INFO={}},error:function(e){$("[js-save-bills]").prop("disabled",!1)}})}function setStatusesList(e){$statusesList=e}function setPaymentMethodList(e){$paymentMethodList=e}function createDeal(e){$("[js-save-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard(e.idClient),$("[js-bill-deal-id]").val(t),$("[js-menu-create-deal]").removeClass("is-open"),$("[js-deal-form-kind-block]").removeClass("is-open"),$("[js-deal-form-kind]").html(""),$("[js-deal-form-mailing-block]").removeClass("is-open"),$("[js-deal-form-mailing]").prop("checked",!1),$("[js-deal-form-trial]").prop("checked",!1),$("[js-deal-form-reminder-block]").removeClass("is-open"),$("[js-deal-form-reminder-btn]").addClass("is-open"),$("[js-deal-form-reminder]").prop("checked",!1),checkBodyHidden(),$("[js-deal-form]").trigger("reset"),$("[js-save-deal]").prop("disabled",!1)},error:function(e){$("[js-save-deal]").prop("disabled",!1)}})}function initDeleteBillFromList(){$("[delete-bill]").on("click",(function(e){e.preventDefault(),BILL_ROW=$(this),$(this).closest("[delete-bill-form]").trigger("submit")})),$("[delete-bill-form]").submit((function(e){(e.preventDefault(),validateForm(this))&&deleteBillFromList($(this).serializeObject())}))}function deleteBillFromList(e){$("[delete-bill]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){BILL_ROW.closest(".custom-table__body-row").remove(),$("[delete-bill]").prop("disabled",!1)},error:function(e){$("[delete-bill]").prop("disabled",!1)}})}$(document).on("change","[b-pm-selector]",(function(e){$(this).removeClassWild("column_pmethod_*");var t=$("option:selected",this).attr("value"),i=$("option:selected",this).attr("data-code");$(this).addClass("column_pmethod_"+i),$(this).closest(".div-table__body-row").find("[b-pm]").val(t),$(this).closest(".div-table__body-row").find("[b-pm-code]").val(i),$(this).closest(".custom-table__body-row").find("[b-pm]").val(t),$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(i)})),$(document).on("click",".datepicker-here-b",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-deal",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-cs",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).ready((function(){const e=$("[js-menu-update-deal]");$("[js-menu-update-deal-close-btn]").on("click",(function(){e.removeClass("is-open"),checkBodyHidden()}));const t=$("[js-update-deal]"),i=$("[js-update-form-deal]");t.on("click",(function(){event.preventDefault(),i.trigger("submit")})),i.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateDeal(t)}}));const n=$("[js-menu-client-card]");$("[js-menu-client-card-close-btn]").on("click",(function(){n.removeClass("is-open"),closeEdit(),checkBodyHidden()}));const a=$("[js-edit-client-btn]"),s=$("[js-edit-client-form]");a.on("click",(function(e){e.preventDefault(),$(this).closest("[js-edit-client-form]").trigger("submit")})),s.on("submit",(function(e){e.preventDefault(),updateClient($(this).serializeObject())})),$("[ js-copy-link]").on("click",(function(){var e=$("<textarea>");$("body").append(e),e.val($(this).attr("data-link")).select(),document.execCommand("copy"),e.remove()})),initPayForm(),initClearPayForm(),$(".datepicker-here-b").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0,onSelect:function(e,t,i){PAYFORM.trigger("submit")}}),$("[js-update-form-deal-sale-type]").on("change",(function(){"traffic"===$(this).val()?$("[js-update-form-deal-mailing-block]").addClass("is-open"):($("[js-update-form-deal-mailing-block]").removeClass("is-open"),$("[js-update-form-deal-mailing]").prop("checked",!1))})),$("[js-update-form-deal-pr]").on("change",(function(){$("[js-update-form-deal-price]").val($("option:selected",this).attr("data-price")),$("[js-update-form-deal-product-type]").val($("option:selected",this).attr("data-type")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-update-form-kind]").html(createKindOptions($list)),$("[js-update-form-kind-block]").addClass("is-open")):($("[js-update-form-kind-block]").removeClass("is-open"),$("[js-update-form-kind]").html(""))}));const o=$("[js-menu-bills-close-btn]"),r=$("[js-menu-bills]");o.on("click",(function(){r.removeClass("is-open"),checkBodyHidden(),BILLS_TEMP_INFO={}}));const l=$("[js-bills-form]");$("[js-save-bills]").on("click",(function(){event.preventDefault(),l.trigger("submit")})),l.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();saveBillWithUpdate(t)}}));const d=$("[js-deal-form-sale-type]");$("[js-deal-form-product]").on("change",(function(){$("[js-deal-form-price]").val($("option:selected",this).attr("data-price")),$("[js-deal-form-product-type]").val($("option:selected",this).attr("data-type")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-deal-form-kind]").html(createKindOptions($list)),$("[js-deal-form-kind-block]").addClass("is-open")):($("[js-deal-form-kind-block]").removeClass("is-open"),$("[js-deal-form-kind]").html(""))})),d.on("change",(function(){"traffic"===$(this).val()?($("[js-deal-form-mailing-block]").addClass("is-open"),checkBodyHidden()):($("[js-deal-form-mailing-block]").removeClass("is-open"),$("[js-deal-form-mailing]").prop("checked",!1),checkBodyHidden())}));const c=$("[js-menu-create-deal-close-btn]"),u=$("[js-menu-create-deal]");c.on("click",(function(){u.removeClass("is-open"),checkBodyHidden()}));const p=$("[js-deal-form]");$("[js-save-deal]").on("click",(function(e){e.preventDefault(),p.trigger("submit")})),p.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=p.serializeObject();createDeal(t)}})),openUpdateDealMenuF(),openClientCard(),editClientInfo(),initDeleteBillFromList(),initEditBillFromList(),initCancelEditBillFromList(),initAcceptEditBillFromList(),initDatePickerCs(),initFancy(),$(".datepicker-here-deal").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}));var BILLS_INFO_TEMP={},ACCEPT_EDITE_BTN,CHANGE_BTN,RADIO_BTN,PAYFORM,PAYDATE_TEMP,$filterFromBack;function initEditBillFromList(){$("[edit-bill]").on("click",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[b-pay-date]");i.removeAttr("disabled"),t.payDate=i.val();var n=$(this).closest(".custom-table__body-row").find("[b-sum]");t.sum=n.val(),n.val(n.val().replace(" ₽","")).removeAttr("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeAttr("disabled");var a=$(this).closest(".custom-table__body-row").find("[b-pm]");t.paymentMethod=a.val();var s=$(this).closest(".custom-table__body-row").find("[b-pm-code]");t.paymentMethodCode=s.val();var o=$(this).closest(".custom-table__body-row").find("[b-account-number]");o.removeAttr("disabled"),t.accountNumber=o.val(),BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]=t}))}function initCancelEditBillFromList(){$("[edit-bill-cancel]").on("click",(function(e){e.preventDefault();var t=BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()];$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(t.payDate).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-sum]").val(t.sum).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-account-number]").val(t.accountNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+t.paymentMethodCode).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm]").val(t.paymentMethod),$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(t.paymentMethodCode),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]}))}function initAcceptEditBillFromList(){$("[edit-bill-accept]").on("click",(function(e){e.preventDefault(),ACCEPT_EDITE_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[b-id-bill]").val(),t.idDeal=$(this).closest(".custom-table__body-row").find("[b-id-deal]").val(),t.paymentMethod=$(this).closest(".custom-table__body-row").find("[b-pm]").val(),t.paymentMethodCode=$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(),t.sum=$(this).closest(".custom-table__body-row").find("[b-sum]").val(),t.accountNumber=$(this).closest(".custom-table__body-row").find("[b-account-number]").val(),t.payDate=$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(),$("[edit-bill-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/updateBill",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(e.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(e.sum+" ₽").attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(e.accountNumber).attr("disabled",!0),null===e.payDate||""===e.payDate?ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").removeClass("column-bill__status_paid").html("Выставлен"):ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").addClass("column-bill__status_paid").html("Оплачен"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+e.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(e.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(e.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)},error:function(e){var i=BILLS_INFO_TEMP[t.id];ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(i.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(i.sum+" ₽").attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(i.accountNumber).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+i.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(i.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(i.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)}})}))}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t)},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}
/*!
  * Bootstrap v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */function updateBillPayDate(e){$("[js-pay-date]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateBillPayDate",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-pay-date]").prop("disabled",!1)},error:function(e){PAYFORM.find("[js-pay-date]").val(PAYDATE_TEMP),$("[js-pay-date]").prop("disabled",!1)}})}function updateStatus(e){$("[js-status]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateStatus",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){var i=RADIO_BTN.closest("[js-status-form]");i.closest(".body__row").find(".column_bstatus").removeClassWild("column_bstatus_*"),"2"===e.status?i.closest(".body__row").find(".column_bstatus").addClass("column_bstatus_checked"):i.closest(".body__row").find(".column_bstatus").addClass("column_bstatus_unchecked"),$("[js-status]").prop("disabled",!1)},error:function(e){$("[js-status]").prop("disabled",!1)}})}function updateSum(e){$("[js-change-amount-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateSum",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){CHANGE_BTN.removeClass("block"),$("[js-change-amount-btn]").prop("disabled",!1)},error:function(e){$("[js-change-amount-btn]").prop("disabled",!1)}})}function updatePaymentMethod(e){$("[js-change-pm-selector]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updatePaymentMethod",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-change-pm-selector]").prop("disabled",!1)},error:function(e){$("[js-change-pm-selector]").prop("disabled",!1)}})}function initDatePicker(){$(".datepicker-here-b").datepicker({autoClose:!0,onSelect:function(e,t,i){PAYFORM.trigger("submit")}})}function initFancy(){$("[data-fancybox]").fancybox({infobar:!1,buttons:["close"]})}function setFilter(e){$filterFromBack=e}function resetFilter(e){$("#idManager option:selected").removeAttr("selected"),$("#idManager").val(e.idManager),$("#course option:selected").removeAttr("selected"),$("#course").val(e.course),$("#status option:selected").removeAttr("selected"),$("#status").val(e.status),$("#paymentMethod option:selected").removeAttr("selected"),$("#paymentMethod").val(e.paymentMethod),$("#paidFrom").val(e.paidFrom),$("#paidTo").val(e.paidTo),$("#payDateFrom").val(e.payDateFrom),$("#payDateTo").val(e.payDateTo),$("#client").val(e.client),$("#accountNumber").val(e.accountNumber),$("#transactionNumber").val(e.transactionNumber),$('input:checkbox[name="empties"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$.each(e.statuses,(function(e,t){$('input:checkbox[name="empties"]').filter('[value="'+t+'"]').attr("checked",!0).prop("checked",!0)}))}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],t):t((e=e||self).bootstrap={},e.jQuery,e.Popper)}(this,(function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){var n,a,s;n=e,s=i[a=t],a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s}))}return e}t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;var o="transitionend";var r={TRANSITION_END:"bsTransitionEnd",getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var i=e.getAttribute("href");t=i&&"#"!==i?i.trim():""}try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var i=t(e).css("transition-duration"),n=t(e).css("transition-delay"),a=parseFloat(i),s=parseFloat(n);return a||s?(i=i.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(i)+parseFloat(n))):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(o)},supportsTransitionEnd:function(){return Boolean(o)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,i){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var a=i[n],s=t[n],o=s&&r.isElement(s)?"element":(l=s,{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(a).test(o))throw new Error(e.toUpperCase()+': Option "'+n+'" provided type "'+o+'" but expected type "'+a+'".')}var l},findShadowRoot:function(e){if(!document.documentElement.attachShadow)return null;if("function"!=typeof e.getRootNode)return e instanceof ShadowRoot?e:e.parentNode?r.findShadowRoot(e.parentNode):null;var t=e.getRootNode();return t instanceof ShadowRoot?t:null}};t.fn.emulateTransitionEnd=function(e){var i=this,n=!1;return t(this).one(r.TRANSITION_END,(function(){n=!0})),setTimeout((function(){n||r.triggerTransitionEnd(i)}),e),this},t.event.special[r.TRANSITION_END]={bindType:o,delegateType:o,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}};var l="alert",d="bs.alert",c="."+d,u=t.fn[l],p={CLOSE:"close"+c,CLOSED:"closed"+c,CLICK_DATA_API:"click"+c+".data-api"},h=function(){function e(e){this._element=e}var i=e.prototype;return i.close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},i.dispose=function(){t.removeData(this._element,d),this._element=null},i._getRootElement=function(e){var i=r.getSelectorFromElement(e),n=!1;return i&&(n=document.querySelector(i)),n||(n=t(e).closest(".alert")[0]),n},i._triggerCloseEvent=function(e){var i=t.Event(p.CLOSE);return t(e).trigger(i),i},i._removeElement=function(e){var i=this;if(t(e).removeClass("show"),t(e).hasClass("fade")){var n=r.getTransitionDurationFromElement(e);t(e).one(r.TRANSITION_END,(function(t){return i._destroyElement(e,t)})).emulateTransitionEnd(n)}else this._destroyElement(e)},i._destroyElement=function(e){t(e).detach().trigger(p.CLOSED).remove()},e._jQueryInterface=function(i){return this.each((function(){var n=t(this),a=n.data(d);a||(a=new e(this),n.data(d,a)),"close"===i&&a[i](this)}))},e._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),e}();t(document).on(p.CLICK_DATA_API,'[data-dismiss="alert"]',h._handleDismiss(new h)),t.fn[l]=h._jQueryInterface,t.fn[l].Constructor=h,t.fn[l].noConflict=function(){return t.fn[l]=u,h._jQueryInterface};var f="button",m="bs.button",v="."+m,b=".data-api",g=t.fn[f],_="active",y='[data-toggle^="button"]',$=".btn",w={CLICK_DATA_API:"click"+v+b,FOCUS_BLUR_DATA_API:"focus"+v+b+" blur"+v+b},k=function(){function e(e){this._element=e}var i=e.prototype;return i.toggle=function(){var e=!0,i=!0,n=t(this._element).closest('[data-toggle="buttons"]')[0];if(n){var a=this._element.querySelector('input:not([type="hidden"])');if(a){if("radio"===a.type)if(a.checked&&this._element.classList.contains(_))e=!1;else{var s=n.querySelector(".active");s&&t(s).removeClass(_)}if(e){if(a.hasAttribute("disabled")||n.hasAttribute("disabled")||a.classList.contains("disabled")||n.classList.contains("disabled"))return;a.checked=!this._element.classList.contains(_),t(a).trigger("change")}a.focus(),i=!1}}i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(_)),e&&t(this._element).toggleClass(_)},i.dispose=function(){t.removeData(this._element,m),this._element=null},e._jQueryInterface=function(i){return this.each((function(){var n=t(this).data(m);n||(n=new e(this),t(this).data(m,n)),"toggle"===i&&n[i]()}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),e}();t(document).on(w.CLICK_DATA_API,y,(function(e){e.preventDefault();var i=e.target;t(i).hasClass("btn")||(i=t(i).closest($)),k._jQueryInterface.call(t(i),"toggle")})).on(w.FOCUS_BLUR_DATA_API,y,(function(e){var i=t(e.target).closest($)[0];t(i).toggleClass("focus",/^focus(in)?$/.test(e.type))})),t.fn[f]=k._jQueryInterface,t.fn[f].Constructor=k,t.fn[f].noConflict=function(){return t.fn[f]=g,k._jQueryInterface};var C="carousel",x="bs.carousel",j="."+x,T=".data-api",E=t.fn[C],S={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},D={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},O="next",P="prev",A={SLIDE:"slide"+j,SLID:"slid"+j,KEYDOWN:"keydown"+j,MOUSEENTER:"mouseenter"+j,MOUSELEAVE:"mouseleave"+j,TOUCHSTART:"touchstart"+j,TOUCHMOVE:"touchmove"+j,TOUCHEND:"touchend"+j,POINTERDOWN:"pointerdown"+j,POINTERUP:"pointerup"+j,DRAG_START:"dragstart"+j,LOAD_DATA_API:"load"+j+T,CLICK_DATA_API:"click"+j+T},N="active",M=".active.carousel-item",I={TOUCH:"touch",PEN:"pen"},L=function(){function e(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._element=e,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var i=e.prototype;return i.next=function(){this._isSliding||this._slide(O)},i.nextWhenVisible=function(){!document.hidden&&t(this._element).is(":visible")&&"hidden"!==t(this._element).css("visibility")&&this.next()},i.prev=function(){this._isSliding||this._slide(P)},i.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},i.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},i.to=function(e){var i=this;this._activeElement=this._element.querySelector(M);var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)t(this._element).one(A.SLID,(function(){return i.to(e)}));else{if(n===e)return this.pause(),void this.cycle();var a=n<e?O:P;this._slide(a,this._items[e])}},i.dispose=function(){t(this._element).off(j),t.removeData(this._element,x),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},i._getConfig=function(e){return e=s({},S,e),r.typeCheckConfig(C,e,D),e},i._handleSwipe=function(){var e=Math.abs(this.touchDeltaX);if(!(e<=40)){var t=e/this.touchDeltaX;0<t&&this.prev(),t<0&&this.next()}},i._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(A.KEYDOWN,(function(t){return e._keydown(t)})),"hover"===this._config.pause&&t(this._element).on(A.MOUSEENTER,(function(t){return e.pause(t)})).on(A.MOUSELEAVE,(function(t){return e.cycle(t)})),this._config.touch&&this._addTouchEventListeners()},i._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var i=function(t){e._pointerEvent&&I[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:e._pointerEvent||(e.touchStartX=t.originalEvent.touches[0].clientX)},n=function(t){e._pointerEvent&&I[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),"hover"===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout((function(t){return e.cycle(t)}),500+e._config.interval))};t(this._element.querySelectorAll(".carousel-item img")).on(A.DRAG_START,(function(e){return e.preventDefault()})),this._pointerEvent?(t(this._element).on(A.POINTERDOWN,(function(e){return i(e)})),t(this._element).on(A.POINTERUP,(function(e){return n(e)})),this._element.classList.add("pointer-event")):(t(this._element).on(A.TOUCHSTART,(function(e){return i(e)})),t(this._element).on(A.TOUCHMOVE,(function(t){var i;(i=t).originalEvent.touches&&1<i.originalEvent.touches.length?e.touchDeltaX=0:e.touchDeltaX=i.originalEvent.touches[0].clientX-e.touchStartX})),t(this._element).on(A.TOUCHEND,(function(e){return n(e)})))}},i._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next()}},i._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(e)},i._getItemByDirection=function(e,t){var i=e===O,n=e===P,a=this._getItemIndex(t),s=this._items.length-1;if((n&&0===a||i&&a===s)&&!this._config.wrap)return t;var o=(a+(e===P?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},i._triggerSlideEvent=function(e,i){var n=this._getItemIndex(e),a=this._getItemIndex(this._element.querySelector(M)),s=t.Event(A.SLIDE,{relatedTarget:e,direction:i,from:a,to:n});return t(this._element).trigger(s),s},i._setActiveIndicatorElement=function(e){if(this._indicatorsElement){var i=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));t(i).removeClass(N);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(N)}},i._slide=function(e,i){var n,a,s,o=this,l=this._element.querySelector(M),d=this._getItemIndex(l),c=i||l&&this._getItemByDirection(e,l),u=this._getItemIndex(c),p=Boolean(this._interval);if(s=e===O?(n="carousel-item-left",a="carousel-item-next","left"):(n="carousel-item-right",a="carousel-item-prev","right"),c&&t(c).hasClass(N))this._isSliding=!1;else if(!this._triggerSlideEvent(c,s).isDefaultPrevented()&&l&&c){this._isSliding=!0,p&&this.pause(),this._setActiveIndicatorElement(c);var h=t.Event(A.SLID,{relatedTarget:c,direction:s,from:d,to:u});if(t(this._element).hasClass("slide")){t(c).addClass(a),r.reflow(c),t(l).addClass(n),t(c).addClass(n);var f=parseInt(c.getAttribute("data-interval"),10);this._config.interval=f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,f):this._config.defaultInterval||this._config.interval;var m=r.getTransitionDurationFromElement(l);t(l).one(r.TRANSITION_END,(function(){t(c).removeClass(n+" "+a).addClass(N),t(l).removeClass(N+" "+a+" "+n),o._isSliding=!1,setTimeout((function(){return t(o._element).trigger(h)}),0)})).emulateTransitionEnd(m)}else t(l).removeClass(N),t(c).addClass(N),this._isSliding=!1,t(this._element).trigger(h);p&&this.cycle()}},e._jQueryInterface=function(i){return this.each((function(){var n=t(this).data(x),a=s({},S,t(this).data());"object"==typeof i&&(a=s({},a,i));var o="string"==typeof i?i:a.slide;if(n||(n=new e(this,a),t(this).data(x,n)),"number"==typeof i)n.to(i);else if("string"==typeof o){if(void 0===n[o])throw new TypeError('No method named "'+o+'"');n[o]()}else a.interval&&a.ride&&(n.pause(),n.cycle())}))},e._dataApiClickHandler=function(i){var n=r.getSelectorFromElement(this);if(n){var a=t(n)[0];if(a&&t(a).hasClass("carousel")){var o=s({},t(a).data(),t(this).data()),l=this.getAttribute("data-slide-to");l&&(o.interval=!1),e._jQueryInterface.call(t(a),o),l&&t(a).data(x).to(l),i.preventDefault()}}},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return S}}]),e}();t(document).on(A.CLICK_DATA_API,"[data-slide], [data-slide-to]",L._dataApiClickHandler),t(window).on(A.LOAD_DATA_API,(function(){for(var e=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),i=0,n=e.length;i<n;i++){var a=t(e[i]);L._jQueryInterface.call(a,a.data())}})),t.fn[C]=L._jQueryInterface,t.fn[C].Constructor=L,t.fn[C].noConflict=function(){return t.fn[C]=E,L._jQueryInterface};var F="collapse",B="bs.collapse",R="."+B,H=t.fn[F],q={toggle:!0,parent:""},z={toggle:"boolean",parent:"(string|element)"},U={SHOW:"show"+R,SHOWN:"shown"+R,HIDE:"hide"+R,HIDDEN:"hidden"+R,CLICK_DATA_API:"click"+R+".data-api"},W="show",K="collapse",V="collapsing",Y="collapsed",J='[data-toggle="collapse"]',X=function(){function e(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(J)),n=0,a=i.length;n<a;n++){var s=i[n],o=r.getSelectorFromElement(s),l=[].slice.call(document.querySelectorAll(o)).filter((function(t){return t===e}));null!==o&&0<l.length&&(this._selector=o,this._triggerArray.push(s))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var i=e.prototype;return i.toggle=function(){t(this._element).hasClass(W)?this.hide():this.show()},i.show=function(){var i,n,a=this;if(!(this._isTransitioning||t(this._element).hasClass(W)||(this._parent&&0===(i=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter((function(e){return"string"==typeof a._config.parent?e.getAttribute("data-parent")===a._config.parent:e.classList.contains(K)}))).length&&(i=null),i&&(n=t(i).not(this._selector).data(B))&&n._isTransitioning))){var s=t.Event(U.SHOW);if(t(this._element).trigger(s),!s.isDefaultPrevented()){i&&(e._jQueryInterface.call(t(i).not(this._selector),"hide"),n||t(i).data(B,null));var o=this._getDimension();t(this._element).removeClass(K).addClass(V),this._element.style[o]=0,this._triggerArray.length&&t(this._triggerArray).removeClass(Y).attr("aria-expanded",!0),this.setTransitioning(!0);var l="scroll"+(o[0].toUpperCase()+o.slice(1)),d=r.getTransitionDurationFromElement(this._element);t(this._element).one(r.TRANSITION_END,(function(){t(a._element).removeClass(V).addClass(K).addClass(W),a._element.style[o]="",a.setTransitioning(!1),t(a._element).trigger(U.SHOWN)})).emulateTransitionEnd(d),this._element.style[o]=this._element[l]+"px"}}},i.hide=function(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(W)){var i=t.Event(U.HIDE);if(t(this._element).trigger(i),!i.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",r.reflow(this._element),t(this._element).addClass(V).removeClass(K).removeClass(W);var a=this._triggerArray.length;if(0<a)for(var s=0;s<a;s++){var o=this._triggerArray[s],l=r.getSelectorFromElement(o);null!==l&&(t([].slice.call(document.querySelectorAll(l))).hasClass(W)||t(o).addClass(Y).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[n]="";var d=r.getTransitionDurationFromElement(this._element);t(this._element).one(r.TRANSITION_END,(function(){e.setTransitioning(!1),t(e._element).removeClass(V).addClass(K).trigger(U.HIDDEN)})).emulateTransitionEnd(d)}}},i.setTransitioning=function(e){this._isTransitioning=e},i.dispose=function(){t.removeData(this._element,B),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i._getConfig=function(e){return(e=s({},q,e)).toggle=Boolean(e.toggle),r.typeCheckConfig(F,e,z),e},i._getDimension=function(){return t(this._element).hasClass("width")?"width":"height"},i._getParent=function(){var i,n=this;r.isElement(this._config.parent)?(i=this._config.parent,void 0!==this._config.parent.jquery&&(i=this._config.parent[0])):i=document.querySelector(this._config.parent);var a='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',s=[].slice.call(i.querySelectorAll(a));return t(s).each((function(t,i){n._addAriaAndCollapsedClass(e._getTargetFromElement(i),[i])})),i},i._addAriaAndCollapsedClass=function(e,i){var n=t(e).hasClass(W);i.length&&t(i).toggleClass(Y,!n).attr("aria-expanded",n)},e._getTargetFromElement=function(e){var t=r.getSelectorFromElement(e);return t?document.querySelector(t):null},e._jQueryInterface=function(i){return this.each((function(){var n=t(this),a=n.data(B),o=s({},q,n.data(),"object"==typeof i&&i?i:{});if(!a&&o.toggle&&/show|hide/.test(i)&&(o.toggle=!1),a||(a=new e(this,o),n.data(B,a)),"string"==typeof i){if(void 0===a[i])throw new TypeError('No method named "'+i+'"');a[i]()}}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return q}}]),e}();t(document).on(U.CLICK_DATA_API,J,(function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var i=t(this),n=r.getSelectorFromElement(this),a=[].slice.call(document.querySelectorAll(n));t(a).each((function(){var e=t(this),n=e.data(B)?"toggle":i.data();X._jQueryInterface.call(e,n)}))})),t.fn[F]=X._jQueryInterface,t.fn[F].Constructor=X,t.fn[F].noConflict=function(){return t.fn[F]=H,X._jQueryInterface};var G="dropdown",Z="bs.dropdown",Q="."+Z,ee=".data-api",te=t.fn[G],ie=new RegExp("38|40|27"),ne={HIDE:"hide"+Q,HIDDEN:"hidden"+Q,SHOW:"show"+Q,SHOWN:"shown"+Q,CLICK:"click"+Q,CLICK_DATA_API:"click"+Q+ee,KEYDOWN_DATA_API:"keydown"+Q+ee,KEYUP_DATA_API:"keyup"+Q+ee},ae="disabled",se="show",oe="dropdown-menu-right",re='[data-toggle="dropdown"]',le=".dropdown-menu",de={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},ce={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},ue=function(){function e(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var n=e.prototype;return n.toggle=function(){if(!this._element.disabled&&!t(this._element).hasClass(ae)){var n=e._getParentFromElement(this._element),a=t(this._menu).hasClass(se);if(e._clearMenus(),!a){var s={relatedTarget:this._element},o=t.Event(ne.SHOW,s);if(t(n).trigger(o),!o.isDefaultPrevented()){if(!this._inNavbar){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var l=this._element;"parent"===this._config.reference?l=n:r.isElement(this._config.reference)&&(l=this._config.reference,void 0!==this._config.reference.jquery&&(l=this._config.reference[0])),"scrollParent"!==this._config.boundary&&t(n).addClass("position-static"),this._popper=new i(l,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===t(n).closest(".navbar-nav").length&&t(document.body).children().on("mouseover",null,t.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),t(this._menu).toggleClass(se),t(n).toggleClass(se).trigger(t.Event(ne.SHOWN,s))}}}},n.show=function(){if(!(this._element.disabled||t(this._element).hasClass(ae)||t(this._menu).hasClass(se))){var i={relatedTarget:this._element},n=t.Event(ne.SHOW,i),a=e._getParentFromElement(this._element);t(a).trigger(n),n.isDefaultPrevented()||(t(this._menu).toggleClass(se),t(a).toggleClass(se).trigger(t.Event(ne.SHOWN,i)))}},n.hide=function(){if(!this._element.disabled&&!t(this._element).hasClass(ae)&&t(this._menu).hasClass(se)){var i={relatedTarget:this._element},n=t.Event(ne.HIDE,i),a=e._getParentFromElement(this._element);t(a).trigger(n),n.isDefaultPrevented()||(t(this._menu).toggleClass(se),t(a).toggleClass(se).trigger(t.Event(ne.HIDDEN,i)))}},n.dispose=function(){t.removeData(this._element,Z),t(this._element).off(Q),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},n.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},n._addEventListeners=function(){var e=this;t(this._element).on(ne.CLICK,(function(t){t.preventDefault(),t.stopPropagation(),e.toggle()}))},n._getConfig=function(e){return e=s({},this.constructor.Default,t(this._element).data(),e),r.typeCheckConfig(G,e,this.constructor.DefaultType),e},n._getMenuElement=function(){if(!this._menu){var t=e._getParentFromElement(this._element);t&&(this._menu=t.querySelector(le))}return this._menu},n._getPlacement=function(){var e=t(this._element.parentNode),i="bottom-start";return e.hasClass("dropup")?(i="top-start",t(this._menu).hasClass(oe)&&(i="top-end")):e.hasClass("dropright")?i="right-start":e.hasClass("dropleft")?i="left-start":t(this._menu).hasClass(oe)&&(i="bottom-end"),i},n._detectNavbar=function(){return 0<t(this._element).closest(".navbar").length},n._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=s({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},n._getPopperConfig=function(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),e},e._jQueryInterface=function(i){return this.each((function(){var n=t(this).data(Z);if(n||(n=new e(this,"object"==typeof i?i:null),t(this).data(Z,n)),"string"==typeof i){if(void 0===n[i])throw new TypeError('No method named "'+i+'"');n[i]()}}))},e._clearMenus=function(i){if(!i||3!==i.which&&("keyup"!==i.type||9===i.which))for(var n=[].slice.call(document.querySelectorAll(re)),a=0,s=n.length;a<s;a++){var o=e._getParentFromElement(n[a]),r=t(n[a]).data(Z),l={relatedTarget:n[a]};if(i&&"click"===i.type&&(l.clickEvent=i),r){var d=r._menu;if(t(o).hasClass(se)&&!(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"keyup"===i.type&&9===i.which)&&t.contains(o,i.target))){var c=t.Event(ne.HIDE,l);t(o).trigger(c),c.isDefaultPrevented()||("ontouchstart"in document.documentElement&&t(document.body).children().off("mouseover",null,t.noop),n[a].setAttribute("aria-expanded","false"),t(d).removeClass(se),t(o).removeClass(se).trigger(t.Event(ne.HIDDEN,l)))}}}},e._getParentFromElement=function(e){var t,i=r.getSelectorFromElement(e);return i&&(t=document.querySelector(i)),t||e.parentNode},e._dataApiKeydownHandler=function(i){if((/input|textarea/i.test(i.target.tagName)?!(32===i.which||27!==i.which&&(40!==i.which&&38!==i.which||t(i.target).closest(le).length)):ie.test(i.which))&&(i.preventDefault(),i.stopPropagation(),!this.disabled&&!t(this).hasClass(ae))){var n=e._getParentFromElement(this),a=t(n).hasClass(se);if(a&&(!a||27!==i.which&&32!==i.which)){var s=[].slice.call(n.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"));if(0!==s.length){var o=s.indexOf(i.target);38===i.which&&0<o&&o--,40===i.which&&o<s.length-1&&o++,o<0&&(o=0),s[o].focus()}}else{if(27===i.which){var r=n.querySelector(re);t(r).trigger("focus")}t(this).trigger("click")}}},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return de}},{key:"DefaultType",get:function(){return ce}}]),e}();t(document).on(ne.KEYDOWN_DATA_API,re,ue._dataApiKeydownHandler).on(ne.KEYDOWN_DATA_API,le,ue._dataApiKeydownHandler).on(ne.CLICK_DATA_API+" "+ne.KEYUP_DATA_API,ue._clearMenus).on(ne.CLICK_DATA_API,re,(function(e){e.preventDefault(),e.stopPropagation(),ue._jQueryInterface.call(t(this),"toggle")})).on(ne.CLICK_DATA_API,".dropdown form",(function(e){e.stopPropagation()})),t.fn[G]=ue._jQueryInterface,t.fn[G].Constructor=ue,t.fn[G].noConflict=function(){return t.fn[G]=te,ue._jQueryInterface};var pe="modal",he="bs.modal",fe="."+he,me=t.fn[pe],ve={backdrop:!0,keyboard:!0,focus:!0,show:!0},be={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},ge={HIDE:"hide"+fe,HIDDEN:"hidden"+fe,SHOW:"show"+fe,SHOWN:"shown"+fe,FOCUSIN:"focusin"+fe,RESIZE:"resize"+fe,CLICK_DISMISS:"click.dismiss"+fe,KEYDOWN_DISMISS:"keydown.dismiss"+fe,MOUSEUP_DISMISS:"mouseup.dismiss"+fe,MOUSEDOWN_DISMISS:"mousedown.dismiss"+fe,CLICK_DATA_API:"click"+fe+".data-api"},_e="modal-open",ye="fade",$e="show",we=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ke=".sticky-top",Ce=function(){function e(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var i=e.prototype;return i.toggle=function(e){return this._isShown?this.hide():this.show(e)},i.show=function(e){var i=this;if(!this._isShown&&!this._isTransitioning){t(this._element).hasClass(ye)&&(this._isTransitioning=!0);var n=t.Event(ge.SHOW,{relatedTarget:e});t(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(ge.CLICK_DISMISS,'[data-dismiss="modal"]',(function(e){return i.hide(e)})),t(this._dialog).on(ge.MOUSEDOWN_DISMISS,(function(){t(i._element).one(ge.MOUSEUP_DISMISS,(function(e){t(e.target).is(i._element)&&(i._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return i._showElement(e)})))}},i.hide=function(e){var i=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var n=t.Event(ge.HIDE);if(t(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var a=t(this._element).hasClass(ye);if(a&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),t(document).off(ge.FOCUSIN),t(this._element).removeClass($e),t(this._element).off(ge.CLICK_DISMISS),t(this._dialog).off(ge.MOUSEDOWN_DISMISS),a){var s=r.getTransitionDurationFromElement(this._element);t(this._element).one(r.TRANSITION_END,(function(e){return i._hideModal(e)})).emulateTransitionEnd(s)}else this._hideModal()}}},i.dispose=function(){[window,this._element,this._dialog].forEach((function(e){return t(e).off(fe)})),t(document).off(ge.FOCUSIN),t.removeData(this._element,he),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},i.handleUpdate=function(){this._adjustDialog()},i._getConfig=function(e){return e=s({},ve,e),r.typeCheckConfig(pe,e,be),e},i._showElement=function(e){var i=this,n=t(this._element).hasClass(ye);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),t(this._dialog).hasClass("modal-dialog-scrollable")?this._dialog.querySelector(".modal-body").scrollTop=0:this._element.scrollTop=0,n&&r.reflow(this._element),t(this._element).addClass($e),this._config.focus&&this._enforceFocus();var a=t.Event(ge.SHOWN,{relatedTarget:e}),s=function(){i._config.focus&&i._element.focus(),i._isTransitioning=!1,t(i._element).trigger(a)};if(n){var o=r.getTransitionDurationFromElement(this._dialog);t(this._dialog).one(r.TRANSITION_END,s).emulateTransitionEnd(o)}else s()},i._enforceFocus=function(){var e=this;t(document).off(ge.FOCUSIN).on(ge.FOCUSIN,(function(i){document!==i.target&&e._element!==i.target&&0===t(e._element).has(i.target).length&&e._element.focus()}))},i._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(ge.KEYDOWN_DISMISS,(function(t){27===t.which&&(t.preventDefault(),e.hide())})):this._isShown||t(this._element).off(ge.KEYDOWN_DISMISS)},i._setResizeEvent=function(){var e=this;this._isShown?t(window).on(ge.RESIZE,(function(t){return e.handleUpdate(t)})):t(window).off(ge.RESIZE)},i._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop((function(){t(document.body).removeClass(_e),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(ge.HIDDEN)}))},i._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},i._showBackdrop=function(e){var i=this,n=t(this._element).hasClass(ye)?ye:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",n&&this._backdrop.classList.add(n),t(this._backdrop).appendTo(document.body),t(this._element).on(ge.CLICK_DISMISS,(function(e){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"===i._config.backdrop?i._element.focus():i.hide())})),n&&r.reflow(this._backdrop),t(this._backdrop).addClass($e),!e)return;if(!n)return void e();var a=r.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(r.TRANSITION_END,e).emulateTransitionEnd(a)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass($e);var s=function(){i._removeBackdrop(),e&&e()};if(t(this._element).hasClass(ye)){var o=r.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(r.TRANSITION_END,s).emulateTransitionEnd(o)}else s()}else e&&e()},i._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},i._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},i._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},i._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){var i=[].slice.call(document.querySelectorAll(we)),n=[].slice.call(document.querySelectorAll(ke));t(i).each((function(i,n){var a=n.style.paddingRight,s=t(n).css("padding-right");t(n).data("padding-right",a).css("padding-right",parseFloat(s)+e._scrollbarWidth+"px")})),t(n).each((function(i,n){var a=n.style.marginRight,s=t(n).css("margin-right");t(n).data("margin-right",a).css("margin-right",parseFloat(s)-e._scrollbarWidth+"px")}));var a=document.body.style.paddingRight,s=t(document.body).css("padding-right");t(document.body).data("padding-right",a).css("padding-right",parseFloat(s)+this._scrollbarWidth+"px")}t(document.body).addClass(_e)},i._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(we));t(e).each((function(e,i){var n=t(i).data("padding-right");t(i).removeData("padding-right"),i.style.paddingRight=n||""}));var i=[].slice.call(document.querySelectorAll(""+ke));t(i).each((function(e,i){var n=t(i).data("margin-right");void 0!==n&&t(i).css("margin-right",n).removeData("margin-right")}));var n=t(document.body).data("padding-right");t(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},i._getScrollbarWidth=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},e._jQueryInterface=function(i,n){return this.each((function(){var a=t(this).data(he),o=s({},ve,t(this).data(),"object"==typeof i&&i?i:{});if(a||(a=new e(this,o),t(this).data(he,a)),"string"==typeof i){if(void 0===a[i])throw new TypeError('No method named "'+i+'"');a[i](n)}else o.show&&a.show(n)}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ve}}]),e}();t(document).on(ge.CLICK_DATA_API,'[data-toggle="modal"]',(function(e){var i,n=this,a=r.getSelectorFromElement(this);a&&(i=document.querySelector(a));var o=t(i).data(he)?"toggle":s({},t(i).data(),t(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var l=t(i).one(ge.SHOW,(function(e){e.isDefaultPrevented()||l.one(ge.HIDDEN,(function(){t(n).is(":visible")&&n.focus()}))}));Ce._jQueryInterface.call(t(i),o,this)})),t.fn[pe]=Ce._jQueryInterface,t.fn[pe].Constructor=Ce,t.fn[pe].noConflict=function(){return t.fn[pe]=me,Ce._jQueryInterface};var xe=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],je=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Te=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function Ee(e,t,i){if(0===e.length)return e;if(i&&"function"==typeof i)return i(e);for(var n=(new window.DOMParser).parseFromString(e,"text/html"),a=Object.keys(t),s=[].slice.call(n.body.querySelectorAll("*")),o=function(e,i){var n=s[e],o=n.nodeName.toLowerCase();if(-1===a.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var r=[].slice.call(n.attributes),l=[].concat(t["*"]||[],t[o]||[]);r.forEach((function(e){(function(e,t){var i=e.nodeName.toLowerCase();if(-1!==t.indexOf(i))return-1===xe.indexOf(i)||Boolean(e.nodeValue.match(je)||e.nodeValue.match(Te));for(var n=t.filter((function(e){return e instanceof RegExp})),a=0,s=n.length;a<s;a++)if(i.match(n[a]))return!0;return!1})(e,l)||n.removeAttribute(e.nodeName)}))},r=0,l=s.length;r<l;r++)o(r);return n.body.innerHTML}var Se="tooltip",De="bs.tooltip",Oe="."+De,Pe=t.fn[Se],Ae="bs-tooltip",Ne=new RegExp("(^|\\s)"+Ae+"\\S+","g"),Me=["sanitize","whiteList","sanitizeFn"],Ie={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},Le={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Fe={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},Be="show",Re={HIDE:"hide"+Oe,HIDDEN:"hidden"+Oe,SHOW:"show"+Oe,SHOWN:"shown"+Oe,INSERTED:"inserted"+Oe,CLICK:"click"+Oe,FOCUSIN:"focusin"+Oe,FOCUSOUT:"focusout"+Oe,MOUSEENTER:"mouseenter"+Oe,MOUSELEAVE:"mouseleave"+Oe},He="fade",qe="show",ze="hover",Ue="focus",We=function(){function e(e,t){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var n=e.prototype;return n.enable=function(){this._isEnabled=!0},n.disable=function(){this._isEnabled=!1},n.toggleEnabled=function(){this._isEnabled=!this._isEnabled},n.toggle=function(e){if(this._isEnabled)if(e){var i=this.constructor.DATA_KEY,n=t(e.currentTarget).data(i);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(t(this.getTipElement()).hasClass(qe))return void this._leave(null,this);this._enter(null,this)}},n.dispose=function(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},n.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var n=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(n);var a=r.findShadowRoot(this.element),s=t.contains(null!==a?a:this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!s)return;var o=this.getTipElement(),l=r.getUID(this.constructor.NAME);o.setAttribute("id",l),this.element.setAttribute("aria-describedby",l),this.setContent(),this.config.animation&&t(o).addClass(He);var d="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,c=this._getAttachment(d);this.addAttachmentClass(c);var u=this._getContainer();t(o).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(o).appendTo(u),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new i(this.element,o,{placement:c,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}}),t(o).addClass(qe),"ontouchstart"in document.documentElement&&t(document.body).children().on("mouseover",null,t.noop);var p=function(){e.config.animation&&e._fixTransition();var i=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),"out"===i&&e._leave(null,e)};if(t(this.tip).hasClass(He)){var h=r.getTransitionDurationFromElement(this.tip);t(this.tip).one(r.TRANSITION_END,p).emulateTransitionEnd(h)}else p()}},n.hide=function(e){var i=this,n=this.getTipElement(),a=t.Event(this.constructor.Event.HIDE),s=function(){i._hoverState!==Be&&n.parentNode&&n.parentNode.removeChild(n),i._cleanTipClass(),i.element.removeAttribute("aria-describedby"),t(i.element).trigger(i.constructor.Event.HIDDEN),null!==i._popper&&i._popper.destroy(),e&&e()};if(t(this.element).trigger(a),!a.isDefaultPrevented()){if(t(n).removeClass(qe),"ontouchstart"in document.documentElement&&t(document.body).children().off("mouseover",null,t.noop),this._activeTrigger.click=!1,this._activeTrigger[Ue]=!1,this._activeTrigger[ze]=!1,t(this.tip).hasClass(He)){var o=r.getTransitionDurationFromElement(n);t(n).one(r.TRANSITION_END,s).emulateTransitionEnd(o)}else s();this._hoverState=""}},n.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},n.isWithContent=function(){return Boolean(this.getTitle())},n.addAttachmentClass=function(e){t(this.getTipElement()).addClass(Ae+"-"+e)},n.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},n.setContent=function(){var e=this.getTipElement();this.setElementContent(t(e.querySelectorAll(".tooltip-inner")),this.getTitle()),t(e).removeClass(He+" "+qe)},n.setElementContent=function(e,i){"object"!=typeof i||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=Ee(i,this.config.whiteList,this.config.sanitizeFn)),e.html(i)):e.text(i):this.config.html?t(i).parent().is(e)||e.empty().append(i):e.text(t(i).text())},n.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},n._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=s({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},n._getContainer=function(){return!1===this.config.container?document.body:r.isElement(this.config.container)?t(this.config.container):t(document).find(this.config.container)},n._getAttachment=function(e){return Le[e.toUpperCase()]},n._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach((function(i){if("click"===i)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,(function(t){return e.toggle(t)}));else if("manual"!==i){var n=i===ze?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,a=i===ze?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(n,e.config.selector,(function(t){return e._enter(t)})).on(a,e.config.selector,(function(t){return e._leave(t)}))}})),t(this.element).closest(".modal").on("hide.bs.modal",(function(){e.element&&e.hide()})),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},n._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},n._enter=function(e,i){var n=this.constructor.DATA_KEY;(i=i||t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),e&&(i._activeTrigger["focusin"===e.type?Ue:ze]=!0),t(i.getTipElement()).hasClass(qe)||i._hoverState===Be?i._hoverState=Be:(clearTimeout(i._timeout),i._hoverState=Be,i.config.delay&&i.config.delay.show?i._timeout=setTimeout((function(){i._hoverState===Be&&i.show()}),i.config.delay.show):i.show())},n._leave=function(e,i){var n=this.constructor.DATA_KEY;(i=i||t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),e&&(i._activeTrigger["focusout"===e.type?Ue:ze]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState="out",i.config.delay&&i.config.delay.hide?i._timeout=setTimeout((function(){"out"===i._hoverState&&i.hide()}),i.config.delay.hide):i.hide())},n._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},n._getConfig=function(e){var i=t(this.element).data();return Object.keys(i).forEach((function(e){-1!==Me.indexOf(e)&&delete i[e]})),"number"==typeof(e=s({},this.constructor.Default,i,"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),r.typeCheckConfig(Se,e,this.constructor.DefaultType),e.sanitize&&(e.template=Ee(e.template,e.whiteList,e.sanitizeFn)),e},n._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},n._cleanTipClass=function(){var e=t(this.getTipElement()),i=e.attr("class").match(Ne);null!==i&&i.length&&e.removeClass(i.join(""))},n._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},n._fixTransition=function(){var e=this.getTipElement(),i=this.config.animation;null===e.getAttribute("x-placement")&&(t(e).removeClass(He),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},e._jQueryInterface=function(i){return this.each((function(){var n=t(this).data(De),a="object"==typeof i&&i;if((n||!/dispose|hide/.test(i))&&(n||(n=new e(this,a),t(this).data(De,n)),"string"==typeof i)){if(void 0===n[i])throw new TypeError('No method named "'+i+'"');n[i]()}}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Fe}},{key:"NAME",get:function(){return Se}},{key:"DATA_KEY",get:function(){return De}},{key:"Event",get:function(){return Re}},{key:"EVENT_KEY",get:function(){return Oe}},{key:"DefaultType",get:function(){return Ie}}]),e}();t.fn[Se]=We._jQueryInterface,t.fn[Se].Constructor=We,t.fn[Se].noConflict=function(){return t.fn[Se]=Pe,We._jQueryInterface};var Ke="popover",Ve="bs.popover",Ye="."+Ve,Je=t.fn[Ke],Xe="bs-popover",Ge=new RegExp("(^|\\s)"+Xe+"\\S+","g"),Ze=s({},We.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Qe=s({},We.DefaultType,{content:"(string|element|function)"}),et={HIDE:"hide"+Ye,HIDDEN:"hidden"+Ye,SHOW:"show"+Ye,SHOWN:"shown"+Ye,INSERTED:"inserted"+Ye,CLICK:"click"+Ye,FOCUSIN:"focusin"+Ye,FOCUSOUT:"focusout"+Ye,MOUSEENTER:"mouseenter"+Ye,MOUSELEAVE:"mouseleave"+Ye},tt=function(e){var i,n;function s(){return e.apply(this,arguments)||this}n=e,(i=s).prototype=Object.create(n.prototype),(i.prototype.constructor=i).__proto__=n;var o=s.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(e){t(this.getTipElement()).addClass(Xe+"-"+e)},o.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},o.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(".popover-header"),this.getTitle());var i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(e.find(".popover-body"),i),e.removeClass("fade show")},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var e=t(this.getTipElement()),i=e.attr("class").match(Ge);null!==i&&0<i.length&&e.removeClass(i.join(""))},s._jQueryInterface=function(e){return this.each((function(){var i=t(this).data(Ve),n="object"==typeof e?e:null;if((i||!/dispose|hide/.test(e))&&(i||(i=new s(this,n),t(this).data(Ve,i)),"string"==typeof e)){if(void 0===i[e])throw new TypeError('No method named "'+e+'"');i[e]()}}))},a(s,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return Ze}},{key:"NAME",get:function(){return Ke}},{key:"DATA_KEY",get:function(){return Ve}},{key:"Event",get:function(){return et}},{key:"EVENT_KEY",get:function(){return Ye}},{key:"DefaultType",get:function(){return Qe}}]),s}(We);t.fn[Ke]=tt._jQueryInterface,t.fn[Ke].Constructor=tt,t.fn[Ke].noConflict=function(){return t.fn[Ke]=Je,tt._jQueryInterface};var it="scrollspy",nt="bs.scrollspy",at="."+nt,st=t.fn[it],ot={offset:10,method:"auto",target:""},rt={offset:"number",method:"string",target:"(string|element)"},lt={ACTIVATE:"activate"+at,SCROLL:"scroll"+at,LOAD_DATA_API:"load"+at+".data-api"},dt="active",ct=".nav, .list-group",ut=".nav-link",pt=".list-group-item",ht="position",ft=function(){function e(e,i){var n=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+ut+","+this._config.target+" "+pt+","+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(lt.SCROLL,(function(e){return n._process(e)})),this.refresh(),this._process()}var i=e.prototype;return i.refresh=function(){var e=this,i=this._scrollElement===this._scrollElement.window?"offset":ht,n="auto"===this._config.method?i:this._config.method,a=n===ht?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map((function(e){var i,s=r.getSelectorFromElement(e);if(s&&(i=document.querySelector(s)),i){var o=i.getBoundingClientRect();if(o.width||o.height)return[t(i)[n]().top+a,s]}return null})).filter((function(e){return e})).sort((function(e,t){return e[0]-t[0]})).forEach((function(t){e._offsets.push(t[0]),e._targets.push(t[1])}))},i.dispose=function(){t.removeData(this._element,nt),t(this._scrollElement).off(at),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},i._getConfig=function(e){if("string"!=typeof(e=s({},ot,"object"==typeof e&&e?e:{})).target){var i=t(e.target).attr("id");i||(i=r.getUID(it),t(e.target).attr("id",i)),e.target="#"+i}return r.typeCheckConfig(it,e,rt),e},i._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},i._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},i._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},i._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),i=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),i<=e){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var a=this._offsets.length;a--;)this._activeTarget!==this._targets[a]&&e>=this._offsets[a]&&(void 0===this._offsets[a+1]||e<this._offsets[a+1])&&this._activate(this._targets[a])}},i._activate=function(e){this._activeTarget=e,this._clear();var i=this._selector.split(",").map((function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'})),n=t([].slice.call(document.querySelectorAll(i.join(","))));n.hasClass("dropdown-item")?(n.closest(".dropdown").find(".dropdown-toggle").addClass(dt),n.addClass(dt)):(n.addClass(dt),n.parents(ct).prev(ut+", "+pt).addClass(dt),n.parents(ct).prev(".nav-item").children(ut).addClass(dt)),t(this._scrollElement).trigger(lt.ACTIVATE,{relatedTarget:e})},i._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter((function(e){return e.classList.contains(dt)})).forEach((function(e){return e.classList.remove(dt)}))},e._jQueryInterface=function(i){return this.each((function(){var n=t(this).data(nt);if(n||(n=new e(this,"object"==typeof i&&i),t(this).data(nt,n)),"string"==typeof i){if(void 0===n[i])throw new TypeError('No method named "'+i+'"');n[i]()}}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return ot}}]),e}();t(window).on(lt.LOAD_DATA_API,(function(){for(var e=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),i=e.length;i--;){var n=t(e[i]);ft._jQueryInterface.call(n,n.data())}})),t.fn[it]=ft._jQueryInterface,t.fn[it].Constructor=ft,t.fn[it].noConflict=function(){return t.fn[it]=st,ft._jQueryInterface};var mt="bs.tab",vt="."+mt,bt=t.fn.tab,gt={HIDE:"hide"+vt,HIDDEN:"hidden"+vt,SHOW:"show"+vt,SHOWN:"shown"+vt,CLICK_DATA_API:"click"+vt+".data-api"},_t="active",yt=".active",$t="> li > .active",wt=function(){function e(e){this._element=e}var i=e.prototype;return i.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(_t)||t(this._element).hasClass("disabled"))){var i,n,a=t(this._element).closest(".nav, .list-group")[0],s=r.getSelectorFromElement(this._element);if(a){var o="UL"===a.nodeName||"OL"===a.nodeName?$t:yt;n=(n=t.makeArray(t(a).find(o)))[n.length-1]}var l=t.Event(gt.HIDE,{relatedTarget:this._element}),d=t.Event(gt.SHOW,{relatedTarget:n});if(n&&t(n).trigger(l),t(this._element).trigger(d),!d.isDefaultPrevented()&&!l.isDefaultPrevented()){s&&(i=document.querySelector(s)),this._activate(this._element,a);var c=function(){var i=t.Event(gt.HIDDEN,{relatedTarget:e._element}),a=t.Event(gt.SHOWN,{relatedTarget:n});t(n).trigger(i),t(e._element).trigger(a)};i?this._activate(i,i.parentNode,c):c()}}},i.dispose=function(){t.removeData(this._element,mt),this._element=null},i._activate=function(e,i,n){var a=this,s=(!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?t(i).children(yt):t(i).find($t))[0],o=n&&s&&t(s).hasClass("fade"),l=function(){return a._transitionComplete(e,s,n)};if(s&&o){var d=r.getTransitionDurationFromElement(s);t(s).removeClass("show").one(r.TRANSITION_END,l).emulateTransitionEnd(d)}else l()},i._transitionComplete=function(e,i,n){if(i){t(i).removeClass(_t);var a=t(i.parentNode).find("> .dropdown-menu .active")[0];a&&t(a).removeClass(_t),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!1)}if(t(e).addClass(_t),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),r.reflow(e),e.classList.contains("fade")&&e.classList.add("show"),e.parentNode&&t(e.parentNode).hasClass("dropdown-menu")){var s=t(e).closest(".dropdown")[0];if(s){var o=[].slice.call(s.querySelectorAll(".dropdown-toggle"));t(o).addClass(_t)}e.setAttribute("aria-expanded",!0)}n&&n()},e._jQueryInterface=function(i){return this.each((function(){var n=t(this),a=n.data(mt);if(a||(a=new e(this),n.data(mt,a)),"string"==typeof i){if(void 0===a[i])throw new TypeError('No method named "'+i+'"');a[i]()}}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}}]),e}();t(document).on(gt.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',(function(e){e.preventDefault(),wt._jQueryInterface.call(t(this),"show")})),t.fn.tab=wt._jQueryInterface,t.fn.tab.Constructor=wt,t.fn.tab.noConflict=function(){return t.fn.tab=bt,wt._jQueryInterface};var kt="toast",Ct="bs.toast",xt="."+Ct,jt=t.fn[kt],Tt={CLICK_DISMISS:"click.dismiss"+xt,HIDE:"hide"+xt,HIDDEN:"hidden"+xt,SHOW:"show"+xt,SHOWN:"shown"+xt},Et="show",St="showing",Dt={animation:"boolean",autohide:"boolean",delay:"number"},Ot={animation:!0,autohide:!0,delay:500},Pt=function(){function e(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}var i=e.prototype;return i.show=function(){var e=this;t(this._element).trigger(Tt.SHOW),this._config.animation&&this._element.classList.add("fade");var i=function(){e._element.classList.remove(St),e._element.classList.add(Et),t(e._element).trigger(Tt.SHOWN),e._config.autohide&&e.hide()};if(this._element.classList.remove("hide"),this._element.classList.add(St),this._config.animation){var n=r.getTransitionDurationFromElement(this._element);t(this._element).one(r.TRANSITION_END,i).emulateTransitionEnd(n)}else i()},i.hide=function(e){var i=this;this._element.classList.contains(Et)&&(t(this._element).trigger(Tt.HIDE),e?this._close():this._timeout=setTimeout((function(){i._close()}),this._config.delay))},i.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Et)&&this._element.classList.remove(Et),t(this._element).off(Tt.CLICK_DISMISS),t.removeData(this._element,Ct),this._element=null,this._config=null},i._getConfig=function(e){return e=s({},Ot,t(this._element).data(),"object"==typeof e&&e?e:{}),r.typeCheckConfig(kt,e,this.constructor.DefaultType),e},i._setListeners=function(){var e=this;t(this._element).on(Tt.CLICK_DISMISS,'[data-dismiss="toast"]',(function(){return e.hide(!0)}))},i._close=function(){var e=this,i=function(){e._element.classList.add("hide"),t(e._element).trigger(Tt.HIDDEN)};if(this._element.classList.remove(Et),this._config.animation){var n=r.getTransitionDurationFromElement(this._element);t(this._element).one(r.TRANSITION_END,i).emulateTransitionEnd(n)}else i()},e._jQueryInterface=function(i){return this.each((function(){var n=t(this),a=n.data(Ct);if(a||(a=new e(this,"object"==typeof i&&i),n.data(Ct,a)),"string"==typeof i){if(void 0===a[i])throw new TypeError('No method named "'+i+'"');a[i](this)}}))},a(e,null,[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return Dt}},{key:"Default",get:function(){return Ot}}]),e}();t.fn[kt]=Pt._jQueryInterface,t.fn[kt].Constructor=Pt,t.fn[kt].noConflict=function(){return t.fn[kt]=jt,Pt._jQueryInterface},function(){if(void 0===t)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1===e[0]&&9===e[1]&&e[2]<1||4<=e[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),e.Util=r,e.Alert=h,e.Button=k,e.Carousel=L,e.Collapse=X,e.Dropdown=ue,e.Modal=Ce,e.Popover=tt,e.Scrollspy=ft,e.Tab=wt,e.Toast=Pt,e.Tooltip=We,Object.defineProperty(e,"__esModule",{value:!0})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(function(){try{return require("moment")}catch(e){}}()):"function"==typeof define&&define.amd?define(["require"],(function(e){return t(function(){try{return e("moment")}catch(e){}}())})):e.Chart=t(e.moment)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={rgb2hsl:i,rgb2hsv:n,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:o,rgb2xyz:l,rgb2lab:d,rgb2lch:function(e){return _(d(e))},hsl2rgb:c,hsl2hsv:function(e){var t=e[0],i=e[1]/100,n=e[2]/100;return 0===n?[0,0,0]:[t,2*(i*=(n*=2)<=1?n:2-n)/(n+i)*100,(n+i)/2*100]},hsl2hwb:function(e){return a(c(e))},hsl2cmyk:function(e){return s(c(e))},hsl2keyword:function(e){return o(c(e))},hsv2rgb:u,hsv2hsl:function(e){var t,i,n=e[0],a=e[1]/100,s=e[2]/100;return t=a*s,[n,100*(t=(t/=(i=(2-a)*s)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(e){return a(u(e))},hsv2cmyk:function(e){return s(u(e))},hsv2keyword:function(e){return o(u(e))},hwb2rgb:p,hwb2hsl:function(e){return i(p(e))},hwb2hsv:function(e){return n(p(e))},hwb2cmyk:function(e){return s(p(e))},hwb2keyword:function(e){return o(p(e))},cmyk2rgb:h,cmyk2hsl:function(e){return i(h(e))},cmyk2hsv:function(e){return n(h(e))},cmyk2hwb:function(e){return a(h(e))},cmyk2keyword:function(e){return o(h(e))},keyword2rgb:w,keyword2hsl:function(e){return i(w(e))},keyword2hsv:function(e){return n(w(e))},keyword2hwb:function(e){return a(w(e))},keyword2cmyk:function(e){return s(w(e))},keyword2lab:function(e){return d(w(e))},keyword2xyz:function(e){return l(w(e))},xyz2rgb:f,xyz2lab:m,xyz2lch:function(e){return _(m(e))},lab2xyz:v,lab2rgb:y,lab2lch:_,lch2lab:$,lch2xyz:function(e){return v($(e))},lch2rgb:function(e){return y($(e))}};function i(e){var t,i,n=e[0]/255,a=e[1]/255,s=e[2]/255,o=Math.min(n,a,s),r=Math.max(n,a,s),l=r-o;return r==o?t=0:n==r?t=(a-s)/l:a==r?t=2+(s-n)/l:s==r&&(t=4+(n-a)/l),(t=Math.min(60*t,360))<0&&(t+=360),i=(o+r)/2,[t,100*(r==o?0:i<=.5?l/(r+o):l/(2-r-o)),100*i]}function n(e){var t,i,n=e[0],a=e[1],s=e[2],o=Math.min(n,a,s),r=Math.max(n,a,s),l=r-o;return i=0==r?0:l/r*1e3/10,r==o?t=0:n==r?t=(a-s)/l:a==r?t=2+(s-n)/l:s==r&&(t=4+(n-a)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,i,r/255*1e3/10]}function a(e){var t=e[0],n=e[1],a=e[2];return[i(e)[0],1/255*Math.min(t,Math.min(n,a))*100,100*(a=1-1/255*Math.max(t,Math.max(n,a)))]}function s(e){var t,i=e[0]/255,n=e[1]/255,a=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-n,1-a)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-a-t)/(1-t)||0),100*t]}function o(e){return C[JSON.stringify(e)]}function l(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*i+.0722*n),100*(.0193*t+.1192*i+.9505*n)]}function d(e){var t=l(e),i=t[0],n=t[1],a=t[2];return n/=100,a/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}function c(e){var t,i,n,a,s,o=e[0]/360,r=e[1]/100,l=e[2]/100;if(0==r)return[s=255*l,s,s];t=2*l-(i=l<.5?l*(1+r):l+r-l*r),a=[0,0,0];for(var d=0;d<3;d++)(n=o+1/3*-(d-1))<0&&n++,n>1&&n--,s=6*n<1?t+6*(i-t)*n:2*n<1?i:3*n<2?t+(i-t)*(2/3-n)*6:t,a[d]=255*s;return a}function u(e){var t=e[0]/60,i=e[1]/100,n=e[2]/100,a=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-i),r=255*n*(1-i*s),l=255*n*(1-i*(1-s));switch(n*=255,a){case 0:return[n,l,o];case 1:return[r,n,o];case 2:return[o,n,l];case 3:return[o,r,n];case 4:return[l,o,n];case 5:return[n,o,r]}}function p(e){var t,i,n,a,s=e[0]/360,o=e[1]/100,l=e[2]/100,d=o+l;switch(d>1&&(o/=d,l/=d),n=6*s-(t=Math.floor(6*s)),0!=(1&t)&&(n=1-n),a=o+n*((i=1-l)-o),t){default:case 6:case 0:r=i,g=a,b=o;break;case 1:r=a,g=i,b=o;break;case 2:r=o,g=i,b=a;break;case 3:r=o,g=a,b=i;break;case 4:r=a,g=o,b=i;break;case 5:r=i,g=o,b=a}return[255*r,255*g,255*b]}function h(e){var t=e[0]/100,i=e[1]/100,n=e[2]/100,a=e[3]/100;return[255*(1-Math.min(1,t*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a))]}function f(e){var t,i,n,a=e[0]/100,s=e[1]/100,o=e[2]/100;return i=-.9689*a+1.8758*s+.0415*o,n=.0557*a+-.204*s+1.057*o,t=(t=3.2406*a+-1.5372*s+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function m(e){var t=e[0],i=e[1],n=e[2];return i/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function v(e){var t,i,n,a,s=e[0],o=e[1],r=e[2];return s<=8?a=(i=100*s/903.3)/100*7.787+16/116:(i=100*Math.pow((s+16)/116,3),a=Math.pow(i/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+a-16/116)/7.787:95.047*Math.pow(o/500+a,3),i,n=n/108.883<=.008859?n=108.883*(a-r/200-16/116)/7.787:108.883*Math.pow(a-r/200,3)]}function _(e){var t,i=e[0],n=e[1],a=e[2];return(t=360*Math.atan2(a,n)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(n*n+a*a),t]}function y(e){return f(v(e))}function $(e){var t,i=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[i,n*Math.cos(t),n*Math.sin(t)]}function w(e){return k[e]}var k={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C={};for(var x in k)C[JSON.stringify(k[x])]=x;var j=function(){return new O};for(var T in t){j[T+"Raw"]=function(e){return function(i){return"number"==typeof i&&(i=Array.prototype.slice.call(arguments)),t[e](i)}}(T);var E=/(\w+)2(\w+)/.exec(T),S=E[1],D=E[2];(j[S]=j[S]||{})[D]=j[T]=function(e){return function(i){"number"==typeof i&&(i=Array.prototype.slice.call(arguments));var n=t[e](i);if("string"==typeof n||void 0===n)return n;for(var a=0;a<n.length;a++)n[a]=Math.round(n[a]);return n}}(T)}var O=function(){this.convs={}};O.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},O.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},O.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space,n=this.convs[i];t=j[i][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(e){O.prototype[e]=function(t){return this.routeSpace(e,arguments)}}));var P=j,A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},N={getRgba:M,getHsla:I,getRgb:function(e){var t=M(e);return t&&t.slice(0,3)},getHsl:function(e){var t=I(e);return t&&t.slice(0,3)},getHwb:L,getAlpha:function(e){var t=M(e);return t||(t=I(e))||(t=L(e))?t[3]:void 0},hexString:function(e,t){t=void 0!==t&&3===e.length?t:e[3];return"#"+q(e[0])+q(e[1])+q(e[2])+(t>=0&&t<1?q(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?F(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:F,percentString:function(e,t){return t<1||e[3]&&e[3]<1?B(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:B,hslString:function(e,t){return t<1||e[3]&&e[3]<1?R(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:R,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return z[e.slice(0,3)]}};function M(e){if(e){var t=[0,0,0],i=1,n=e.match(/^#([a-fA-F0-9]{3,4})$/i),a="";if(n){a=(n=n[1])[3];for(var s=0;s<t.length;s++)t[s]=parseInt(n[s]+n[s],16);a&&(i=Math.round(parseInt(a+a,16)/255*100)/100)}else if(n=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(a=n[2],n=n[1],s=0;s<t.length;s++)t[s]=parseInt(n.slice(2*s,2*s+2),16);a&&(i=Math.round(parseInt(a,16)/255*100)/100)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(s=0;s<t.length;s++)t[s]=parseInt(n[s+1]);i=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(s=0;s<t.length;s++)t[s]=Math.round(2.55*parseFloat(n[s+1]));i=parseFloat(n[4])}else if(n=e.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=A[n[1]]))return}for(s=0;s<t.length;s++)t[s]=H(t[s],0,255);return i=i||0==i?H(i,0,1):1,t[3]=i,t}}function I(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[H(parseInt(t[1]),0,360),H(parseFloat(t[2]),0,100),H(parseFloat(t[3]),0,100),H(isNaN(i)?1:i,0,1)]}}}function L(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[H(parseInt(t[1]),0,360),H(parseFloat(t[2]),0,100),H(parseFloat(t[3]),0,100),H(isNaN(i)?1:i,0,1)]}}}function F(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function B(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function R(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function H(e,t,i){return Math.min(Math.max(t,e),i)}function q(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var z={};for(var U in A)z[A[U]]=U;var W=function(e){return e instanceof W?e:this instanceof W?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=N.getRgba(e))?this.setValues("rgb",t):(t=N.getHsla(e))?this.setValues("hsl",t):(t=N.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new W(e);var t};W.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return N.hexString(this.values.rgb)},rgbString:function(){return N.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return N.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return N.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return N.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return N.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return N.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return N.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var n=e[i]/255;t[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,i=(t[0]+e)%360;return t[0]=i<0?360+i:i,this.setValues("hsl",t),this},mix:function(e,t){var i=e,n=void 0===t?.5:t,a=2*n-1,s=this.alpha()-i.alpha(),o=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,r=1-o;return this.rgb(o*this.red()+r*i.red(),o*this.green()+r*i.green(),o*this.blue()+r*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var e,t,i=new W,n=this.values,a=i.values;for(var s in n)n.hasOwnProperty(s)&&(e=n[s],"[object Array]"===(t={}.toString.call(e))?a[s]=e.slice(0):"[object Number]"===t?a[s]=e:console.error("unexpected color value:",e));return i}},W.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},W.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},W.prototype.getValues=function(e){for(var t=this.values,i={},n=0;n<e.length;n++)i[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(i.a=t.alpha),i},W.prototype.setValues=function(e,t){var i,n,a=this.values,s=this.spaces,o=this.maxes,r=1;if(this.valid=!0,"alpha"===e)r=t;else if(t.length)a[e]=t.slice(0,e.length),r=t[e.length];else if(void 0!==t[e.charAt(0)]){for(i=0;i<e.length;i++)a[e][i]=t[e.charAt(i)];r=t.a}else if(void 0!==t[s[e][0]]){var l=s[e];for(i=0;i<e.length;i++)a[e][i]=t[l[i]];r=t.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===r?a.alpha:r)),"alpha"===e)return!1;for(i=0;i<e.length;i++)n=Math.max(0,Math.min(o[e][i],a[e][i])),a[e][i]=Math.round(n);for(var d in s)d!==e&&(a[d]=P[e][d](a[e]));return!0},W.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},W.prototype.setChannel=function(e,t,i){var n=this.values[e];return void 0===i?n[t]:(i===n[t]||(n[t]=i,this.setValues(e,n)),this)},"undefined"!=typeof window&&(window.Color=W);var K,V=W,Y={noop:function(){},uid:(K=0,function(){return K++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,i){return Y.valueOrDefault(Y.isArray(e)?e[t]:e,i)},callback:function(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)},each:function(e,t,i,n){var a,s,o;if(Y.isArray(e))if(s=e.length,n)for(a=s-1;a>=0;a--)t.call(i,e[a],a);else for(a=0;a<s;a++)t.call(i,e[a],a);else if(Y.isObject(e))for(s=(o=Object.keys(e)).length,a=0;a<s;a++)t.call(i,e[o[a]],o[a])},arrayEquals:function(e,t){var i,n,a,s;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(a=e[i],s=t[i],a instanceof Array&&s instanceof Array){if(!Y.arrayEquals(a,s))return!1}else if(a!==s)return!1;return!0},clone:function(e){if(Y.isArray(e))return e.map(Y.clone);if(Y.isObject(e)){for(var t={},i=Object.keys(e),n=i.length,a=0;a<n;++a)t[i[a]]=Y.clone(e[i[a]]);return t}return e},_merger:function(e,t,i,n){var a=t[e],s=i[e];Y.isObject(a)&&Y.isObject(s)?Y.merge(a,s,n):t[e]=Y.clone(s)},_mergerIf:function(e,t,i){var n=t[e],a=i[e];Y.isObject(n)&&Y.isObject(a)?Y.mergeIf(n,a):t.hasOwnProperty(e)||(t[e]=Y.clone(a))},merge:function(e,t,i){var n,a,s,o,r,l=Y.isArray(t)?t:[t],d=l.length;if(!Y.isObject(e))return e;for(n=(i=i||{}).merger||Y._merger,a=0;a<d;++a)if(t=l[a],Y.isObject(t))for(r=0,o=(s=Object.keys(t)).length;r<o;++r)n(s[r],e,t,i);return e},mergeIf:function(e,t){return Y.merge(e,t,{merger:Y._mergerIf})},extend:function(e){for(var t=function(t,i){e[i]=t},i=1,n=arguments.length;i<n;++i)Y.each(arguments[i],t);return e},inherits:function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=t.prototype,i.prototype=new n,i.extend=Y.inherits,e&&Y.extend(i.prototype,e),i.__super__=t.prototype,i}},J=Y;Y.callCallback=Y.callback,Y.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)},Y.getValueOrDefault=Y.valueOrDefault,Y.getValueAtIndexOrDefault=Y.valueAtIndexOrDefault;var X={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i))},easeOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:2==(e/=.5)?1:(i||(i=.45),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-X.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*X.easeInBounce(2*e):.5*X.easeOutBounce(2*e-1)+.5}},G={effects:X};J.easingEffects=X;var Z=Math.PI,Q=Z/180,ee=2*Z,te=Z/2,ie=Z/4,ne=2*Z/3,ae={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,i,n,a,s){if(s){var o=Math.min(s,a/2,n/2),r=t+o,l=i+o,d=t+n-o,c=i+a-o;e.moveTo(t,l),r<d&&l<c?(e.arc(r,l,o,-Z,-te),e.arc(d,l,o,-te,0),e.arc(d,c,o,0,te),e.arc(r,c,o,te,Z)):r<d?(e.moveTo(r,i),e.arc(d,l,o,-te,te),e.arc(r,l,o,te,Z+te)):l<c?(e.arc(r,l,o,-Z,0),e.arc(r,c,o,0,Z)):e.arc(r,l,o,-Z,Z),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,a)},drawPoint:function(e,t,i,n,a,s){var o,r,l,d,c,u=(s||0)*Q;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(o=t.toString())&&"[object HTMLCanvasElement]"!==o){if(!(isNaN(i)||i<=0)){switch(e.beginPath(),t){default:e.arc(n,a,i,0,ee),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(u)*i,a-Math.cos(u)*i),u+=ne,e.lineTo(n+Math.sin(u)*i,a-Math.cos(u)*i),u+=ne,e.lineTo(n+Math.sin(u)*i,a-Math.cos(u)*i),e.closePath();break;case"rectRounded":d=i-(c=.516*i),r=Math.cos(u+ie)*d,l=Math.sin(u+ie)*d,e.arc(n-r,a-l,c,u-Z,u-te),e.arc(n+l,a-r,c,u-te,u),e.arc(n+r,a+l,c,u,u+te),e.arc(n-l,a+r,c,u+te,u+Z),e.closePath();break;case"rect":if(!s){d=Math.SQRT1_2*i,e.rect(n-d,a-d,2*d,2*d);break}u+=ie;case"rectRot":r=Math.cos(u)*i,l=Math.sin(u)*i,e.moveTo(n-r,a-l),e.lineTo(n+l,a-r),e.lineTo(n+r,a+l),e.lineTo(n-l,a+r),e.closePath();break;case"crossRot":u+=ie;case"cross":r=Math.cos(u)*i,l=Math.sin(u)*i,e.moveTo(n-r,a-l),e.lineTo(n+r,a+l),e.moveTo(n+l,a-r),e.lineTo(n-l,a+r);break;case"star":r=Math.cos(u)*i,l=Math.sin(u)*i,e.moveTo(n-r,a-l),e.lineTo(n+r,a+l),e.moveTo(n+l,a-r),e.lineTo(n-l,a+r),u+=ie,r=Math.cos(u)*i,l=Math.sin(u)*i,e.moveTo(n-r,a-l),e.lineTo(n+r,a+l),e.moveTo(n+l,a-r),e.lineTo(n-l,a+r);break;case"line":r=Math.cos(u)*i,l=Math.sin(u)*i,e.moveTo(n-r,a-l),e.lineTo(n+r,a+l);break;case"dash":e.moveTo(n,a),e.lineTo(n+Math.cos(u)*i,a+Math.sin(u)*i)}e.fill(),e.stroke()}}else e.drawImage(t,n-t.width/2,a-t.height/2,t.width,t.height)},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,i,n){var a=i.steppedLine;if(a){if("middle"===a){var s=(t.x+i.x)/2;e.lineTo(s,n?i.y:t.y),e.lineTo(s,n?t.y:i.y)}else"after"===a&&!n||"after"!==a&&n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}else i.tension?e.bezierCurveTo(n?t.controlPointPreviousX:t.controlPointNextX,n?t.controlPointPreviousY:t.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):e.lineTo(i.x,i.y)}},se=ae;J.clear=ae.clear,J.drawRoundedRectangle=function(e){e.beginPath(),ae.roundedRect.apply(ae,arguments)};var oe={_set:function(e,t){return J.merge(this[e]||(this[e]={}),t)}};oe._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var re=oe,le=J.valueOrDefault,de={toLineHeight:function(e,t){var i=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,i,n,a;return J.isObject(e)?(t=+e.top||0,i=+e.right||0,n=+e.bottom||0,a=+e.left||0):t=i=n=a=+e||0,{top:t,right:i,bottom:n,left:a,height:t+n,width:a+i}},_parseFont:function(e){var t=re.global,i=le(e.fontSize,t.defaultFontSize),n={family:le(e.fontFamily,t.defaultFontFamily),lineHeight:J.options.toLineHeight(le(e.lineHeight,t.defaultLineHeight),i),size:i,style:le(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return n.string=function(e){return!e||J.isNullOrUndef(e.size)||J.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n},resolve:function(e,t,i){var n,a,s;for(n=0,a=e.length;n<a;++n)if(void 0!==(s=e[n])&&(void 0!==t&&"function"==typeof s&&(s=s(t)),void 0!==i&&J.isArray(s)&&(s=s[i]),void 0!==s))return s}},ce=J,ue=G,pe=se,he=de;ce.easing=ue,ce.canvas=pe,ce.options=he;var fe=function(e){ce.extend(this,e),this.initialize.apply(this,arguments)};ce.extend(fe.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ce.clone(e._model)),e._start={},e},transition:function(e){var t=this,i=t._model,n=t._start,a=t._view;return i&&1!==e?(a||(a=t._view={}),n||(n=t._start={}),function(e,t,i,n){var a,s,o,r,l,d,c,u,p,h=Object.keys(i);for(a=0,s=h.length;a<s;++a)if(d=i[o=h[a]],t.hasOwnProperty(o)||(t[o]=d),(r=t[o])!==d&&"_"!==o[0]){if(e.hasOwnProperty(o)||(e[o]=r),(c=typeof d)==typeof(l=e[o]))if("string"===c){if((u=V(l)).valid&&(p=V(d)).valid){t[o]=p.mix(u,n).rgbString();continue}}else if(ce.isFinite(l)&&ce.isFinite(d)){t[o]=l+(d-l)*n;continue}t[o]=d}}(n,a,i,e),t):(t._view=i,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ce.isNumber(this._model.x)&&ce.isNumber(this._model.y)}}),fe.extend=ce.inherits;var me=fe,ve=me.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),be=ve;Object.defineProperty(ve.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ve.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),re._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ce.noop,onComplete:ce.noop}});var ge={animations:[],request:null,addAnimation:function(e,t,i,n){var a,s,o=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=i,n||(e.animating=!0),a=0,s=o.length;a<s;++a)if(o[a].chart===e)return void(o[a]=t);o.push(t),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ce.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ce.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,i,n,a=this.animations,s=0;s<a.length;)t=(e=a[s]).chart,i=e.numSteps,n=Math.floor((Date.now()-e.startTime)/e.duration*i)+1,e.currentStep=Math.min(n,i),ce.callback(e.render,[t,e],t),ce.callback(e.onAnimationProgress,[e],t),e.currentStep>=i?(ce.callback(e.onAnimationComplete,[e],t),t.animating=!1,a.splice(s,1)):++s}},_e=ce.options.resolve,ye=["push","pop","shift","splice","unshift"];function $e(e,t){var i=e._chartjs;if(i){var n=i.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(ye.forEach((function(t){delete e[t]})),delete e._chartjs)}}var we=function(e,t){this.initialize(e,t)};ce.extend(we.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),i=e.getDataset();null!==t.xAxisID&&t.xAxisID in e.chart.scales||(t.xAxisID=i.xAxisID||e.chart.options.scales.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in e.chart.scales||(t.yAxisID=i.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&$e(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,i=this.getMeta(),n=this.getDataset().data||[],a=i.data;for(e=0,t=n.length;e<t;++e)a[e]=a[e]||this.createMetaData(e);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,i=this,n=i.getDataset(),a=n.data||(n.data=[]);i._data!==a&&(i._data&&$e(i._data,i),a&&Object.isExtensible(a)&&(t=i,(e=a)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ye.forEach((function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),a=n.apply(this,t);return ce.each(e._chartjs.listeners,(function(e){"function"==typeof e[i]&&e[i].apply(e,t)})),a}})})))),i._data=a),i.resyncElements()},update:ce.noop,transition:function(e){for(var t=this.getMeta(),i=t.data||[],n=i.length,a=0;a<n;++a)i[a].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],i=t.length,n=0;for(e.dataset&&e.dataset.draw();n<i;++n)t[n].draw()},removeHoverStyle:function(e){ce.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],i=e._index,n=e.custom||{},a=e._model,s=ce.getHoverColor;e.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=_e([n.hoverBackgroundColor,t.hoverBackgroundColor,s(a.backgroundColor)],void 0,i),a.borderColor=_e([n.hoverBorderColor,t.hoverBorderColor,s(a.borderColor)],void 0,i),a.borderWidth=_e([n.hoverBorderWidth,t.hoverBorderWidth,a.borderWidth],void 0,i)},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,i=e.data.length,n=t.length;n<i?e.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(e,t){for(var i=0;i<t;++i)this.addElementAndReset(e+i)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),we.extend=ce.inherits;var ke=we;re._set("global",{elements:{arc:{backgroundColor:re.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Ce=me.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var i=this._view;if(i){for(var n=ce.getAngleFromPoint(i,{x:e,y:t}),a=n.angle,s=n.distance,o=i.startAngle,r=i.endAngle;r<o;)r+=2*Math.PI;for(;a>r;)a-=2*Math.PI;for(;a<o;)a+=2*Math.PI;var l=a>=o&&a<=r,d=s>=i.innerRadius&&s<=i.outerRadius;return l&&d}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,i=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,i=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},draw:function(){var e,t=this._chart.ctx,i=this._view,n=i.startAngle,a=i.endAngle,s="inner"===i.borderAlign?.33:0;t.save(),t.beginPath(),t.arc(i.x,i.y,Math.max(i.outerRadius-s,0),n,a),t.arc(i.x,i.y,i.innerRadius,a,n,!0),t.closePath(),t.fillStyle=i.backgroundColor,t.fill(),i.borderWidth&&("inner"===i.borderAlign?(t.beginPath(),e=s/i.outerRadius,t.arc(i.x,i.y,i.outerRadius,n-e,a+e),i.innerRadius>s?(e=s/i.innerRadius,t.arc(i.x,i.y,i.innerRadius-s,a+e,n-e,!0)):t.arc(i.x,i.y,s,a+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip(),t.beginPath(),t.arc(i.x,i.y,i.outerRadius,n,a),t.arc(i.x,i.y,i.innerRadius,a,n,!0),t.closePath(),t.lineWidth=2*i.borderWidth,t.lineJoin="round"):(t.lineWidth=i.borderWidth,t.lineJoin="bevel"),t.strokeStyle=i.borderColor,t.stroke()),t.restore()}}),xe=ce.valueOrDefault,je=re.global.defaultColor;re._set("global",{elements:{line:{tension:.4,backgroundColor:je,borderWidth:3,borderColor:je,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Te=me.extend({draw:function(){var e,t,i,n,a=this._view,s=this._chart.ctx,o=a.spanGaps,r=this._children.slice(),l=re.global,d=l.elements.line,c=-1;for(this._loop&&r.length&&r.push(r[0]),s.save(),s.lineCap=a.borderCapStyle||d.borderCapStyle,s.setLineDash&&s.setLineDash(a.borderDash||d.borderDash),s.lineDashOffset=xe(a.borderDashOffset,d.borderDashOffset),s.lineJoin=a.borderJoinStyle||d.borderJoinStyle,s.lineWidth=xe(a.borderWidth,d.borderWidth),s.strokeStyle=a.borderColor||l.defaultColor,s.beginPath(),c=-1,e=0;e<r.length;++e)t=r[e],i=ce.previousItem(r,e),n=t._view,0===e?n.skip||(s.moveTo(n.x,n.y),c=e):(i=-1===c?i:r[c],n.skip||(c!==e-1&&!o||-1===c?s.moveTo(n.x,n.y):ce.canvas.lineTo(s,i._view,t._view),c=e));s.stroke(),s.restore()}}),Ee=ce.valueOrDefault,Se=re.global.defaultColor;function De(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}re._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Se,borderColor:Se,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Oe=me.extend({inRange:function(e,t){var i=this._view;return!!i&&Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:De,inXRange:De,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,i=this._chart.ctx,n=t.pointStyle,a=t.rotation,s=t.radius,o=t.x,r=t.y,l=re.global,d=l.defaultColor;t.skip||(void 0===e||ce.canvas._isPointInArea(t,e))&&(i.strokeStyle=t.borderColor||d,i.lineWidth=Ee(t.borderWidth,l.elements.point.borderWidth),i.fillStyle=t.backgroundColor||d,ce.canvas.drawPoint(i,n,s,o,r,a))}}),Pe=re.global.defaultColor;function Ae(e){return e&&void 0!==e.width}function Ne(e){var t,i,n,a,s;return Ae(e)?(s=e.width/2,t=e.x-s,i=e.x+s,n=Math.min(e.y,e.base),a=Math.max(e.y,e.base)):(s=e.height/2,t=Math.min(e.x,e.base),i=Math.max(e.x,e.base),n=e.y-s,a=e.y+s),{left:t,top:n,right:i,bottom:a}}function Me(e,t,i){return e===t?i:e===i?t:e}function Ie(e,t,i){var n=null===t,a=null===i,s=!(!e||n&&a)&&Ne(e);return s&&(n||t>=s.left&&t<=s.right)&&(a||i>=s.top&&i<=s.bottom)}re._set("global",{elements:{rectangle:{backgroundColor:Pe,borderColor:Pe,borderSkipped:"bottom",borderWidth:0}}});var Le=me.extend({draw:function(){var e=this._chart.ctx,t=this._view,i=function(e){var t=Ne(e),i=t.right-t.left,n=t.bottom-t.top,a=function(e,t,i){var n,a,s,o,r=e.borderWidth,l=function(e){var t=e.borderSkipped,i={};return t?(e.horizontal?e.base>e.x&&(t=Me(t,"left","right")):e.base<e.y&&(t=Me(t,"bottom","top")),i[t]=!0,i):i}(e);return ce.isObject(r)?(n=+r.top||0,a=+r.right||0,s=+r.bottom||0,o=+r.left||0):n=a=s=o=+r||0,{t:l.top||n<0?0:n>i?i:n,r:l.right||a<0?0:a>t?t:a,b:l.bottom||s<0?0:s>i?i:s,l:l.left||o<0?0:o>t?t:o}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n},inner:{x:t.left+a.l,y:t.top+a.t,w:i-a.l-a.r,h:n-a.t-a.b}}}(t),n=i.outer,a=i.inner;e.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.w,n.h),n.w===a.w&&n.h===a.h||(e.save(),e.beginPath(),e.rect(n.x,n.y,n.w,n.h),e.clip(),e.fillStyle=t.borderColor,e.rect(a.x,a.y,a.w,a.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Ie(this._view,e,t)},inLabelRange:function(e,t){var i=this._view;return Ae(i)?Ie(i,e,null):Ie(i,null,t)},inXRange:function(e){return Ie(this._view,e,null)},inYRange:function(e){return Ie(this._view,null,e)},getCenterPoint:function(){var e,t,i=this._view;return Ae(i)?(e=i.x,t=(i.y+i.base)/2):(e=(i.x+i.base)/2,t=i.y),{x:e,y:t}},getArea:function(){var e=this._view;return Ae(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Fe={},Be=Ce,Re=Te,He=Oe,qe=Le;Fe.Arc=Be,Fe.Line=Re,Fe.Point=He,Fe.Rectangle=qe;var ze=ce.options.resolve;re._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var Ue=ke.extend({dataElementType:Fe.Rectangle,initialize:function(){var e;ke.prototype.initialize.apply(this,arguments),(e=this.getMeta()).stack=this.getDataset().stack,e.bar=!0},update:function(e){var t,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,i=n.length;t<i;++t)this.updateElement(n[t],t,e)},updateElement:function(e,t,i){var n=this,a=n.getMeta(),s=n.getDataset(),o=n._resolveElementOptions(e,t);e._xScale=n.getScaleForId(a.xAxisID),e._yScale=n.getScaleForId(a.yAxisID),e._datasetIndex=n.index,e._index=t,e._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:s.label,label:n.chart.data.labels[t]},n._updateElementGeometry(e,t,i),e.pivot()},_updateElementGeometry:function(e,t,i){var n=this,a=e._model,s=n._getValueScale(),o=s.getBasePixel(),r=s.isHorizontal(),l=n._ruler||n.getRuler(),d=n.calculateBarValuePixels(n.index,t),c=n.calculateBarIndexPixels(n.index,t,l);a.horizontal=r,a.base=i?o:d.base,a.x=r?i?o:d.head:c.center,a.y=r?c.center:i?o:d.head,a.height=r?c.size:void 0,a.width=r?void 0:c.size},_getStacks:function(e){var t,i,n=this.chart,a=this._getIndexScale().options.stacked,s=void 0===e?n.data.datasets.length:e+1,o=[];for(t=0;t<s;++t)(i=n.getDatasetMeta(t)).bar&&n.isDatasetVisible(t)&&(!1===a||!0===a&&-1===o.indexOf(i.stack)||void 0===a&&(void 0===i.stack||-1===o.indexOf(i.stack)))&&o.push(i.stack);return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var i=this._getStacks(e),n=void 0!==t?i.indexOf(t):-1;return-1===n?i.length-1:n},getRuler:function(){var e,t,i=this._getIndexScale(),n=this.getStackCount(),a=this.index,s=i.isHorizontal(),o=s?i.left:i.top,r=o+(s?i.width:i.height),l=[];for(e=0,t=this.getMeta().data.length;e<t;++e)l.push(i.getPixelForValue(null,e,a));return{min:ce.isNullOrUndef(i.options.barThickness)?function(e,t){var i,n,a,s,o=e.isHorizontal()?e.width:e.height,r=e.getTicks();for(a=1,s=t.length;a<s;++a)o=Math.min(o,Math.abs(t[a]-t[a-1]));for(a=0,s=r.length;a<s;++a)n=e.getPixelForTick(a),o=a>0?Math.min(o,n-i):o,i=n;return o}(i,l):-1,pixels:l,start:o,end:r,stackCount:n,scale:i}},calculateBarValuePixels:function(e,t){var i,n,a,s,o,r,l=this.chart,d=this.getMeta(),c=this._getValueScale(),u=c.isHorizontal(),p=l.data.datasets,h=+c.getRightValue(p[e].data[t]),f=c.options.minBarLength,m=c.options.stacked,v=d.stack,b=0;if(m||void 0===m&&void 0!==v)for(i=0;i<e;++i)(n=l.getDatasetMeta(i)).bar&&n.stack===v&&n.controller._getValueScaleId()===c.id&&l.isDatasetVisible(i)&&(a=+c.getRightValue(p[i].data[t]),(h<0&&a<0||h>=0&&a>0)&&(b+=a));return s=c.getPixelForValue(b),r=(o=c.getPixelForValue(b+h))-s,void 0!==f&&Math.abs(r)<f&&(r=f,o=h>=0&&!u||h<0&&u?s-f:s+f),{size:r,base:s,head:o,center:o+r/2}},calculateBarIndexPixels:function(e,t,i){var n=i.scale.options,a="flex"===n.barThickness?function(e,t,i){var n,a=t.pixels,s=a[e],o=e>0?a[e-1]:null,r=e<a.length-1?a[e+1]:null,l=i.categoryPercentage;return null===o&&(o=s-(null===r?t.end-t.start:r-s)),null===r&&(r=s+s-o),n=s-(s-Math.min(o,r))/2*l,{chunk:Math.abs(r-o)/2*l/t.stackCount,ratio:i.barPercentage,start:n}}(t,i,n):function(e,t,i){var n,a,s=i.barThickness,o=t.stackCount,r=t.pixels[e];return ce.isNullOrUndef(s)?(n=t.min*i.categoryPercentage,a=i.barPercentage):(n=s*o,a=1),{chunk:n/o,ratio:a,start:r-n/2}}(t,i,n),s=this.getStackIndex(e,this.getMeta().stack),o=a.start+a.chunk*s+a.chunk/2,r=Math.min(ce.valueOrDefault(n.maxBarThickness,1/0),a.chunk*a.ratio);return{base:o-r/2,head:o+r/2,center:o,size:r}},draw:function(){var e=this.chart,t=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),a=i.length,s=0;for(ce.canvas.clipArea(e.ctx,e.chartArea);s<a;++s)isNaN(t.getRightValue(n.data[s]))||i[s].draw();ce.canvas.unclipArea(e.ctx)},_resolveElementOptions:function(e,t){var i,n,a,s=this.chart,o=s.data.datasets[this.index],r=e.custom||{},l=s.options.elements.rectangle,d={},c={chart:s,dataIndex:t,dataset:o,datasetIndex:this.index},u=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,n=u.length;i<n;++i)d[a=u[i]]=ze([r[a],o[a],l[a]],c,t);return d}}),We=ce.valueOrDefault,Ke=ce.options.resolve;re._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.datasets[e.datasetIndex].label||"",n=t.datasets[e.datasetIndex].data[e.index];return i+": ("+e.xLabel+", "+e.yLabel+", "+n.r+")"}}}});var Ve=ke.extend({dataElementType:Fe.Point,update:function(e){var t=this,i=t.getMeta().data;ce.each(i,(function(i,n){t.updateElement(i,n,e)}))},updateElement:function(e,t,i){var n=this,a=n.getMeta(),s=e.custom||{},o=n.getScaleForId(a.xAxisID),r=n.getScaleForId(a.yAxisID),l=n._resolveElementOptions(e,t),d=n.getDataset().data[t],c=n.index,u=i?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof d?d:NaN,t,c),p=i?r.getBasePixel():r.getPixelForValue(d,t,c);e._xScale=o,e._yScale=r,e._options=l,e._datasetIndex=c,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:i?0:l.radius,skip:s.skip||isNaN(u)||isNaN(p),x:u,y:p},e.pivot()},setHoverStyle:function(e){var t=e._model,i=e._options,n=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=We(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=We(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=We(i.hoverBorderWidth,i.borderWidth),t.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(e,t){var i,n,a,s=this.chart,o=s.data.datasets[this.index],r=e.custom||{},l=s.options.elements.point,d=o.data[t],c={},u={chart:s,dataIndex:t,dataset:o,datasetIndex:this.index},p=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=p.length;i<n;++i)c[a=p[i]]=Ke([r[a],o[a],l[a]],u,t);return c.radius=Ke([r.radius,d?d.r:void 0,o.radius,l.radius],u,t),c}}),Ye=ce.options.resolve,Je=ce.valueOrDefault;re._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,n=i.datasets,a=i.labels;if(n.length)for(var s=0;s<n[0].data.length;++s)t.push('<li><span style="background-color:'+n[0].backgroundColor[s]+'"></span>'),a[s]&&t.push(a[s]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(i,n){var a=e.getDatasetMeta(0),s=t.datasets[0],o=a.data[n],r=o&&o.custom||{},l=e.options.elements.arc;return{text:i,fillStyle:Ye([r.backgroundColor,s.backgroundColor,l.backgroundColor],void 0,n),strokeStyle:Ye([r.borderColor,s.borderColor,l.borderColor],void 0,n),lineWidth:Ye([r.borderWidth,s.borderWidth,l.borderWidth],void 0,n),hidden:isNaN(s.data[n])||a.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var i,n,a,s=t.index,o=this.chart;for(i=0,n=(o.data.datasets||[]).length;i<n;++i)(a=o.getDatasetMeta(i)).data[s]&&(a.data[s].hidden=!a.data[s].hidden);o.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.labels[e.index],n=": "+t.datasets[e.datasetIndex].data[e.index];return ce.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var Xe=ke.extend({dataElementType:Fe.Arc,linkScales:ce.noop,getRingIndex:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&++t;return t},update:function(e){var t,i,n=this,a=n.chart,s=a.chartArea,o=a.options,r=s.right-s.left,l=s.bottom-s.top,d=Math.min(r,l),c={x:0,y:0},u=n.getMeta(),p=u.data,h=o.cutoutPercentage,f=o.circumference,m=n._getRingWeight(n.index);if(f<2*Math.PI){var v=o.rotation%(2*Math.PI),b=(v+=2*Math.PI*(v>=Math.PI?-1:v<-Math.PI?1:0))+f,g={x:Math.cos(v),y:Math.sin(v)},_={x:Math.cos(b),y:Math.sin(b)},y=v<=0&&b>=0||v<=2*Math.PI&&2*Math.PI<=b,$=v<=.5*Math.PI&&.5*Math.PI<=b||v<=2.5*Math.PI&&2.5*Math.PI<=b,w=v<=-Math.PI&&-Math.PI<=b||v<=Math.PI&&Math.PI<=b,k=v<=.5*-Math.PI&&.5*-Math.PI<=b||v<=1.5*Math.PI&&1.5*Math.PI<=b,C=h/100,x={x:w?-1:Math.min(g.x*(g.x<0?1:C),_.x*(_.x<0?1:C)),y:k?-1:Math.min(g.y*(g.y<0?1:C),_.y*(_.y<0?1:C))},j={x:y?1:Math.max(g.x*(g.x>0?1:C),_.x*(_.x>0?1:C)),y:$?1:Math.max(g.y*(g.y>0?1:C),_.y*(_.y>0?1:C))},T={width:.5*(j.x-x.x),height:.5*(j.y-x.y)};d=Math.min(r/T.width,l/T.height),c={x:-.5*(j.x+x.x),y:-.5*(j.y+x.y)}}for(t=0,i=p.length;t<i;++t)p[t]._options=n._resolveElementOptions(p[t],t);for(a.borderWidth=n.getMaxBorderWidth(),a.outerRadius=Math.max((d-a.borderWidth)/2,0),a.innerRadius=Math.max(h?a.outerRadius/100*h:0,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),a.offsetX=c.x*a.outerRadius,a.offsetY=c.y*a.outerRadius,u.total=n.calculateTotal(),n.outerRadius=a.outerRadius-a.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-a.radiusLength*m,0),t=0,i=p.length;t<i;++t)n.updateElement(p[t],t,e)},updateElement:function(e,t,i){var n=this,a=n.chart,s=a.chartArea,o=a.options,r=o.animation,l=(s.left+s.right)/2,d=(s.top+s.bottom)/2,c=o.rotation,u=o.rotation,p=n.getDataset(),h=i&&r.animateRotate||e.hidden?0:n.calculateCircumference(p.data[t])*(o.circumference/(2*Math.PI)),f=i&&r.animateScale?0:n.innerRadius,m=i&&r.animateScale?0:n.outerRadius,v=e._options||{};ce.extend(e,{_datasetIndex:n.index,_index:t,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:l+a.offsetX,y:d+a.offsetY,startAngle:c,endAngle:u,circumference:h,outerRadius:m,innerRadius:f,label:ce.valueAtIndexOrDefault(p.label,t,a.data.labels[t])}});var b=e._model;i&&r.animateRotate||(b.startAngle=0===t?o.rotation:n.getMeta().data[t-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),i=this.getMeta(),n=0;return ce.each(i.data,(function(i,a){e=t.data[a],isNaN(e)||i.hidden||(n+=Math.abs(e))})),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,i,n,a,s,o,r,l,d=0,c=this.chart;if(!e)for(t=0,i=c.data.datasets.length;t<i;++t)if(c.isDatasetVisible(t)){e=(n=c.getDatasetMeta(t)).data,t!==this.index&&(s=n.controller);break}if(!e)return 0;for(t=0,i=e.length;t<i;++t)a=e[t],"inner"!==(o=s?s._resolveElementOptions(a,t):a._options).borderAlign&&(r=o.borderWidth,d=(l=o.hoverBorderWidth)>(d=r>d?r:d)?l:d);return d},setHoverStyle:function(e){var t=e._model,i=e._options,n=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Je(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Je(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Je(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(e,t){var i,n,a,s=this.chart,o=this.getDataset(),r=e.custom||{},l=s.options.elements.arc,d={},c={chart:s,dataIndex:t,dataset:o,datasetIndex:this.index},u=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=u.length;i<n;++i)d[a=u[i]]=Ye([r[a],o[a],l[a]],c,t);return d},_getRingWeightOffset:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t},_getRingWeight:function(e){return Math.max(Je(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});re._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var Ge=Ue.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ze=ce.valueOrDefault,Qe=ce.options.resolve,et=ce.canvas._isPointInArea;function tt(e,t){return Ze(e.showLine,t.showLines)}re._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var it=ke.extend({datasetElementType:Fe.Line,dataElementType:Fe.Point,update:function(e){var t,i,n=this,a=n.getMeta(),s=a.dataset,o=a.data||[],r=n.getScaleForId(a.yAxisID),l=n.getDataset(),d=tt(l,n.chart.options);for(d&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),s._scale=r,s._datasetIndex=n.index,s._children=o,s._model=n._resolveLineOptions(s),s.pivot()),t=0,i=o.length;t<i;++t)n.updateElement(o[t],t,e);for(d&&0!==s._model.tension&&n.updateBezierControlPoints(),t=0,i=o.length;t<i;++t)o[t].pivot()},updateElement:function(e,t,i){var n,a,s=this,o=s.getMeta(),r=e.custom||{},l=s.getDataset(),d=s.index,c=l.data[t],u=s.getScaleForId(o.yAxisID),p=s.getScaleForId(o.xAxisID),h=o.dataset._model,f=s._resolvePointOptions(e,t);n=p.getPixelForValue("object"==typeof c?c:NaN,t,d),a=i?u.getBasePixel():s.calculatePointY(c,t,d),e._xScale=p,e._yScale=u,e._options=f,e._datasetIndex=d,e._index=t,e._model={x:n,y:a,skip:r.skip||isNaN(n)||isNaN(a),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:Ze(r.tension,h?h.tension:0),steppedLine:!!h&&h.steppedLine,hitRadius:f.hitRadius}},_resolvePointOptions:function(e,t){var i,n,a,s=this.chart,o=s.data.datasets[this.index],r=e.custom||{},l=s.options.elements.point,d={},c={chart:s,dataIndex:t,dataset:o,datasetIndex:this.index},u={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},p=Object.keys(u);for(i=0,n=p.length;i<n;++i)d[a=p[i]]=Qe([r[a],o[u[a]],o[a],l[a]],c,t);return d},_resolveLineOptions:function(e){var t,i,n,a=this.chart,s=a.data.datasets[this.index],o=e.custom||{},r=a.options,l=r.elements.line,d={},c=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(t=0,i=c.length;t<i;++t)d[n=c[t]]=Qe([o[n],s[n],l[n]]);return d.spanGaps=Ze(s.spanGaps,r.spanGaps),d.tension=Ze(s.lineTension,l.tension),d.steppedLine=Qe([o.steppedLine,s.steppedLine,l.stepped]),d},calculatePointY:function(e,t,i){var n,a,s,o=this.chart,r=this.getMeta(),l=this.getScaleForId(r.yAxisID),d=0,c=0;if(l.options.stacked){for(n=0;n<i;n++)if(a=o.data.datasets[n],"line"===(s=o.getDatasetMeta(n)).type&&s.yAxisID===l.id&&o.isDatasetVisible(n)){var u=Number(l.getRightValue(a.data[t]));u<0?c+=u||0:d+=u||0}var p=Number(l.getRightValue(e));return p<0?l.getPixelForValue(c+p):l.getPixelForValue(d+p)}return l.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,i,n,a=this.chart,s=this.getMeta(),o=s.dataset._model,r=a.chartArea,l=s.data||[];function d(e,t,i){return Math.max(Math.min(e,i),t)}if(o.spanGaps&&(l=l.filter((function(e){return!e._model.skip}))),"monotone"===o.cubicInterpolationMode)ce.splineCurveMonotone(l);else for(e=0,t=l.length;e<t;++e)i=l[e]._model,n=ce.splineCurve(ce.previousItem(l,e)._model,i,ce.nextItem(l,e)._model,o.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(a.options.elements.line.capBezierPoints)for(e=0,t=l.length;e<t;++e)i=l[e]._model,et(i,r)&&(e>0&&et(l[e-1]._model,r)&&(i.controlPointPreviousX=d(i.controlPointPreviousX,r.left,r.right),i.controlPointPreviousY=d(i.controlPointPreviousY,r.top,r.bottom)),e<l.length-1&&et(l[e+1]._model,r)&&(i.controlPointNextX=d(i.controlPointNextX,r.left,r.right),i.controlPointNextY=d(i.controlPointNextY,r.top,r.bottom)))},draw:function(){var e,t=this.chart,i=this.getMeta(),n=i.data||[],a=t.chartArea,s=n.length,o=0;for(tt(this.getDataset(),t.options)&&(e=(i.dataset._model.borderWidth||0)/2,ce.canvas.clipArea(t.ctx,{left:a.left,right:a.right,top:a.top-e,bottom:a.bottom+e}),i.dataset.draw(),ce.canvas.unclipArea(t.ctx));o<s;++o)n[o].draw(a)},setHoverStyle:function(e){var t=e._model,i=e._options,n=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ze(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Ze(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Ze(i.hoverBorderWidth,i.borderWidth),t.radius=Ze(i.hoverRadius,i.radius)}}),nt=ce.options.resolve;re._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,n=i.datasets,a=i.labels;if(n.length)for(var s=0;s<n[0].data.length;++s)t.push('<li><span style="background-color:'+n[0].backgroundColor[s]+'"></span>'),a[s]&&t.push(a[s]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(i,n){var a=e.getDatasetMeta(0),s=t.datasets[0],o=a.data[n].custom||{},r=e.options.elements.arc;return{text:i,fillStyle:nt([o.backgroundColor,s.backgroundColor,r.backgroundColor],void 0,n),strokeStyle:nt([o.borderColor,s.borderColor,r.borderColor],void 0,n),lineWidth:nt([o.borderWidth,s.borderWidth,r.borderWidth],void 0,n),hidden:isNaN(s.data[n])||a.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var i,n,a,s=t.index,o=this.chart;for(i=0,n=(o.data.datasets||[]).length;i<n;++i)(a=o.getDatasetMeta(i)).data[s].hidden=!a.data[s].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var at=ke.extend({dataElementType:Fe.Arc,linkScales:ce.noop,update:function(e){var t,i,n,a=this,s=a.getDataset(),o=a.getMeta(),r=a.chart.options.startAngle||0,l=a._starts=[],d=a._angles=[],c=o.data;for(a._updateRadius(),o.count=a.countVisibleElements(),t=0,i=s.data.length;t<i;t++)l[t]=r,n=a._computeAngle(t),d[t]=n,r+=n;for(t=0,i=c.length;t<i;++t)c[t]._options=a._resolveElementOptions(c[t],t),a.updateElement(c[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,i=t.chartArea,n=t.options,a=Math.min(i.right-i.left,i.bottom-i.top);t.outerRadius=Math.max(a/2,0),t.innerRadius=Math.max(n.cutoutPercentage?t.outerRadius/100*n.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,i){var n=this,a=n.chart,s=n.getDataset(),o=a.options,r=o.animation,l=a.scale,d=a.data.labels,c=l.xCenter,u=l.yCenter,p=o.startAngle,h=e.hidden?0:l.getDistanceFromCenterForValue(s.data[t]),f=n._starts[t],m=f+(e.hidden?0:n._angles[t]),v=r.animateScale?0:l.getDistanceFromCenterForValue(s.data[t]),b=e._options||{};ce.extend(e,{_datasetIndex:n.index,_index:t,_scale:l,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:c,y:u,innerRadius:0,outerRadius:i?v:h,startAngle:i&&r.animateRotate?p:f,endAngle:i&&r.animateRotate?p:m,label:ce.valueAtIndexOrDefault(d,t,d[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),i=0;return ce.each(t.data,(function(t,n){isNaN(e.data[n])||t.hidden||i++})),i},setHoverStyle:function(e){var t=e._model,i=e._options,n=ce.getHoverColor,a=ce.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=a(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=a(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=a(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(e,t){var i,n,a,s=this.chart,o=this.getDataset(),r=e.custom||{},l=s.options.elements.arc,d={},c={chart:s,dataIndex:t,dataset:o,datasetIndex:this.index},u=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=u.length;i<n;++i)d[a=u[i]]=nt([r[a],o[a],l[a]],c,t);return d},_computeAngle:function(e){var t=this,i=this.getMeta().count,n=t.getDataset(),a=t.getMeta();if(isNaN(n.data[e])||a.data[e].hidden)return 0;var s={chart:t.chart,dataIndex:e,dataset:n,datasetIndex:t.index};return nt([t.chart.options.elements.arc.angle,2*Math.PI/i],s,e)}});re._set("pie",ce.clone(re.doughnut)),re._set("pie",{cutoutPercentage:0});var st=Xe,ot=ce.valueOrDefault,rt=ce.options.resolve;re._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var lt=ke.extend({datasetElementType:Fe.Line,dataElementType:Fe.Point,linkScales:ce.noop,update:function(e){var t,i,n=this,a=n.getMeta(),s=a.dataset,o=a.data||[],r=n.chart.scale,l=n.getDataset();for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),s._scale=r,s._datasetIndex=n.index,s._children=o,s._loop=!0,s._model=n._resolveLineOptions(s),s.pivot(),t=0,i=o.length;t<i;++t)n.updateElement(o[t],t,e);for(n.updateBezierControlPoints(),t=0,i=o.length;t<i;++t)o[t].pivot()},updateElement:function(e,t,i){var n=this,a=e.custom||{},s=n.getDataset(),o=n.chart.scale,r=o.getPointPositionForValue(t,s.data[t]),l=n._resolvePointOptions(e,t),d=n.getMeta().dataset._model,c=i?o.xCenter:r.x,u=i?o.yCenter:r.y;e._scale=o,e._options=l,e._datasetIndex=n.index,e._index=t,e._model={x:c,y:u,skip:a.skip||isNaN(c)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:ot(a.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolvePointOptions:function(e,t){var i,n,a,s=this.chart,o=s.data.datasets[this.index],r=e.custom||{},l=s.options.elements.point,d={},c={chart:s,dataIndex:t,dataset:o,datasetIndex:this.index},u={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},p=Object.keys(u);for(i=0,n=p.length;i<n;++i)d[a=p[i]]=rt([r[a],o[u[a]],o[a],l[a]],c,t);return d},_resolveLineOptions:function(e){var t,i,n,a=this.chart,s=a.data.datasets[this.index],o=e.custom||{},r=a.options.elements.line,l={},d=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(t=0,i=d.length;t<i;++t)l[n=d[t]]=rt([o[n],s[n],r[n]]);return l.tension=ot(s.lineTension,r.tension),l},updateBezierControlPoints:function(){var e,t,i,n,a=this.getMeta(),s=this.chart.chartArea,o=a.data||[];function r(e,t,i){return Math.max(Math.min(e,i),t)}for(e=0,t=o.length;e<t;++e)i=o[e]._model,n=ce.splineCurve(ce.previousItem(o,e,!0)._model,i,ce.nextItem(o,e,!0)._model,i.tension),i.controlPointPreviousX=r(n.previous.x,s.left,s.right),i.controlPointPreviousY=r(n.previous.y,s.top,s.bottom),i.controlPointNextX=r(n.next.x,s.left,s.right),i.controlPointNextY=r(n.next.y,s.top,s.bottom)},setHoverStyle:function(e){var t=e._model,i=e._options,n=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ot(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=ot(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=ot(i.hoverBorderWidth,i.borderWidth),t.radius=ot(i.hoverRadius,i.radius)}});re._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}});var dt={bar:Ue,bubble:Ve,doughnut:Xe,horizontalBar:Ge,line:it,polarArea:at,pie:st,radar:lt,scatter:it};function ct(e,t){return e.native?{x:e.x,y:e.y}:ce.getRelativePosition(e,t)}function ut(e,t){var i,n,a,s,o;for(n=0,s=e.data.datasets.length;n<s;++n)if(e.isDatasetVisible(n))for(a=0,o=(i=e.getDatasetMeta(n)).data.length;a<o;++a){var r=i.data[a];r._view.skip||t(r)}}function pt(e,t){var i=[];return ut(e,(function(e){e.inRange(t.x,t.y)&&i.push(e)})),i}function ht(e,t,i,n){var a=Number.POSITIVE_INFINITY,s=[];return ut(e,(function(e){if(!i||e.inRange(t.x,t.y)){var o=e.getCenterPoint(),r=n(t,o);r<a?(s=[e],a=r):r===a&&s.push(e)}})),s}function ft(e){var t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){var a=t?Math.abs(e.x-n.x):0,s=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function mt(e,t,i){var n=ct(t,e);i.axis=i.axis||"x";var a=ft(i.axis),s=i.intersect?pt(e,n):ht(e,n,!1,a),o=[];return s.length?(e.data.datasets.forEach((function(t,i){if(e.isDatasetVisible(i)){var n=e.getDatasetMeta(i).data[s[0]._index];n&&!n._view.skip&&o.push(n)}})),o):[]}var vt={modes:{single:function(e,t){var i=ct(t,e),n=[];return ut(e,(function(e){if(e.inRange(i.x,i.y))return n.push(e),n})),n.slice(0,1)},label:mt,index:mt,dataset:function(e,t,i){var n=ct(t,e);i.axis=i.axis||"xy";var a=ft(i.axis),s=i.intersect?pt(e,n):ht(e,n,!1,a);return s.length>0&&(s=e.getDatasetMeta(s[0]._datasetIndex).data),s},"x-axis":function(e,t){return mt(e,t,{intersect:!1})},point:function(e,t){return pt(e,ct(t,e))},nearest:function(e,t,i){var n=ct(t,e);i.axis=i.axis||"xy";var a=ft(i.axis);return ht(e,n,i.intersect,a)},x:function(e,t,i){var n=ct(t,e),a=[],s=!1;return ut(e,(function(e){e.inXRange(n.x)&&a.push(e),e.inRange(n.x,n.y)&&(s=!0)})),i.intersect&&!s&&(a=[]),a},y:function(e,t,i){var n=ct(t,e),a=[],s=!1;return ut(e,(function(e){e.inYRange(n.y)&&a.push(e),e.inRange(n.x,n.y)&&(s=!0)})),i.intersect&&!s&&(a=[]),a}}};function bt(e,t){return ce.where(e,(function(e){return e.position===t}))}function gt(e,t){e.forEach((function(e,t){return e._tmpIndex_=t,e})),e.sort((function(e,i){var n=t?i:e,a=t?e:i;return n.weight===a.weight?n._tmpIndex_-a._tmpIndex_:n.weight-a.weight})),e.forEach((function(e){delete e._tmpIndex_}))}function _t(e,t){ce.each(e,(function(e){t[e.position]+=e.isHorizontal()?e.height:e.width}))}re._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var yt,$t={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure:function(e,t,i){for(var n,a=["fullWidth","position","weight"],s=a.length,o=0;o<s;++o)n=a[o],i.hasOwnProperty(n)&&(t[n]=i[n])},update:function(e,t,i){if(e){var n=e.options.layout||{},a=ce.options.toPadding(n.padding),s=a.left,o=a.right,r=a.top,l=a.bottom,d=bt(e.boxes,"left"),c=bt(e.boxes,"right"),u=bt(e.boxes,"top"),p=bt(e.boxes,"bottom"),h=bt(e.boxes,"chartArea");gt(d,!0),gt(c,!1),gt(u,!0),gt(p,!1);var f,m=d.concat(c),v=u.concat(p),b=m.concat(v),g=t-s-o,_=i-r-l,y=(t-g/2)/m.length,$=g,w=_,k={top:r,left:s,bottom:l,right:o},C=[];ce.each(b,(function(e){var t,i=e.isHorizontal();i?(t=e.update(e.fullWidth?g:$,_/2),w-=t.height):(t=e.update(y,w),$-=t.width),C.push({horizontal:i,width:t.width,box:e})})),f=function(e){var t=0,i=0,n=0,a=0;return ce.each(e,(function(e){if(e.getPadding){var s=e.getPadding();t=Math.max(t,s.top),i=Math.max(i,s.left),n=Math.max(n,s.bottom),a=Math.max(a,s.right)}})),{top:t,left:i,bottom:n,right:a}}(b),ce.each(m,O),_t(m,k),ce.each(v,O),_t(v,k),ce.each(m,(function(e){var t=ce.findNextWhere(C,(function(t){return t.box===e})),i={left:0,right:0,top:k.top,bottom:k.bottom};t&&e.update(t.width,w,i)})),_t(b,k={top:r,left:s,bottom:l,right:o});var x=Math.max(f.left-k.left,0);k.left+=x,k.right+=Math.max(f.right-k.right,0);var j=Math.max(f.top-k.top,0);k.top+=j,k.bottom+=Math.max(f.bottom-k.bottom,0);var T=i-k.top-k.bottom,E=t-k.left-k.right;E===$&&T===w||(ce.each(m,(function(e){e.height=T})),ce.each(v,(function(e){e.fullWidth||(e.width=E)})),w=T,$=E);var S=s+x,D=r+j;ce.each(d.concat(u),P),S+=$,D+=w,ce.each(c,P),ce.each(p,P),e.chartArea={left:k.left,top:k.top,right:k.left+$,bottom:k.top+w},ce.each(h,(function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update($,w)}))}function O(e){var t=ce.findNextWhere(C,(function(t){return t.box===e}));if(t)if(t.horizontal){var i={left:Math.max(k.left,f.left),right:Math.max(k.right,f.right),top:0,bottom:0};e.update(e.fullWidth?g:$,_/2,i)}else e.update(t.width,w)}function P(e){e.isHorizontal()?(e.left=e.fullWidth?s:k.left,e.right=e.fullWidth?t-o:k.left+$,e.top=D,e.bottom=D+e.height,D=e.bottom):(e.left=S,e.right=S+e.width,e.top=k.top,e.bottom=k.top+w,S=e.right)}}},wt=(yt=Object.freeze({default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&yt.default||yt,kt="$chartjs",Ct="chartjs-size-monitor",xt="chartjs-render-monitor",jt=["animationstart","webkitAnimationStart"],Tt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function Et(e,t){var i=ce.getStyle(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var St=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};function Dt(e,t,i){e.addEventListener(t,i,St)}function Ot(e,t,i){e.removeEventListener(t,i,St)}function Pt(e,t,i,n,a){return{type:e,chart:t,native:a||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function At(e){var t=document.createElement("div");return t.className=e||"",t}var Nt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){var e,t;this._loaded||(this._loaded=!0,this.disableCSSInjection||(e=wt,t=this._style||document.createElement("style"),this._style||(this._style=t,e="/* Chart.js */\n"+e,t.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(t)),t.appendChild(document.createTextNode(e))))},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var i=e&&e.getContext&&e.getContext("2d");return this._ensureLoaded(),i&&i.canvas===e?(function(e,t){var i=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[kt]={initial:{height:n,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===a||""===a){var s=Et(e,"width");void 0!==s&&(e.width=s)}if(null===n||""===n)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var o=Et(e,"height");void 0!==s&&(e.height=o)}}(e,t),i):null},releaseContext:function(e){var t=e.canvas;if(t[kt]){var i=t[kt].initial;["height","width"].forEach((function(e){var n=i[e];ce.isNullOrUndef(n)?t.removeAttribute(e):t.setAttribute(e,n)})),ce.each(i.style||{},(function(e,i){t.style[i]=e})),t.width=t.width,delete t[kt]}},addEventListener:function(e,t,i){var n=e.canvas;if("resize"!==t){var a=i[kt]||(i[kt]={});Dt(n,t,(a.proxies||(a.proxies={}))[e.id+"_"+t]=function(t){i(function(e,t){var i=Tt[e.type]||e.type,n=ce.getRelativePosition(e,t);return Pt(i,t,n.x,n.y,e)}(t,e))})}else!function(e,t,i){var n,a,s,o,r=e[kt]||(e[kt]={}),l=r.resizer=function(e){var t=At(Ct),i=At(Ct+"-expand"),n=At(Ct+"-shrink");i.appendChild(At()),n.appendChild(At()),t.appendChild(i),t.appendChild(n),t._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var a=function(){t._reset(),e()};return Dt(i,"scroll",a.bind(i,"expand")),Dt(n,"scroll",a.bind(n,"shrink")),t}((n=function(){if(r.resizer){var n=i.options.maintainAspectRatio&&e.parentNode,a=n?n.clientWidth:0;t(Pt("resize",i)),n&&n.clientWidth<a&&i.canvas&&t(Pt("resize",i))}},s=!1,o=[],function(){o=Array.prototype.slice.call(arguments),a=a||this,s||(s=!0,ce.requestAnimFrame.call(window,(function(){s=!1,n.apply(a,o)})))}));!function(e,t){var i=e[kt]||(e[kt]={}),n=i.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};ce.each(jt,(function(t){Dt(e,t,n)})),i.reflow=!!e.offsetParent,e.classList.add(xt)}(e,(function(){if(r.resizer){var t=e.parentNode;t&&t!==l.parentNode&&t.insertBefore(l,t.firstChild),l._reset()}}))}(n,i,e)},removeEventListener:function(e,t,i){var n=e.canvas;if("resize"!==t){var a=((i[kt]||{}).proxies||{})[e.id+"_"+t];a&&Ot(n,t,a)}else!function(e){var t=e[kt]||{},i=t.resizer;delete t.resizer,function(e){var t=e[kt]||{},i=t.renderProxy;i&&(ce.each(jt,(function(t){Ot(e,t,i)})),delete t.renderProxy),e.classList.remove(xt)}(e),i&&i.parentNode&&i.parentNode.removeChild(i)}(n)}};ce.addEvent=Dt,ce.removeEvent=Ot;var Mt=Nt._enabled?Nt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},It=ce.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Mt);re._set("global",{plugins:{}});var Lt={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,i){var n,a,s,o,r,l=this.descriptors(e),d=l.length;for(n=0;n<d;++n)if("function"==typeof(r=(s=(a=l[n]).plugin)[t])&&((o=[e].concat(i||[])).push(a.options),!1===r.apply(s,o)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var i=[],n=[],a=e&&e.config||{},s=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach((function(e){if(-1===i.indexOf(e)){var t=e.id,a=s[t];!1!==a&&(!0===a&&(a=ce.clone(re.global.plugins[t])),i.push(e),n.push({plugin:e,options:a||{}}))}})),t.descriptors=n,t.id=this._cacheId,n},_invalidate:function(e){delete e.$plugins}},Ft={constructors:{},defaults:{},registerScaleType:function(e,t,i){this.constructors[e]=t,this.defaults[e]=ce.clone(i)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ce.merge({},[re.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=ce.extend(this.defaults[e],t))},addScalesToLayout:function(e){ce.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,$t.addBox(e,t)}))}},Bt=ce.valueOrDefault;re._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ce.noop,title:function(e,t){var i="",n=t.labels,a=n?n.length:0;if(e.length>0){var s=e[0];s.label?i=s.label:s.xLabel?i=s.xLabel:a>0&&s.index<a&&(i=n[s.index])}return i},afterTitle:ce.noop,beforeBody:ce.noop,beforeLabel:ce.noop,label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i&&(i+=": "),ce.isNullOrUndef(e.value)?i+=e.yLabel:i+=e.value,i},labelColor:function(e,t){var i=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ce.noop,afterBody:ce.noop,beforeFooter:ce.noop,footer:ce.noop,afterFooter:ce.noop}}});var Rt={average:function(e){if(!e.length)return!1;var t,i,n=0,a=0,s=0;for(t=0,i=e.length;t<i;++t){var o=e[t];if(o&&o.hasValue()){var r=o.tooltipPosition();n+=r.x,a+=r.y,++s}}return{x:n/s,y:a/s}},nearest:function(e,t){var i,n,a,s=t.x,o=t.y,r=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){var l=e[i];if(l&&l.hasValue()){var d=l.getCenterPoint(),c=ce.distanceBetweenPoints(t,d);c<r&&(r=c,a=l)}}if(a){var u=a.tooltipPosition();s=u.x,o=u.y}return{x:s,y:o}}};function Ht(e,t){return t&&(ce.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function qt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function zt(e){var t=re.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Bt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Bt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Bt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Bt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Bt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Bt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Bt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Bt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Bt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Ut(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Wt(e){return Ht([],qt(e))}var Kt=me.extend({initialize:function(){this._model=zt(this._options),this._lastActive=[]},getTitle:function(){var e=this._options.callbacks,t=e.beforeTitle.apply(this,arguments),i=e.title.apply(this,arguments),n=e.afterTitle.apply(this,arguments),a=[];return a=Ht(a,qt(t)),a=Ht(a,qt(i)),Ht(a,qt(n))},getBeforeBody:function(){return Wt(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var i=this,n=i._options.callbacks,a=[];return ce.each(e,(function(e){var s={before:[],lines:[],after:[]};Ht(s.before,qt(n.beforeLabel.call(i,e,t))),Ht(s.lines,n.label.call(i,e,t)),Ht(s.after,qt(n.afterLabel.call(i,e,t))),a.push(s)})),a},getAfterBody:function(){return Wt(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this._options.callbacks,t=e.beforeFooter.apply(this,arguments),i=e.footer.apply(this,arguments),n=e.afterFooter.apply(this,arguments),a=[];return a=Ht(a,qt(t)),a=Ht(a,qt(i)),Ht(a,qt(n))},update:function(e){var t,i,n,a,s,o,r,l,d,c,u=this,p=u._options,h=u._model,f=u._model=zt(p),m=u._active,v=u._data,b={xAlign:h.xAlign,yAlign:h.yAlign},g={x:h.x,y:h.y},_={width:h.width,height:h.height},y={x:h.caretX,y:h.caretY};if(m.length){f.opacity=1;var $=[],w=[];y=Rt[p.position].call(u,m,u._eventPosition);var k=[];for(t=0,i=m.length;t<i;++t)k.push((a=void 0,s=void 0,void 0,void 0,l=void 0,d=void 0,c=void 0,a=(n=m[t])._xScale,s=n._yScale||n._scale,o=n._index,r=n._datasetIndex,d=(l=n._chart.getDatasetMeta(r).controller)._getIndexScale(),c=l._getValueScale(),{xLabel:a?a.getLabelForIndex(o,r):"",yLabel:s?s.getLabelForIndex(o,r):"",label:d?""+d.getLabelForIndex(o,r):"",value:c?""+c.getLabelForIndex(o,r):"",index:o,datasetIndex:r,x:n._model.x,y:n._model.y}));p.filter&&(k=k.filter((function(e){return p.filter(e,v)}))),p.itemSort&&(k=k.sort((function(e,t){return p.itemSort(e,t,v)}))),ce.each(k,(function(e){$.push(p.callbacks.labelColor.call(u,e,u._chart)),w.push(p.callbacks.labelTextColor.call(u,e,u._chart))})),f.title=u.getTitle(k,v),f.beforeBody=u.getBeforeBody(k,v),f.body=u.getBody(k,v),f.afterBody=u.getAfterBody(k,v),f.footer=u.getFooter(k,v),f.x=y.x,f.y=y.y,f.caretPadding=p.caretPadding,f.labelColors=$,f.labelTextColors=w,f.dataPoints=k,g=function(e,t,i,n){var a=e.x,s=e.y,o=e.caretSize,r=e.caretPadding,l=e.cornerRadius,d=i.xAlign,c=i.yAlign,u=o+r,p=l+r;return"right"===d?a-=t.width:"center"===d&&((a-=t.width/2)+t.width>n.width&&(a=n.width-t.width),a<0&&(a=0)),"top"===c?s+=u:s-="bottom"===c?t.height+u:t.height/2,"center"===c?"left"===d?a+=u:"right"===d&&(a-=u):"left"===d?a-=p:"right"===d&&(a+=p),{x:a,y:s}}(f,_=function(e,t){var i=e._chart.ctx,n=2*t.yPadding,a=0,s=t.body,o=s.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);o+=t.beforeBody.length+t.afterBody.length;var r=t.title.length,l=t.footer.length,d=t.titleFontSize,c=t.bodyFontSize,u=t.footerFontSize;n+=r*d,n+=r?(r-1)*t.titleSpacing:0,n+=r?t.titleMarginBottom:0,n+=o*c,n+=o?(o-1)*t.bodySpacing:0,n+=l?t.footerMarginTop:0,n+=l*u,n+=l?(l-1)*t.footerSpacing:0;var p=0,h=function(e){a=Math.max(a,i.measureText(e).width+p)};return i.font=ce.fontString(d,t._titleFontStyle,t._titleFontFamily),ce.each(t.title,h),i.font=ce.fontString(c,t._bodyFontStyle,t._bodyFontFamily),ce.each(t.beforeBody.concat(t.afterBody),h),p=t.displayColors?c+2:0,ce.each(s,(function(e){ce.each(e.before,h),ce.each(e.lines,h),ce.each(e.after,h)})),p=0,i.font=ce.fontString(u,t._footerFontStyle,t._footerFontFamily),ce.each(t.footer,h),{width:a+=2*t.xPadding,height:n}}(this,f),b=function(e,t){var i,n,a,s,o,r=e._model,l=e._chart,d=e._chart.chartArea,c="center",u="center";r.y<t.height?u="top":r.y>l.height-t.height&&(u="bottom");var p=(d.left+d.right)/2,h=(d.top+d.bottom)/2;"center"===u?(i=function(e){return e<=p},n=function(e){return e>p}):(i=function(e){return e<=t.width/2},n=function(e){return e>=l.width-t.width/2}),a=function(e){return e+t.width+r.caretSize+r.caretPadding>l.width},s=function(e){return e-t.width-r.caretSize-r.caretPadding<0},o=function(e){return e<=h?"top":"bottom"},i(r.x)?(c="left",a(r.x)&&(c="center",u=o(r.y))):n(r.x)&&(c="right",s(r.x)&&(c="center",u=o(r.y)));var f=e._options;return{xAlign:f.xAlign?f.xAlign:c,yAlign:f.yAlign?f.yAlign:u}}(this,_),u._chart)}else f.opacity=0;return f.xAlign=b.xAlign,f.yAlign=b.yAlign,f.x=g.x,f.y=g.y,f.width=_.width,f.height=_.height,f.caretX=y.x,f.caretY=y.y,u._model=f,e&&p.custom&&p.custom.call(u,f),u},drawCaret:function(e,t){var i=this._chart.ctx,n=this._view,a=this.getCaretPosition(e,t,n);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)},getCaretPosition:function(e,t,i){var n,a,s,o,r,l,d=i.caretSize,c=i.cornerRadius,u=i.xAlign,p=i.yAlign,h=e.x,f=e.y,m=t.width,v=t.height;if("center"===p)r=f+v/2,"left"===u?(a=(n=h)-d,s=n,o=r+d,l=r-d):(a=(n=h+m)+d,s=n,o=r-d,l=r+d);else if("left"===u?(n=(a=h+c+d)-d,s=a+d):"right"===u?(n=(a=h+m-c-d)-d,s=a+d):(n=(a=i.caretX)-d,s=a+d),"top"===p)r=(o=f)-d,l=o;else{r=(o=f+v)+d,l=o;var b=s;s=n,n=b}return{x1:n,x2:a,x3:s,y1:o,y2:r,y3:l}},drawTitle:function(e,t,i){var n=t.title;if(n.length){e.x=Ut(t,t._titleAlign),i.textAlign=t._titleAlign,i.textBaseline="top";var a,s,o=t.titleFontSize,r=t.titleSpacing;for(i.fillStyle=t.titleFontColor,i.font=ce.fontString(o,t._titleFontStyle,t._titleFontFamily),a=0,s=n.length;a<s;++a)i.fillText(n[a],e.x,e.y),e.y+=o+r,a+1===n.length&&(e.y+=t.titleMarginBottom-r)}},drawBody:function(e,t,i){var n,a=t.bodyFontSize,s=t.bodySpacing,o=t._bodyAlign,r=t.body,l=t.displayColors,d=t.labelColors,c=0,u=l?Ut(t,"left"):0;i.textAlign=o,i.textBaseline="top",i.font=ce.fontString(a,t._bodyFontStyle,t._bodyFontFamily),e.x=Ut(t,o);var p=function(t){i.fillText(t,e.x+c,e.y),e.y+=a+s};i.fillStyle=t.bodyFontColor,ce.each(t.beforeBody,p),c=l&&"right"!==o?"center"===o?a/2+1:a+2:0,ce.each(r,(function(s,o){n=t.labelTextColors[o],i.fillStyle=n,ce.each(s.before,p),ce.each(s.lines,(function(s){l&&(i.fillStyle=t.legendColorBackground,i.fillRect(u,e.y,a,a),i.lineWidth=1,i.strokeStyle=d[o].borderColor,i.strokeRect(u,e.y,a,a),i.fillStyle=d[o].backgroundColor,i.fillRect(u+1,e.y+1,a-2,a-2),i.fillStyle=n),p(s)})),ce.each(s.after,p)})),c=0,ce.each(t.afterBody,p),e.y-=s},drawFooter:function(e,t,i){var n=t.footer;n.length&&(e.x=Ut(t,t._footerAlign),e.y+=t.footerMarginTop,i.textAlign=t._footerAlign,i.textBaseline="top",i.fillStyle=t.footerFontColor,i.font=ce.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),ce.each(n,(function(n){i.fillText(n,e.x,e.y),e.y+=t.footerFontSize+t.footerSpacing})))},drawBackground:function(e,t,i,n){i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor,i.lineWidth=t.borderWidth;var a=t.xAlign,s=t.yAlign,o=e.x,r=e.y,l=n.width,d=n.height,c=t.cornerRadius;i.beginPath(),i.moveTo(o+c,r),"top"===s&&this.drawCaret(e,n),i.lineTo(o+l-c,r),i.quadraticCurveTo(o+l,r,o+l,r+c),"center"===s&&"right"===a&&this.drawCaret(e,n),i.lineTo(o+l,r+d-c),i.quadraticCurveTo(o+l,r+d,o+l-c,r+d),"bottom"===s&&this.drawCaret(e,n),i.lineTo(o+c,r+d),i.quadraticCurveTo(o,r+d,o,r+d-c),"center"===s&&"left"===a&&this.drawCaret(e,n),i.lineTo(o,r+c),i.quadraticCurveTo(o,r,o+c,r),i.closePath(),i.fill(),t.borderWidth>0&&i.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var i={width:t.width,height:t.height},n={x:t.x,y:t.y},a=Math.abs(t.opacity<.001)?0:t.opacity,s=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&s&&(e.save(),e.globalAlpha=a,this.drawBackground(n,t,e,i),n.y+=t.yPadding,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),e.restore())}},handleEvent:function(e){var t,i=this,n=i._options;return i._lastActive=i._lastActive||[],"mouseout"===e.type?i._active=[]:i._active=i._chart.getElementsAtEventForMode(e,n.mode,n),(t=!ce.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:e.x,y:e.y},i.update(!0),i.pivot())),t}}),Vt=Rt,Yt=Kt;Yt.positioners=Vt;var Jt=ce.valueOrDefault;function Xt(){return ce.merge({},[].slice.call(arguments),{merger:function(e,t,i,n){if("xAxes"===e||"yAxes"===e){var a,s,o,r=i[e].length;for(t[e]||(t[e]=[]),a=0;a<r;++a)o=i[e][a],s=Jt(o.type,"xAxes"===e?"category":"linear"),a>=t[e].length&&t[e].push({}),!t[e][a].type||o.type&&o.type!==t[e][a].type?ce.merge(t[e][a],[Ft.getScaleDefaults(s),o]):ce.merge(t[e][a],o)}else ce._merger(e,t,i,n)}})}function Gt(){return ce.merge({},[].slice.call(arguments),{merger:function(e,t,i,n){var a=t[e]||{},s=i[e];"scales"===e?t[e]=Xt(a,s):"scale"===e?t[e]=ce.merge(a,[Ft.getScaleDefaults(s.type),s]):ce._merger(e,t,i,n)}})}function Zt(e){return"top"===e||"bottom"===e}re._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Qt=function(e,t){return this.construct(e,t),this};ce.extend(Qt.prototype,{construct:function(e,t){var i=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Gt(re.global,re[e.type],e.options||{}),e}(t);var n=It.acquireContext(e,t),a=n&&n.canvas,s=a&&a.height,o=a&&a.width;i.id=ce.uid(),i.ctx=n,i.canvas=a,i.config=t,i.width=o,i.height=s,i.aspectRatio=s?o/s:null,i.options=t.options,i._bufferedRender=!1,i.chart=i,i.controller=i,Qt.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(e){i.config.data=e}}),n&&a?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Lt.notify(e,"beforeInit"),ce.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.initToolTip(),Lt.notify(e,"afterInit"),e},clear:function(){return ce.canvas.clear(this),this},stop:function(){return ge.cancelAnimation(this),this},resize:function(e){var t=this,i=t.options,n=t.canvas,a=i.maintainAspectRatio&&t.aspectRatio||null,s=Math.max(0,Math.floor(ce.getMaximumWidth(n))),o=Math.max(0,Math.floor(a?s/a:ce.getMaximumHeight(n)));if((t.width!==s||t.height!==o)&&(n.width=t.width=s,n.height=t.height=o,n.style.width=s+"px",n.style.height=o+"px",ce.retinaScale(t,i.devicePixelRatio),!e)){var r={width:s,height:o};Lt.notify(t,"resize",[r]),i.onResize&&i.onResize(t,r),t.stop(),t.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},i=e.scale;ce.each(t.xAxes,(function(e,t){e.id=e.id||"x-axis-"+t})),ce.each(t.yAxes,(function(e,t){e.id=e.id||"y-axis-"+t})),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,i=e.scales||{},n=[],a=Object.keys(i).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(n=n.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&n.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ce.each(n,(function(t){var n=t.options,s=n.id,o=Jt(n.type,t.dtype);Zt(n.position)!==Zt(t.dposition)&&(n.position=t.dposition),a[s]=!0;var r=null;if(s in i&&i[s].type===o)(r=i[s]).options=n,r.ctx=e.ctx,r.chart=e;else{var l=Ft.getScaleConstructor(o);if(!l)return;r=new l({id:s,type:o,options:n,ctx:e.ctx,chart:e}),i[r.id]=r}r.mergeTicksOptions(),t.isDefault&&(e.scale=r)})),ce.each(a,(function(e,t){e||delete i[t]})),e.scales=i,Ft.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e=this,t=[];return ce.each(e.data.datasets,(function(i,n){var a=e.getDatasetMeta(n),s=i.type||e.config.type;if(a.type&&a.type!==s&&(e.destroyDatasetMeta(n),a=e.getDatasetMeta(n)),a.type=s,a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{var o=dt[a.type];if(void 0===o)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new o(e,n),t.push(a.controller)}}),e),t},resetElements:function(){var e=this;ce.each(e.data.datasets,(function(t,i){e.getDatasetMeta(i).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,i,n=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),i=(t=n).options,ce.each(t.scales,(function(e){$t.removeBox(t,e)})),i=Gt(re.global,re[t.config.type],i),t.options=t.config.options=i,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=i.tooltips,t.tooltip.initialize(),Lt._invalidate(n),!1!==Lt.notify(n,"beforeUpdate")){n.tooltip._data=n.data;var a=n.buildOrUpdateControllers();ce.each(n.data.datasets,(function(e,t){n.getDatasetMeta(t).controller.buildOrUpdateElements()}),n),n.updateLayout(),n.options.animation&&n.options.animation.duration&&ce.each(a,(function(e){e.reset()})),n.updateDatasets(),n.tooltip.initialize(),n.lastActive=[],Lt.notify(n,"afterUpdate"),n._bufferedRender?n._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:n.render(e)}},updateLayout:function(){!1!==Lt.notify(this,"beforeLayout")&&($t.update(this,this.width,this.height),Lt.notify(this,"afterScaleUpdate"),Lt.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Lt.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Lt.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),i={meta:t,index:e};!1!==Lt.notify(this,"beforeDatasetUpdate",[i])&&(t.controller.update(),Lt.notify(this,"afterDatasetUpdate",[i]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var i=t.options.animation,n=Jt(e.duration,i&&i.duration),a=e.lazy;if(!1!==Lt.notify(t,"beforeRender")){var s=function(e){Lt.notify(t,"afterRender"),ce.callback(i&&i.onComplete,[e],t)};if(i&&n){var o=new be({numSteps:n/16.66,easing:e.easing||i.easing,render:function(e,t){var i=ce.easing.effects[t.easing],n=t.currentStep,a=n/t.numSteps;e.draw(i(a),a,n)},onAnimationProgress:i.onProgress,onAnimationComplete:s});ge.addAnimation(t,o,n,a)}else t.draw(),s(new be({numSteps:0,chart:t}));return t}},draw:function(e){var t=this;t.clear(),ce.isNullOrUndef(e)&&(e=1),t.transition(e),t.width<=0||t.height<=0||!1!==Lt.notify(t,"beforeDraw",[e])&&(ce.each(t.boxes,(function(e){e.draw(t.chartArea)}),t),t.drawDatasets(e),t._drawTooltip(e),Lt.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=0,i=(this.data.datasets||[]).length;t<i;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==Lt.notify(t,"beforeDatasetsDraw",[e])){for(var i=(t.data.datasets||[]).length-1;i>=0;--i)t.isDatasetVisible(i)&&t.drawDataset(i,e);Lt.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var i=this.getDatasetMeta(e),n={meta:i,index:e,easingValue:t};!1!==Lt.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(t),Lt.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,i={tooltip:t,easingValue:e};!1!==Lt.notify(this,"beforeTooltipDraw",[i])&&(t.draw(),Lt.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(e){return vt.modes.single(this,e)},getElementsAtEvent:function(e){return vt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return vt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,i){var n=vt.modes[t];return"function"==typeof n?n(this,e,i):[]},getDatasetAtEvent:function(e){return vt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var i=t._meta[this.id];return i||(i=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var e=0,t=0,i=this.data.datasets.length;t<i;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,i=this.data.datasets[e],n=i._meta&&i._meta[t];n&&(n.controller.destroy(),delete i._meta[t])},destroy:function(){var e,t,i=this,n=i.canvas;for(i.stop(),e=0,t=i.data.datasets.length;e<t;++e)i.destroyDatasetMeta(e);n&&(i.unbindEvents(),ce.canvas.clear(i),It.releaseContext(i.ctx),i.canvas=null,i.ctx=null),Lt.notify(i,"destroy"),delete Qt.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Yt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},i=function(){e.eventHandler.apply(e,arguments)};ce.each(e.options.events,(function(n){It.addEventListener(e,n,i),t[n]=i})),e.options.responsive&&(i=function(){e.resize()},It.addEventListener(e,"resize",i),t.resize=i)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ce.each(t,(function(t,i){It.removeEventListener(e,i,t)})))},updateHoverStyle:function(e,t,i){var n,a,s,o=i?"setHoverStyle":"removeHoverStyle";for(a=0,s=e.length;a<s;++a)(n=e[a])&&this.getDatasetMeta(n._datasetIndex).controller[o](n)},eventHandler:function(e){var t=this,i=t.tooltip;if(!1!==Lt.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var n=t.handleEvent(e);i&&(n=i._start?i.handleEvent(e):n|i.handleEvent(e)),Lt.notify(t,"afterEvent",[e]);var a=t._bufferedRequest;return a?t.render(a):n&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,i=this,n=i.options||{},a=n.hover;return i.lastActive=i.lastActive||[],"mouseout"===e.type?i.active=[]:i.active=i.getElementsAtEventForMode(e,a.mode,a),ce.callback(n.onHover||n.hover.onHover,[e.native,i.active],i),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(i,e.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,a.mode,!1),i.active.length&&a.mode&&i.updateHoverStyle(i.active,a.mode,!0),t=!ce.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,t}}),Qt.instances={};var ei=Qt;function ti(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function ii(e){this.options=e||{}}Qt.Controller=Qt,Qt.types={},ce.configMerge=Gt,ce.scaleMerge=Xt,ce.extend(ii.prototype,{formats:ti,parse:ti,format:ti,add:ti,diff:ti,startOf:ti,endOf:ti,_create:function(e){return e}}),ii.override=function(e){ce.extend(ii.prototype,e)};var ni={_date:ii},ai={formatters:{values:function(e){return ce.isArray(e)?e:""+e},linear:function(e,t,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var a=ce.log10(Math.abs(n)),s="";if(0!==e)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var o=ce.log10(Math.abs(e));s=e.toExponential(Math.floor(o)-Math.floor(a))}else{var r=-1*Math.floor(a);r=Math.max(Math.min(r,20),0),s=e.toFixed(r)}else s="0";return s},logarithmic:function(e,t,i){var n=e/Math.pow(10,Math.floor(ce.log10(e)));return 0===e?"0":1===n||2===n||5===n||0===t||t===i.length-1?e.toExponential():""}}},si=ce.valueOrDefault,oi=ce.valueAtIndexOrDefault;function ri(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(e[t].label);return n}function li(e,t,i){return ce.isArray(t)?ce.longestText(e,i,t):e.measureText(t).width}re._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:ai.formatters.values,minor:{},major:{}}});var di=me.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;for(var t in!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1}),e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){ce.callback(this.options.beforeUpdate,[this])},update:function(e,t,i){var n,a,s,o,r,l,d=this;for(d.beforeUpdate(),d.maxWidth=e,d.maxHeight=t,d.margins=ce.extend({left:0,right:0,top:0,bottom:0},i),d._maxLabelLines=0,d.longestLabelWidth=0,d.longestTextCache=d.longestTextCache||{},d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeDataLimits(),d.determineDataLimits(),d.afterDataLimits(),d.beforeBuildTicks(),r=d.buildTicks()||[],r=d.afterBuildTicks(r)||r,d.beforeTickToLabelConversion(),s=d.convertTicksToLabels(r)||d.ticks,d.afterTickToLabelConversion(),d.ticks=s,n=0,a=s.length;n<a;++n)o=s[n],(l=r[n])?l.label=o:r.push(l={label:o,major:!1});return d._ticks=r,d.beforeCalculateTickRotation(),d.calculateTickRotation(),d.afterCalculateTickRotation(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:function(){ce.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ce.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){ce.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ce.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ce.noop,afterDataLimits:function(){ce.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ce.callback(this.options.beforeBuildTicks,[this])},buildTicks:ce.noop,afterBuildTicks:function(e){var t=this;return ce.isArray(e)&&e.length?ce.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=ce.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){ce.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){ce.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ce.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,i=e.options.ticks,n=ri(e._ticks),a=ce.options._parseFont(i);t.font=a.string;var s=i.minRotation||0;if(n.length&&e.options.display&&e.isHorizontal())for(var o,r=ce.longestText(t,a.string,n,e.longestTextCache),l=r,d=e.getPixelForTick(1)-e.getPixelForTick(0)-6;l>d&&s<i.maxRotation;){var c=ce.toRadians(s);if(o=Math.cos(c),Math.sin(c)*r>e.maxHeight){s--;break}s++,l=o*r}e.labelRotation=s},afterCalculateTickRotation:function(){ce.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ce.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},i=ri(e._ticks),n=e.options,a=n.ticks,s=n.scaleLabel,o=n.gridLines,r=e._isVisible(),l=n.position,d=e.isHorizontal(),c=ce.options._parseFont,u=c(a),p=n.gridLines.tickMarkLength;if(t.width=d?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:r&&o.drawTicks?p:0,t.height=d?r&&o.drawTicks?p:0:e.maxHeight,s.display&&r){var h=c(s),f=ce.options.toPadding(s.padding),m=h.lineHeight+f.height;d?t.height+=m:t.width+=m}if(a.display&&r){var v=ce.longestText(e.ctx,u.string,i,e.longestTextCache),b=ce.numberOfLabelLines(i),g=.5*u.size,_=e.options.ticks.padding;if(e._maxLabelLines=b,e.longestLabelWidth=v,d){var y=ce.toRadians(e.labelRotation),$=Math.cos(y),w=Math.sin(y)*v+u.lineHeight*b+g;t.height=Math.min(e.maxHeight,t.height+w+_),e.ctx.font=u.string;var k,C,x=li(e.ctx,i[0],u.string),j=li(e.ctx,i[i.length-1],u.string),T=e.getPixelForTick(0)-e.left,E=e.right-e.getPixelForTick(i.length-1);0!==e.labelRotation?(k="bottom"===l?$*x:$*g,C="bottom"===l?$*g:$*j):(k=x/2,C=j/2),e.paddingLeft=Math.max(k-T,0)+3,e.paddingRight=Math.max(C-E,0)+3}else a.mirror?v=0:v+=_+g,t.width=Math.min(e.maxWidth,t.width+v),e.paddingTop=u.size/2,e.paddingBottom=u.size/2}e.handleMargins(),e.width=t.width,e.height=t.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){ce.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(ce.isNullOrUndef(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:ce.noop,getPixelForValue:ce.noop,getValueForPixel:ce.noop,getPixelForTick:function(e){var t=this,i=t.options.offset;if(t.isHorizontal()){var n=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(i?0:1),1),a=n*e+t.paddingLeft;return i&&(a+=n/2),t.left+a+(t.isFullWidth()?t.margins.left:0)}var s=t.height-(t.paddingTop+t.paddingBottom);return t.top+e*(s/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;if(t.isHorizontal()){var i=(t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft;return t.left+i+(t.isFullWidth()?t.margins.left:0)}return t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,i,n=this,a=n.isHorizontal(),s=n.options.ticks.minor,o=e.length,r=!1,l=s.maxTicksLimit,d=n._tickSize()*(o-1),c=a?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),u=[];for(d>c&&(r=1+Math.floor(d/c)),o>l&&(r=Math.max(r,1+Math.floor(o/l))),t=0;t<o;t++)i=e[t],r>1&&t%r>0&&delete i.label,u.push(i);return u},_tickSize:function(){var e=this,t=e.isHorizontal(),i=e.options.ticks.minor,n=ce.toRadians(e.labelRotation),a=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),o=i.autoSkipPadding||0,r=e.longestLabelWidth+o||0,l=ce.options._parseFont(i),d=e._maxLabelLines*l.lineHeight+o||0;return t?d*a>r*s?r/a:d/s:d*s<r*a?d/a:r/s},_isVisible:function(){var e,t,i,n=this.chart,a=this.options.display;if("auto"!==a)return!!a;for(e=0,t=n.data.datasets.length;e<t;++e)if(n.isDatasetVisible(e)&&((i=n.getDatasetMeta(e)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},draw:function(e){var t=this,i=t.options;if(t._isVisible()){var n,a,s,o=t.chart,r=t.ctx,l=re.global.defaultFontColor,d=i.ticks.minor,c=i.ticks.major||d,u=i.gridLines,p=i.scaleLabel,h=i.position,f=0!==t.labelRotation,m=d.mirror,v=t.isHorizontal(),b=ce.options._parseFont,g=d.display&&d.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),_=si(d.fontColor,l),y=b(d),$=y.lineHeight,w=si(c.fontColor,l),k=b(c),C=d.padding,x=d.labelOffset,j=u.drawTicks?u.tickMarkLength:0,T=si(p.fontColor,l),E=b(p),S=ce.options.toPadding(p.padding),D=ce.toRadians(t.labelRotation),O=[],P=u.drawBorder?oi(u.lineWidth,0,0):0,A=ce._alignPixel;if("top"===h?(n=A(o,t.bottom,P),a=t.bottom-j,s=n-P/2):"bottom"===h?(n=A(o,t.top,P),a=n+P/2,s=t.top+j):"left"===h?(n=A(o,t.right,P),a=t.right-j,s=n-P/2):(n=A(o,t.left,P),a=n+P/2,s=t.left+j),ce.each(g,(function(n,r){if(!ce.isNullOrUndef(n.label)){var l,d,c,p,b,g,_,y,w,k,T,E,S,N,M,I,L=n.label;r===t.zeroLineIndex&&i.offset===u.offsetGridLines?(l=u.zeroLineWidth,d=u.zeroLineColor,c=u.zeroLineBorderDash||[],p=u.zeroLineBorderDashOffset||0):(l=oi(u.lineWidth,r),d=oi(u.color,r),c=u.borderDash||[],p=u.borderDashOffset||0);var F=ce.isArray(L)?L.length:1,B=function(e,t,i){var n=e.getPixelForTick(t);return i&&(1===e.getTicks().length?n-=e.isHorizontal()?Math.max(n-e.left,e.right-n):Math.max(n-e.top,e.bottom-n):n-=0===t?(e.getPixelForTick(1)-n)/2:(n-e.getPixelForTick(t-1))/2),n}(t,r,u.offsetGridLines);if(v){var R=j+C;B<t.left-1e-7&&(d="rgba(0,0,0,0)"),b=_=w=T=A(o,B,l),g=a,y=s,S=t.getPixelForTick(r)+x,"top"===h?(k=A(o,e.top,P)+P/2,E=e.bottom,M=((f?1:.5)-F)*$,I=f?"left":"center",N=t.bottom-R):(k=e.top,E=A(o,e.bottom,P)-P/2,M=(f?0:.5)*$,I=f?"right":"center",N=t.top+R)}else{var H=(m?0:j)+C;B<t.top-1e-7&&(d="rgba(0,0,0,0)"),b=a,_=s,g=y=k=E=A(o,B,l),N=t.getPixelForTick(r)+x,M=(1-F)*$/2,"left"===h?(w=A(o,e.left,P)+P/2,T=e.right,I=m?"left":"right",S=t.right-H):(w=e.left,T=A(o,e.right,P)-P/2,I=m?"right":"left",S=t.left+H)}O.push({tx1:b,ty1:g,tx2:_,ty2:y,x1:w,y1:k,x2:T,y2:E,labelX:S,labelY:N,glWidth:l,glColor:d,glBorderDash:c,glBorderDashOffset:p,rotation:-1*D,label:L,major:n.major,textOffset:M,textAlign:I})}})),ce.each(O,(function(e){var t=e.glWidth,i=e.glColor;if(u.display&&t&&i&&(r.save(),r.lineWidth=t,r.strokeStyle=i,r.setLineDash&&(r.setLineDash(e.glBorderDash),r.lineDashOffset=e.glBorderDashOffset),r.beginPath(),u.drawTicks&&(r.moveTo(e.tx1,e.ty1),r.lineTo(e.tx2,e.ty2)),u.drawOnChartArea&&(r.moveTo(e.x1,e.y1),r.lineTo(e.x2,e.y2)),r.stroke(),r.restore()),d.display){r.save(),r.translate(e.labelX,e.labelY),r.rotate(e.rotation),r.font=e.major?k.string:y.string,r.fillStyle=e.major?w:_,r.textBaseline="middle",r.textAlign=e.textAlign;var n=e.label,a=e.textOffset;if(ce.isArray(n))for(var s=0;s<n.length;++s)r.fillText(""+n[s],0,a),a+=$;else r.fillText(n,0,a);r.restore()}})),p.display){var N,M,I=0,L=E.lineHeight/2;if(v)N=t.left+(t.right-t.left)/2,M="bottom"===h?t.bottom-L-S.bottom:t.top+L+S.top;else{var F="left"===h;N=F?t.left+L+S.top:t.right-L-S.top,M=t.top+(t.bottom-t.top)/2,I=F?-.5*Math.PI:.5*Math.PI}r.save(),r.translate(N,M),r.rotate(I),r.textAlign="center",r.textBaseline="middle",r.fillStyle=T,r.font=E.string,r.fillText(p.labelString,0,0),r.restore()}if(P){var B,R,H,q,z=P,U=oi(u.lineWidth,g.length-1,0);v?(B=A(o,t.left,z)-z/2,R=A(o,t.right,U)+U/2,H=q=n):(H=A(o,t.top,z)-z/2,q=A(o,t.bottom,U)+U/2,B=R=n),r.lineWidth=P,r.strokeStyle=oi(u.color,0),r.beginPath(),r.moveTo(B,H),r.lineTo(R,q),r.stroke()}}}}),ci=di.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,t=this,i=t.getLabels();t.minIndex=0,t.maxIndex=i.length-1,void 0!==t.options.ticks.min&&(e=i.indexOf(t.options.ticks.min),t.minIndex=-1!==e?e:t.minIndex),void 0!==t.options.ticks.max&&(e=i.indexOf(t.options.ticks.max),t.maxIndex=-1!==e?e:t.maxIndex),t.min=i[t.minIndex],t.max=i[t.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var i=this,n=i.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===i.id?i.getRightValue(n.data.datasets[t].data[e]):i.ticks[e-i.minIndex]},getPixelForValue:function(e,t){var i,n=this,a=n.options.offset,s=Math.max(n.maxIndex+1-n.minIndex-(a?0:1),1);if(null!=e&&(i=n.isHorizontal()?e.x:e.y),void 0!==i||void 0!==e&&isNaN(t)){e=i||e;var o=n.getLabels().indexOf(e);t=-1!==o?o:t}if(n.isHorizontal()){var r=n.width/s,l=r*(t-n.minIndex);return a&&(l+=r/2),n.left+l}var d=n.height/s,c=d*(t-n.minIndex);return a&&(c+=d/2),n.top+c},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,i=t.options.offset,n=Math.max(t._ticks.length-(i?0:1),1),a=t.isHorizontal(),s=(a?t.width:t.height)/n;return e-=a?t.left:t.top,i&&(e-=s/2),(e<=0?0:Math.round(e/s))+t.minIndex},getBasePixel:function(){return this.bottom}});ci._defaults={position:"bottom"};var ui=ce.noop,pi=ce.isNullOrUndef,hi=di.extend({getRightValue:function(e){return"string"==typeof e?+e:di.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var i=ce.sign(e.min),n=ce.sign(e.max);i<0&&n<0?e.max=0:i>0&&n>0&&(e.min=0)}var a=void 0!==t.min||void 0!==t.suggestedMin,s=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),a!==s&&e.min>=e.max&&(a?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,i=t.stepSize,n=t.maxTicksLimit;return i?e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(e=this._computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ui,buildTicks:function(){var e=this,t=e.options.ticks,i=e.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:t.min,max:t.max,precision:t.precision,stepSize:ce.valueOrDefault(t.fixedStepSize,t.stepSize)},a=e.ticks=function(e,t){var i,n,a,s,o=[],r=e.stepSize,l=r||1,d=e.maxTicks-1,c=e.min,u=e.max,p=e.precision,h=t.min,f=t.max,m=ce.niceNum((f-h)/d/l)*l;if(m<1e-14&&pi(c)&&pi(u))return[h,f];(s=Math.ceil(f/m)-Math.floor(h/m))>d&&(m=ce.niceNum(s*m/d/l)*l),r||pi(p)?i=Math.pow(10,ce._decimalPlaces(m)):(i=Math.pow(10,p),m=Math.ceil(m*i)/i),n=Math.floor(h/m)*m,a=Math.ceil(f/m)*m,r&&(!pi(c)&&ce.almostWhole(c/m,m/1e3)&&(n=c),!pi(u)&&ce.almostWhole(u/m,m/1e3)&&(a=u)),s=(a-n)/m,s=ce.almostEquals(s,Math.round(s),m/1e3)?Math.round(s):Math.ceil(s),n=Math.round(n*i)/i,a=Math.round(a*i)/i,o.push(pi(c)?n:c);for(var v=1;v<s;++v)o.push(Math.round((n+v*m)*i)/i);return o.push(pi(u)?a:u),o}(n,e);e.handleDirectionalChanges(),e.max=ce.max(a),e.min=ce.min(a),t.reverse?(a.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),di.prototype.convertTicksToLabels.call(e)}}),fi={position:"left",ticks:{callback:ai.formatters.linear}},mi=hi.extend({determineDataLimits:function(){var e=this,t=e.options,i=e.chart,n=i.data.datasets,a=e.isHorizontal();function s(t){return a?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null;var o=t.stacked;if(void 0===o&&ce.each(n,(function(e,t){if(!o){var n=i.getDatasetMeta(t);i.isDatasetVisible(t)&&s(n)&&void 0!==n.stack&&(o=!0)}})),t.stacked||o){var r={};ce.each(n,(function(n,a){var o=i.getDatasetMeta(a),l=[o.type,void 0===t.stacked&&void 0===o.stack?a:"",o.stack].join(".");void 0===r[l]&&(r[l]={positiveValues:[],negativeValues:[]});var d=r[l].positiveValues,c=r[l].negativeValues;i.isDatasetVisible(a)&&s(o)&&ce.each(n.data,(function(i,n){var a=+e.getRightValue(i);isNaN(a)||o.data[n].hidden||(d[n]=d[n]||0,c[n]=c[n]||0,t.relativePoints?d[n]=100:a<0?c[n]+=a:d[n]+=a)}))})),ce.each(r,(function(t){var i=t.positiveValues.concat(t.negativeValues),n=ce.min(i),a=ce.max(i);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?a:Math.max(e.max,a)}))}else ce.each(n,(function(t,n){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&s(a)&&ce.each(t.data,(function(t,i){var n=+e.getRightValue(t);isNaN(n)||a.data[i].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n))}))}));e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=ce.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this,i=t.start,n=+t.getRightValue(e),a=t.end-i;return t.isHorizontal()?t.left+t.width/a*(n-i):t.bottom-t.height/a*(n-i)},getValueForPixel:function(e){var t=this,i=t.isHorizontal(),n=i?t.width:t.height,a=(i?e-t.left:t.bottom-e)/n;return t.start+(t.end-t.start)*a},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}}),vi=fi;mi._defaults=vi;var bi=ce.valueOrDefault,gi={position:"left",ticks:{callback:ai.formatters.logarithmic}};function _i(e,t){return ce.isFinite(e)&&e>=0?e:t}var yi=di.extend({determineDataLimits:function(){var e=this,t=e.options,i=e.chart,n=i.data.datasets,a=e.isHorizontal();function s(t){return a?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null,e.minNotZero=null;var o=t.stacked;if(void 0===o&&ce.each(n,(function(e,t){if(!o){var n=i.getDatasetMeta(t);i.isDatasetVisible(t)&&s(n)&&void 0!==n.stack&&(o=!0)}})),t.stacked||o){var r={};ce.each(n,(function(n,a){var o=i.getDatasetMeta(a),l=[o.type,void 0===t.stacked&&void 0===o.stack?a:"",o.stack].join(".");i.isDatasetVisible(a)&&s(o)&&(void 0===r[l]&&(r[l]=[]),ce.each(n.data,(function(t,i){var n=r[l],a=+e.getRightValue(t);isNaN(a)||o.data[i].hidden||a<0||(n[i]=n[i]||0,n[i]+=a)})))})),ce.each(r,(function(t){if(t.length>0){var i=ce.min(t),n=ce.max(t);e.min=null===e.min?i:Math.min(e.min,i),e.max=null===e.max?n:Math.max(e.max,n)}}))}else ce.each(n,(function(t,n){var a=i.getDatasetMeta(n);i.isDatasetVisible(n)&&s(a)&&ce.each(t.data,(function(t,i){var n=+e.getRightValue(t);isNaN(n)||a.data[i].hidden||n<0||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n),0!==n&&(null===e.minNotZero||n<e.minNotZero)&&(e.minNotZero=n))}))}));this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=_i(t.min,e.min),e.max=_i(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(ce.log10(e.min))-1),e.max=Math.pow(10,Math.floor(ce.log10(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(ce.log10(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(ce.log10(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(ce.log10(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,i=!e.isHorizontal(),n={min:_i(t.min),max:_i(t.max)},a=e.ticks=function(e,t){var i,n,a=[],s=bi(e.min,Math.pow(10,Math.floor(ce.log10(t.min)))),o=Math.floor(ce.log10(t.max)),r=Math.ceil(t.max/Math.pow(10,o));0===s?(i=Math.floor(ce.log10(t.minNotZero)),n=Math.floor(t.minNotZero/Math.pow(10,i)),a.push(s),s=n*Math.pow(10,i)):(i=Math.floor(ce.log10(s)),n=Math.floor(s/Math.pow(10,i)));var l=i<0?Math.pow(10,Math.abs(i)):1;do{a.push(s),10==++n&&(n=1,l=++i>=0?1:l),s=Math.round(n*Math.pow(10,i)*l)/l}while(i<o||i===o&&n<r);var d=bi(e.max,s);return a.push(d),a}(n,e);e.max=ce.max(a),e.min=ce.min(a),t.reverse?(i=!i,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),i&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),di.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},_getFirstTickValue:function(e){var t=Math.floor(ce.log10(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},getPixelForValue:function(e){var t,i,n,a,s,o=this,r=o.options.ticks,l=r.reverse,d=ce.log10,c=o._getFirstTickValue(o.minNotZero),u=0;return e=+o.getRightValue(e),l?(n=o.end,a=o.start,s=-1):(n=o.start,a=o.end,s=1),o.isHorizontal()?(t=o.width,i=l?o.right:o.left):(t=o.height,s*=-1,i=l?o.top:o.bottom),e!==n&&(0===n&&(t-=u=bi(r.fontSize,re.global.defaultFontSize),n=c),0!==e&&(u+=t/(d(a)-d(n))*(d(e)-d(n))),i+=s*u),i},getValueForPixel:function(e){var t,i,n,a,s=this,o=s.options.ticks,r=o.reverse,l=ce.log10,d=s._getFirstTickValue(s.minNotZero);if(r?(i=s.end,n=s.start):(i=s.start,n=s.end),s.isHorizontal()?(t=s.width,a=r?s.right-e:e-s.left):(t=s.height,a=r?e-s.top:s.bottom-e),a!==i){if(0===i){var c=bi(o.fontSize,re.global.defaultFontSize);a-=c,t-=c,i=d}a*=l(n)-l(i),a/=t,a=Math.pow(10,l(i)+a)}return a}}),$i=gi;yi._defaults=$i;var wi=ce.valueOrDefault,ki=ce.valueAtIndexOrDefault,Ci=ce.options.resolve,xi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:ai.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function ji(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function Ti(e){var t=e.ticks;return t.display&&e.display?wi(t.fontSize,re.global.defaultFontSize)+2*t.backdropPaddingY:0}function Ei(e,t,i,n,a){return e===n||e===a?{start:t-i/2,end:t+i/2}:e<n||e>a?{start:t-i,end:t}:{start:t,end:t+i}}function Si(e){return 0===e||180===e?"center":e<180?"left":"right"}function Di(e,t,i,n){var a,s,o=i.y+n/2;if(ce.isArray(t))for(a=0,s=t.length;a<s;++a)e.fillText(t[a],i.x,o),o+=n;else e.fillText(t,i.x,o)}function Oi(e,t,i){90===e||270===e?i.y-=t.h/2:(e>270||e<90)&&(i.y-=t.h)}function Pi(e){return ce.isNumber(e)?e:0}var Ai=hi.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Ti(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;ce.each(t.data.datasets,(function(a,s){if(t.isDatasetVisible(s)){var o=t.getDatasetMeta(s);ce.each(a.data,(function(t,a){var s=+e.getRightValue(t);isNaN(s)||o.data[a].hidden||(i=Math.min(s,i),n=Math.max(s,n))}))}})),e.min=i===Number.POSITIVE_INFINITY?0:i,e.max=n===Number.NEGATIVE_INFINITY?0:n,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Ti(this.options))},convertTicksToLabels:function(){var e=this;hi.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,i,n,a=ce.options._parseFont(e.options.pointLabels),s={l:0,r:e.width,t:0,b:e.height-e.paddingTop},o={};e.ctx.font=a.string,e._pointLabelSizes=[];var r,l,d,c=ji(e);for(t=0;t<c;t++){n=e.getPointPosition(t,e.drawingArea+5),r=e.ctx,l=a.lineHeight,d=e.pointLabels[t]||"",i=ce.isArray(d)?{w:ce.longestText(r,r.font,d),h:d.length*l}:{w:r.measureText(d).width,h:l},e._pointLabelSizes[t]=i;var u=e.getIndexAngle(t),p=ce.toDegrees(u)%360,h=Ei(p,n.x,i.w,0,180),f=Ei(p,n.y,i.h,90,270);h.start<s.l&&(s.l=h.start,o.l=u),h.end>s.r&&(s.r=h.end,o.r=u),f.start<s.t&&(s.t=f.start,o.t=u),f.end>s.b&&(s.b=f.end,o.b=u)}e.setReductions(e.drawingArea,s,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,i){var n=this,a=t.l/Math.sin(i.l),s=Math.max(t.r-n.width,0)/Math.sin(i.r),o=-t.t/Math.cos(i.t),r=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(i.b);a=Pi(a),s=Pi(s),o=Pi(o),r=Pi(r),n.drawingArea=Math.min(Math.floor(e-(a+s)/2),Math.floor(e-(o+r)/2)),n.setCenterPoint(a,s,o,r)},setCenterPoint:function(e,t,i,n){var a=this,s=a.width-t-a.drawingArea,o=e+a.drawingArea,r=i+a.drawingArea,l=a.height-a.paddingTop-n-a.drawingArea;a.xCenter=Math.floor((o+s)/2+a.left),a.yCenter=Math.floor((r+l)/2+a.top+a.paddingTop)},getIndexAngle:function(e){return e*(2*Math.PI/ji(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var i=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*i:(e-t.min)*i},getPointPosition:function(e,t){var i=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this.min,t=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0)},draw:function(){var e=this,t=e.options,i=t.gridLines,n=t.ticks;if(t.display){var a=e.ctx,s=this.getIndexAngle(0),o=ce.options._parseFont(n);(t.angleLines.display||t.pointLabels.display)&&function(e){var t=e.ctx,i=e.options,n=i.angleLines,a=i.gridLines,s=i.pointLabels,o=wi(n.lineWidth,a.lineWidth),r=wi(n.color,a.color),l=Ti(i);t.save(),t.lineWidth=o,t.strokeStyle=r,t.setLineDash&&(t.setLineDash(Ci([n.borderDash,a.borderDash,[]])),t.lineDashOffset=Ci([n.borderDashOffset,a.borderDashOffset,0]));var d=e.getDistanceFromCenterForValue(i.ticks.reverse?e.min:e.max),c=ce.options._parseFont(s);t.font=c.string,t.textBaseline="middle";for(var u=ji(e)-1;u>=0;u--){if(n.display&&o&&r){var p=e.getPointPosition(u,d);t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(p.x,p.y),t.stroke()}if(s.display){var h=0===u?l/2:0,f=e.getPointPosition(u,d+h+5),m=ki(s.fontColor,u,re.global.defaultFontColor);t.fillStyle=m;var v=e.getIndexAngle(u),b=ce.toDegrees(v);t.textAlign=Si(b),Oi(b,e._pointLabelSizes[u],f),Di(t,e.pointLabels[u]||"",f,c.lineHeight)}}t.restore()}(e),ce.each(e.ticks,(function(t,r){if(r>0||n.reverse){var l=e.getDistanceFromCenterForValue(e.ticksAsNumbers[r]);if(i.display&&0!==r&&function(e,t,i,n){var a,s=e.ctx,o=t.circular,r=ji(e),l=ki(t.color,n-1),d=ki(t.lineWidth,n-1);if((o||r)&&l&&d){if(s.save(),s.strokeStyle=l,s.lineWidth=d,s.setLineDash&&(s.setLineDash(t.borderDash||[]),s.lineDashOffset=t.borderDashOffset||0),s.beginPath(),o)s.arc(e.xCenter,e.yCenter,i,0,2*Math.PI);else{a=e.getPointPosition(0,i),s.moveTo(a.x,a.y);for(var c=1;c<r;c++)a=e.getPointPosition(c,i),s.lineTo(a.x,a.y)}s.closePath(),s.stroke(),s.restore()}}(e,i,l,r),n.display){var d=wi(n.fontColor,re.global.defaultFontColor);if(a.font=o.string,a.save(),a.translate(e.xCenter,e.yCenter),a.rotate(s),n.showLabelBackdrop){var c=a.measureText(t).width;a.fillStyle=n.backdropColor,a.fillRect(-c/2-n.backdropPaddingX,-l-o.size/2-n.backdropPaddingY,c+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=d,a.fillText(t,0,-l),a.restore()}}}))}}}),Ni=xi;Ai._defaults=Ni;var Mi=ce.valueOrDefault,Ii=Number.MIN_SAFE_INTEGER||-9007199254740991,Li=Number.MAX_SAFE_INTEGER||9007199254740991,Fi={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},Bi=Object.keys(Fi);function Ri(e,t){return e-t}function Hi(e){var t,i,n,a={},s=[];for(t=0,i=e.length;t<i;++t)a[n=e[t]]||(a[n]=!0,s.push(n));return s}function qi(e,t,i,n){var a=function(e,t,i){for(var n,a,s,o=0,r=e.length-1;o>=0&&o<=r;){if(a=e[(n=o+r>>1)-1]||null,s=e[n],!a)return{lo:null,hi:s};if(s[t]<i)o=n+1;else{if(!(a[t]>i))return{lo:a,hi:s};r=n-1}}return{lo:s,hi:null}}(e,t,i),s=a.lo?a.hi?a.lo:e[e.length-2]:e[0],o=a.lo?a.hi?a.hi:e[e.length-1]:e[1],r=o[t]-s[t],l=r?(i-s[t])/r:0,d=(o[n]-s[n])*l;return s[n]+d}function zi(e,t){var i=e._adapter,n=e.options.time,a=n.parser,s=a||n.format,o=t;return"function"==typeof a&&(o=a(o)),ce.isFinite(o)||(o="string"==typeof s?i.parse(o,s):i.parse(o)),null!==o?+o:(a||"function"!=typeof s||(o=s(t),ce.isFinite(o)||(o=i.parse(o))),o)}function Ui(e,t){if(ce.isNullOrUndef(t))return null;var i=e.options.time,n=zi(e,e.getRightValue(t));return null===n||i.round&&(n=+e._adapter.startOf(n,i.round)),n}function Wi(e){for(var t=Bi.indexOf(e)+1,i=Bi.length;t<i;++t)if(Fi[Bi[t]].common)return Bi[t]}var Ki=di.extend({initialize:function(){this.mergeTicksOptions(),di.prototype.initialize.call(this)},update:function(){var e=this.options,t=e.time||(e.time={}),i=this._adapter=new ni._date(e.adapters.date);return t.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ce.mergeIf(t.displayFormats,i.formats()),di.prototype.update.apply(this,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),di.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,i,n,a,s,o=this,r=o.chart,l=o._adapter,d=o.options.time,c=d.unit||"day",u=Li,p=Ii,h=[],f=[],m=[],v=r.data.labels||[];for(e=0,i=v.length;e<i;++e)m.push(Ui(o,v[e]));for(e=0,i=(r.data.datasets||[]).length;e<i;++e)if(r.isDatasetVisible(e))if(a=r.data.datasets[e].data,ce.isObject(a[0]))for(f[e]=[],t=0,n=a.length;t<n;++t)s=Ui(o,a[t]),h.push(s),f[e][t]=s;else{for(t=0,n=m.length;t<n;++t)h.push(m[t]);f[e]=m.slice(0)}else f[e]=[];m.length&&(m=Hi(m).sort(Ri),u=Math.min(u,m[0]),p=Math.max(p,m[m.length-1])),h.length&&(h=Hi(h).sort(Ri),u=Math.min(u,h[0]),p=Math.max(p,h[h.length-1])),u=Ui(o,d.min)||u,p=Ui(o,d.max)||p,u=u===Li?+l.startOf(Date.now(),c):u,p=p===Ii?+l.endOf(Date.now(),c)+1:p,o.min=Math.min(u,p),o.max=Math.max(u+1,p),o._horizontal=o.isHorizontal(),o._table=[],o._timestamps={data:h,datasets:f,labels:m}},buildTicks:function(){var e,t,i,n=this,a=n.min,s=n.max,o=n.options,r=o.time,l=[],d=[];switch(o.ticks.source){case"data":l=n._timestamps.data;break;case"labels":l=n._timestamps.labels;break;case"auto":default:l=function(e,t,i,n){var a,s=e._adapter,o=e.options,r=o.time,l=r.unit||function(e,t,i,n){var a,s,o,r=Bi.length;for(a=Bi.indexOf(e);a<r-1;++a)if(o=(s=Fi[Bi[a]]).steps?s.steps[s.steps.length-1]:Li,s.common&&Math.ceil((i-t)/(o*s.size))<=n)return Bi[a];return Bi[r-1]}(r.minUnit,t,i,n),d=Wi(l),c=Mi(r.stepSize,r.unitStepSize),u="week"===l&&r.isoWeekday,p=o.ticks.major.enabled,h=Fi[l],f=t,m=i,v=[];for(c||(c=function(e,t,i,n){var a,s,o,r=t-e,l=Fi[i],d=l.size,c=l.steps;if(!c)return Math.ceil(r/(n*d));for(a=0,s=c.length;a<s&&(o=c[a],!(Math.ceil(r/(d*o))<=n));++a);return o}(t,i,l,n)),u&&(f=+s.startOf(f,"isoWeek",u),m=+s.startOf(m,"isoWeek",u)),f=+s.startOf(f,u?"day":l),(m=+s.startOf(m,u?"day":l))<i&&(m=+s.add(m,1,l)),a=f,p&&d&&!u&&!r.round&&(a=+s.startOf(a,d),a=+s.add(a,~~((f-a)/(h.size*c))*c,l));a<m;a=+s.add(a,c,l))v.push(+a);return v.push(+a),v}(n,a,s,n.getLabelCapacity(a))}for("ticks"===o.bounds&&l.length&&(a=l[0],s=l[l.length-1]),a=Ui(n,r.min)||a,s=Ui(n,r.max)||s,e=0,t=l.length;e<t;++e)(i=l[e])>=a&&i<=s&&d.push(i);return n.min=a,n.max=s,n._unit=r.unit||function(e,t,i,n,a){var s,o;for(s=Bi.length-1;s>=Bi.indexOf(i);s--)if(o=Bi[s],Fi[o].common&&e._adapter.diff(a,n,o)>=t.length)return o;return Bi[i?Bi.indexOf(i):0]}(n,d,r.minUnit,n.min,n.max),n._majorUnit=Wi(n._unit),n._table=function(e,t,i,n){if("linear"===n||!e.length)return[{time:t,pos:0},{time:i,pos:1}];var a,s,o,r,l,d=[],c=[t];for(a=0,s=e.length;a<s;++a)(r=e[a])>t&&r<i&&c.push(r);for(c.push(i),a=0,s=c.length;a<s;++a)l=c[a+1],o=c[a-1],r=c[a],void 0!==o&&void 0!==l&&Math.round((l+o)/2)===r||d.push({time:r,pos:a/(s-1)});return d}(n._timestamps.data,a,s,o.distribution),n._offsets=function(e,t,i,n,a){var s,o,r=0,l=0;return a.offset&&t.length&&(a.time.min||(s=qi(e,"time",t[0],"pos"),r=1===t.length?1-s:(qi(e,"time",t[1],"pos")-s)/2),a.time.max||(o=qi(e,"time",t[t.length-1],"pos"),l=1===t.length?o:(o-qi(e,"time",t[t.length-2],"pos"))/2)),{start:r,end:l}}(n._table,d,0,0,o),o.ticks.reverse&&d.reverse(),function(e,t,i){var n,a,s,o,r=[];for(n=0,a=t.length;n<a;++n)s=t[n],o=!!i&&s===+e._adapter.startOf(s,i),r.push({value:s,major:o});return r}(n,d,n._majorUnit)},getLabelForIndex:function(e,t){var i=this,n=i._adapter,a=i.chart.data,s=i.options.time,o=a.labels&&e<a.labels.length?a.labels[e]:"",r=a.datasets[t].data[e];return ce.isObject(r)&&(o=i.getRightValue(r)),s.tooltipFormat?n.format(zi(i,o),s.tooltipFormat):"string"==typeof o?o:n.format(zi(i,o),s.displayFormats.datetime)},tickFormatFunction:function(e,t,i,n){var a=this._adapter,s=this.options,o=s.time.displayFormats,r=o[this._unit],l=this._majorUnit,d=o[l],c=+a.startOf(e,l),u=s.ticks.major,p=u.enabled&&l&&d&&e===c,h=a.format(e,n||(p?d:r)),f=p?u:s.ticks.minor,m=Mi(f.callback,f.userCallback);return m?m(h,t,i):h},convertTicksToLabels:function(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(this.tickFormatFunction(e[t].value,t,e));return n},getPixelForOffset:function(e){var t=this,i=t.options.ticks.reverse,n=t._horizontal?t.width:t.height,a=t._horizontal?i?t.right:t.left:i?t.bottom:t.top,s=qi(t._table,"time",e,"pos"),o=n*(t._offsets.start+s)/(t._offsets.start+1+t._offsets.end);return i?a-o:a+o},getPixelForValue:function(e,t,i){var n=null;if(void 0!==t&&void 0!==i&&(n=this._timestamps.datasets[i][t]),null===n&&(n=Ui(this,e)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,i=t._horizontal?t.width:t.height,n=t._horizontal?t.left:t.top,a=(i?(e-n)/i:0)*(t._offsets.start+1+t._offsets.start)-t._offsets.end,s=qi(t._table,"pos",a,"time");return t._adapter._create(s)},getLabelWidth:function(e){var t=this.options.ticks,i=this.ctx.measureText(e).width,n=ce.toRadians(t.maxRotation),a=Math.cos(n),s=Math.sin(n);return i*a+Mi(t.fontSize,re.global.defaultFontSize)*s},getLabelCapacity:function(e){var t=this,i=t.options.time.displayFormats.millisecond,n=t.tickFormatFunction(e,0,[],i),a=t.getLabelWidth(n),s=t.isHorizontal()?t.width:t.height,o=Math.floor(s/a);return o>0?o:1}});Ki._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var Vi={category:ci,linear:mi,logarithmic:yi,radialLinear:Ai,time:Ki},Yi={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};ni._date.override("function"==typeof e?{_id:"moment",formats:function(){return Yi},parse:function(t,i){return"string"==typeof t&&"string"==typeof i?t=e(t,i):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,i){return e(t).format(i)},add:function(t,i,n){return e(t).add(i,n).valueOf()},diff:function(t,i,n){return e.duration(e(t).diff(e(i))).as(n)},startOf:function(t,i,n){return t=e(t),"isoWeek"===i?t.isoWeekday(n).valueOf():t.startOf(i).valueOf()},endOf:function(t,i){return e(t).endOf(i).valueOf()},_create:function(t){return e(t)}}:{}),re._set("global",{plugins:{filler:{propagate:!0}}});var Ji={dataset:function(e){var t=e.fill,i=e.chart,n=i.getDatasetMeta(t),a=n&&i.isDatasetVisible(t)&&n.dataset._children||[],s=a.length||0;return s?function(e,t){return t<s&&a[t]._view||null}:null},boundary:function(e){var t=e.boundary,i=t?t.x:null,n=t?t.y:null;return function(e){return{x:null===i?e.x:i,y:null===n?e.y:n}}}};function Xi(e,t,i){var n,a=e._model||{},s=a.fill;if(void 0===s&&(s=!!a.backgroundColor),!1===s||null===s)return!1;if(!0===s)return"origin";if(n=parseFloat(s,10),isFinite(n)&&Math.floor(n)===n)return"-"!==s[0]&&"+"!==s[0]||(n=t+n),!(n===t||n<0||n>=i)&&n;switch(s){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return s;default:return!1}}function Gi(e){var t,i=e.el._model||{},n=e.el._scale||{},a=e.fill,s=null;if(isFinite(a))return null;if("start"===a?s=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===a?s=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?s=i.scaleZero:n.getBasePosition?s=n.getBasePosition():n.getBasePixel&&(s=n.getBasePixel()),null!=s){if(void 0!==s.x&&void 0!==s.y)return s;if(ce.isFinite(s))return{x:(t=n.isHorizontal())?s:null,y:t?null:s}}return null}function Zi(e,t,i){var n,a=e[t].fill,s=[t];if(!i)return a;for(;!1!==a&&-1===s.indexOf(a);){if(!isFinite(a))return a;if(!(n=e[a]))return!1;if(n.visible)return a;s.push(a),a=n.fill}return!1}function Qi(e){var t=e.fill,i="dataset";return!1===t?null:(isFinite(t)||(i="boundary"),Ji[i](e))}function en(e){return e&&!e.skip}function tn(e,t,i,n,a){var s;if(n&&a){for(e.moveTo(t[0].x,t[0].y),s=1;s<n;++s)ce.canvas.lineTo(e,t[s-1],t[s]);for(e.lineTo(i[a-1].x,i[a-1].y),s=a-1;s>0;--s)ce.canvas.lineTo(e,i[s],i[s-1],!0)}}var nn={id:"filler",afterDatasetsUpdate:function(e,t){var i,n,a,s,o=(e.data.datasets||[]).length,r=t.propagate,l=[];for(n=0;n<o;++n)s=null,(a=(i=e.getDatasetMeta(n)).dataset)&&a._model&&a instanceof Fe.Line&&(s={visible:e.isDatasetVisible(n),fill:Xi(a,n,o),chart:e,el:a}),i.$filler=s,l.push(s);for(n=0;n<o;++n)(s=l[n])&&(s.fill=Zi(l,n,r),s.boundary=Gi(s),s.mapper=Qi(s))},beforeDatasetDraw:function(e,t){var i=t.meta.$filler;if(i){var n=e.ctx,a=i.el,s=a._view,o=a._children||[],r=i.mapper,l=s.backgroundColor||re.global.defaultColor;r&&l&&o.length&&(ce.canvas.clipArea(n,e.chartArea),function(e,t,i,n,a,s){var o,r,l,d,c,u,p,h=t.length,f=n.spanGaps,m=[],v=[],b=0,g=0;for(e.beginPath(),o=0,r=h+!!s;o<r;++o)c=i(d=t[l=o%h]._view,l,n),u=en(d),p=en(c),u&&p?(b=m.push(d),g=v.push(c)):b&&g&&(f?(u&&m.push(d),p&&v.push(c)):(tn(e,m,v,b,g),b=g=0,m=[],v=[]));tn(e,m,v,b,g),e.closePath(),e.fillStyle=a,e.fill()}(n,o,r,s,l,a._loop),ce.canvas.unclipArea(n))}}},an=ce.noop,sn=ce.valueOrDefault;function on(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}re._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var i=t.datasetIndex,n=this.chart,a=n.getDatasetMeta(i);a.hidden=null===a.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return ce.isArray(t.datasets)?t.datasets.map((function(t,i){return{text:t.label,fillStyle:ce.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(i),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:i}}),this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var i=0;i<e.data.datasets.length;i++)t.push('<li><span style="background-color:'+e.data.datasets[i].backgroundColor+'"></span>'),e.data.datasets[i].label&&t.push(e.data.datasets[i].label),t.push("</li>");return t.push("</ul>"),t.join("")}});var rn=me.extend({initialize:function(e){ce.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:an,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:an,beforeSetDimensions:an,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:an,beforeBuildLabels:an,buildLabels:function(){var e=this,t=e.options.labels||{},i=ce.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(i=i.filter((function(i){return t.filter(i,e.chart.data)}))),e.options.reverse&&i.reverse(),e.legendItems=i},afterBuildLabels:an,beforeFit:an,fit:function(){var e=this,t=e.options,i=t.labels,n=t.display,a=e.ctx,s=ce.options._parseFont(i),o=s.size,r=e.legendHitBoxes=[],l=e.minSize,d=e.isHorizontal();if(d?(l.width=e.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=e.maxHeight),n)if(a.font=s.string,d){var c=e.lineWidths=[0],u=0;a.textAlign="left",a.textBaseline="top",ce.each(e.legendItems,(function(e,t){var n=on(i,o)+o/2+a.measureText(e.text).width;(0===t||c[c.length-1]+n+i.padding>l.width)&&(u+=o+i.padding,c[c.length-(t>0?0:1)]=i.padding),r[t]={left:0,top:0,width:n,height:o},c[c.length-1]+=n+i.padding})),l.height+=u}else{var p=i.padding,h=e.columnWidths=[],f=i.padding,m=0,v=0,b=o+p;ce.each(e.legendItems,(function(e,t){var n=on(i,o)+o/2+a.measureText(e.text).width;t>0&&v+b>l.height-p&&(f+=m+i.padding,h.push(m),m=0,v=0),m=Math.max(m,n),v+=b,r[t]={left:0,top:0,width:n,height:o}})),f+=m,h.push(m),l.width+=f}e.width=l.width,e.height=l.height},afterFit:an,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,i=t.labels,n=re.global,a=n.defaultColor,s=n.elements.line,o=e.width,r=e.lineWidths;if(t.display){var l,d=e.ctx,c=sn(i.fontColor,n.defaultFontColor),u=ce.options._parseFont(i),p=u.size;d.textAlign="left",d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=c,d.fillStyle=c,d.font=u.string;var h=on(i,p),f=e.legendHitBoxes,m=e.isHorizontal();l=m?{x:e.left+(o-r[0])/2+i.padding,y:e.top+i.padding,line:0}:{x:e.left+i.padding,y:e.top+i.padding,line:0};var v=p+i.padding;ce.each(e.legendItems,(function(n,c){var u=d.measureText(n.text).width,b=h+p/2+u,g=l.x,_=l.y;m?c>0&&g+b+i.padding>e.left+e.minSize.width&&(_=l.y+=v,l.line++,g=l.x=e.left+(o-r[l.line])/2+i.padding):c>0&&_+v>e.top+e.minSize.height&&(g=l.x=g+e.columnWidths[l.line]+i.padding,_=l.y=e.top+i.padding,l.line++),function(e,i,n){if(!(isNaN(h)||h<=0)){d.save();var o=sn(n.lineWidth,s.borderWidth);if(d.fillStyle=sn(n.fillStyle,a),d.lineCap=sn(n.lineCap,s.borderCapStyle),d.lineDashOffset=sn(n.lineDashOffset,s.borderDashOffset),d.lineJoin=sn(n.lineJoin,s.borderJoinStyle),d.lineWidth=o,d.strokeStyle=sn(n.strokeStyle,a),d.setLineDash&&d.setLineDash(sn(n.lineDash,s.borderDash)),t.labels&&t.labels.usePointStyle){var r=h*Math.SQRT2/2,l=e+h/2,c=i+p/2;ce.canvas.drawPoint(d,n.pointStyle,r,l,c)}else 0!==o&&d.strokeRect(e,i,h,p),d.fillRect(e,i,h,p);d.restore()}}(g,_,n),f[c].left=g,f[c].top=_,function(e,t,i,n){var a=p/2,s=h+a+e,o=t+a;d.fillText(i.text,s,o),i.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(s,o),d.lineTo(s+n,o),d.stroke())}(g,_,n,u),m?l.x+=b+i.padding:l.y+=v}))}},_getLegendItemAt:function(e,t){var i,n,a,s=this;if(e>=s.left&&e<=s.right&&t>=s.top&&t<=s.bottom)for(a=s.legendHitBoxes,i=0;i<a.length;++i)if(e>=(n=a[i]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return s.legendItems[i];return null},handleEvent:function(e){var t,i=this,n=i.options,a="mouseup"===e.type?"click":e.type;if("mousemove"===a){if(!n.onHover&&!n.onLeave)return}else{if("click"!==a)return;if(!n.onClick)return}t=i._getLegendItemAt(e.x,e.y),"click"===a?t&&n.onClick&&n.onClick.call(i,e.native,t):(n.onLeave&&t!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,e.native,i._hoveredItem),i._hoveredItem=t),n.onHover&&t&&n.onHover.call(i,e.native,t))}});function ln(e,t){var i=new rn({ctx:e.ctx,options:t,chart:e});$t.configure(e,i,t),$t.addBox(e,i),e.legend=i}var dn={id:"legend",_element:rn,beforeInit:function(e){var t=e.options.legend;t&&ln(e,t)},beforeUpdate:function(e){var t=e.options.legend,i=e.legend;t?(ce.mergeIf(t,re.global.legend),i?($t.configure(e,i,t),i.options=t):ln(e,t)):i&&($t.removeBox(e,i),delete e.legend)},afterEvent:function(e,t){var i=e.legend;i&&i.handleEvent(t)}},cn=ce.noop;re._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var un=me.extend({initialize:function(e){ce.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:cn,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:cn,beforeSetDimensions:cn,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:cn,beforeBuildLabels:cn,buildLabels:cn,afterBuildLabels:cn,beforeFit:cn,fit:function(){var e=this,t=e.options,i=t.display,n=e.minSize,a=ce.isArray(t.text)?t.text.length:1,s=ce.options._parseFont(t),o=i?a*s.lineHeight+2*t.padding:0;e.isHorizontal()?(n.width=e.maxWidth,n.height=o):(n.width=o,n.height=e.maxHeight),e.width=n.width,e.height=n.height},afterFit:cn,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,i=e.options;if(i.display){var n,a,s,o=ce.options._parseFont(i),r=o.lineHeight,l=r/2+i.padding,d=0,c=e.top,u=e.left,p=e.bottom,h=e.right;t.fillStyle=ce.valueOrDefault(i.fontColor,re.global.defaultFontColor),t.font=o.string,e.isHorizontal()?(a=u+(h-u)/2,s=c+l,n=h-u):(a="left"===i.position?u+l:h-l,s=c+(p-c)/2,n=p-c,d=Math.PI*("left"===i.position?-.5:.5)),t.save(),t.translate(a,s),t.rotate(d),t.textAlign="center",t.textBaseline="middle";var f=i.text;if(ce.isArray(f))for(var m=0,v=0;v<f.length;++v)t.fillText(f[v],0,m,n),m+=r;else t.fillText(f,0,0,n);t.restore()}}});function pn(e,t){var i=new un({ctx:e.ctx,options:t,chart:e});$t.configure(e,i,t),$t.addBox(e,i),e.titleBlock=i}var hn={},fn=nn,mn=dn,vn={id:"title",_element:un,beforeInit:function(e){var t=e.options.title;t&&pn(e,t)},beforeUpdate:function(e){var t=e.options.title,i=e.titleBlock;t?(ce.mergeIf(t,re.global.title),i?($t.configure(e,i,t),i.options=t):pn(e,t)):i&&($t.removeBox(e,i),delete e.titleBlock)}};for(var bn in hn.filler=fn,hn.legend=mn,hn.title=vn,ei.helpers=ce,function(){function e(e,t,i){var n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}function t(e){return null!=e&&"none"!==e}function i(i,n,a){var s=document.defaultView,o=ce._getParentNode(i),r=s.getComputedStyle(i)[n],l=s.getComputedStyle(o)[n],d=t(r),c=t(l),u=Number.POSITIVE_INFINITY;return d||c?Math.min(d?e(r,i,a):u,c?e(l,o,a):u):"none"}ce.where=function(e,t){if(ce.isArray(e)&&Array.prototype.filter)return e.filter(t);var i=[];return ce.each(e,(function(e){t(e)&&i.push(e)})),i},ce.findIndex=Array.prototype.findIndex?function(e,t,i){return e.findIndex(t,i)}:function(e,t,i){i=void 0===i?e:i;for(var n=0,a=e.length;n<a;++n)if(t.call(i,e[n],n,e))return n;return-1},ce.findNextWhere=function(e,t,i){ce.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<e.length;n++){var a=e[n];if(t(a))return a}},ce.findPreviousWhere=function(e,t,i){ce.isNullOrUndef(i)&&(i=e.length);for(var n=i-1;n>=0;n--){var a=e[n];if(t(a))return a}},ce.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ce.almostEquals=function(e,t,i){return Math.abs(e-t)<i},ce.almostWhole=function(e,t){var i=Math.round(e);return i-t<e&&i+t>e},ce.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},ce.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},ce.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},ce.log10=Math.log10?function(e){return Math.log10(e)}:function(e){var t=Math.log(e)*Math.LOG10E,i=Math.round(t);return e===Math.pow(10,i)?i:t},ce.toRadians=function(e){return e*(Math.PI/180)},ce.toDegrees=function(e){return e*(180/Math.PI)},ce._decimalPlaces=function(e){if(ce.isFinite(e)){for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i}},ce.getAngleFromPoint=function(e,t){var i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n),s=Math.atan2(n,i);return s<-.5*Math.PI&&(s+=2*Math.PI),{angle:s,distance:a}},ce.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},ce.aliasPixel=function(e){return e%2==0?0:.5},ce._alignPixel=function(e,t,i){var n=e.currentDevicePixelRatio,a=i/2;return Math.round((t-a)*n)/n+a},ce.splineCurve=function(e,t,i,n){var a=e.skip?t:e,s=t,o=i.skip?t:i,r=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),l=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),d=r/(r+l),c=l/(r+l),u=n*(d=isNaN(d)?0:d),p=n*(c=isNaN(c)?0:c);return{previous:{x:s.x-u*(o.x-a.x),y:s.y-u*(o.y-a.y)},next:{x:s.x+p*(o.x-a.x),y:s.y+p*(o.y-a.y)}}},ce.EPSILON=Number.EPSILON||1e-14,ce.splineCurveMonotone=function(e){var t,i,n,a,s,o,r,l,d,c=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),u=c.length;for(t=0;t<u;++t)if(!(n=c[t]).model.skip){if(i=t>0?c[t-1]:null,(a=t<u-1?c[t+1]:null)&&!a.model.skip){var p=a.model.x-n.model.x;n.deltaK=0!==p?(a.model.y-n.model.y)/p:0}!i||i.model.skip?n.mK=n.deltaK:!a||a.model.skip?n.mK=i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?n.mK=0:n.mK=(i.deltaK+n.deltaK)/2}for(t=0;t<u-1;++t)n=c[t],a=c[t+1],n.model.skip||a.model.skip||(ce.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=a.mK=0:(s=n.mK/n.deltaK,o=a.mK/n.deltaK,(l=Math.pow(s,2)+Math.pow(o,2))<=9||(r=3/Math.sqrt(l),n.mK=s*r*n.deltaK,a.mK=o*r*n.deltaK)));for(t=0;t<u;++t)(n=c[t]).model.skip||(i=t>0?c[t-1]:null,a=t<u-1?c[t+1]:null,i&&!i.model.skip&&(d=(n.model.x-i.model.x)/3,n.model.controlPointPreviousX=n.model.x-d,n.model.controlPointPreviousY=n.model.y-d*n.mK),a&&!a.model.skip&&(d=(a.model.x-n.model.x)/3,n.model.controlPointNextX=n.model.x+d,n.model.controlPointNextY=n.model.y+d*n.mK))},ce.nextItem=function(e,t,i){return i?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},ce.previousItem=function(e,t,i){return i?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},ce.niceNum=function(e,t){var i=Math.floor(ce.log10(e)),n=e/Math.pow(10,i);return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},ce.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},ce.getRelativePosition=function(e,t){var i,n,a=e.originalEvent||e,s=e.target||e.srcElement,o=s.getBoundingClientRect(),r=a.touches;r&&r.length>0?(i=r[0].clientX,n=r[0].clientY):(i=a.clientX,n=a.clientY);var l=parseFloat(ce.getStyle(s,"padding-left")),d=parseFloat(ce.getStyle(s,"padding-top")),c=parseFloat(ce.getStyle(s,"padding-right")),u=parseFloat(ce.getStyle(s,"padding-bottom")),p=o.right-o.left-l-c,h=o.bottom-o.top-d-u;return{x:i=Math.round((i-o.left-l)/p*s.width/t.currentDevicePixelRatio),y:n=Math.round((n-o.top-d)/h*s.height/t.currentDevicePixelRatio)}},ce.getConstraintWidth=function(e){return i(e,"max-width","clientWidth")},ce.getConstraintHeight=function(e){return i(e,"max-height","clientHeight")},ce._calculatePadding=function(e,t,i){return(t=ce.getStyle(e,t)).indexOf("%")>-1?i*parseInt(t,10)/100:parseInt(t,10)},ce._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},ce.getMaximumWidth=function(e){var t=ce._getParentNode(e);if(!t)return e.clientWidth;var i=t.clientWidth,n=i-ce._calculatePadding(t,"padding-left",i)-ce._calculatePadding(t,"padding-right",i),a=ce.getConstraintWidth(e);return isNaN(a)?n:Math.min(n,a)},ce.getMaximumHeight=function(e){var t=ce._getParentNode(e);if(!t)return e.clientHeight;var i=t.clientHeight,n=i-ce._calculatePadding(t,"padding-top",i)-ce._calculatePadding(t,"padding-bottom",i),a=ce.getConstraintHeight(e);return isNaN(a)?n:Math.min(n,a)},ce.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},ce.retinaScale=function(e,t){var i=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=e.canvas,a=e.height,s=e.width;n.height=a*i,n.width=s*i,e.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=a+"px",n.style.width=s+"px")}},ce.fontString=function(e,t,i){return t+" "+e+"px "+i},ce.longestText=function(e,t,i,n){var a=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(a=n.data={},s=n.garbageCollect=[],n.font=t),e.font=t;var o=0;ce.each(i,(function(t){null!=t&&!0!==ce.isArray(t)?o=ce.measureText(e,a,s,o,t):ce.isArray(t)&&ce.each(t,(function(t){null==t||ce.isArray(t)||(o=ce.measureText(e,a,s,o,t))}))}));var r=s.length/2;if(r>i.length){for(var l=0;l<r;l++)delete a[s[l]];s.splice(0,r)}return o},ce.measureText=function(e,t,i,n,a){var s=t[a];return s||(s=t[a]=e.measureText(a).width,i.push(a)),s>n&&(n=s),n},ce.numberOfLabelLines=function(e){var t=1;return ce.each(e,(function(e){ce.isArray(e)&&e.length>t&&(t=e.length)})),t},ce.color=V?function(e){return e instanceof CanvasGradient&&(e=re.global.defaultColor),V(e)}:function(e){return console.error("Color.js not found!"),e},ce.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:ce.color(e).saturate(.5).darken(.1).rgbString()}}(),ei._adapters=ni,ei.Animation=be,ei.animationService=ge,ei.controllers=dt,ei.DatasetController=ke,ei.defaults=re,ei.Element=me,ei.elements=Fe,ei.Interaction=vt,ei.layouts=$t,ei.platform=It,ei.plugins=Lt,ei.Scale=di,ei.scaleService=Ft,ei.Ticks=ai,ei.Tooltip=Yt,ei.helpers.each(Vi,(function(e,t){ei.scaleService.registerScaleType(t,e,e._defaults)})),hn)hn.hasOwnProperty(bn)&&ei.plugins.register(hn[bn]);ei.platform.initialize();var gn=ei;return"undefined"!=typeof window&&(window.Chart=ei),ei.Chart=ei,ei.Legend=hn.legend._element,ei.Title=hn.title._element,ei.pluginService=ei.plugins,ei.PluginBase=ei.Element.extend({}),ei.canvasHelpers=ei.helpers.canvas,ei.layoutService=ei.layouts,ei.LinearScaleBase=hi,ei.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){ei[e]=function(t,i){return new ei(t,ei.helpers.merge(i||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),gn})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],t):(e=e||self).ChartDataLabels=t(e.Chart)}(this,(function(e){"use strict";var t=(e=e&&e.hasOwnProperty("default")?e.default:e).helpers,i=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),n={toTextLines:function(e){var i,n=[];for(e=[].concat(e);e.length;)"string"==typeof(i=e.pop())?n.unshift.apply(n,i.split("\n")):Array.isArray(i)?e.push.apply(e,i):t.isNullOrUndef(e)||n.unshift(""+i);return n},toFontString:function(e){return!e||t.isNullOrUndef(e.size)||t.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family},textSize:function(e,t,i){var n,a=[].concat(t),s=a.length,o=e.font,r=0;for(e.font=i.string,n=0;n<s;++n)r=Math.max(e.measureText(a[n]).width,r);return e.font=o,{height:s*i.lineHeight,width:r}},parseFont:function(i){var a=e.defaults.global,s=t.valueOrDefault(i.size,a.defaultFontSize),o={family:t.valueOrDefault(i.family,a.defaultFontFamily),lineHeight:t.options.toLineHeight(i.lineHeight,s),size:s,style:t.valueOrDefault(i.style,a.defaultFontStyle),weight:t.valueOrDefault(i.weight,null),string:""};return o.string=n.toFontString(o),o},bound:function(e,t,i){return Math.max(e,Math.min(t,i))},arrayDiff:function(e,t){var i,n,a,s,o=e.slice(),r=[];for(i=0,a=t.length;i<a;++i)s=t[i],-1===(n=o.indexOf(s))?r.push([s,1]):o.splice(n,1);for(i=0,a=o.length;i<a;++i)r.push([o[i],-1]);return r},rasterize:function(e){return Math.round(e*i)/i}};function a(e,t){var i=t.x,n=t.y;if(null===i)return{x:0,y:-1};if(null===n)return{x:1,y:0};var a=e.x-i,s=e.y-n,o=Math.sqrt(a*a+s*s);return{x:o?a/o:0,y:o?s/o:-1}}function s(e,t,i){var n=0;return e<i.left?n|=1:e>i.right&&(n|=2),t<i.top?n|=8:t>i.bottom&&(n|=4),n}function o(e,t){var i,n,a=t.anchor,o=e;return t.clamp&&(o=function(e,t){for(var i,n,a,o=e.x0,r=e.y0,l=e.x1,d=e.y1,c=s(o,r,t),u=s(l,d,t);c|u&&!(c&u);)8&(i=c||u)?(n=o+(l-o)*(t.top-r)/(d-r),a=t.top):4&i?(n=o+(l-o)*(t.bottom-r)/(d-r),a=t.bottom):2&i?(a=r+(d-r)*(t.right-o)/(l-o),n=t.right):1&i&&(a=r+(d-r)*(t.left-o)/(l-o),n=t.left),i===c?c=s(o=n,r=a,t):u=s(l=n,d=a,t);return{x0:o,x1:l,y0:r,y1:d}}(o,t.area)),"start"===a?(i=o.x0,n=o.y0):"end"===a?(i=o.x1,n=o.y1):(i=(o.x0+o.x1)/2,n=(o.y0+o.y1)/2),function(e,t,i,n,a){switch(a){case"center":i=n=0;break;case"bottom":i=0,n=1;break;case"right":i=1,n=0;break;case"left":i=-1,n=0;break;case"top":i=0,n=-1;break;case"start":i=-i,n=-n;break;case"end":break;default:a*=Math.PI/180,i=Math.cos(a),n=Math.sin(a)}return{x:e,y:t,vx:i,vy:n}}(i,n,e.vx,e.vy,t.align)}var r={arc:function(e,t){var i=(e.startAngle+e.endAngle)/2,n=Math.cos(i),a=Math.sin(i),s=e.innerRadius,r=e.outerRadius;return o({x0:e.x+n*s,y0:e.y+a*s,x1:e.x+n*r,y1:e.y+a*r,vx:n,vy:a},t)},point:function(e,t){var i=a(e,t.origin),n=i.x*e.radius,s=i.y*e.radius;return o({x0:e.x-n,y0:e.y-s,x1:e.x+n,y1:e.y+s,vx:i.x,vy:i.y},t)},rect:function(e,t){var i=a(e,t.origin),n=e.x,s=e.y,r=0,l=0;return e.horizontal?(n=Math.min(e.x,e.base),r=Math.abs(e.base-e.x)):(s=Math.min(e.y,e.base),l=Math.abs(e.base-e.y)),o({x0:n,y0:s+l,x1:n+r,y1:s,vx:i.x,vy:i.y},t)},fallback:function(e,t){var i=a(e,t.origin);return o({x0:e.x,y0:e.y,x1:e.x,y1:e.y,vx:i.x,vy:i.y},t)}},l=e.helpers,d=n.rasterize;function c(e){var t=e._model.horizontal,i=e._scale||t&&e._xScale||e._yScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var n=i.getBasePixel();return t?{x:n,y:null}:{x:null,y:n}}function u(e,t,i){var n=e.shadowBlur,a=i.stroked,s=d(i.x),o=d(i.y),r=d(i.w);a&&e.strokeText(t,s,o,r),i.filled&&(n&&a&&(e.shadowBlur=0),e.fillText(t,s,o,r),n&&a&&(e.shadowBlur=n))}var p=function(e,t,i,n){var a=this;a._config=e,a._index=n,a._model=null,a._rects=null,a._ctx=t,a._el=i};l.extend(p.prototype,{_modelize:function(t,i,a,s){var o,d=this._index,u=l.options.resolve,p=n.parseFont(u([a.font,{}],s,d)),h=u([a.color,e.defaults.global.defaultFontColor],s,d);return{align:u([a.align,"center"],s,d),anchor:u([a.anchor,"center"],s,d),area:s.chart.chartArea,backgroundColor:u([a.backgroundColor,null],s,d),borderColor:u([a.borderColor,null],s,d),borderRadius:u([a.borderRadius,0],s,d),borderWidth:u([a.borderWidth,0],s,d),clamp:u([a.clamp,!1],s,d),clip:u([a.clip,!1],s,d),color:h,display:t,font:p,lines:i,offset:u([a.offset,0],s,d),opacity:u([a.opacity,1],s,d),origin:c(this._el),padding:l.options.toPadding(u([a.padding,0],s,d)),positioner:(o=this._el,o instanceof e.elements.Arc?r.arc:o instanceof e.elements.Point?r.point:o instanceof e.elements.Rectangle?r.rect:r.fallback),rotation:u([a.rotation,0],s,d)*(Math.PI/180),size:n.textSize(this._ctx,i,p),textAlign:u([a.textAlign,"start"],s,d),textShadowBlur:u([a.textShadowBlur,0],s,d),textShadowColor:u([a.textShadowColor,h],s,d),textStrokeColor:u([a.textStrokeColor,h],s,d),textStrokeWidth:u([a.textStrokeWidth,0],s,d)}},update:function(e){var t,i,a,s=this,o=null,r=null,d=s._index,c=s._config,u=l.options.resolve([c.display,!0],e,d);u&&(t=e.dataset.data[d],i=l.valueOrDefault(l.callback(c.formatter,[t,e]),t),(a=l.isNullOrUndef(i)?[]:n.toTextLines(i)).length&&(r=function(e){var t=e.borderWidth||0,i=e.padding,n=e.size.height,a=e.size.width,s=-a/2,o=-n/2;return{frame:{x:s-i.left-t,y:o-i.top-t,w:a+i.width+2*t,h:n+i.height+2*t},text:{x:s,y:o,w:a,h:n}}}(o=s._modelize(u,a,c,e)))),s._model=o,s._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var i,a=e.ctx,s=this._model,o=this._rects;this.visible()&&(a.save(),s.clip&&(i=s.area,a.beginPath(),a.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),a.clip()),a.globalAlpha=n.bound(0,s.opacity,1),a.translate(d(t.x),d(t.y)),a.rotate(s.rotation),function(e,t,i){var n=i.backgroundColor,a=i.borderColor,s=i.borderWidth;(n||a&&s)&&(e.beginPath(),l.canvas.roundedRect(e,d(t.x)+s/2,d(t.y)+s/2,d(t.w)-s,d(t.h)-s,i.borderRadius),e.closePath(),n&&(e.fillStyle=n,e.fill()),a&&s&&(e.strokeStyle=a,e.lineWidth=s,e.lineJoin="miter",e.stroke()))}(a,o.frame,s),function(e,t,i,n){var a,s=n.textAlign,o=n.color,r=!!o,l=n.font,d=t.length,c=n.textStrokeColor,p=n.textStrokeWidth,h=c&&p;if(d&&(r||h))for(i=function(e,t,i){var n=i.lineHeight,a=e.w,s=e.x;return"center"===t?s+=a/2:"end"!==t&&"right"!==t||(s+=a),{h:n,w:a,x:s,y:e.y+n/2}}(i,s,l),e.font=l.string,e.textAlign=s,e.textBaseline="middle",e.shadowBlur=n.textShadowBlur,e.shadowColor=n.textShadowColor,r&&(e.fillStyle=o),h&&(e.lineJoin="round",e.lineWidth=p,e.strokeStyle=c),a=0,d=t.length;a<d;++a)u(e,t[a],{stroked:h,filled:r,w:i.w,x:i.x,y:i.y+i.h*a})}(a,s.lines,o.text,s),a.restore())}});var h=e.helpers,f=Number.MIN_SAFE_INTEGER||-9007199254740991,m=Number.MAX_SAFE_INTEGER||9007199254740991;function v(e,t,i){var n=Math.cos(i),a=Math.sin(i),s=t.x,o=t.y;return{x:s+n*(e.x-s)-a*(e.y-o),y:o+a*(e.x-s)+n*(e.y-o)}}function b(e,t){var i,n,a,s,o,r=m,l=f,d=t.origin;for(i=0;i<e.length;++i)a=(n=e[i]).x-d.x,s=n.y-d.y,o=t.vx*a+t.vy*s,r=Math.min(r,o),l=Math.max(l,o);return{min:r,max:l}}function g(e,t){var i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n);return{vx:(t.x-e.x)/a,vy:(t.y-e.y)/a,origin:e,ln:a}}var _=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function y(e,t,i){var n=t.positioner(e,t),a=n.vx,s=n.vy;if(!a&&!s)return{x:n.x,y:n.y};var o=i.w,r=i.h,l=t.rotation,d=Math.abs(o/2*Math.cos(l))+Math.abs(r/2*Math.sin(l)),c=Math.abs(o/2*Math.sin(l))+Math.abs(r/2*Math.cos(l)),u=1/Math.max(Math.abs(a),Math.abs(s));return d*=a*u,c*=s*u,d+=t.offset*a,c+=t.offset*s,{x:n.x+d,y:n.y+c}}h.extend(_.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,i){this._rotation=i,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this._rect;return!((e=v(e,this.center(),-this._rotation)).x<t.x-1||e.y<t.y-1||e.x>t.x+t.w+2||e.y>t.y+t.h+2)},intersects:function(e){var t,i,n,a=this._points(),s=e._points(),o=[g(a[0],a[1]),g(a[0],a[3])];for(this._rotation!==e._rotation&&o.push(g(s[0],s[1]),g(s[0],s[3])),t=0;t<o.length;++t)if(i=b(a,o[t]),n=b(s,o[t]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var e=this._rect,t=this._rotation,i=this.center();return[v({x:e.x,y:e.y},i,t),v({x:e.x+e.w,y:e.y},i,t),v({x:e.x+e.w,y:e.y+e.h},i,t),v({x:e.x,y:e.y+e.h},i,t)]}});var $={prepare:function(e){var t,i,n,a,s,o=[];for(t=0,n=e.length;t<n;++t)for(i=0,a=e[t].length;i<a;++i)s=e[t][i],o.push(s),s.$layout={_box:new _,_hidable:!1,_visible:!0,_set:t,_idx:i};return o.sort((function(e,t){var i=e.$layout,n=t.$layout;return i._idx===n._idx?i._set-n._set:n._idx-i._idx})),this.update(o),o},update:function(e){var t,i,n,a,s,o=!1;for(t=0,i=e.length;t<i;++t)a=(n=e[t]).model(),(s=n.$layout)._hidable=a&&"auto"===a.display,s._visible=n.visible(),o|=s._hidable;o&&function(e){var t,i,n,a,s,o;for(t=0,i=e.length;t<i;++t)(a=(n=e[t]).$layout)._visible&&(s=n.geometry(),o=y(n._el._model,n.model(),s),a._box.update(o,s,n.rotation()));!function(e,t){var i,n,a,s;for(i=e.length-1;i>=0;--i)for(a=e[i].$layout,n=i-1;n>=0&&a._visible;--n)(s=e[n].$layout)._visible&&a._box.intersects(s._box)&&t(a,s)}(e,(function(e,t){var i=e._hidable,n=t._hidable;i&&n||n?t._visible=!1:i&&(e._visible=!1)}))}(e)},lookup:function(e,t){var i,n;for(i=e.length-1;i>=0;--i)if((n=e[i].$layout)&&n._visible&&n._box.contains(t))return{dataset:n._set,label:e[i]};return null},draw:function(e,t){var i,n,a,s,o,r;for(i=0,n=t.length;i<n;++i)(s=(a=t[i]).$layout)._visible&&(o=a.geometry(),r=y(a._el._view,a.model(),o),s._box.update(r,o,a.rotation()),a.draw(e,r))}},w=e.helpers,k={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if(w.isNullOrUndef(e))return null;var t,i,n,a=e;if(w.isObject(e))if(w.isNullOrUndef(e.label))if(w.isNullOrUndef(e.r))for(a="",n=0,i=(t=Object.keys(e)).length;n<i;++n)a+=(0!==n?", ":"")+t[n]+": "+e[t[n]];else a=e.r;else a=e.label;return""+a},listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},C=e.helpers,x="$datalabels";function j(e,t,i){var n=t&&t[i.dataset];if(n){var a=i.label,s=a.$context;!0===C.callback(n,[s])&&(e[x]._dirty=!0,a.update(s))}}e.defaults.global.plugins.datalabels=k;var T={id:"datalabels",beforeInit:function(e){e[x]={_actives:[]}},beforeUpdate:function(e){var t=e[x];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,i){var n,a,s,o=t.index,r=e[x],l=r._datasets[o]=[],d=e.isDatasetVisible(o),c=e.data.datasets[o],u=function(e,t){var i=e.datalabels;return!1===i?null:(!0===i&&(i={}),C.merge({},[t,i]))}(c,i),h=t.meta.data||[],f=h.length,m=e.ctx;for(m.save(),n=0;n<f;++n)a=h[n],d&&a&&!a.hidden&&!a._model.skip?(l.push(s=new p(u,m,a,n)),s.update(s.$context={active:!1,chart:e,dataIndex:n,dataset:c,datasetIndex:o})):s=null,a[x]=s;m.restore(),C.merge(r._listeners,u.listeners||{},{merger:function(e,i,n){i[e]=i[e]||{},i[e][t.index]=n[e],r._listened=!0}})},afterUpdate:function(e,t){e[x]._labels=$.prepare(e[x]._datasets,t)},afterDatasetsDraw:function(e){$.draw(e,e[x]._labels)},beforeEvent:function(e,t){if(e[x]._listened)switch(t.type){case"mousemove":case"mouseout":!function(e,t){var i,n,a=e[x],s=a._listeners;if(s.enter||s.leave){if("mousemove"===t.type)n=$.lookup(a._labels,t);else if("mouseout"!==t.type)return;i=a._hovered,a._hovered=n,function(e,t,i,n){var a,s;(i||n)&&(i?n?i.label!==n.label&&(s=a=!0):s=!0:a=!0,s&&j(e,t.leave,i),a&&j(e,t.enter,n))}(e,s,i,n)}}(e,t);break;case"click":!function(e,t){var i=e[x],n=i._listeners.click,a=n&&$.lookup(i._labels,t);a&&j(e,n,a)}(e,t)}},afterEvent:function(t){var i,a,s,o,r=t[x],l=r._actives,d=r._actives=t.lastActive||[],c=n.arrayDiff(l,d);for(i=0,a=c.length;i<a;++i)(s=c[i])[1]&&(o=s[0][x])&&(o.$context.active=1===s[1],o.update(o.$context));(r._dirty||c.length)&&($.update(r._labels),function(t){if(!t.animating){for(var i=e.animationService.animations,n=0,a=i.length;n<a;++n)if(i[n].chart===t)return;t.render({duration:1,lazy:!0})}}(t)),delete r._dirty}};return e.plugins.register(T),T})),$(document).ready((function(){initFancy(),$("[js-change-amount]").on("keyup change",(function(){$(this).siblings("[js-change-amount-btn]").addClass("block")})),$("[js-change-amount-btn]").on("click",(function(e){e.preventDefault(),CHANGE_BTN=$(this),$(this).closest("[js-change-amount-form]").trigger("submit")})),$("[js-change-amount-form]").on("submit",(function(e){e.preventDefault(),updateSum($(this).serializeObject())})),$("[js-status]").on("change",(function(e){e.preventDefault(),RADIO_BTN=$(this),$(this).closest("[js-status-form]").trigger("submit")})),$("[js-status-form]").on("submit",(function(e){e.preventDefault(),updateStatus($(this).serializeObject())})),$("[js-change-pm-selector]").on("change",(function(e){e.preventDefault(),$(this).removeClassWild("column_pmethod_*");$("option:selected",this).attr("value");var t=$("option:selected",this).attr("data-code");$(this).addClass("column_pmethod_"+t),$(this).closest("[js-change-pm-form]").trigger("submit")})),$("[js-change-pm-form]").on("submit",(function(e){e.preventDefault(),updatePaymentMethod($(this).serializeObject())})),$("[js-pay-date]").on("click",(function(){PAYFORM=$(this).closest("[js-pay-form]"),PAYDATE_TEMP=$(this).val()})),$("[js-pay-date]").on("keydown",(function(e){return!1})),$("[js-pay-form]").submit((function(e){e.preventDefault(),updateBillPayDate($(this).serializeObject())})),initDatePicker()})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter($filterFromBack)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")})),$(".datepicker-here-f").datepicker({autoClose:!0})})),$(document).on("click","[js-copy-link]",(function(e){var t=$("<textarea>");$("body").append(t),t.val($(this).attr("data-link")).select(),document.execCommand("copy"),t.remove()}));var ENABLE_MESSAGE="Уже доступно",$CLIENT;function getCountdownOnUserCoursesPage(){for(var e=document.getElementsByClassName("clientTimeInfo"),t=0;t<e.length;t++){var i=e[t].getElementsByClassName("countdown")[0],n=Number(i.getAttribute("data-startDate"));startCountdown(i.id,n,actionOnTimerRunOutOnUserCoursesPage)}}function getCountdownOnUserModulesPage(){var e=document.getElementsByClassName("countdown")[0],t=Number(e.getAttribute("data-startDate"));startCountdown(e.id,t,actionOnTimerRunOutOnUserModulesPage)}function actionOnTimerRunOutOnUserModulesPage(){return location.reload(),ENABLE_MESSAGE}function actionOnTimerRunOutOnUserCoursesPage(){return ENABLE_MESSAGE}function startCountdown(e,t,i){var n=document.getElementById(e),a=t-new Date;if(a<=0)n.innerHTML=ENABLE_MESSAGE;else{var s=buildTimerString(new Date(a));n.innerHTML=s,setInterval((function(){(a=t-new Date)<=0?(clearInterval(this),n.innerHTML=i()):(s=buildTimerString(new Date(a)),n.innerHTML=s)}),1e3)}}function buildTimerString(e){var t="",i=e.getUTCFullYear()-1970;return t+=subBuildTimerString(i)+" : ",t+=subBuildTimerString(i=e.getUTCMonth())+" : ",t+=subBuildTimerString(i=e.getUTCDate()-1)+" : ",t+=subBuildTimerString(i=e.getUTCHours())+" : ",t+=subBuildTimerString(i=e.getUTCMinutes())+" : ",t+=subBuildTimerString(i=e.getUTCSeconds())}function subBuildTimerString(e){return Number(e)>=10?e:"0"+e}function setCourseInfo(e){var t=new FormData;t.set("id",e.data("course")),$("[js-update-course]").prop("disabled",!0),$.ajax({type:"POST",url:"getCourse",data:t,processData:!1,contentType:!1,cache:!1,success:function(t){setCourseSelectors(e),$("[up-course-id]").val(t.id),$("[current-course]").attr("current-course",t.id),$("[up-course-name]").val(t.name),$("[up-course-price]").val(t.price),$("input[up-course-theme][value="+t.theme+"]").prop("checked",!0),$("[up-course-bg]").val(t.backgroundColor),t.isUsed||$("[update-footer]").html($("[update-footer]").html()+'<button delete-course type="button" class="button button_white button_right">    <span>Удалить</span></button>'),$("[js-menu-update]").addClass("is-open"),checkBodyHidden(),$("[js-update-course]").prop("disabled",!1)},error:function(e){$("[js-update-course]").prop("disabled",!1)}})}function closeUpdateCourseMenu(){$("[js-menu-update]").removeClass("is-open"),$("[js-update-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите изображение (290x240px)"),$("[delete-course]").remove(),$("[js-update-form]").find("[js-tab]").trigger("click"),resetCourseSelectors(),checkBodyHidden()}function closeCourseMenu(){$("[js-menu-course]").removeClass("is-open"),$("[js-course-form]").trigger("reset"),resetCourseSelectors(),checkBodyHidden()}function updateCourse(e){$("[js-update]").prop("disabled",!0),$.ajax({type:"POST",url:"updateCourse",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateCourseBlock(e),closeUpdateCourseMenu(),$("[js-update]").prop("disabled",!1)},error:function(e){$("[js-update]").prop("disabled",!1)}})}function updateCourseBlock(e){var t=createCourse(e),i=$('[js-tab-panel][data-type!="all"]').find('.product-block[data-course="'+e.id+'"]');$('[js-tab-panel][data-type="all"]').find('.product-block[data-course="'+e.id+'"]').replaceWith(t),i.data("project")===e.idProject&&i.data("type")===e.idCourseType?i.replaceWith(t):(i.remove(),addCourse(e))}function addCourse(e){var t=$('.products[data-project="'+e.idProject+'"]').find('[js-tab-panel][data-type="'+e.idCourseType+'"]').find(".products__list");t.html(createCourse(e)+t.html())}function addCourseToCommon(e){var t=$('.products[data-project="'+e.idProject+'"]').find('[js-tab-panel][data-type="all"]').find(".products__list");t.html(createCourse(e)+t.html())}function createCourse(e){return'<div js-update-course data-course="'+e.id+'" data-project="'+e.idProject+'" data-type="'+e.idCourseType+'" class="product-block" style="background: '+e.backgroundColor+';">                 <div class="product-block__wrapper '+e.theme+'" >'+(null!==e.backgroundImage?'                    <div class="product-block__background">                       <img src="/'+e.backgroundImage+'" alt="">                     </div>':"")+'                     <div class="product-block__title">'+e.name+'</div>                     <div class="product-block__type">'+e.courseType+'</div>                     <div class="product-block__price">'+numberWithSpaces(e.price)+" ₽</div>                 </div>              </div>"}function saveCourse(e){$("[js-save-course]").prop("disabled",!0),$.ajax({type:"POST",url:"saveCourse",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){addCourse(e),addCourseToCommon(e),closeCourseMenu(),$("[js-save-course]").prop("disabled",!1)},error:function(e){$("[js-save-course]").prop("disabled",!1)}})}function setCourseSelectors(e){$("[course-project]").val(e.data("project"));var t=e.attr("data-type");void 0!==t&&!1!==t&&$("[course-type]").val(e.data("type"))}function resetCourseSelectors(){$("[course-type]option:selected").removeAttr("selected"),$("[course-project]option:selected").removeAttr("selected")}function setClientCardInfo(e){$("[js-client-card-name]").val(e.name),$("[js-client-card-date]").text(e.createDate),$("[js-client-card-manager]").text(e.manager),$("[js-client-card-link]").val(e.link),$("[js-client-card-phone]").val(e.phone),$("[js-client-card-email]").val(e.email),$("[js-client-card-comment]").val(e.comment),$("[js-client-card-id]").val(e.id),$("[js-client-name-copy]").text(e.name),$("[js-client-name-copy]").attr("data-link",e.name);var t=$("[js-register-info-btn]"),i=$("[js-register-info]"),n=$("[js-register-info-container]"),a=$("[js-copy-register-info]");t.unbind("click"),a.unbind("click"),0!=e.idUser?(t.addClass("hide"),i.removeClass("hide"),$("[js-client-url]").html(window.location.origin+"/login"),$("[js-client-login]").html(e.userLogin),$("[js-client-password]").html(e.userPassword)):(t.removeClass("hide"),t.click((function(){$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/createUser",data:JSON.stringify(e.id),dataType:"json",cache:!1,success:function(e){t.addClass("hide"),i.removeClass("hide"),$("[js-client-login]").html(e.username),$("[js-client-password]").html(e.password)},error:function(e){}})})),i.addClass("hide")),a.click((function(){var e=Array.from(n.children()),t="";e.forEach((function(e,i,n){var a=$(e);(a.hasClass("client-card__register-info-label")||a.hasClass("client-card__register-info-value"))&&(t+=a.text().trim()+"\n")}));var i=$("<textarea>");$("body").append(i),i.val(t).select(),document.execCommand("copy"),i.remove()})),setIdClient(e.id),updateDealCard($CLIENT),$("[js-menu-client-card]").addClass("is-open"),checkBodyHidden()}function setIdClient(e){$("[js-deal-form-client]").val(e),$CLIENT=e}function updateDealPriceOnList(e){var t=$('[data-deal="'+e.id+'"]'),i=t.find(".column-paid");i.removeClassWild("column-paid_*"),e.price<=e.paid&&i.addClass("column-paid_green"),t.find("[data-deal-price]").html(e.price),t.find("[data-deal-paid]").html(e.paid+" ₽")}$(document).on("click","[js-update-course]",(function(e){setCourseInfo($(this))})),$(document).on("click","[delete-course]",(function(e){var t=new FormData,i=$("[up-course-id]").val();t.set("id",i),$("[delete-course]").prop("disabled",!0),$.ajax({type:"POST",url:"deleteCourse",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-course="'+i+'"]').remove(),closeUpdateCourseMenu(),$("[delete-course]").prop("disabled",!1)},error:function(e){$("[delete-course]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-close-btn]",(function(e){closeUpdateCourseMenu()})),$(document).on("click","[js-create-course]",(function(e){$("[js-menu-course]").addClass("is-open"),setCourseSelectors($(this)),checkBodyHidden()})),$(document).on("click","[js-menu-course-close-btn]",(function(e){closeCourseMenu()})),$(document).on("click","[js-update]",(function(e){e.preventDefault(),$("[js-update-form]").trigger("submit")})),$(document).on("submit","[js-update-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateCourse(new FormData($("[js-update-form]")[0]))})),$(document).on("click","[js-save-course]",(function(e){e.preventDefault(),$("[js-course-form]").trigger("submit")})),$(document).on("submit","[js-course-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveCourse(new FormData($("[js-course-form]")[0]))})),$(document).on("change","[js-bg-default]",(function(e){var t=$(this).is(":checked");$("[js-bg-default]").prop("checked",!1).attr("checked",!1).removeAttr("checked"),t&&$(this).prop("checked",!0)})),function(e,t,i){var n,a,s,o,r,l,d,c;o="datepicker",r=!1,l={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},d={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},(s=c=function(e,a){this.el=e,this.$el=t(e),this.opts=t.extend(!0,{},l,a,this.$el.data()),n==i&&(n=t("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?t(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()}).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){r||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new t.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new t.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new t.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),t(e).on("resize.adp",this._onResize.bind(this)),t("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=t.fn.datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru)),this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,t.fn.datepicker.language[e])):this.loc=t.extend(!0,{},t.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var i=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(i("aa"))||this.loc.timeFormat.match(i("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){r=!0,n.append('<div class="datepickers-container" id="datepickers-container"></div>'),a=t("#datepickers-container")},_buildBaseHtml:function(){var e,i=t('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?i.insertAfter(this.$el):a:i.appendTo(this.$el),this.$datepicker=t('<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo(e),this.$content=t(".datepicker--content",this.$datepicker),this.$nav=t(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,i=s.getParsedDate(t[0]),n=this,a=new Date(i.year,i.month,i.date,i.hours,i.minutes);e=t.map((function(e){return n.formatDate(n.loc.dateFormat,e)})).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(a=t.map((function(e){var t=s.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)}))),this._prevOnSelectValue=e,this.opts.onSelect(e,a,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i,n=e,a=this._getWordBoundaryRegExp,o=this.loc,r=s.getLeadingZeroNum,l=s.getDecade(t),d=s.getParsedDate(t),c=d.fullHours,u=d.hours,p=e.match(a("aa"))||e.match(a("AA")),h="am",f=this._replacer;switch(this.opts.timepicker&&this.timepicker&&p&&(c=r((i=this.timepicker._getValidHoursFromDate(t,p)).hours),u=i.hours,h=i.dayPeriod),!0){case/@/.test(n):n=n.replace(/@/,t.getTime());case/aa/.test(n):n=f(n,a("aa"),h);case/AA/.test(n):n=f(n,a("AA"),h.toUpperCase());case/dd/.test(n):n=f(n,a("dd"),d.fullDate);case/d/.test(n):n=f(n,a("d"),d.date);case/DD/.test(n):n=f(n,a("DD"),o.days[d.day]);case/D/.test(n):n=f(n,a("D"),o.daysShort[d.day]);case/mm/.test(n):n=f(n,a("mm"),d.fullMonth);case/m/.test(n):n=f(n,a("m"),d.month+1);case/MM/.test(n):n=f(n,a("MM"),this.loc.months[d.month]);case/M/.test(n):n=f(n,a("M"),o.monthsShort[d.month]);case/ii/.test(n):n=f(n,a("ii"),d.fullMinutes);case/i/.test(n):n=f(n,a("i"),d.minutes);case/hh/.test(n):n=f(n,a("hh"),c);case/h/.test(n):n=f(n,a("h"),u);case/yyyy/.test(n):n=f(n,a("yyyy"),d.year);case/yyyy1/.test(n):n=f(n,a("yyyy1"),l[0]);case/yyyy2/.test(n):n=f(n,a("yyyy2"),l[1]);case/yy/.test(n):n=f(n,a("yy"),d.year.toString().slice(-2))}return n},_replacer:function(e,t,i){return e.replace(t,(function(e,t,n,a){return t+i+a}))},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},selectDate:function(e){var t=this,i=t.opts,n=t.parsedDate,a=t.selectedDates.length,o="";if(Array.isArray(e))e.forEach((function(e){t.selectDate(e)}));else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=n.month&&i.moveToOtherMonthsOnSelect&&(o=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=n.year&&i.moveToOtherYearsOnSelect&&(o=new Date(e.getFullYear(),0,1)),o&&(t.silent=!0,t.date=o,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(a===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==a?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==a?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,s.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&!this.timepickerIsActive&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(e){var t=this.selectedDates,i=this;if(e instanceof Date)return t.some((function(n,a){return s.isSame(n,e)?(t.splice(a,1),i.selectedDates.length?i.lastSelectedDate=i.selectedDates[i.selectedDates.length-1]:(i.minRange="",i.maxRange="",i.lastSelectedDate=""),i.views[i.currentView]._render(),i._setInputValue(),i.opts.onSelect&&i._triggerOnChange(),!0):void 0}))},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,i){var n=arguments.length,a=this.lastSelectedDate;return 2==n?this.opts[e]=i:1==n&&"object"==typeof e&&(this.opts=t.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(a&&this.timepicker._handleDate(a),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),a&&(a.setHours(this.timepicker.hours),a.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(e,t){var i=!1;return this.selectedDates.some((function(n){return s.isSame(n,e,t)?(i=n,!0):void 0})),i},_setInputValue:function(){var e,t=this,i=t.opts,n=t.loc.dateFormat,a=i.altFieldDateFormat,s=t.selectedDates.map((function(e){return t.formatDate(n,e)}));i.altField&&t.$altField.length&&(e=(e=this.selectedDates.map((function(e){return t.formatDate(a,e)}))).join(this.opts.multipleDatesSeparator),this.$altField.val(e)),s=s.join(this.opts.multipleDatesSeparator),this.$el.val(s)},_isInRange:function(e,t){var i=e.getTime(),n=s.getParsedDate(e),a=s.getParsedDate(this.minDate),o=s.getParsedDate(this.maxDate),r=new Date(n.year,n.month,a.date).getTime(),l=new Date(n.year,n.month,o.date).getTime(),d={day:i>=this.minTime&&i<=this.maxTime,month:r>=this.minTime&&l<=this.maxTime,year:n.year>=a.year&&n.year<=o.year};return t?d[t]:d.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,n=e.data("year")||t.year,a=e.data("month")==i?t.month:e.data("month"),s=e.data("date")||1;return new Date(n,a,s)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],i="datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(i+=" active"),this.$datepicker.removeAttr("class").addClass(i)},setPosition:function(e){e=e||this.opts.position;var t,i,n=this._getDimensions(this.$el),a=this._getDimensions(this.$datepicker),s=e.split(" "),o=this.opts.offset,r=s[0],l=s[1];switch(r){case"top":t=n.top-a.height-o;break;case"right":i=n.left+n.width+o;break;case"bottom":t=n.top+n.height+o;break;case"left":i=n.left-a.width-o}switch(l){case"top":t=n.top;break;case"right":i=n.left+n.width-a.width;break;case"bottom":t=n.top+n.height-a.height;break;case"left":i=n.left;break;case"center":/left|right/.test(r)?t=n.top+n.height/2-a.height/2:i=n.left+n.width/2-a.width/2}this.$datepicker.css({left:i,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),0>i&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,n,a=s.getParsedDate(this._getFocusedDate()),o=this.opts,r=!1,l=!1,d=!1,c=a.year,u=a.month,p=a.date;switch(e){case"ctrlRight":case"ctrlUp":u+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":u-=1,r=!0;break;case"shiftRight":case"shiftUp":l=!0,c+=1;break;case"shiftLeft":case"shiftDown":l=!0,c-=1;break;case"altRight":case"altUp":d=!0,c+=10;break;case"altLeft":case"altDown":d=!0,c-=10;break;case"ctrlShiftUp":this.up()}n=s.getDaysCount(new Date(c,u)),i=new Date(c,u,p),p>n&&(p=n),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=s.getParsedDate(i),r&&o.onChangeMonth&&o.onChangeMonth(t.month,t.year),l&&o.onChangeYear&&o.onChangeYear(t.year),d&&o.onChangeDecade&&o.onChangeDecade(this.curDecade)},_registerKey:function(e){this.keys.some((function(t){return t==e}))||this.keys.push(e)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this.keys.sort();for(var n in d)e=d[n],i.length==e.length&&e.every((function(e,t){return e==i[t]}))&&(this._trigger("hotKey",n),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=s.getParsedDate(this._getFocusedDate()),n=i.year,a=i.month,o=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(o-=1),"month"==t&&(a-=1),"year"==t&&(n-=1);break;case 38:"day"==t&&(o-=7),"month"==t&&(a-=3),"year"==t&&(n-=4);break;case 39:"day"==t&&(o+=1),"month"==t&&(a+=1),"year"==t&&(n+=1);break;case 40:"day"==t&&(o+=7),"month"==t&&(a+=3),"year"==t&&(n+=4)}var r=new Date(n,a,o);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,i){i=i||this.cellType;var n,a=s.getParsedDate(e),o='.datepicker--cell[data-year="'+a.year+'"]';switch(i){case"month":o='[data-month="'+a.month+'"]';break;case"day":o+='[data-month="'+a.month+'"][data-date="'+a.date+'"]'}return(n=this.views[this.currentView].$el.find(o)).length?n:t("")},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),t>=37&&40>=t&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);if(!i)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(i,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var i=t(e.target).closest(".datepicker--cell"),n=this._getDateFromCell(i);this.silent=!0,this.focused&&(this.focused=""),i.addClass("-focus-"),this.focused=n,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",s.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){t(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,i){var n=new Date,a=!1;this.selectedDates.length&&(a=!0,n=this.lastSelectedDate),n.setHours(t),n.setMinutes(i),a||this._getCell(n).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(n)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",s.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return s.getParsedDate(this.date)},set date(e){return e instanceof Date?(this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e):void 0},get date(){return this.currentDate},set view(e){return this.viewIndex=this.viewIndexes.indexOf(e),this.viewIndex<0?void 0:(this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new t.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e)},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=s.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=s.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return s.getDecade(this.date)}},s.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},s.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},s.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},s.template=function(e,t){return e.replace(/#\{([\w]+)\}/g,(function(e,i){return t[i]||0===t[i]?t[i]:void 0}))},s.isSame=function(e,t,i){if(!e||!t)return!1;var n=s.getParsedDate(e),a=s.getParsedDate(t),o=i||"day";return{day:n.date==a.date&&n.month==a.month&&n.year==a.year,month:n.month==a.month&&n.year==a.year,year:n.year==a.year}[o]},s.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},s.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},s.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},s.resetTime=function(e){return"object"==typeof e?(e=s.getParsedDate(e),new Date(e.year,e.month,e.date)):void 0},t.fn.datepicker=function(e){return this.each((function(){if(t.data(this,o)){var i=t.data(this,o);i.opts=t.extend(!0,i.opts,e),i.update()}else t.data(this,o,new c(this,e))}))},t.fn.datepicker.Constructor=c,t.fn.datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},t((function(){t(".datepicker-here").datepicker()})),function(){var e={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},n=t.fn.datepicker,a=n.Constructor;n.Body=function(e,i,n){this.d=e,this.type=i,this.opts=n,this.$el=t(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",t.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=t(e[this.type]).appendTo(this.d.$content),this.$names=t(".datepicker--days-names",this.$el),this.$cells=t(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,n,a){return t=t!=i?t:e,n=n||"",(a=a!=i?a:0)>7?n:7==t?this._getDayNamesHtml(e,0,n,++a):(n+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,n,++a))},_getCellContents:function(e,t){var i="datepicker--cell datepicker--cell-"+t,n=new Date,s=this.d,o=a.resetTime(s.minRange),r=a.resetTime(s.maxRange),l=s.opts,d=a.getParsedDate(e),c={},u=d.date;switch(t){case"day":s.isWeekend(d.day)&&(i+=" -weekend-"),d.month!=this.d.parsedDate.month&&(i+=" -other-month-",l.selectOtherMonths||(i+=" -disabled-"),l.showOtherMonths||(u=""));break;case"month":u=s.loc[s.opts.monthsField][d.month];break;case"year":var p=s.curDecade;u=d.year,(d.year<p[0]||d.year>p[1])&&(i+=" -other-decade-",l.selectOtherYears||(i+=" -disabled-"),l.showOtherYears||(u=""))}return l.onRenderCell&&(u=(c=l.onRenderCell(e,t)||{}).html?c.html:u,i+=c.classes?" "+c.classes:""),l.range&&(a.isSame(o,e,t)&&(i+=" -range-from-"),a.isSame(r,e,t)&&(i+=" -range-to-"),1==s.selectedDates.length&&s.focused?((a.bigger(o,e)&&a.less(s.focused,e)||a.less(r,e)&&a.bigger(s.focused,e))&&(i+=" -in-range-"),a.less(r,e)&&a.isSame(s.focused,e)&&(i+=" -range-from-"),a.bigger(o,e)&&a.isSame(s.focused,e)&&(i+=" -range-to-")):2==s.selectedDates.length&&a.bigger(o,e)&&a.less(r,e)&&(i+=" -in-range-")),a.isSame(n,e,t)&&(i+=" -current-"),s.focused&&a.isSame(e,s.focused,t)&&(i+=" -focus-"),s._isSelected(e,t)&&(i+=" -selected-"),(!s._isInRange(e,t)||c.disabled)&&(i+=" -disabled-"),{html:u,classes:i}},_getDaysHtml:function(e){for(var t,i,n=a.getDaysCount(e),s=new Date(e.getFullYear(),e.getMonth(),1).getDay(),o=new Date(e.getFullYear(),e.getMonth(),n).getDay(),r=s-this.d.loc.firstDay,l=6-o+this.d.loc.firstDay,d="",c=1-(r=0>r?r+7:r),u=n+(l=l>6?l-7:l);u>=c;c++)i=e.getFullYear(),t=e.getMonth(),d+=this._getDayHtml(new Date(i,t,c));return d},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=a.getParsedDate(e),n=0;12>n;)t+=this._getMonthHtml(new Date(i.year,n)),n++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){for(var t=(a.getParsedDate(e),a.getDecade(e)),i="",n=t[0]-1;n<=t[1]+1;n++)i+=this._getYearHtml(new Date(n,0));return i},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var e,i,n,a=t(".datepicker--cell",this.$cells),s=this;a.each((function(a,o){i=t(this),n=s.d._getDateFromCell(t(this)),e=s._getCellContents(n,s.d.cellType),i.attr("class",e.classes)}))},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,n=e.data("year")||this.d.parsedDate.year,a=this.d;if(a.view==this.opts.minView){var s=new Date(n,i,t),o=this.d._isSelected(s,this.d.cellType);return o?void a._handleAlreadySelectedDates.bind(a,o,s)():void a._trigger("clickCell",s)}a.down(new Date(n,i,t))},_onClickCell:function(e){var i=t(e.target).closest(".datepicker--cell");i.hasClass("-disabled-")||this._handleClick.bind(this)(i)}}}(),function(){var e=t.fn.datepicker,i=e.Constructor;e.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},e.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",t.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",t.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",t.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),n=i.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',t.extend({title:e},this.opts));this.d.$nav.html(n),"years"==this.d.view&&t(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var n={action:e,label:this.d.loc[e]},a=i.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',n);t("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(a)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=t(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,n=e.year,a=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(n,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(n,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(n-1,t,a),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n+1,t,a),"year")||this._disableNav("next");break;case"years":var s=i.getDecade(this.d.date);this.d._isInRange(new Date(s[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(s[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){t('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var i=t(e.target).closest("[data-action]").data("action");this.d[i]()},_onClickNavTitle:function(e){return t(e.target).hasClass("-disabled-")?void 0:"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(){var e=t.fn.datepicker,i=e.Constructor;e.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},e.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=i.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.opts;this.minHours=e.minHours<0||e.minHours>23?0:e.minHours,this.minMinutes=e.minMinutes<0||e.minMinutes>59?0:e.minMinutes,this.maxHours=e.maxHours<0||e.maxHours>23?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||e.maxMinutes>59?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=i.getLeadingZeroNum,n={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.opts.minutesStep,minValue:e(this.minutes)},a=i.template('<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',n);this.$timepicker=t(a).appendTo(this.d.$datepicker),this.$ranges=t('[type="range"]',this.$timepicker),this.$hours=t('[name="hours"]',this.$timepicker),this.$minutes=t('[name="minutes"]',this.$timepicker),this.$hoursText=t(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=t(".datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=t('<span class="datepicker--time-current-ampm">').appendTo(t(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=i.getLeadingZeroNum(this.displayHours),t=i.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(i.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):i.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var n=e;e instanceof Date&&(n=i.getParsedDate(e).hours);var a="am";if(t||this.d.ampm)switch(!0){case 0==n:n=12;break;case 12==n:a="pm";break;case n>11:n-=12,a="pm"}return{hours:n,dayPeriod:a}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var i=t(e.target),n=i.attr("name");this.d.timepickerIsActive=!0,this[n]=i.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var i=t(e.target).attr("name");t(".datepicker--time-current-"+i,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var i=t(e.target).attr("name");this.d.inFocus||t(".datepicker--time-current-"+i,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}()}(window,jQuery),$(document).on("click","[js-client-card]",(function(e){var t=$(this).find("[js-client-id]").val();$("[js-client-card]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/getClientInfo",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){setClientCardInfo(e),$("[js-client-card]").prop("disabled",!1)},error:function(e){$("[js-client-card]").prop("disabled",!1)}})})),$(document).on("change paste keyup","[js-menu-search-input]",(function(e){$("[js-create-client]").attr("disabled","disabled")})),$(document).on("change paste keyup","[check-required]",(function(e){var t=$(this).attr("check-required"),i=$('[check-required="'+t+'"]'),n=!0;$.each(i,(function(e,t){""!==$.trim(t.value)&&(n=!1)})),n?$('[check-required="'+t+'"]').attr("required","required"):$('[check-required="'+t+'"]').removeAttr("required")}));var OLD_SELECTOR_VALUE=0,$paymentMethodList,$statusesList,CLIENT_DATA,HIDE_DEAL_FORM;function resetSearchClientMenu(){$("[js-menu-search-input]").val(""),$("[js-create-client]").attr("disabled","disabled")}function resetCreateDealForm(){$("[js-deal-form-kind-block]").removeClass("is-open"),$("[js-deal-form-kind]").html(""),$("[js-deal-form-mailing-block]").removeClass("is-open"),$("[js-deal-form-mailing]").prop("checked",!1),$("[js-deal-form-trial]").prop("checked",!1),$("[product-block]").addClass("menu-input_close"),$("[trial-block]").addClass("menu-input_close"),$("[product-category-block]").addClass("menu-input_close"),$("[js-deal-form-reminder-block]").removeClass("is-open"),$("[js-deal-form-reminder-btn]").addClass("is-open"),$("[js-deal-form-reminder]").prop("checked",!1),$("[js-deal-form]").trigger("reset"),$("[check-target-status]").val("1").trigger("change"),checkCreateDealProductTypes()}function checkCreateDealProductTypes(){if($("[product-types] option").length<=2){$("[product-types-block]").removeClass("is-open");var e=$("[product-types] option:last").val();$("[product-types]").val(e).trigger("change")}else $("[product-types-block]").addClass("is-open")}function setUpdateDealInfo(e){if($("#js-update-form-deal-status option:selected").removeAttr("selected"),$("#js-update-form-deal-social option:selected").removeAttr("selected"),$("#js-update-form-deal-pr option:selected").removeAttr("selected"),$("#js-update-form-deal-pr option:first").prop("selected",!0),$("#js-update-form-deal-sale-type option:selected").removeAttr("selected"),$("#js-update-form-deal-sale-type option:first").prop("selected",!0),$("#u-product-types option:selected").removeAttr("selected"),$("#u-product-types option:first").prop("selected",!0),$("#u-product-category option:selected").removeAttr("selected"),$("#u-product-category option:first").prop("selected",!0),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-start-date-block]").addClass("menu-input_close"),$("[js-update-form-kind-block]").removeClass("is-open"),$("[js-update-form-kind]").html(""),$("[js-update-form-deal-mailing]").prop("checked",!1),$("[js-update-form-deal-reminder]").prop("checked",!1),$("[js-update-form-deal-price]").val(0),$("#js-update-form-deal-status").val(e.status).trigger("change"),$("#js-update-form-deal-social").val(e.social).trigger("change"),$("[js-update-form-deal-deal-date]").val(e.dealDate),$("[js-update-form-deal-tag]").val(e.tag),$("[js-update-form-deal-comment]").val(e.comment),$("[js-update-form-deal-client]").val(e.idClient),$("[js-update-form-deal-manager]").val(e.idManager),$("[js-update-form-deal-id]").val(e.id),$("#js-update-form-deal-sale-type").val(e.type),"traffic"===e.type?($("[js-update-form-deal-mailing-block]").addClass("is-open"),e.isMailing?$("[js-update-form-deal-mailing]").prop("checked",!0):$("[js-update-form-deal-mailing]").prop("checked",!1)):($("[js-update-form-deal-mailing-block]").removeClass("is-open"),$("[js-update-form-deal-mailing]").prop("checked",!1)),e.reminder?($("[js-update-form-deal-reminder-block]").addClass("is-open"),$("[js-update-form-deal-reminder-btn]").removeClass("is-open"),$("[js-update-form-deal-reminder]").prop("checked",!0),$("[js-update-form-deal-reminder-date]").val(e.reminderDate),$("[js-update-form-deal-reminder-msg]").val(e.reminderMessage)):($("[js-update-form-deal-reminder-block]").removeClass("is-open"),$("[js-update-form-deal-reminder-btn]").addClass("is-open"),$("[js-update-form-deal-reminder]").prop("checked",!1),$("[js-update-form-deal-reminder-date]").val(""),$("[js-update-form-deal-reminder-msg]").val("")),1!==e.status){3==e.idSaleType?(createProductOptions($productMap[e.idProductCategory],"js-update-form-deal-pr"),$("[u-product-category-block]").removeClass("menu-input_close"),$("#u-product-category").val(e.idProductCategory),$("[u-trial-block]").addClass("menu-input_close")):(createProductOptions($coursesList,"js-update-form-deal-pr"),$("[u-start-date-block]").removeClass("menu-input_close"),$("[js-update-form-deal-start-date]").html('<option value="'+e.idStream+'">'+e.startDate+"</option>"),setUpdateStreams(e.idProduct),$("[u-trial-block]").removeClass("menu-input_close")),$("#u-product-types option").length>2?$("[u-product-types-block]").addClass("is-open"):$("[u-product-types-block]").removeClass("is-open"),$('#u-product-types [data-id="'+e.idSaleType+'"]').prop("selected",!0),$('#js-update-form-deal-pr [data-id="'+e.idProduct+'"]').prop("selected",!0),$("[u-product-block]").removeClass("menu-input_close");var t=createKindList(e.course);t.length>0&&($("[js-update-form-kind]").html(createKindOptions(t)),$("[js-update-form-kind]").val(e.kind),$("[js-update-form-kind-block]").addClass("is-open")),$("[js-update-form-deal-trial]").prop("checked",e.trial),$("[js-update-form-deal-price]").val(e.price),$("[js-deal-open-lessons]").prop("checked",e.allModulesHomeworkAllowed),$("[js-update-form-deal-product-type]").val(e.product),$("[js-update-form-deal-product-id]").val(e.idProduct)}$("[js-menu-update-deal]").addClass("is-open"),checkBodyHidden()}function checkUpdateDealProductTypes(){if($("#u-product-types option").length<=2){$("[u-product-types-block]").removeClass("is-open");var e=$("#u-product-types option:last").val();$("#u-product-types").val(e).trigger("change")}else $("[u-product-types-block]").addClass("is-open")}function setPaymentMethodList(e){$paymentMethodList=e}function setStatusesList(e){$statusesList=e}function setStreams(e,t){var i=new FormData;i.set("idCourse",Number(t)),$.ajax({type:"POST",url:"/transactions/getStreamsByIdCourse",data:i,processData:!1,contentType:!1,cache:!1,success:function(t){var i='<option value="" disabled selected>Выберите дату старта</option>';$.each(t,(function(e,t){i+='<option value="'+t.id+'">'+t.startDate+"</option>"})),e.html(i)},error:function(e){}})}function saveBill(e){$("[js-save-bill]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/saveBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),$("[js-menu-bill]").removeClass("is-open"),checkBodyHidden(),$("[js-bill-form]").trigger("reset"),$("[js-save-bill]").prop("disabled",!1)},error:function(e){$("[js-save-bill]").prop("disabled",!1)}})}function saveBillWithUpdate(e){$("[js-save-bills]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/saveBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard($CLIENT),e.id=e.idDeal,openBills(e),$("[js-bills-form]").trigger("reset"),$("[js-save-bills]").prop("disabled",!1),BILLS_TEMP_INFO={}},error:function(e){$("[js-save-bills]").prop("disabled",!1)}})}function updateDealStatusOnList(e){var t=$('[data-deal="'+e.id+'"]').find("[js-form-status]");t.parent($("form")).removeClassWild("deal-status__form_*").addClass("deal-status__form_"+e.code),$(t).find("option:selected").removeAttr("selected"),$(t).val(e.status)}function createClientCard(){var e={};e.name=$("[js-create-client-name]").val(),e.createDate=$("[js-create-client-date]").val(),e.idManager=$("[js-create-client-manager]").val(),e.link=$("[js-create-client-link]").val(),e.phone=$("[js-create-client-phone]").val(),e.email=$("[js-create-client-email]").val(),$("[js-create-client-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/saveClientInfo",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setClientCardInfo(e),$("[js-create-client-btn]").prop("disabled",!1)},error:function(e){CLIENT_DATA=e,$("[dialog]").find(".dialog__title").html("Хотите использовать его?"),$("[dialog]").find(".dialog__text").html("В базе данных найден клиент с такими же данными"),$("[dialog]").find("[accept-dialog]").attr("use-client",""),$("[dialog]").addClass("is-open"),$("[js-create-client-btn]").prop("disabled",!1)}})}function updateDealCard(e){void 0!==e&&$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getManagerDeals",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){var i=$("[js-deals-list]");i.html(""),$.each(t,(function(t,n){updateDealPriceOnList(n);var a="";$.each($statusesList,(function(e,t){a+='<option js-deal-form-status value="'+t.id+'" data-code="'+t.code+'" '+(t.id===n.status?'selected="selected" ':"")+'">'+t.title+"</option>"}));n.reminder&&(n.reminderMessage,n.reminderMessage);var s=$("<div/>").attr("class","deal deal_told deal_white").append($("<div/>").attr("class","deal-wrapper").append($("<div/>").attr("class","deal__wrapper deal__wrapper_bordered deal__wrapper_column").append($("<div/>").attr("class","deal__title").html(1===n.status?"Целевая заявка":n.course)).append($("<div/>").attr("class","deal__subtitle").append($("<div/>").attr("class",null!==n.kind?"deal__kind deal__kind_del":"deal__kind").html(n.kind)).append($("<div/>").attr("class","deal__date").html(n.createDate)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_overflow deal__wrapper_bordered c-tooltip").attr("js-deal-id",n.id).append($("<div/>").attr("class","c-tooltip__wrapper").append($("<div/>").attr("class","c-tooltip__text").html(n.managerAccessName))).append($("<div/>").attr("class","deal__social").append($("<div/>").attr("class","deal-social deal-social_"+n.socialCode))).append($("<div/>").attr("class","deal__manager").html(n.managerName)).append($("<div/>").attr("class","deal__sale-type").html(n.type))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_between deal__wrapper_bordered ").append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Стоимость")).append($("<div/>").attr("class","deal__sum-value").html(n.price))).append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Получено")).append($("<div/>").attr("class","deal__sum-value deal__sum-value_blue").html(n.paid))).append(n.isEditable&&1!==n.status?$("<div/>").attr("class","deal_bill").append($("<form/>").attr("js-add-bill-form","").attr("action","#").attr("class",n.isHidden?"hidden-deal":"").append($("<input/>").attr("type","hidden").attr("name","id").val(n.id)).append($("<button/>").attr("js-add-bill-button","").attr("class","add-btn"))):"")).append(n.isEditable&&1!==n.status?$("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<form/>").attr("js-deal-status-form","").attr("class","deal__select deal__select_"+n.statusCode).append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<select/>").attr("class","deal-select menu-input__input_select").attr("name","status").attr("js-deal-form-status","").html(a))):$("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__select deal__select_"+n.statusCode).append($("<div/>").attr("class","deal-select menu-input__input_select").html(n.statusName)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__reminder").append($("<div/>").attr("class",n.reminder?n.reminderExpiration?"deal__reminder-title deal-reminder deal-reminder_red ":n.reminderToday?"deal__reminder-title deal-reminder deal-reminder_green ":"deal__reminder-title deal-reminder deal-reminder_gray ":"deal__reminder-title deal__reminder-title_left").html(n.reminder?n.reminderDate:"Нет напоминания")).append(n.isEditable&&1!==n.status?$("<div/>").attr("class","add-reminder").append($("<form/>").attr("js-add-reminder-form","").attr("action","#").append($("<input/>").attr("type","hidden").attr("name","idDeal").val(n.id)).append($("<button/>").attr("js-add-reminder-button","").attr("class","add-btn"))):""))).append(n.isEditable?$("<div/>").attr("class","deal__wrapper deal__wrapper_column").append($("<form/>").attr("class","button_full").attr("action","#").attr("js-update-deal-form","").append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_white button_full").attr("js-update-deal-btn","").html("Редактировать сделку"))).append(n.isHidden?$("<form/>").attr("class","button_full").attr("action","#").attr("js-reveal-deal-form","").append($("<input/>").attr("data-hide-deal",n.id).attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_red button_full").attr("js-reveal-deal-btn","").append($("<span/>").attr("class","hidden-btn hidden-btn_left hidden-btn_reveal").html("Восстановить сделку"))):$("<form/>").attr("class","button_full").attr("action","#").attr("js-hide-deal-form","").append($("<input/>").attr("data-hide-deal",n.id).attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_red button_full").attr("js-hide-deal-btn","").append($("<span/>").attr("class","hidden-btn hidden-btn_left hidden-btn_hide").html("Скрыть сделку")))):$("<div/>").attr("class","deal__wrapper deal__wrapper_column").append($("<form/>").attr("class","button_full").attr("action","#").attr("js-view-deal-form","").append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_white button_full").attr("js-view-deal-btn","").html("Посмотреть сделку")))));i.append(s),loadModules(e,n.id)}));var n=$("<div/>").attr("js-create-deal","").attr("class","deal deal_told deal_create").append($("<div/>").attr("class","deal__btm-message").html("Добавить сделку"));i.append(n)}})}function loadModules(e,t){$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDealsModulesInfo",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(i){i.modules.length>0&&($modulesRoot=$("<div/>").attr("class","deal__access-lessons "),$lessons=$("<div/>").attr("class","deal__lessons"),$.each(i.modules,(function(n,a){$lessons.append($("<div/>").attr("js-module",a.idModule).attr("js-module-deal",t).attr("js-module-client",e).attr("js-allowed",i.allowed).attr("class","deal__lessons-item "+(a.enabled?"deal__lessons-item_active":"")).html(a.number))})),$access=$("<div/>").attr("class","deal__access").append($("<div/>").attr("class","deal__access-text")).html("Доступ к продукту").append($("<div/>").attr("class","deal__access-btn slide-toggle "+(i.allowed?"slide-toggle_active":"")).attr("js-id-deal-toggle",t).append($("<div/>").attr("class","slide-toggle__thumb"))),$modulesRoot.append($access),$modulesRoot.append($lessons),$modulesRoot.insertAfter($("[js-deal-id="+t+"]")),$(".slide-toggle[js-id-deal-toggle="+t+"]").click((function(t){var i=$(this),n=i.attr("js-id-deal-toggle"),a=i.hasClass("slide-toggle_active");a?i.removeClass("slide-toggle_active"):(i.addClass("slide-toggle_active"),$(".deal__lessons-item[js-module-deal="+n+"]").toggleClass("deal__lessons-item_active",!0)),changeAllowed(n,e,!a)})),$(".deal__lessons-item[js-module-deal="+t+"]").click((function(e){var t=$(this),i=t.attr("js-module"),n=t.attr("js-module-deal"),a=$(".slide-toggle[js-id-deal-toggle="+n+"]").hasClass("slide-toggle_active"),s=t.attr("js-module-client"),o=t.hasClass("deal__lessons-item_active");a&&(o?t.removeClass("deal__lessons-item_active"):t.addClass("deal__lessons-item_active"),changeEnabledModule(s,n,i,!o))})))}})}function changeAllowed(e,t,i){console.log("Change allowed",e,t,i),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/changeModulesAllowed",data:JSON.stringify({id:e,idClient:t,value:i}),dataType:"json",cache:!1,success:function(e){console.log(e)}})}function changeEnabledModule(e,t,i,n){console.log("Change enabled",e,t,i,n),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/changeModulesEnabled",data:JSON.stringify({idDeal:t,idModule:i,idClient:e,value:n}),dataType:"json",cache:!1,success:function(e){console.log(e)}})}function openUpdateReminder(e){$("[js-add-reminder-button]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getReminder",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){openReminderMenu(e),$("[js-add-reminder-button]").prop("disabled",!1)},error:function(e){$("[js-add-reminder-button]").prop("disabled",!1)}})}function openReminderMenu(e){$("[js-update-form-reminder-id-deal]").val(e.idDeal),$("[js-update-form-reminder-date]").val(e.reminderDate),$("[js-update-form-reminder-msg]").html(e.reminderMessage),e.reminder&&$("[js-delete-reminder-block]").addClass("is-open"),$("[js-menu-update-reminder]").addClass("is-open"),checkBodyHidden()}function clearReminderForm(){$("[js-update-form-reminder]").trigger("reset"),$("[js-update-form-reminder-msg]").html(""),$("[js-delete-reminder-block]").removeClass("is-open")}function updateReminder(e){$("[js-update-reminder]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveReminder",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),updateReminderOnList(e),clearReminderForm(),$("[js-menu-update-reminder]").removeClass("is-open"),checkBodyHidden(),$("[js-update-reminder]").prop("disabled",!1)},error:function(e){$("[js-update-reminder]").prop("disabled",!1)}})}function updateReminderOnList(e){var t=$('[data-deal="'+e.idDeal+'"]'),i="";e.reminder&&(i+='<div class="reminder-wrapper"><div class="reminder-date" >'+e.reminderDate+'</div><div class="reminder-msg">'+e.reminderMessage+"</div></div>"),i+='<div class="reminder '+(e.reminder?e.reminderExpiration?"reminder_red":e.reminderToday?"reminder_green":"reminder_gray":"")+'"></div>',e.reminder&&(i+='<div class="reminder-d">'+e.reminderDate+"</div>"),t.find("[data-deal-reminder]").html(i)}function hideDeal(e){$("[js-hide-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/hideDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-hide-deal-btn]").prop("disabled",!1),$('[data-hide-deal="'+e.id+'"]').closest(".deal").remove(),$('[data-hide-deal="'+e.id+'"]').closest(".custom-table__body-row").remove()},error:function(e){$("[js-hide-deal-btn]").prop("disabled",!1)}})}function setDealInfo(e){$("[js-update-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setUpdateDealInfo(e),$("[js-update-deal-btn]").prop("disabled",!1)},error:function(e){$("[js-update-deal-btn]").prop("disabled",!1)}})}function setUpdateStreams(e){var t=new FormData;t.set("idCourse",Number(e)),$.ajax({type:"POST",url:"/transactions/getStreamsByIdCourse",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){var t="";$.each(e,(function(e,i){t+='<option value="'+i.id+'">'+i.startDate+"</option>"})),$("[js-update-form-deal-start-date]").append(t)},error:function(e){}})}function updateDeal(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard(e.idClient),$("[js-menu-update-deal]").removeClass("is-open"),checkBodyHidden(),updateDealAfterUpdateOnList(e),$("[js-update-deal]").prop("disabled",!1)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateDealAfterUpdateOnList(e){var t=$('[data-deal="'+e.id+'"]');t.find("[data-deal-date-deal]").html(e.dealDate),t.find("[data-deal-social]").removeClassWild("deal-social_*").addClass("deal-social_"+e.socialCode).addClass("deal-social_big");var i=null!=e.course?e.course+(null!==e.kind&&""!==e.kind?" ("+e.kind+")":""):"Целевая заявка";t.find("[data-deal-course]").attr("title",i).html(i),t.find("[data-deal-type]").html(e.type),t.find("[data-deal-price]").html(e.price);var n=t.find(".column-paid");n.removeClassWild("column-paid_*"),e.price<=t.find("[data-deal-paid]").html().replace(/\D+/g,"")&&n.addClass("column-paid_green"),t.find("[data-deal-start-date]").html(e.startDate),null===e.tag?t.find("[data-deal-tag]").html("<div>—</div>"):t.find("[data-deal-tag]").html('<div title="'+e.tag+'" class="column-msg">'+e.tag+"</div>"),t.find("[data-deal-mailing]").html(e.coupling);var a=t.find("[js-form-status]");a.parent($("form")).removeClassWild("deal-status__form_*").addClass("deal-status__form_"+e.statusCode),a.on("change",(function(e){e.preventDefault()})),$("#"+$(a).attr("id")+" option:selected").removeAttr("selected"),$("#"+$(a).attr("id")).val(e.status);var s="";e.reminder&&(s+='<div class="reminder-wrapper"><div class="reminder-date" >'+e.reminderDate+'</div><div class="reminder-msg">'+e.reminderMessage+"</div></div>"),s+='<div class="reminder '+(e.reminder?e.reminderExpiration?"reminder_red":e.reminderToday?"reminder_green":"reminder_gray":"")+'"></div>',e.reminder&&(s+='<div class="reminder-d">'+e.reminderDate+"</div>"),t.find("[data-deal-reminder]").html(s)}function openBills(e){$("[js-add-bill-form]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/getManagerBills",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-bills-deal-id]").val(e.id),createBills(t),$("[js-menu-bills]").addClass("is-open"),checkBodyHidden(),$("[js-add-bill-form]").prop("disabled",!1)},error:function(e){$("[js-add-bill-form]").prop("disabled",!1)}})}function createBills(e){$("[js-bills-body]").html(""),e.length>0?$("[js-bills]").addClass("is-open"):$("[js-bills]").removeClass("is-open"),$.each(e,(function(e,t){var i="";i+='<div class="div-table__body-row">';var n="";$.each($paymentMethodList,(function(e,t){n+='<option value="'+t.title+'" data-code="'+t.code+'">'+t.title+"</option>"})),2===t.status?i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_checked"></div></div>':i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_unchecked"></div></div>',i+='<div class="div-table__body-col div-table__body-col_medium"><div class="column-text">'+t.manager+"</div></div>",i+='<form b-update-bill-form action="#" class="edit-form-bill"><input type="hidden" b-id-bill value="'+t.id+'" name="id" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input type="hidden" b-pm value="'+t.paymentMethod+'" name="paymentMethod"><input type="hidden" b-pm-code value="'+t.paymentMethodCode+'" name="paymentMethodCode"><div class="div-table__body-col div-table__body-col_small">'+t.billDate+"</div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xsmall"><input b-sum disabled name="sum" class="menu-input__input menu-input__input_small editable" value="'+t.sum+'" placeholder="0 ₽"></div>',i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div b-pm-wrapper class="pmethod-wrapper disabled"><select b-pm-selector disabled class="column_pmethod-select column_pmethod_'+t.paymentMethodCode+'">'+n+"</select></div></div>",i+='<div class="div-table__body-col div-table__body-col_medium  div-table__body-col_center div-table__body-col_r10"><input b-account-number disabled name="accountNumber" class="menu-input__input menu-input__input_small editable" value="'+(null===t.accountNumber?"":t.accountNumber)+'" placeholder="—"></div>',i+='<div class="div-table__body-col col-pay-date div-table__body-col_center div-table__body-col_medium "><div class="menu-input__wrapper menu-input__wrapper_xsmall"><input b-pay-date disabled name="payDate" class="datepicker-here-cs menu-input__input menu-input__input_small editable" autocomplete="off" value="'+(null===t.payDate?"":t.payDate)+'" data-autoclose="true" placeholder="—"/></div></div>',null===t.payDate?i+='<div class="div-table__body-col div-table__body-col_small col-status">Выставлен</div>':i+='<div class="div-table__body-col div-table__body-col_small col-status div-table__body-col_green">Оплачен</div>',i+='<div class="div-table__body-col div-table__body-col_small">'+("Новый клиент"===t.paymentType?"Первый":"Доплата")+"</div>",null!==t.link&&""!==t.link?i+='<div class="div-table__body-col div-table__body-col_xxsmall div-table__body-col_center"><div class="column-links"><div js-copy-link data-link="'+t.link+'" class="column_mwidth column_mwidth-copy"></div><a js-open-link href="'+t.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div></div>':i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div>—</div></div>',i+="</form>",i+='<div data-bill-id="'+t.id+'" class="div-table__body-col div-table__body-col_medium div-table__body-col_center"><div class="column-links">'+(null===t.comment?'<div js-add-sms-check js-check-btn class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-add-check"></div>':'<div js-delete-sms-check js-check-btn title="'+t.comment+'" class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-delete-check"></div>')+(null!==t.billImage&&""!==t.billImage?'<a class="column-img column_mwidth column-img_large div-table__body-col_center" data-fancybox="gallery" href="../'+t.billImage+'"><img src="/'+t.billImage+'"></a>':'<form js-upload-bill-form action="#" class="column_mwidth column_mwidth-large div-table__body-col_center div-table__body-col_fl" enctype="multipart/form-data"><input type="hidden" value="'+t.id+'" name="id" required><input type="hidden" value="false" name="isHidden" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input js-upload-bill accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="file'+e+'"/><label for="file'+e+'" class="js-labelFile"><span class="js-upload-file js-upload-file_small"></span></label></form>')+"</div></div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xxsmall">',1===t.status&&t.isEditable&&(i+='<div js-edit-btns class="column-links display-flex-none"><div js-edit-bill-accept class="column_mwidth column_mwidth-accept"></div><div js-edit-bill-cancel class="column_mwidth column_mwidth-cancel"></div></div><div js-edit-menu class="column-links display-flex-none is-open"><div js-edit-bill class="column_mwidth div-table__body-col_center column_mwidth-edit"></div><form js-delete-bill-form class="column-form" action="#"><input type="hidden" value="'+t.id+'" name="id" required><button js-delete-bill type="button" class="column_mwidth column_mwidth-delete"></button></form></div>'),i+="</div></div>",$("[js-bills-body]").html($("[js-bills-body]").html()+i)})),initDatePicker(),initFancy(),initEditBillForm(),initCancelEditBill(),initAcceptEditBill()}function initDatePickerPayDate(){$(".datepicker-here-pay").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}function initDatePicker(){$(".datepicker-here-cs").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}function initFancy(){$('[data-fancybox="gallery"]').fancybox({infobar:!1,buttons:["close"]})}function updateBillImageOnList(e){$('[js-upload-bill-form][bill-image="'+e.id+'"]').replaceWith('<a class="column-img column-img_mr5" data-fancybox="gallery'+e.id+'" href="/'+e.billImage+'">  <img src="/'+e.billImage+'"></a>')}$(document).on("focusin","[check-target-status]",(function(e){OLD_SELECTOR_VALUE=$("option:selected",this).val()})),$(document).on("change","[check-target-status]",(function(e){1==$("option:selected",this).val()?$(this).closest("form").find("[not-target]").removeClass("is-open").addClass("menu-input_close"):1==OLD_SELECTOR_VALUE&&($(this).closest("form").find("[not-target]").removeClass("menu-input_close").addClass("is-open"),checkUpdateDealProductTypes())})),$(document).on("change","[check-social]",(function(e){2==$("option:selected",this).val()?($(this).closest("form").find("[whatsap-required]").find(".menu-input__title").html("ID рекламной кампании / Смайлик + база *"),$(this).closest("form").find("[whatsap-required]").find("input").attr("required","required")):($(this).closest("form").find("[whatsap-required]").find(".menu-input__title").html("ID рекламной кампании / Смайлик + база"),$(this).closest("form").find("[whatsap-required]").find("input").removeAttr("required"))})),$(document).on("click","[js-create-client]",(function(e){$("[js-create-client-form]").trigger("reset");var t=$("[js-menu-search-input]").val();/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i.test(t)?$("[js-create-client-email]").val(t).trigger("change"):11===t.replace(/[^\d]/g,"").length?$("[js-create-client-phone]").val(t).trigger("change"):t.includes("vk.com")?$("[js-create-client-link]").val(t).trigger("change"):$("[js-create-client-name]").val(t),$('[check-required="client-info"]').trigger("change"),$("[js-menu-create-client]").addClass("is-open"),checkBodyHidden()})),$(document).on("click",".datepicker-here",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-deal",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-cs",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-pay",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click","[js-update-open-reminder]",(function(e){$("[js-update-form-deal-reminder-btn]").removeClass("is-open"),$("[js-update-form-deal-reminder-block]").addClass("is-open"),$("[js-update-form-deal-reminder-date]").val(""),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!0)})),$(document).on("click","[js-update-close-reminder]",(function(e){$("[js-update-form-deal-reminder-btn]").addClass("is-open"),$("[js-update-form-deal-reminder-block]").removeClass("is-open"),$("[js-update-form-deal-reminder-date]").val("—"),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!1)})),$(document).on("change","[js-update-form-deal-sale-type]",(function(e){"traffic"===$(this).val()?$("[js-update-form-deal-mailing-block]").addClass("is-open"):($("[js-update-form-deal-mailing-block]").removeClass("is-open"),$("[js-update-form-deal-mailing]").prop("checked",!1))})),$(document).on("change","[js-update-form-deal-pr]",(function(e){$("[js-update-form-deal-price]").val($("option:selected",this).attr("data-price")),$("[js-update-form-deal-product-type]").val($("option:selected",this).attr("data-type")),$("[js-update-form-deal-product-id]").val($("option:selected",this).attr("data-id")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-update-form-kind]").html(createKindOptions($list)),$("[js-update-form-kind-block]").addClass("is-open")):($("[js-update-form-kind-block]").removeClass("is-open"),$("[js-update-form-kind]").html("")),"курс"==$("[u-product-types]").val()&&setStreams($("[js-update-form-deal-start-date]"),$("option:selected",this).attr("data-id"))})),$(document).on("change","[js-deal-form-sale-type]",(function(e){"traffic"===$(this).val()?($("[js-deal-form-mailing-block]").addClass("is-open"),checkBodyHidden()):($("[js-deal-form-mailing-block]").removeClass("is-open"),$("[js-deal-form-mailing]").prop("checked",!1),checkBodyHidden())})),$(document).on("change","[js-deal-form-product]",(function(e){$("[js-deal-form-price]").val($("option:selected",this).attr("data-price")),$("[js-deal-form-product-type]").val($("option:selected",this).attr("data-type")),$("[js-deal-form-product-id]").val($("option:selected",this).attr("data-id")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-deal-form-kind]").html(createKindOptions($list)),$("[js-deal-form-kind-block]").addClass("is-open")):($("[js-deal-form-kind-block]").removeClass("is-open"),$("[js-deal-form-kind]").html("")),"курс"==$("[product-types]").val()&&setStreams($("[js-deal-form-start-date]"),$("option:selected",this).attr("data-id"))})),$(document).ready((function(){$(".datepicker-here-deal").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0}),$(".datepicker-here").datepicker({autoClose:!0,todayButton:!0});const e=$("[js-menu-client-card]");$("[js-menu-client-card-close-btn]").on("click",(function(){d.removeClass("is-open"),e.removeClass("is-open"),closeEdit(),checkBodyHidden()}));const t=$("[js-menu-update-deal]");$("[js-menu-update-deal-close-btn]").on("click",(function(){t.removeClass("is-open"),checkBodyHidden()}));const i=$("[js-menu-bills-close-btn]"),n=$("[js-menu-bills]");i.on("click",(function(){n.removeClass("is-open"),checkBodyHidden(),BILLS_TEMP_INFO={}}));const a=$("[js-menu-search-close-btn]"),s=$("[js-menu-search]");a.on("click",(function(){s.removeClass("is-open"),checkBodyHidden()}));const o=$("[js-menu-update-reminder-close-btn]"),r=$("[js-menu-update-reminder]");o.on("click",(function(){clearReminderForm(),r.removeClass("is-open"),checkBodyHidden()}));const l=$("[js-menu-create-client-close-btn]"),d=$("[js-menu-create-client]");l.on("click",(function(){$("js-create-client-form").submit("reset"),d.removeClass("is-open"),checkBodyHidden()}));const c=$("[js-menu-create-deal-close-btn]"),u=$("[js-menu-create-deal]");c.on("click",(function(){u.removeClass("is-open"),checkBodyHidden()}));const p=$("[js-menu-bill-close-btn]"),h=$("[js-menu-bill]");p.on("click",(function(){h.removeClass("is-open"),$("[js-bill-form]").submit("reset"),checkBodyHidden()})),initDatePickerPayDate()})),$(document).on("submit","[js-bill-form]",(function(e){e.preventDefault(),validateForm(this)&&saveBill($(this).serializeObject())})),$(document).on("click","[js-save-bills]",(function(e){e.preventDefault(),$("[js-bills-form]").trigger("submit")})),$(document).on("submit","[js-bills-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();saveBillWithUpdate(t)}})),$(document).on("click","[js-create-deal]",(function(e){resetCreateDealForm(),$("[js-menu-create-deal]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[close-dialog]",(function(e){removeAcceptBtnAttribute($(this).siblings("[accept-dialog]")),$(this).closest(".dialog").removeClass("is-open")})),$(document).on("change","[js-form-status]",(function(e){var t=$(this).parent($("[js-status-form]"));t.removeClassWild("deal-status__form_*"),t.addClass("deal-status__form_"+$("option:selected",this).attr("data-code"));var i=t.serializeObject();$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDealStatus",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){},error:function(e){}})})),$(document).on("change","[js-deal-form-status]",(function(e){var t=$(this).parent($("[js-deal-status-form]"));t.removeClassWild("deal__select_*");var i=$("option:selected",this).attr("data-code");t.addClass("deal__select_"+i);var n=t.serializeObject();n.code=i,$("[js-deal-form-status]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDealStatus",data:JSON.stringify(n),dataType:"json",cache:!1,success:function(e){updateDealStatusOnList(n),$("[js-deal-form-status]").prop("disabled",!1)},error:function(e){$("[js-deal-form-status]").prop("disabled",!1)}})})),$(document).on("click","[js-search-client]",(function(e){resetSearchClientMenu(),$("[js-menu-search]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-create-client-btn]",(function(e){e.preventDefault(),$("[js-menu-search]").removeClass("is-open"),$("[js-create-client-form]").trigger("submit")})),$(document).on("submit","[js-create-client-form]",(function(e){e.preventDefault(),validateForm(this)&&createClientCard()})),$(document).on("click","[use-client]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),$("[js-client-card-name]").val(CLIENT_DATA.responseJSON.name),$("[js-client-card-date]").text(CLIENT_DATA.responseJSON.createDate),$("[js-client-card-manager]").text(CLIENT_DATA.responseJSON.manager),$("[js-client-card-link]").val(CLIENT_DATA.responseJSON.link),$("[js-client-card-phone]").val(CLIENT_DATA.responseJSON.phone),$("[js-client-card-email]").val(CLIENT_DATA.responseJSON.email),$("[js-client-card-comment]").val(CLIENT_DATA.responseJSON.comment),$("[js-client-card-id]").val(CLIENT_DATA.responseJSON.id),$("[js-client-name-copy]").text(CLIENT_DATA.responseJSON.name),$("[js-client-name-copy]").attr("data-link",CLIENT_DATA.responseJSON.name),setIdClient(CLIENT_DATA.responseJSON.id),updateDealCard($CLIENT),$("[js-menu-client-card]").addClass("is-open"),checkBodyHidden(),$("[js-create-client-form]").trigger("reset")})),$(document).on("submit","[js-menu-search-form]",(function(e){e.preventDefault();var t=$("[js-menu-search-input]").val();if(""!==$.trim(t)){var i={};i.search=t,$("[js-menu-search-input]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/searchClients",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){$("[js-client-card-list]").html(""),0===e.length?$("[js-create-client]").prop("disabled",!1):($("[js-create-client]").prop("disabled",!0),$.each(e,(function(e,t){var i=$("<div/>").attr("js-client-card","").attr("class","client-card").append($("<input/>").attr("type","hidden").attr("class","js-client-id-l").attr("js-client-id","").val(t.id)).append($("<div/>").attr("class","client-card__title").html(t.name)).append($("<div/>").attr("class","client-card__info").append($("<div/>").attr("class","client-card__info-link").html(t.link)).append($("<div/>").attr("class","client-card__info-phone").html(t.phone)));$("[js-client-card-list]").append(i)}))),$("[js-menu-search-input]").prop("disabled",!1)},error:function(e){$("[js-menu-search-input]").prop("disabled",!1)}})}})),$(document).on("click","[js-add-reminder-button]",(function(e){e.preventDefault(),$(this).closest("[js-add-reminder-form]").trigger("submit")})),$(document).on("submit","[js-add-reminder-form]",(function(e){e.preventDefault(),openUpdateReminder($(this).find('[name="idDeal"]').val())})),$(document).on("click","[js-delete-reminder]",(function(e){e.preventDefault();var t=$(this).closest("[js-update-form-reminder]").find('[name="idDeal"]').val();$("[js-delete-reminder]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/deleteReminder",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),$('[data-deal="'+t+'"]').find("[data-deal-reminder]").html('<div class="reminder"></div>'),clearReminderForm(),$("[js-menu-update-reminder]").removeClass("is-open"),checkBodyHidden(),$("[js-delete-reminder]").prop("disabled",!1)},error:function(e){$("[js-delete-reminder]").prop("disabled",!1)}})})),$(document).on("click","[js-update-reminder]",(function(e){e.preventDefault(),$("[js-update-form-reminder]").trigger("submit")})),$(document).on("submit","[js-update-form-reminder]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateReminder(t)}})),$(document).on("click","[js-hide-deal-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите скрыть сделку?"),$("[dialog]").find(".dialog__text").html("В данном случае информация о сделке не будет учитываться"),$("[dialog]").find("[accept-dialog]").attr("hide-deal",""),$("[dialog]").addClass("is-open"),HIDE_DEAL_FORM=$(this).closest("[js-hide-deal-form]")})),$(document).on("click","[hide-deal]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),HIDE_DEAL_FORM.trigger("submit")})),$(document).on("submit","[js-hide-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();hideDeal(t)}})),$(document).on("click","[js-update-deal-btn]",(function(e){e.preventDefault(),$(this).closest("[js-update-deal-form]").trigger("submit")})),$(document).on("submit","[js-update-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();setDealInfo(t)}})),$(document).on("click","[js-update-deal]",(function(e){e.preventDefault(),$("[js-update-form-deal]").trigger("submit")})),$(document).on("submit","[js-update-form-deal]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateDeal(t)}})),$(document).on("submit","[js-add-bill-form]",(function(e){e.preventDefault(),openBills($(this).serializeObject())})),$(document).on("click","[js-add-bill-up-client]",(function(e){var t=$(this).closest(".custom-table__body-row").find("[js-client-id]").val(),i=$(this).closest(".custom-table__body-row").find("[js-client-id]").siblings("span").html();setIdClient(t),$("[js-client-name-copy]").text(i),$("[js-client-name-copy]").attr("data-link",i)})),$(document).on("change","[js-upload-bill]",(function(e){var t=$(this).closest("[js-upload-bill-form]"),i=new FormData(t[0]);$("[js-upload-bill]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/api/bills/uploadBill",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){updateBillImageOnList(e);var i=t.serializeObject();i.id=i.idDeal,openBills(i),$("[js-upload-bill]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill]").prop("disabled",!1)}})})),$(document).on("change","[js-upload-bill-front]",(function(e){var t=$(this).closest("[js-upload-bill-form]"),i=new FormData(t[0]);$("[js-upload-bill-front]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/api/bills/uploadBill",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){updateBillImageOnList(e),$("[js-upload-bill-front]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill-front]").prop("disabled",!1)}})}));var BILLS_INFO_TEMP={},ACCEPT_EDITE_BTN,SAVE_DEAL_TYPE,$coursesList,$productMap;function createDeal(e){$("[js-save-deal]").prop("disabled",!0),$("[js-save-and-bill-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard(e.idClient),$("[js-bill-deal-id]").val(t),$("[js-menu-create-deal]").removeClass("is-open"),checkBodyHidden(),$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)},error:function(e){$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)}})}function createDealAndBill(e){$("[js-save-deal]").prop("disabled",!0),$("[js-save-and-bill-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard(e.idClient),$("[js-bill-deal-id]").val(t),$("[js-menu-create-deal]").removeClass("is-open"),checkBodyHidden(),setBillInfo(e),$("[js-menu-bill]").addClass("is-open"),checkBodyHidden(),$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)},error:function(e){$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)}})}function setBillInfo(e){$("[js-bill-info-product]").text(e.course),$("[js-bill-info-sum]").text(e.price),$("[js-bill-info-date]").text(e.dealDate)}function setCoursesList(e){$coursesList=e}function createProductOptions(e,t){var i="";i+='<option value="" disabled selected>Выберите продукт</option>',$.each(e,(function(e,t){i+='<option data-id="'+t.id+'" value="'+t.name+'" data-type="'+t.type+'" data-price="'+t.price+'"">'+t.name+"</option>"})),$("["+t+"]").html(i)}function createEmptyProductOptions(e){$("["+e+"]").html('<option value="" disabled selected>Выберите продукт</option>')}function setProductMap(e){$productMap=e}$(document).on("click","[edit-bill]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[b-pay-date]");i.removeAttr("disabled"),t.payDate=i.val();var n=$(this).closest(".custom-table__body-row").find("[b-sum]");t.sum=n.val(),n.val(n.val().replace(" ₽","")).removeAttr("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeAttr("disabled");var a=$(this).closest(".custom-table__body-row").find("[b-pm]");t.paymentMethod=a.val();var s=$(this).closest(".custom-table__body-row").find("[b-pm-code]");t.paymentMethodCode=s.val();var o=$(this).closest(".custom-table__body-row").find("[b-account-number]");o.removeAttr("disabled"),t.accountNumber=o.val(),BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]=t})),$(document).on("click","[edit-bill-cancel]",(function(e){e.preventDefault();var t=BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()];$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(t.payDate).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-sum]").val(t.sum).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-account-number]").val(t.accountNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+t.paymentMethodCode).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm]").val(t.paymentMethod),$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(t.paymentMethodCode),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]})),$(document).on("click","[edit-bill-accept]",(function(e){e.preventDefault(),ACCEPT_EDITE_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[b-id-bill]").val(),t.idDeal=$(this).closest(".custom-table__body-row").find("[b-id-deal]").val(),t.paymentMethod=$(this).closest(".custom-table__body-row").find("[b-pm]").val(),t.paymentMethodCode=$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(),t.sum=$(this).closest(".custom-table__body-row").find("[b-sum]").val(),t.accountNumber=$(this).closest(".custom-table__body-row").find("[b-account-number]").val(),t.payDate=$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(),$("[edit-bill-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/updateBill",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(e.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(e.sum+" ₽").attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(e.accountNumber).attr("disabled",!0),null===e.payDate||""===e.payDate?ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").removeClass("column-bill__status_paid").html("Выставлен"):ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").addClass("column-bill__status_paid").html("Оплачен"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+e.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(e.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(e.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)},error:function(e){var i=BILLS_INFO_TEMP[t.id];ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(i.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(i.sum).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(i.accountNumber).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+i.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(i.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(i.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)}})})),$(document).on("click","[js-save-deal]",(function(e){e.preventDefault(),SAVE_DEAL_TYPE="s",$("[js-deal-form]").trigger("submit")})),$(document).on("click","[js-save-and-bill-deal]",(function(e){e.preventDefault(),SAVE_DEAL_TYPE="sb",$("[js-deal-form]").trigger("submit")})),$(document).on("submit","[js-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();"s"===SAVE_DEAL_TYPE?createDeal(t):"sb"===SAVE_DEAL_TYPE&&createDealAndBill(t)}})),$(document).on("change","[product-types]",(function(e){$("[js-deal-form-price]").val(0),$("[js-deal-form-start-date]").html('<option value="" disabled selected>Выберите дату старта</option>');var t=$("option:selected",this).attr("data-id");$("#product-category option:selected").removeAttr("selected"),$("#product-category option:first").prop("selected",!0),2==t?(createProductOptions($coursesList,"js-deal-form-product"),$("[product-block]").removeClass("menu-input_close"),$("[trial-block]").removeClass("menu-input_close"),$("[product-category-block]").addClass("menu-input_close"),$("[start-date-block]").removeClass("menu-input_close")):3==t?(createEmptyProductOptions("js-deal-form-product"),$("[product-category-block]").removeClass("menu-input_close"),$("[product-block]").addClass("menu-input_close"),$("[trial-block]").addClass("menu-input_close"),$("[start-date-block]").addClass("menu-input_close")):($("[product-block]").addClass("menu-input_close"),$("[trial-block]").addClass("menu-input_close"),$("[product-category-block]").addClass("menu-input_close"),$("[start-date-block]").addClass("menu-input_close"))})),$(document).on("change","[product-category]",(function(e){$("[js-deal-form-price]").val(0);var t=$("option:selected",this).val();createProductOptions($productMap[t],"js-deal-form-product"),$("[product-block]").removeClass("menu-input_close")})),$(document).on("change","[u-product-category]",(function(e){$("[js-update-form-deal-price]").val(0);var t=$("option:selected",this).val();createProductOptions($productMap[t],"js-update-form-deal-pr"),$("[u-product-block]").removeClass("menu-input_close")})),$(document).on("change","[u-product-types]",(function(e){$("[js-update-form-deal-price]").val(0),$("[js-update-form-deal-start-date]").html('<option value="" disabled selected>Выберите дату старта</option>');var t=$("option:selected",this).attr("data-id");$("#u-product-category option:selected").removeAttr("selected"),$("#u-product-category option:first").prop("selected",!0),$("#js-update-form-deal-pr option:selected").removeAttr("selected"),$("#js-update-form-deal-pr option:first").prop("selected",!0),2==t?(createProductOptions($coursesList,"js-update-form-deal-pr"),$("[u-product-block]").removeClass("menu-input_close"),$("[u-trial-block]").removeClass("menu-input_close"),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-start-date-block]").removeClass("menu-input_close")):3==t?(createEmptyProductOptions("js-update-form-deal-pr"),$("[u-product-category-block]").removeClass("menu-input_close"),$("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-start-date-block]").addClass("menu-input_close")):($("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-start-date-block]").removeClass("menu-input_close"))}));var BlockEmbed=Quill.import("blots/block");class IFrame extends BlockEmbed{static create(e){let t=super.create(e);return t.innerHTML=e,t}}IFrame.blotName="iframe",IFrame.className="ql-iframe",IFrame.tagName="div",Quill.register({"formats/iframe":IFrame});var icons=Quill.import("ui/icons"),$typeList;function setTypes(e){$typeList=e}function createEmployee(e){$("[js-save-employee]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveEmployee",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addRowToTable(e),$("[js-menu-create-employee]").removeClass("is-open"),checkBodyHidden(),$("[js-employee-form]").trigger("reset"),$("[js-save-employee]").prop("disabled",!1)},error:function(e){$("[js-save-employee]").prop("disabled",!1)}})}function addRowToTable(e){var t="";$.each($typeList,(function(i,n){t+='<option value="'+n.id+'"'+(n.id===e.type?'selected="selected" ':"")+'">'+n.title+"</option>"})),$("[table-body]").html('<tr data-employee="'+e.idEmployee+'" class="custom-table__body-row">                        <input type="hidden" u-id value="'+e.idEmployee+'" name="id" required>                        <td class="custom-table__body-col">'+e.idEmployee+'</td>                        <td class="custom-table__body-col">                            <div class="avatar-upload">                                <form u-upload-avatar-form action="#" enctype="multipart/form-data">                                    <input type="hidden" value="'+e.idEmployee+'" name="id" required>                                    <input u-upload-avatar accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="avatar'+e.idEmployee+'">                                    <label for="avatar'+e.idEmployee+'">                                            <span class="avatar-upload__upload avatar-upload__upload_default-user"></span>                                    </label>                                </form>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_xlarge" >                            <input u-name name="name"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.name+'"                                   value="'+e.name+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-phone name="phone"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.phone+'"                                   value="'+e.phone+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-link name="link"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.link+'"                                   value="'+e.link+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-doorscardnumber name="doorsCardNumber"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.doorsCardNumber+'"                                   value="'+e.doorsCardNumber+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_small">                            <input u-birthday                                   data-position="top left"                                   name="birthday"                                   class="datepicker-here-cs menu-input__input menu-input__input_small editable"                                   autocomplete="off"                                   value="'+e.birthday+'"                                   disabled                                   data-autoclose="true"                                   placeholder="—">                        </td>                        <td class="custom-table__body-col">                            <div class="input-element__checkbox input-element__checkbox_mid">                                <input u-ishaskey                                       name="isHasKey"                                       type="checkbox"                                       class="checkbox"                                       value="true"                                       disabled                                       id="key'+e.idEmployee+'"'+(e.isHasKey?"checked=checked":"")+'                                  ">                                <label class="checkbox-label checkbox-label_gray" for="key'+e.idEmployee+'"></label>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-type-wrapper class="menu-input__wrapper menu-input__wrapper_select disabled">                                <select u-type-selector disabled class="editable menu-input__input menu-input__input_medium menu-input__input_select menu-input__input_white">                                    <option value="0" disabled>Выберите тип</option>'+t+'                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-dismiss-wrapper class="indicated-select menu-input__wrapper menu-input__wrapper_select disabled indicated-select_'+e.isNotDisMiss+'">                                <select u-dismiss-selector disabled class="editable menu-input__input menu-input__input_xsmall menu-input__input_select menu-input__input_white">                                    <option value="true" selected=selected>Работает</option>                                    <option value="false">Уволен</option>                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-btns class="column-links display-flex-none">                                <div edit-user-accept class="column_mwidth column_mwidth-accept"></div>                                <div edit-user-cancel class="column_mwidth column_mwidth-cancel"></div>                            </div>                            <div edit-menu class="column-links display-flex-none is-open">                                <div edit-user class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>                            </div>                        </td>                    </tr>'+$("[table-body]").html()),initDatePicker()}function initDatePicker(){$(".datepicker-here-cs").datepicker({autoClose:!0})}icons.iframe='<i class="fa fa-bold" aria-hidden="true"></i>',$(document).ready((function(){const e=$("#editor-hidden");var t=new Quill("#editor",{theme:"snow",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"bullet"}],[{align:["","center","right"]}],["video"],["iframe"],["clean"]]}});t.on("text-change",(function(i,n,a){e.val(t.root.innerHTML)}))})),$(document).on("change","[u-upload-avatar]",(function(e){var t=$(this).closest("[u-upload-avatar-form]"),i=new FormData(t[0]);$("[js-upload-bill]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/settings/users/uploadAvatar",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){t.find(".avatar-upload__upload").removeClassWild("avatar-upload__upload_*"),t.find(".avatar-upload__upload").html('<img src="/'+e+'" alt>'),$("[u-upload-avatar]").prop("disabled",!1)},error:function(e){$("[u-upload-avatar]").prop("disabled",!1)}})})),$(document).on("change",".indicated-select select",(function(e){var t=$("option:selected",this).attr("value");$(this).closest(".indicated-select").removeClassWild("indicated-select_*").addClass("indicated-select_"+t)})),$(document).ready((function(){const e=$("[js-create-employee]"),t=$("[js-menu-create-employee-close-btn]"),i=$("[js-menu-create-employee]"),n=$("[js-save-employee]"),a=$("[js-employee-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=a.serializeObject();createEmployee(t)}})),initDatePicker()}));var USERS_INFO_TEMP={},USERS_ACCEPT_BTN,$typeList;function setTypes(e){$typeList=e}function createEmployee(e,t){$("[js-save-employee]").prop("disabled",!0),$("[js-save-examiner]").prop("disabled",!0),$.ajax({type:"POST",url:"saveEmployee",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){addRowToTable(e,t),$("[js-menu-create-employee]").removeClass("is-open"),$("[js-menu-create-examiner]").removeClass("is-open"),checkBodyHidden(),$("[js-employee-form]").trigger("reset"),$("[js-examiner-form]").trigger("reset"),$("[js-save-employee]").prop("disabled",!1),$("[js-save-examiner]").prop("disabled",!1)},error:function(e){$("[js-save-employee]").prop("disabled",!1),$("[js-save-examiner]").prop("disabled",!1)}})}function addTypeOptions(e){var t='<option value="" disabled selected>Выберите статус</option>',i=$typeList[""+e];$.each(i,(function(e,i){t+='<option value="'+i.id+'">'+i.title+"</option>"})),$("[js-employee-form-type]").html(t)}function addIdDepartment(e){$("[js-employee-dep]").val(e)}function addRowToTable(e,t){var i="",n=$typeList[""+e.department];$.each(n,(function(t,n){i+='<option value="'+n.id+'" '+(n.id===e.type?'selected="selected" ':"")+">"+n.title+"</option>"}));var a=$("[id-department="+e.idDepartment+"]").closest(".content-main__panel").find("[table-body]");a.html('<tr data-employee="'+e.idEmployee+'" class="custom-table__body-row">                        <input type="hidden" u-id value="'+e.idEmployee+'" name="id" required>                        <td class="custom-table__body-col">'+e.idEmployee+'</td>                        <td class="custom-table__body-col">                            <div class="avatar-upload">                                <form u-upload-avatar-form action="#" enctype="multipart/form-data">                                    <input type="hidden" value="'+e.idEmployee+'" name="id" required>                                    <input u-upload-avatar accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="avatar'+e.idEmployee+'">                                    <label for="avatar'+e.idEmployee+'">                                            <span class="avatar-upload__upload avatar-upload__upload_default-user"></span>                                    </label>                                </form>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_xlarge" >                            <input u-name name="name"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.name+'"                                   value="'+e.name+'"                                   disabled                                   placeholder="—">                        </td>'+(t?'                        <td class="custom-table__body-col custom-table__body-col_xlarge">                            <input u-username name="user.username"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.user.username+'"                                   value="'+e.user.username+'"                                   disabled                                   placeholder="—"                                   required>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-password name="user.password"                                   class="menu-input__input menu-input__input_small editable"                                   value=""                                   disabled                                   placeholder="✱✱✱✱✱✱"                                   required>                        </td>':"")+'                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-phone name="phone"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.phone+'"                                   value="'+e.phone+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-link name="link"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.link+'"                                   value="'+e.link+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-doorscardnumber name="doorsCardNumber"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.doorsCardNumber+'"                                   value="'+e.doorsCardNumber+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_small">                            <input u-birthday                                   data-position="top left"                                   name="birthday"                                   class="datepicker-here-cs menu-input__input menu-input__input_small editable"                                   autocomplete="off"                                   value="'+e.birthday+'"                                   disabled                                   data-autoclose="true"                                   placeholder="—">                        </td>                        <td class="custom-table__body-col">                            <div class="input-element__checkbox input-element__checkbox_mid">                                <input u-ishaskey                                       name="isHasKey"                                       type="checkbox"                                       class="checkbox"                                       value="true"                                       disabled                                       id="key'+e.idEmployee+'"'+(e.isHasKey?"checked=checked":"")+'                                  ">                                <label class="checkbox-label checkbox-label_gray" for="key'+e.idEmployee+'"></label>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-type-wrapper class="menu-input__wrapper menu-input__wrapper_select disabled">                                <select u-type-selector disabled class="editable menu-input__input menu-input__input_medium menu-input__input_select menu-input__input_white">                                    <option value="0" disabled>Выберите тип</option>'+i+'                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-dismiss-wrapper class="indicated-select menu-input__wrapper menu-input__wrapper_select disabled indicated-select_'+e.isNotDisMiss+'">                                <select u-dismiss-selector disabled class="editable menu-input__input menu-input__input_xsmall menu-input__input_select menu-input__input_white">                                    <option value="true" selected=selected>Работает</option>                                    <option value="false">Уволен</option>                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-btns class="column-links display-flex-none">                                <div edit-employee-accept class="column_mwidth column_mwidth-accept"></div>                                <div edit-employee-cancel class="column_mwidth column_mwidth-cancel"></div>                            </div>                            <div edit-menu class="column-links display-flex-none is-open">                                <div edit-employee class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>                            </div>                        </td>                    </tr>'+a.html()),initDatePicker()}function initDatePicker(){$(".datepicker-here-e").datepicker({autoClose:!0})}$(document).on("click","[edit-user]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[u-name]");t.name=i.val();var n=$(this).closest(".custom-table__body-row").find("[u-phone]");n.removeAttr("disabled"),t.phone=n.val();var a=$(this).closest(".custom-table__body-row").find("[u-link]");a.removeAttr("disabled"),t.link=a.val();var s=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]");s.removeAttr("disabled"),t.doorsCardNumber=s.val();var o=$(this).closest(".custom-table__body-row").find("[u-birthday]");o.removeAttr("disabled"),t.birthday=o.val();var r=$(this).closest(".custom-table__body-row").find("[u-ishaskey]");r.removeAttr("disabled"),t.isHasKey=r.prop("checked"),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").removeAttr("disabled");var l=$(this).closest(".custom-table__body-row").find("[u-type-selector]");t.type=l.val(),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").removeAttr("disabled");var d=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]");t.dismiss=d.val(),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]=t})),$(document).on("click","[edit-user-cancel]",(function(e){e.preventDefault();var t=USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()];$(this).closest(".custom-table__body-row").find("[u-name]").val(t.name).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-phone]").val(t.phone).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-link]").val(t.link).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(t.doorsCardNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-birthday]").val(t.birthday).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",t.isHasKey).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(t.type).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.dismiss).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(t.dismiss).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]})),$(document).on("click","[edit-user-accept]",(function(e){e.preventDefault(),USERS_ACCEPT_BTN=$(this);var t=new Object;t.idEmployee=$(this).closest(".custom-table__body-row").find("[u-id]").val(),t.idCompany=$(this).closest(".custom-table__body-row").find("[u-id-company]").val(),t.name=$(this).closest(".custom-table__body-row").find("[u-name]").val(),t.phone=$(this).closest(".custom-table__body-row").find("[u-phone]").val(),t.link=$(this).closest(".custom-table__body-row").find("[u-link]").val(),t.doorsCardNumber=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(),t.birthday=$(this).closest(".custom-table__body-row").find("[u-birthday]").val(),t.isHasKey=$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked"),t.type=$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(),t.isNotDisMiss=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(),$("[edit-user-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/settings/users/update",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(e.name).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(e.phone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(e.link).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(e.doorsCardNumber).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(e.birthday).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",e.isHasKey).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(e.type).attr("disabled",!0),void 0!==e.isNotDisMiss&&(USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(e.isNotDisMiss.toString()).attr("disabled",!0)),USERS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[e.id],$("[edit-user-accept]").prop("disabled",!1)},error:function(e){var i=USERS_INFO_TEMP[t.idEmployee];USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(i.name).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(i.phone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(i.link).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(i.doorsCardNumber).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(i.birthday).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",i.isHasKey).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(i.type).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(i.dismiss).attr("disabled",!0),USERS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[e.id],$("[edit-user-accept]").prop("disabled",!1)}})})),$(document).on("change","[u-upload-avatar]",(function(e){var t=$(this).closest("[u-upload-avatar-form]"),i=new FormData(t[0]);$("[js-upload-bill]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"uploadAvatar",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){t.find(".avatar-upload__upload").removeClassWild("avatar-upload__upload_*"),t.find(".avatar-upload__upload").html('<img src="/'+e+'" alt>'),$("[u-upload-avatar]").prop("disabled",!1)},error:function(e){$("[u-upload-avatar]").prop("disabled",!1)}})})),$(document).on("change",".indicated-select select",(function(e){var t=$("option:selected",this).attr("value");$(this).closest(".indicated-select").removeClassWild("indicated-select_*").addClass("indicated-select_"+t)})),$(document).on("click","[js-create-examiner]",(function(e){$("[js-menu-create-examiner]").addClass("is-open"),addTypeOptions($(this).siblings("[department]").attr("department")),addIdDepartment($(this).siblings("[department]").attr("id-department")),checkBodyHidden()})),$(document).on("click","[js-menu-create-examiner-close-btn]",(function(e){$("[js-menu-create-examiner]").removeClass("is-open"),$("[js-examiner-form]").trigger("reset"),checkBodyHidden()})),$(document).on("click","[js-save-examiner]",(function(e){e.preventDefault(),$("[js-examiner-form]").trigger("submit")})),$(document).on("submit","[js-examiner-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-examiner-form]")[0]);createEmployee(t,!0)}})),$(document).ready((function(){const e=$("[js-create-employee]"),t=$("[js-menu-create-employee-close-btn]"),i=$("[js-menu-create-employee]"),n=$("[js-save-employee]"),a=$("[js-employee-form]");e.on("click",(function(){i.addClass("is-open");var e=$(this).siblings("[department]").attr("department");"supervision"===e?($("[js-supervisor-password-item]").show(),$("[js-supervisor-login-item]").show()):($("[js-supervisor-password-item]").hide(),$("[js-supervisor-login-item]").hide()),addTypeOptions(e),addIdDepartment($(this).siblings("[department]").attr("id-department")),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-employee-form]")[0]);createEmployee(t,!1)}})),initDatePicker()}));var EMPLOYEE_INFO_TEMP={},EMPLOYEE_ACCEPT_BTN,FILTER_FROM_BACK,$paymentMethodList,$statusesList,HIDE_DEAL_FORM,IS_HIDDEN_DEAL;function setFunnelFilter(e){FILTER_FROM_BACK=e}function resetFilter(e){$("#year option:selected").removeAttr("selected"),$("#year").val(e.year),$("#idManager option:selected").removeAttr("selected"),$("#idManager").val(e.idManager),$("#project option:selected").removeAttr("selected"),$("#project").val(e.project),$("#course option:selected").removeAttr("selected"),$("#course").val(e.course),$("#periodType option:selected").removeAttr("selected"),$("#periodType").val(e.periodType)}function resetPlatform(){$("#platform option:selected").removeAttr("selected"),$("#platform option:first").prop("selected",!0)}function resetChannel(){$("#channel").html('<option value="all" selected>Все источники</option>')}function resetCommunity(){$("#community").val("Все аудитории"),$("[js-communites]").val("Все аудитории")}function resetCommunityList(){$("[community-table]").html('<tr js-menu-purchase js-menu-purchase-all class="body__row body__row_small body__row_channel">                                    <td class="body__cell body__cell_5p">                                        <input js-menu-checker type="checkbox" id="Все аудитории" class="checkbox " name="communites" value="Все аудитории" checked/>                                        <label class="checkbox-label" for="Все аудитории"></label>                                    </td>                                    <td class="body__cell body__cell_19p" js-menu-community>Все аудитории</td>                                    <td class="body__cell body__cell_19p"></td>                                </tr>                                <tr js-menu-purchase class="body__row body__row_small body__row_channel">                                    <td class="body__cell body__cell_5p">                                        <input js-menu-checker type="checkbox" id="Неизвестно" class="checkbox " name="communites" value="unknown" checked/>                                        <label class="checkbox-label" for="Неизвестно"></label>                                    </td>                                    <td class="body__cell body__cell_19p" js-menu-community>Неизвестно</td>                                    <td class="body__cell body__cell_19p"></td>                                </tr>')}function setChannelByPlatform(e){$("[js-platform]").prop("disabled",!0),$.ajax({type:"POST",url:"getChannels",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){var t=$("#channel").html(),i="";$.each(e,(function(e,t){i+='<option value="'+t+'">'+t+"</option>"})),$("#channel").html(t+i),$("[js-platform]").prop("disabled",!1)},error:function(e){$("[js-platform]").prop("disabled",!1)}})}function setCommunityByChannel(e){$("[js-community]").prop("disabled",!0),$.ajax({type:"POST",url:"getCommunities",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){var t=$("[community-table]").html(),i="";$.each(e,(function(e,t){i+='<tr js-menu-purchase class="body__row body__row_small body__row_channel">                                    <td class="body__cell body__cell_5p">                                        <input js-menu-checker type="checkbox" id="'+t.name+'" class="checkbox" name="communites" value="'+t.name+'" checked/>                                        <label class="checkbox-label" for="'+t.name+'"></label>                                    </td>                                    <td class="body__cell body__cell_19p" js-menu-community >'+t.name+'</td>                                    <td class="body__cell body__cell_19p">'+t.link+"</td>                                </tr>"})),$("[community-table]").html(t+i),$("[js-menu]").addClass("is-open"),checkBodyHidden(),$("[js-community]").prop("disabled",!1)},error:function(e){$("[js-community]").prop("disabled",!1)}})}function checkSelect(){let e=$("[js-menu-purchase]").length-1;var t=0;$("[js-menu-purchase]").each((function(){var e=$(this).attr("js-menu-purchase-all");void 0!==e&&!1!==e||$(this).find("[js-menu-checker]").prop("checked")&&t++})),t==e&&$("[js-menu-purchase-all]").find("[js-menu-checker]").prop("checked",!0)}function showAll(){$("[js-menu-search]").val(""),$("[js-menu-purchase]").each((function(){$(this).removeClass("none")}))}function setPaymentMethodList(e){$paymentMethodList=e}function setStatusesList(e){$statusesList=e}function closeEdit(){$("[js-client-card-name]").attr("disabled",!0),$("[js-client-card-comment]").attr("disabled",!0),$("[js-client-card-link]").attr("disabled",!0),$("[js-client-card-phone]").attr("disabled",!0),$("[js-client-card-email]").attr("disabled",!0),$("[js-edit-footer]").removeClass("is-open")}function updateDealStatusOnList(e){var t=$('[data-deal="'+e.id+'"]').find("[js-form-status]");t.parent($("form")).removeClassWild("deal-status__form_*").addClass("deal-status__form_"+e.code),$(t).find("option:selected").removeAttr("selected"),$(t).val(e.status)}function updateDealCard(e){void 0!==e&&$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDealsByProjects",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){var i=$("[js-deals-list]");i.html(""),$.each(t,(function(t,n){updateDealPriceOnList(n);var a="";$.each($statusesList,(function(e,t){a+='<option js-deal-form-status value="'+t.id+'" data-code="'+t.code+'" '+(t.id===n.status?'selected="selected" ':"")+'">'+t.title+"</option>"}));n.reminder&&(n.reminderMessage,n.reminderMessage);var s=$("<div/>").attr("class","deal deal_told deal_white").append($("<div/>").attr("class","deal-wrapper").append($("<div/>").attr("class","deal__wrapper deal__wrapper_bordered deal__wrapper_column").append($("<div/>").attr("class","deal__title").html(1===n.status?"Целевая заявка":n.course)).append($("<div/>").attr("class","deal__subtitle").append($("<div/>").attr("class",null!==n.kind?"deal__kind deal__kind_del":"deal__kind").html(n.kind)).append($("<div/>").attr("class","deal__date").html(n.createDate)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_overflow deal__wrapper_bordered c-tooltip").attr("js-deal-id",n.id).append($("<div/>").attr("class","c-tooltip__wrapper").append($("<div/>").attr("class","c-tooltip__text").html(n.managerAccessName))).append($("<div/>").attr("class","deal__social").append($("<div/>").attr("class","deal-social deal-social_"+n.socialCode))).append($("<div/>").attr("class","deal__manager").html(n.managerName)).append($("<div/>").attr("class","deal__sale-type").html(n.type))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_between deal__wrapper_bordered ").append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Стоимость")).append($("<div/>").attr("class","deal__sum-value").html(n.price))).append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Получено")).append($("<div/>").attr("class","deal__sum-value deal__sum-value_blue").html(n.paid))).append(n.isEditable&&1!==n.status?$("<div/>").attr("class","deal_bill").append($("<form/>").attr("js-add-bill-form","").attr("action","#").attr("class",n.isHidden?"hidden-deal":"").append($("<input/>").attr("type","hidden").attr("name","id").val(n.id)).append($("<button/>").attr("js-add-bill-button","").attr("class","add-btn"))):"")).append(1!==n.status?$("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<form/>").attr("js-deal-status-form","").attr("class","deal__select deal__select_"+n.statusCode).append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<select/>").attr("class","deal-select menu-input__input_select").attr("name","status").attr("js-deal-form-status","").html(a))):$("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__select deal__select_"+n.statusCode).append($("<div/>").attr("class","deal-select menu-input__input_select").html(n.statusName)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__reminder").append($("<div/>").attr("class",n.reminder?n.reminderExpiration?"deal__reminder-title deal-reminder deal-reminder_red ":n.reminderToday?"deal__reminder-title deal-reminder deal-reminder_green ":"deal__reminder-title deal-reminder deal-reminder_gray ":"deal__reminder-title deal__reminder-title_left").html(n.reminder?n.reminderDate:"Нет напоминания")).append(1!==n.status?$("<div/>").attr("class","add-reminder").append($("<form/>").attr("js-add-reminder-form","").attr("action","#").append($("<input/>").attr("type","hidden").attr("name","idDeal").val(n.id)).append($("<button/>").attr("js-add-reminder-button","").attr("class","add-btn"))):""))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column").append($("<form/>").attr("class","button_full").attr("action","#").attr("js-update-deal-form","").append($("<input/>").attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_white button_full").attr("js-update-deal-btn","").html("Редактировать сделку"))).append(n.isHidden?$("<form/>").attr("class","button_full").attr("action","#").attr("js-reveal-deal-form","").append($("<input/>").attr("data-hide-deal",n.id).attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_red button_full").attr("js-reveal-deal-btn","").append($("<span/>").attr("class","hidden-btn hidden-btn_left hidden-btn_reveal").html("Восстановить сделку"))):$("<form/>").attr("class","button_full").attr("action","#").attr("js-hide-deal-form","").append($("<input/>").attr("data-hide-deal",n.id).attr("name","id").attr("type","hidden").val(n.id)).append($("<button/>").attr("type","button").attr("class","button button_red button_full").attr("js-hide-deal-btn","").append($("<span/>").attr("class","hidden-btn hidden-btn_left hidden-btn_hide").html("Скрыть сделку"))))));i.append(s),loadModules(e,n.id)}));var n=$("<div/>").attr("js-create-deal","").attr("class","deal deal_told deal_create").append($("<div/>").attr("class","deal__btm-message").html("Добавить сделку"));i.append(n)}})}function loadModules(e,t){$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDealsModulesInfo",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(i){i.modules.length>0&&($modulesRoot=$("<div/>").attr("class","deal__access-lessons "),$lessons=$("<div/>").attr("class","deal__lessons"),$.each(i.modules,(function(n,a){$lessons.append($("<div/>").attr("js-module",a.idModule).attr("js-module-deal",t).attr("js-module-client",e).attr("js-allowed",i.allowed).attr("class","deal__lessons-item "+(a.enabled?"deal__lessons-item_active":"")).html(a.number))})),$access=$("<div/>").attr("class","deal__access").append($("<div/>").attr("class","deal__access-text")).html("Доступ к продукту").append($("<div/>").attr("class","deal__access-btn slide-toggle "+(i.allowed?"slide-toggle_active":"")).attr("js-id-deal-toggle",t).append($("<div/>").attr("class","slide-toggle__thumb"))),$modulesRoot.append($access),$modulesRoot.append($lessons),$modulesRoot.insertAfter($("[js-deal-id="+t+"]")),$(".slide-toggle[js-id-deal-toggle="+t+"]").click((function(t){var i=$(this),n=i.attr("js-id-deal-toggle"),a=i.hasClass("slide-toggle_active");a?i.removeClass("slide-toggle_active"):i.addClass("slide-toggle_active"),changeAllowed(n,e,!a)})),$(".deal__lessons-item[js-module-deal="+t+"]").click((function(e){var t=$(this),i=t.attr("js-module"),n=t.attr("js-module-deal"),a=$(".slide-toggle[js-id-deal-toggle="+n+"]").hasClass("slide-toggle_active"),s=t.attr("js-module-client"),o=t.hasClass("deal__lessons-item_active");a&&(o?t.removeClass("deal__lessons-item_active"):t.addClass("deal__lessons-item_active"),changeEnabledModule(s,n,i,!o))})))}})}function changeAllowed(e,t,i){console.log("Change allowed",e,t,i),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/changeModulesAllowed",data:JSON.stringify({id:e,idClient:t,value:i}),dataType:"json",cache:!1,success:function(e){console.log(e)}})}function changeEnabledModule(e,t,i,n){console.log("Change enabled",e,t,i,n),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/changeModulesEnabled",data:JSON.stringify({idDeal:t,idModule:i,idClient:e,value:n}),dataType:"json",cache:!1,success:function(e){console.log(e)}})}function updateClient(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/updateClient",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){closeEdit(),updateClientNameOnFront(e),updateClientLinkOnFront(e),updateClientPhoneOnFront(e),updateClientNameOnList(e),$("[js-update-deal]").prop("disabled",!1),$("[js-client-name-copy]").text(e.name),$("[js-client-name-copy]").attr("data-link",e.name)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateClientNameOnFront(e){$('[data-client="'+e.id+'"]').siblings("span").html(e.name)}function updateClientLinkOnFront(e){var t=$('[data-link-client="'+e.id+'"]');null===e.link||""===e.link?t.html("<div>—</div>"):t.html('<div class="column-links"><div js-copy-link class="column_mwidth column_mwidth-copy" data-link="'+e.link+'"></div><a href="'+e.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div>')}function updateClientPhoneOnFront(e){var t=$('[data-phone-client="'+e.id+'"]');null===e.phone||""===e.phone?t.html("<div>—</div>"):t.html('<div js-copy-link class="client-phone" data-link="'+e.phone+'">'+e.phone+"</div>")}function updateClientNameOnList(e){var t=$('[value="'+e.id+'"].js-client-id-l').closest("[js-client-card]");t.find(".client-card__title").html(e.name),t.find(".client-card__info-link").html(e.link),t.find(".client-card__info-phone").html(e.phone)}function hideDeal(e){$("[js-hide-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/hideDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-hide-deal-btn]").prop("disabled",!1),updateHideForm(e.id,!0)},error:function(e){$("[js-hide-deal-btn]").prop("disabled",!1)}})}function revealDeal(e){$("[js-reveal-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/revealDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-reveal-deal-btn]").prop("disabled",!1),updateHideForm(e.id,!1)},error:function(e){$("[js-reveal-deal-btn]").prop("disabled",!1)}})}function updateHideForm(e,t){var i,n=$('[data-hide-deal="'+e+'"]').closest("form"),a=$("[js-add-bill-form]").find('input[name="id"][value="'+e+'"]').closest("[js-add-bill-form]");t?(n.removeAttr("js-hide-deal-form").attr("js-reveal-deal-form",""),(i=n.find("[js-hide-deal-btn]")).removeAttr("js-hide-deal-btn").attr("js-reveal-deal-btn",""),i.find(".hidden-btn_hide").removeClass("hidden-btn_hide").addClass("hidden-btn_reveal"),i.find("span").html("Восстановить сделку"),a.addClass("hidden-deal")):(n.removeAttr("js-reveal-deal-form").attr("js-hide-deal-form",""),(i=n.find("[js-reveal-deal-btn]")).removeAttr("js-reveal-deal-btn").attr("js-hide-deal-btn",""),i.find(".hidden-btn_reveal").removeClass("hidden-btn_reveal").addClass("hidden-btn_hide"),i.find("span").html("Скрыть сделку"),a.removeClass("hidden-deal"))}function setDealInfo(e){$("[js-update-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setUpdateDealInfo(e),$("[js-update-deal-btn]").prop("disabled",!1)},error:function(e){$("[js-update-deal-btn]").prop("disabled",!1)}})}function setUpdateStreams(e){var t=new FormData;t.set("idCourse",Number(e)),$.ajax({type:"POST",url:"/head-manager-transactions/getStreamsByIdCourse",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){var t="";$.each(e,(function(e,i){t+='<option value="'+i.id+'">'+i.startDate+"</option>"})),$("[js-update-form-deal-start-date]").append(t)},error:function(e){}})}function updateDeal(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard(e.idClient),$("[js-menu-update-deal]").removeClass("is-open"),checkBodyHidden(),updateDealAfterUpdateOnList(e),$("[js-update-deal]").prop("disabled",!1)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateDealAfterUpdateOnList(e){var t=$('[data-deal="'+e.id+'"]');t.find("[data-deal-date-deal]").html(e.dealDate),t.find("[data-deal-social]").removeClassWild("deal-social_*").addClass("deal-social_"+e.socialCode).addClass("deal-social_big");var i=null!=e.course?e.course+(null!==e.kind&&""!==e.kind?" ("+e.kind+")":""):"Целевая заявка";t.find("[data-deal-course]").attr("title",i).html(i),t.find("[data-deal-type]").html(e.type),t.find("[data-deal-price]").html(e.price);var n=t.find(".column-paid");n.removeClassWild("column-paid_*"),e.price<=t.find("[data-deal-paid]").html().replace(/\D+/g,"")&&n.addClass("column-paid_green"),t.find("[data-deal-start-date]").html(e.startDate),null===e.tag?t.find("[data-deal-tag]").html("<div>—</div>"):t.find("[data-deal-tag]").html('<div title="'+e.tag+'" class="column-msg">'+e.tag+"</div>"),t.find("[data-deal-mailing]").html(e.coupling);var a=t.find("[js-form-status]");a.parent($("form")).removeClassWild("deal-status__form_*").addClass("deal-status__form_"+e.statusCode),a.on("change",(function(e){e.preventDefault()})),$("#"+$(a).attr("id")+" option:selected").removeAttr("selected"),$("#"+$(a).attr("id")).val(e.status);var s="";e.reminder&&(s+='<div class="reminder-wrapper"><div class="reminder-date" >'+e.reminderDate+'</div><div class="reminder-msg">'+e.reminderMessage+"</div></div>"),s+='<div class="reminder '+(e.reminder?e.reminderExpiration?"reminder_red":e.reminderToday?"reminder_green":"reminder_gray":"")+'"></div>',e.reminder&&(s+='<div class="reminder-d">'+e.reminderDate+"</div>"),t.find("[data-deal-reminder]").html(s)}function openBillsRedirect(e,t){openBills(e,t?"/api/bills/getHeadManagerHiddenBills":"/api/bills/getHeadManagerBills")}function openBills(e,t){$("[js-add-bill-form]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:t,data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-bills-deal-id]").val(e.id),createBills(t),$("[js-menu-bills]").addClass("is-open"),checkBodyHidden(),$("[js-add-bill-form]").prop("disabled",!1)},error:function(e){$("[js-add-bill-form]").prop("disabled",!1)}})}function createBills(e){$("[js-bills-body]").html(""),e.length>0?$("[js-bills]").addClass("is-open"):$("[js-bills]").removeClass("is-open"),checkBodyHidden(),$.each(e,(function(e,t){var i="";i+='<div class="div-table__body-row">';var n="";$.each($paymentMethodList,(function(e,t){n+='<option value="'+t.title+'" data-code="'+t.code+'">'+t.title+"</option>"})),2===t.status?i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_checked"></div></div>':i+='<div class="div-table__body-col div-table__body-col_exxsmall div-table__body-col_center"><div class="column_bstatus column_bstatus_unchecked"></div></div>',i+='<div class="div-table__body-col div-table__body-col_medium"><div class="column-text">'+t.manager+"</div></div>",i+='<form b-update-bill-form action="#" class="edit-form-bill"><input type="hidden" b-id-bill value="'+t.id+'" name="id" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input type="hidden" b-pm value="'+t.paymentMethod+'" name="paymentMethod"><input type="hidden" b-pm-code value="'+t.paymentMethodCode+'" name="paymentMethodCode"><div class="div-table__body-col div-table__body-col_small">'+t.billDate+"</div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xsmall"><input b-sum disabled name="sum" class="menu-input__input menu-input__input_small editable" value="'+t.sum+'" placeholder="0 ₽"></div>',i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div b-pm-wrapper class="pmethod-wrapper disabled"><select b-pm-selector disabled class="column_pmethod-select column_pmethod_'+t.paymentMethodCode+'">'+n+"</select></div></div>",i+='<div class="div-table__body-col div-table__body-col_medium  div-table__body-col_center div-table__body-col_r10"><input b-account-number disabled name="accountNumber" class="menu-input__input menu-input__input_small editable" value="'+(null===t.accountNumber?"":t.accountNumber)+'" placeholder="—"></div>',i+='<div class="div-table__body-col col-pay-date div-table__body-col_center div-table__body-col_medium "><div class="menu-input__wrapper menu-input__wrapper_xsmall"><input b-pay-date disabled name="payDate" class="datepicker-here-cs menu-input__input menu-input__input_small editable" autocomplete="off" value="'+(null===t.payDate?"":t.payDate)+'" data-autoclose="true" placeholder="—"/></div></div>',null===t.payDate?i+='<div class="div-table__body-col div-table__body-col_small col-status">Выставлен</div>':i+='<div class="div-table__body-col div-table__body-col_small col-status div-table__body-col_green">Оплачен</div>',i+='<div class="div-table__body-col div-table__body-col_small">'+("Новый клиент"===t.paymentType?"Первый":"Доплата")+"</div>",null!==t.link&&""!==t.link?i+='<div class="div-table__body-col div-table__body-col_xxsmall div-table__body-col_center"><div class="column-links"><div js-copy-link data-link="'+t.link+'" class="column_mwidth column_mwidth-copy"></div><a js-open-link href="'+t.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div></div>':i+='<div class="div-table__body-col div-table__body-col_xxsmall"><div>—</div></div>',i+="</form>",i+='<div data-bill-id="'+t.id+'" class="div-table__body-col div-table__body-col_medium div-table__body-col_center"><div class="column-links">'+(null===t.comment?'<div js-add-sms-check js-check-btn class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-add-check"></div>':'<div js-delete-sms-check js-check-btn title="'+t.comment+'" class="column_mwidth column_mwidth-large column_mwidth_bordered div-table__body-col_center column_mwidth-delete-check"></div>')+(null!==t.billImage&&""!==t.billImage?'<a class="column-img column_mwidth column-img_large div-table__body-col_center" data-fancybox="gallery" href="../'+t.billImage+'"><img src="/'+t.billImage+'"></a>':'<form js-upload-bill-form action="#" class="column_mwidth column_mwidth-large div-table__body-col_center div-table__body-col_fl" enctype="multipart/form-data"><input type="hidden" value="'+t.id+'" name="id" required><input type="hidden" value="'+t.isHidden+'" name="isHidden" required><input type="hidden" value="'+t.idDeal+'" name="idDeal" required><input js-upload-bill accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="file'+e+'"/><label for="file'+e+'" class="js-labelFile"><span class="js-upload-file js-upload-file_small"></span></label></form>')+"</div></div>",i+='<div class="div-table__body-col div-table__body-col_center div-table__body-col_xxsmall">',t.isEditable&&(i+='<div js-edit-btns class="column-links display-flex-none"><div js-edit-bill-accept class="column_mwidth column_mwidth-accept"></div><div js-edit-bill-cancel class="column_mwidth column_mwidth-cancel"></div></div><div js-edit-menu class="column-links display-flex-none is-open"><div js-edit-bill class="column_mwidth div-table__body-col_center column_mwidth-edit"></div><form js-delete-bill-form class="column-form" action="#"><input type="hidden" value="'+t.id+'" name="id" required><button js-delete-bill type="button" class="column_mwidth column_mwidth-delete"></button></form></div>'),i+="</div></div>",$("[js-bills-body]").html($("[js-bills-body]").html()+i)})),initDatePicker(),initFancy(),initEditBillForm(),initCancelEditBill(),initAcceptEditBill()}function initDatePickerPayDate(){$(".datepicker-here-pay").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}function initDatePicker(){$(".datepicker-here-cs").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0})}function initFancy(){$('[data-fancybox="gallery"]').fancybox({infobar:!1,buttons:["close"]})}function updateBillImageOnList(e){$('[js-upload-bill-form][bill-image="'+e.id+'"]').replaceWith('<a class="column-img column-img_mr5" data-fancybox="gallery'+e.id+'" href="/'+e.billImage+'">  <img src="/'+e.billImage+'"></a>')}$(document).on("click","[edit-employee]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[u-name]");t.name=i.val();var n=$(this).closest(".custom-table__body-row").find("[u-username]");n.removeAttr("disabled"),t.username=n.val();var a=$(this).closest(".custom-table__body-row").find("[u-password]");a.removeAttr("disabled"),t.password=a.val();var s=$(this).closest(".custom-table__body-row").find("[u-phone]");s.removeAttr("disabled"),t.phone=s.val();var o=$(this).closest(".custom-table__body-row").find("[u-link]");o.removeAttr("disabled"),t.link=o.val();var r=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]");r.removeAttr("disabled"),t.doorsCardNumber=r.val();var l=$(this).closest(".custom-table__body-row").find("[u-birthday]");l.removeAttr("disabled"),t.birthday=l.val();var d=$(this).closest(".custom-table__body-row").find("[u-ishaskey]");d.removeAttr("disabled"),t.isHasKey=d.prop("checked"),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").removeAttr("disabled");var c=$(this).closest(".custom-table__body-row").find("[u-type-selector]");t.type=c.val(),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").removeAttr("disabled");var u=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]");t.dismiss=u.val(),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),EMPLOYEE_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]=t})),$(document).on("click","[edit-employee-cancel]",(function(e){e.preventDefault();var t=EMPLOYEE_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()];$(this).closest(".custom-table__body-row").find("[u-name]").val(t.name).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-username]").val(t.username).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-password]").val(t.password).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-phone]").val(t.phone).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-link]").val(t.link).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(t.doorsCardNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-birthday]").val(t.birthday).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",t.isHasKey).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(t.type).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.dismiss).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(t.dismiss).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete EMPLOYEE_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]})),$(document).on("click","[edit-employee-accept]",(function(e){e.preventDefault(),EMPLOYEE_ACCEPT_BTN=$(this);var t=new FormData;t.set("idEmployee",$(this).closest(".custom-table__body-row").find("[u-id]").val()),t.set("name",$(this).closest(".custom-table__body-row").find("[u-name]").val()),t.set("user.username",$(this).closest(".custom-table__body-row").find("[u-username]").val()),t.set("user.password",$(this).closest(".custom-table__body-row").find("[u-password]").val()),t.set("phone",$(this).closest(".custom-table__body-row").find("[u-phone]").val()),t.set("link",$(this).closest(".custom-table__body-row").find("[u-link]").val()),t.set("doorsCardNumber",$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val()),t.set("birthday",$(this).closest(".custom-table__body-row").find("[u-birthday]").val()),t.set("isHasKey",$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked")),t.set("type",$(this).closest(".custom-table__body-row").find("[u-type-selector]").val()),t.set("isNotDisMiss",$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val()),$("[edit-employee-accept]").prop("disabled",!0),$.ajax({type:"POST",url:"update",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(e.name).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-username]").val(null!=e.username?e.username:e.user.username).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-password]").val(null!=e.password?e.password:e.user.password).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(e.phone).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(e.link).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(e.doorsCardNumber).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(e.birthday).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",e.isHasKey).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(e.type).attr("disabled",!0),void 0!==e.isNotDisMiss&&(EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(e.isNotDisMiss.toString()).attr("disabled",!0)),EMPLOYEE_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete EMPLOYEE_INFO_TEMP[e.id],$("[edit-employee-accept]").prop("disabled",!1)},error:function(e){var i=EMPLOYEE_INFO_TEMP[t.get("idEmployee")];EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(i.name).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-username]").val(i.username).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-password]").val(i.password).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(i.phone).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(i.link).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(i.doorsCardNumber).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(i.birthday).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",i.isHasKey).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(i.type).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),EMPLOYEE_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(i.dismiss).attr("disabled",!0),EMPLOYEE_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete EMPLOYEE_INFO_TEMP[e.id],$("[edit-employee-accept]").prop("disabled",!1)}})})),function(e,t){"use strict";var i=("undefined"!=typeof global?global:window).String;i.prototype.format||(i.prototype.format=function(){var e,i=this,n=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},a=function(){var e=function(e){var i=function(e){return new Array(e)};switch(!0){case/^#\{(\w+)\}*$/.test(e):this.formatter=function(e,t){var i=new RegExp("#{"+RegExp.$1+"}","g");return e.replace(i,t[RegExp.$1])};break;case/^([ds])$/.test(e):this.formatter=function(t,i){if("d"===RegExp.$1&&!n(i))throw new TypeError;return[t.substring(0,t.indexOf("%"+e)),i,t.substring(t.indexOf("%"+e)+e.length+1)].join("")};break;case/^(o)$/.test(e):this.formatter=function(t,i){if(!n(i))throw new TypeError;return t.replace("%"+e,parseInt(i).toString(8))};break;case/^(b)$/.test(e):this.formatter=function(t,i){if(!n(i))throw new TypeError;return t.replace("%"+e,parseInt(i).toString(2))};break;case/^([xX])$/.test(e):this.formatter=function(t,i){if(!n(i))throw new TypeError;var a=parseInt(i).toString(16);return"X"===e&&(a=a.toUpperCase()),t.replace("%"+e,a)};break;case/^(c)$/.test(e):this.formatter=function(t,i){if(!n(i))throw new TypeError;return t.replace("%"+e,String.fromCharCode(i))};break;case/^(u)$/.test(e):this.formatter=function(t,i){if(!n(i))throw new TypeError;return t.replace("%"+e,parseInt(i,10)>>>0)};break;case/^(-?)(\d*).?(\d?)(e)$/.test(e):this.formatter=function(a,s){if(!n(s))throw new TypeError;var o,r,l,d="-"===RegExp.$1,c=RegExp.$2,u=""!==RegExp.$3?RegExp.$3:t,p=s.toExponential(u);return""!==c&&(u!==t?(l=c-p.length)>=0&&(p=d?p+i(l+1).join(" "):i(l+1).join(" ")+p):(o=p.split("e")[0],r="e"+p.split("e")[1],p=(l=c-(o.length+r.length))>=0?o+i(l+1).join("0")+r:o.slice(0,l)+r)),a.replace("%"+e,p)};break;case/^(-?)(\d*).?(\d?)(f)$/.test(e):this.formatter=function(t,a){if(!n(a))throw new TypeError;var s,o="-"===RegExp.$1,r=RegExp.$2,l=RegExp.$3,d=".".length,c=a>0?Math.floor(a):Math.ceil(a),u=parseFloat(a).toFixed(""!==l?l:6);return""!==r&&(""!==l?(s=r-(c.toString().length+d+parseInt(l,10)),u=o?parseFloat(a).toFixed(l)+i(s+1).join(" "):i(s+1).join(" ")+parseFloat(a).toFixed(l)):u=parseFloat(a).toFixed(r-(c.toString().length+d))),t.replace("%"+e,u)};break;case/^([0\-]?)(\d+)d$/.test(e):this.formatter=function(t,a){if(!n(a))throw new TypeError;var s=RegExp.$2-a.toString().length,o="";switch(0>s&&(s=0),RegExp.$1){case"":o=(i(s+1).join(" ")+a).slice(-RegExp.$2);break;case"-":o=(a+i(s+1).join(" ")).slice(-RegExp.$2);break;case"0":o=(i(s+1).join("0")+a).slice(-RegExp.$2)}return t.replace("%"+e,o)};break;case/^(-?)(\d+)s$/.test(e):this.formatter=function(t,n){var a=RegExp.$2-n.toString().length,s="";switch(0>a&&(a=0),RegExp.$1){case"":s=(i(a+1).join(" ")+n).slice(-RegExp.$2);break;case"-":s=(n+i(a+1).join(" ")).slice(-RegExp.$2)}return[t.substring(0,t.indexOf("%"+e)),s,t.substring(t.indexOf("%"+e)+e.length+1)].join("")};break;case/^(-?\d*)\.(\d+)s$/.test(e):this.formatter=function(t,n){var a,s,o="";return""===RegExp.$1?o=n.slice(0,RegExp.$2):(n=n.slice(0,RegExp.$2),s=(a=Math.abs(RegExp.$1))-n.toString().length,o=-1!==RegExp.$1.indexOf("-")?(n+i(s+1).join(" ")).slice(-a):(i(s+1).join(" ")+n).slice(-a)),[t.substring(0,t.indexOf("%"+e)),o,t.substring(t.indexOf("%"+e)+e.length+1)].join("")};break;default:this.formatter=function(e,t){return e}}};return e.prototype={format:function(e,t){return this.formatter.call(this,e,t)}},e}(),s=Array.prototype.slice.call(arguments);if(1===s.length&&"object"==typeof s[0])for(e=0;e<Object.keys(s[0]).length;e+=1)i.match(/(#\{\w+\})/)&&(i=new a(RegExp.$1).format(i,s[0]));else for(e=0;e<s.length;e+=1)i.match(/%([.#0-9\-]*[bcdefosuxX])/)&&(i=new a(RegExp.$1).format(i,s[e]));return i})}(),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter(FILTER_FROM_BACK)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")}))})),$(document).on("change","[filter-parameter]",(function(){$(this).closest("form").trigger("submit")})),$(document).on("click","[js-funnel-setting]",(function(){$("[js-menu-funnel-setting]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-funnel-setting-close-btn]",(function(){$("[js-menu-funnel-setting]").removeClass("is-open"),checkBodyHidden()})),$(document).on("change","[js-advertiser]",(function(){resetPlatform(),resetChannel(),resetCommunity()})),$(document).on("change","[js-project]",(function(){resetPlatform(),resetChannel(),resetCommunity()})),$(document).on("change","[js-manager]",(function(){resetPlatform(),resetChannel(),resetCommunity()})),$(document).on("change","[js-channel]",(function(){"all"!==$("#channel").val()&&"unknown"!==$("#channel").val()?$("#community").val("Выберите аудиторию"):resetCommunity()})),$(document).on("change","[js-platform]",(function(){"unknown"===$("option:selected",this).attr("value")?($("#channel").html('<option value="unknown" selected>Неизвестно</option>'),resetCommunity()):(resetChannel(),setChannelByPlatform(new FormData($("[funnel-filter-form]")[0])))})),$(document).on("click","[js-community]",(function(){(resetCommunityList(),"all"!==$("#channel").val()&&"unknown"!==$("#channel").val())&&setCommunityByChannel(new FormData($("[funnel-filter-form]")[0]))})),$(document).on("click","[js-menu-close-btn]",(function(){var e=[];$("[filter-form-communities]").find("tr:not(.none) [js-menu-checker]:checked").each((function(){e.push($(this).val())}));var t=e;-1!==jQuery.inArray("Все аудитории",t)?$("[js-communites]").val("Все аудитории"):$("[js-communites]").val(t.toString()),showAll(),$("[js-menu]").removeClass("is-open"),checkBodyHidden()})),$(document).on("keyup","[js-menu-search]",(function(){var e=$(this).val().toLowerCase();$("[js-menu-purchase]").each((function(){~$(this).find("[js-menu-community]").text().toLowerCase().indexOf(e)?$(this).removeClass("none"):$(this).addClass("none")}))})),$(document).on("click","[js-menu-purchase-all]",(function(){let e=$(this).find("[js-menu-checker]").prop("checked");$("[js-menu-purchase]").each((function(){$(this).find("[js-menu-checker]").prop("checked",!e)}))})),$(document).on("click","[js-menu-purchase]",(function(){var e=$(this).attr("js-menu-purchase-all");if(void 0===e||!1===e){var t=$(this).find("[js-menu-checker]");t.prop("checked",!t.prop("checked")),$("[js-menu-purchase-all]").find("[js-menu-checker]").prop("checked",!1),checkSelect(),event.preventDefault()}})),$(document).on("click",".datepicker-here",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-deal",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-cs",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-pay",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click","[js-update-open-reminder]",(function(e){$("[js-update-form-deal-reminder-btn]").removeClass("is-open"),$("[js-update-form-deal-reminder-block]").addClass("is-open"),$("[js-update-form-deal-reminder-date]").val(""),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!0)})),$(document).on("click","[js-update-close-reminder]",(function(e){$("[js-update-form-deal-reminder-btn]").addClass("is-open"),$("[js-update-form-deal-reminder-block]").removeClass("is-open"),$("[js-update-form-deal-reminder-date]").val("—"),$("[js-update-form-deal-reminder-msg]").val(""),$("[js-update-form-deal-reminder]").prop("checked",!1)})),$(document).on("change","[js-update-form-deal-sale-type]",(function(e){"traffic"===$(this).val()?$("[js-update-form-deal-mailing-block]").addClass("is-open"):($("[js-update-form-deal-mailing-block]").removeClass("is-open"),$("[js-update-form-deal-mailing]").prop("checked",!1))})),$(document).on("change","[js-update-form-deal-pr]",(function(e){$("[js-update-form-deal-price]").val($("option:selected",this).attr("data-price")),$("[js-update-form-deal-product-type]").val($("option:selected",this).attr("data-type")),$("[js-update-form-deal-product-id]").val($("option:selected",this).attr("data-id")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-update-form-kind]").html(createKindOptions($list)),$("[js-update-form-kind-block]").addClass("is-open")):($("[js-update-form-kind-block]").removeClass("is-open"),$("[js-update-form-kind]").html("")),"курс"==$("[u-product-types]").val()&&setStreams($("[js-update-form-deal-start-date]"),$("option:selected",this).attr("data-id"))})),$(document).ready((function(){$(".datepicker-here-deal").datepicker({autoClose:!0,maxDate:new Date,todayButton:!0}),$(".datepicker-here").datepicker({autoClose:!0,todayButton:!0});const e=$("[js-menu-client-card]");$("[js-menu-client-card-close-btn]").on("click",(function(){r.removeClass("is-open"),e.removeClass("is-open"),closeEdit(),checkBodyHidden()}));const t=$("[js-menu-update-deal]");$("[js-menu-update-deal-close-btn]").on("click",(function(){t.removeClass("is-open"),checkBodyHidden()}));const i=$("[js-menu-update-reminder-close-btn]"),n=$("[js-menu-update-reminder]");i.on("click",(function(){clearReminderForm(),n.removeClass("is-open"),checkBodyHidden()}));const a=$("[js-menu-bills-close-btn]"),s=$("[js-menu-bills]");a.on("click",(function(){s.removeClass("is-open"),checkBodyHidden(),BILLS_TEMP_INFO={}}));const o=$("[js-menu-create-client-close-btn]"),r=$("[js-menu-create-client]");o.on("click",(function(){$("js-create-client-form").submit("reset"),r.removeClass("is-open"),checkBodyHidden()}));const l=$("[js-menu-search-close-btn]"),d=$("[js-menu-search]");l.on("click",(function(){d.removeClass("is-open"),checkBodyHidden()}));const c=$("[js-menu-create-deal-close-btn]"),u=$("[js-menu-create-deal]");c.on("click",(function(){u.removeClass("is-open"),checkBodyHidden()}));const p=$("[js-menu-bill-close-btn]"),h=$("[js-menu-bill]");p.on("click",(function(){h.removeClass("is-open"),$("[js-bill-form]").submit("reset"),checkBodyHidden()})),initDatePicker(),initDatePickerPayDate()})),$(document).on("click","[close-dialog]",(function(e){$(this).closest(".dialog").removeClass("is-open")})),$(document).on("click","[js-edit-btn]",(function(e){$("[js-client-card-name]").removeAttr("disabled"),$("[js-client-card-comment]").removeAttr("disabled"),$("[js-client-card-link]").removeAttr("disabled"),$("[js-client-card-phone]").removeAttr("disabled"),$("[js-client-card-email]").removeAttr("disabled"),$("[js-edit-footer]").addClass("is-open")})),$(document).on("change","[js-form-status]",(function(e){var t=$(this).parent($("[js-status-form]"));t.removeClassWild("deal-status__form_*"),t.addClass("deal-status__form_"+$("option:selected",this).attr("data-code"));var i=t.serializeObject();$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDealStatus",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){},error:function(e){}})})),$(document).on("change","[js-deal-form-status]",(function(e){var t=$(this).parent($("[js-deal-status-form]"));t.removeClassWild("deal__select_*");var i=$("option:selected",this).attr("data-code");t.addClass("deal__select_"+i);var n=t.serializeObject();n.code=i,$("[js-deal-form-status]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/updateDealStatus",data:JSON.stringify(n),dataType:"json",cache:!1,success:function(e){updateDealStatusOnList(n),$("[js-deal-form-status]").prop("disabled",!1)},error:function(e){$("[js-deal-form-status]").prop("disabled",!1)}})})),$(document).on("click","[js-edit-client-btn]",(function(e){e.preventDefault(),$(this).closest("[js-edit-client-form]").trigger("submit")})),$(document).on("submit","[js-edit-client-form]",(function(e){e.preventDefault(),updateClient($(this).serializeObject())})),$(document).on("click","[js-hide-deal-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите скрыть сделку?"),$("[dialog]").find(".dialog__text").html("В данном случае информация о сделке не будет учитываться"),$("[dialog]").find("[accept-dialog]").attr("hide-deal",""),$("[dialog]").addClass("is-open"),HIDE_DEAL_FORM=$(this).closest("[js-hide-deal-form]")})),$(document).on("click","[hide-deal]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),HIDE_DEAL_FORM.trigger("submit")})),$(document).on("submit","[js-hide-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();hideDeal(t)}})),$(document).on("click","[js-reveal-deal-btn]",(function(e){e.preventDefault(),$(this).closest("[js-reveal-deal-form]").trigger("submit")})),$(document).on("submit","[js-reveal-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();revealDeal(t)}})),$(document).on("click","[js-update-deal-btn]",(function(e){e.preventDefault(),$(this).closest("[js-update-deal-form]").trigger("submit")})),$(document).on("submit","[js-update-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();setDealInfo(t)}})),$(document).on("click","[js-update-deal]",(function(e){e.preventDefault(),$("[js-update-form-deal]").trigger("submit")})),$(document).on("submit","[js-update-form-deal]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateDeal(t)}})),$(document).on("submit","[js-add-bill-form]",(function(e){e.preventDefault(),IS_HIDDEN_DEAL=$(this).hasClass("hidden-deal"),openBillsRedirect($(this).serializeObject(),IS_HIDDEN_DEAL)})),$(document).on("click","[js-add-bill-up-client]",(function(e){var t=$(this).closest(".custom-table__body-row").find("[js-client-id]").val(),i=$(this).closest(".custom-table__body-row").find("[js-client-id]").siblings("span").html();setIdClient(t),$("[js-client-name-copy]").text(i),$("[js-client-name-copy]").attr("data-link",i)})),$(document).on("change","[js-upload-bill]",(function(e){var t=$(this).closest("[js-upload-bill-form]"),i=new FormData(t[0]);$("[js-upload-bill]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/api/bills/uploadBill",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){updateBillImageOnList(e);var i=t.serializeObject();i.id=i.idDeal,e.isHidden?openBills(i,"/api/bills/getHiddenBills"):openBills(i,"/api/bills/getBills"),$("[js-upload-bill]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill]").prop("disabled",!1)}})})),$(document).on("change","[js-upload-bill-front]",(function(e){var t=$(this).closest("[js-upload-bill-form]"),i=new FormData(t[0]);$("[js-upload-bill-front]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/api/bills/uploadBill",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){updateBillImageOnList(e),$("[js-upload-bill-front]").prop("disabled",!1)},error:function(e){console.log("ERROR : ",e),$("[js-upload-bill-front]").prop("disabled",!1)}})}));var BILLS_INFO_TEMP={},ACCEPT_EDITE_BTN,CLIENT_DATA,SAVE_DEAL_TYPE,$coursesList,$productMap,$filterFromBack;function openUpdateReminder(e){$("[js-add-reminder-button]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getReminder",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){openReminderMenu(e),$("[js-add-reminder-button]").prop("disabled",!1)},error:function(e){$("[js-add-reminder-button]").prop("disabled",!1)}})}function openReminderMenu(e){$("[js-update-form-reminder-id-deal]").val(e.idDeal),$("[js-update-form-reminder-date]").val(e.reminderDate),$("[js-update-form-reminder-msg]").html(e.reminderMessage),e.reminder&&$("[js-delete-reminder-block]").addClass("is-open"),$("[js-menu-update-reminder]").addClass("is-open"),checkBodyHidden()}function clearReminderForm(){$("[js-update-form-reminder]").trigger("reset"),$("[js-update-form-reminder-msg]").html(""),$("[js-delete-reminder-block]").removeClass("is-open")}function updateReminder(e){$("[js-update-reminder]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveReminder",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),updateReminderOnList(e),clearReminderForm(),$("[js-menu-update-reminder]").removeClass("is-open"),checkBodyHidden(),$("[js-update-reminder]").prop("disabled",!1)},error:function(e){$("[js-update-reminder]").prop("disabled",!1)}})}function updateReminderOnList(e){var t=$('[data-deal="'+e.idDeal+'"]'),i="";e.reminder&&(i+='<div class="reminder-wrapper"><div class="reminder-date" >'+e.reminderDate+'</div><div class="reminder-msg">'+e.reminderMessage+"</div></div>"),i+='<div class="reminder '+(e.reminder?e.reminderExpiration?"reminder_red":e.reminderToday?"reminder_green":"reminder_gray":"")+'"></div>',e.reminder&&(i+='<div class="reminder-d">'+e.reminderDate+"</div>"),t.find("[data-deal-reminder]").html(i)}function createClientCard(){var e={};e.name=$("[js-create-client-name]").val(),e.createDate=$("[js-create-client-date]").val(),e.idManager=$("[js-create-client-manager]").val(),e.link=$("[js-create-client-link]").val(),e.phone=$("[js-create-client-phone]").val(),e.email=$("[js-create-client-email]").val(),$("[js-create-client-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/saveClientInfo",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setClientCardInfo(e),$("[js-create-client-btn]").prop("disabled",!1)},error:function(e){CLIENT_DATA=e,$("[dialog]").find(".dialog__title").html("Хотите использовать его?"),$("[dialog]").find(".dialog__text").html("В базе данных найден клиент с такими же данными"),$("[dialog]").find("[accept-dialog]").attr("use-client",""),$("[dialog]").addClass("is-open"),$("[js-create-client-btn]").prop("disabled",!1)}})}function createDeal(e){$("[js-save-deal]").prop("disabled",!0),$("[js-save-and-bill-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard(e.idClient),$("[js-bill-deal-id]").val(t),$("[js-menu-create-deal]").removeClass("is-open"),checkBodyHidden(),$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)},error:function(e){$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)}})}function createDealAndBill(e){$("[js-save-deal]").prop("disabled",!0),$("[js-save-and-bill-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/saveDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard(e.idClient),$("[js-bill-deal-id]").val(t),$("[js-menu-create-deal]").removeClass("is-open"),checkBodyHidden(),setBillInfo(e),$("[js-menu-bill]").addClass("is-open"),checkBodyHidden(),$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)},error:function(e){$("[js-save-deal]").prop("disabled",!1),$("[js-save-and-bill-deal]").prop("disabled",!1)}})}function setBillInfo(e){$("[js-bill-info-product]").text(e.course),$("[js-bill-info-sum]").text(e.price),$("[js-bill-info-date]").text(e.dealDate)}function setStreams(e,t){var i=new FormData;i.set("idCourse",Number(t)),$.ajax({type:"POST",url:"/head-manager-transactions/getStreamsByIdCourse",data:i,processData:!1,contentType:!1,cache:!1,success:function(t){var i='<option value="" disabled selected>Выберите дату старта</option>';$.each(t,(function(e,t){i+='<option value="'+t.id+'">'+t.startDate+"</option>"})),e.html(i)},error:function(e){}})}function saveBill(e){$("[js-save-bill]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/saveBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),$("[js-menu-bill]").removeClass("is-open"),checkBodyHidden(),$("[js-bill-form]").trigger("reset"),$("[js-save-bill]").prop("disabled",!1)},error:function(e){$("[js-save-bill]").prop("disabled",!1)}})}function saveBillWithUpdate(e){$("[js-save-bills]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/saveBill",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){updateDealCard($CLIENT),e.id=e.idDeal,openBillsRedirect(e,IS_HIDDEN_DEAL),$("[js-bills-form]").trigger("reset"),$("[js-save-bills]").prop("disabled",!1),BILLS_TEMP_INFO={}},error:function(e){$("[js-save-bills]").prop("disabled",!1)}})}function setCoursesList(e){$coursesList=e}function createProductOptions(e,t){var i="";i+='<option value="" disabled selected>Выберите продукт</option>',$.each(e,(function(e,t){i+='<option data-id="'+t.id+'" value="'+t.name+'" data-type="'+t.type+'" data-price="'+t.price+'"">'+t.name+"</option>"})),$("["+t+"]").html(i)}function createEmptyProductOptions(e){$("["+e+"]").html('<option value="" disabled selected>Выберите продукт</option>')}function setProductMap(e){$productMap=e}function setFilter(e){$filterFromBack=e}function getHomework(e,t){$.ajax({type:"POST",contentType:"application/json",url:"getHomework",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){openHomework(e,t)},error:function(e){}})}function openHomework(e,t){clearHomeworkForm(),$("[h-rate-id]").val(e.id),setHomeworkComments(e),t?$("[rate-form-block]").addClass("is-open"):$("[rate-form-block]").removeClass("is-open"),$("[js-menu-rate-homework]").addClass("is-open"),checkBodyHidden()}function clearHomeworkForm(){$("[rate-homework-form]").trigger("reset"),$("[rate-comments]").html(""),$("[upload-list]").html(""),$("[rate-form-block]").removeClass("is-open")}function setHomeworkComments(e){var t="";$.each(e.comments,(function(e,i){var n="user"==i.type,a="";$.each(i.homeworkFiles,(function(e,t){"jpeg"==t.type||"jpg"==t.type||"png"==t.type?a+='<div class="gallery__item">   <a href="/'+t.path+'" data-fancybox="'+t.name+'" class="gallery-item gallery-item_small">       <img class="gallery-item__preview" src="/'+t.path+'">   </a></div>':"doc"!=t.type&&"pdf"!=t.type||(a+='<a href="'+t.id+"/"+t.path+'" class="gallery__item">   <div class="gallery-item gallery-item_small gallery-item_'+t.type+'">       <div class="gallery-item__title">'+t.type+'</div>       <div class="gallery-item__subtitle">'+t.name+"</div>   </div></a>")})),t+='<div class="comment comment_modal comment_large '+(n?"":"comment_right")+'">   <div class="comment__header -gap_2">       <div class="comment__header-item">           <div class="comment__title">'+(n?"Комментарий пользователя":"Ваш комментарий")+'</div>        </div>    </div>    <div class="comment__body comment__body_small '+(n?"":"comment__body_violet")+'">       <div class="comment__text comment__text_small">'+i.text+'</div>           <div class="gallery -gap-inner-top_1">               <div class="gallery__wrapper gallery__wrapper_small custom-scroll">                   <div class="gallery__list">'+a+"</div>               </div>           </div>       </div>   </div></div>"})),$("[rate-comments]").html(t)}function closeRateHomework(){$("[js-menu-rate-homework]").removeClass("is-open"),checkBodyHidden()}function saveRate(e){$("[save-homework-btn]").prop("disabled",!0),$.ajax({type:"POST",url:"saveRateHomework",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){changeRatedCounter(),updateHomeworkRow(e),closeRateHomework(),$("[save-homework-btn]").prop("disabled",!1)},error:function(e){closeRateHomework(),$("[save-homework-btn]").prop("disabled",!1)}})}function changeRatedCounter(){var e=Number($("[rated-counter]").html())+1;$("[rated-counter]").html(e)}function updateHomeworkRow(e){var t=$('[data-homework="'+e.id+'"]');t.find("[homework-rate]").html('<div class="homework-rate">   <div class="homework-rate__wrapper">       <div class="homework-rate__score">'+e.rate+"</div>   </div></div>"),t.find("[homework-status]").html('<div view-homework class="btn btn_rated">   <div class="btn__content btn__content_small">       <span class="btn__title btn__title_xsmall">           <span class="btn_title-text btn_title-text_small">Проверено</span>       </span>   </div></div>')}function saveHomework(e){$("[save-homework]").prop("disabled",!0),$.ajax({type:"POST",url:"saveHomework",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[save-homework]").prop("disabled",!1),$('  <div class="content-element">\n                        <div class="content-element__wrapper">\n                            <div class="homework-accepted">\n                                <div class="homework-accepted__content">\n                                    Спасибо! Ваше домашнее задание принято на проверку, ответ получите в скором времени!\n                                </div>\n                            </div>\n                        </div>\n                    </div>').insertAfter($("[save-homework-form]")),$("[js-hide-on-complete]").remove()},error:function(e){$("[save-homework]").prop("disabled",!1)}})}
/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */function showAll(){$purchases.each((function(){$(this).removeClass("none")}))}function displayCommunities(){$("body").css("overflow","hidden")}function closeCommunities(){$("body").css("overflow","auto")}function showAll(){$("[js-menu-purchase]").each((function(){$(this).removeClass("none")}))}function displayCommunities(){$("body").css("overflow","hidden")}function closeCommunities(){$("body").css("overflow","auto")}function selectAll(){var e=$("[js-menu-purchase-all]").find("[js-menu-checker]").prop("checked");e&&$("[js-menu-purchase]").each((function(){$(this).find("[js-menu-checker]").prop("checked",e)}))}function checkSelect(){let e=$("[js-menu-purchase]").length-1;var t=0;$("[js-menu-purchase]").each((function(){var e=$(this).attr("js-menu-purchase-all");void 0!==e&&!1!==e||$(this).find("[js-menu-checker]").prop("checked")&&t++})),t==e&&$("[js-menu-purchase-all]").find("[js-menu-checker]").prop("checked",!0)}function checkChannel(){"all"!==$("[js-menu-channel]").val()&&"unknown"!==$("[js-menu-channel]").val()&&$("[js-menu-button]").val("Выберите аудиторию")}function displayChannelsPurchases(e){$("[js-menu-content]").find("#"+e).addClass("is-selected"),$("body").css("overflow","hidden")}function closeChannelsPurchases(){$("[js-menu-content]").find(".menu-content__wrapper").removeClass("is-selected"),$("body").css("overflow","auto")}function check(e){var t=e.length;e.length>0?($("[js-distributed-count]").text(t),$("[js-distributed-message]").addClass("active")):($("[js-distributed-count]").text(0),$("[js-distributed-message]").removeClass("active"))}$(document).on("click","[edit-bill]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[b-pay-date]");i.removeAttr("disabled"),t.payDate=i.val();var n=$(this).closest(".custom-table__body-row").find("[b-sum]");t.sum=n.val(),n.val(n.val().replace(" ₽","")).removeAttr("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeAttr("disabled");var a=$(this).closest(".custom-table__body-row").find("[b-pm]");t.paymentMethod=a.val();var s=$(this).closest(".custom-table__body-row").find("[b-pm-code]");t.paymentMethodCode=s.val();var o=$(this).closest(".custom-table__body-row").find("[b-account-number]");o.removeAttr("disabled"),t.accountNumber=o.val(),BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]=t})),$(document).on("click","[edit-bill-cancel]",(function(e){e.preventDefault();var t=BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()];$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(t.payDate).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-sum]").val(t.sum).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-account-number]").val(t.accountNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+t.paymentMethodCode).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[b-pm]").val(t.paymentMethod),$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(t.paymentMethodCode),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[b-id-bill]").val()]})),$(document).on("click","[edit-bill-accept]",(function(e){e.preventDefault(),ACCEPT_EDITE_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[b-id-bill]").val(),t.idDeal=$(this).closest(".custom-table__body-row").find("[b-id-deal]").val(),t.paymentMethod=$(this).closest(".custom-table__body-row").find("[b-pm]").val(),t.paymentMethodCode=$(this).closest(".custom-table__body-row").find("[b-pm-code]").val(),t.sum=$(this).closest(".custom-table__body-row").find("[b-sum]").val(),t.accountNumber=$(this).closest(".custom-table__body-row").find("[b-account-number]").val(),t.payDate=$(this).closest(".custom-table__body-row").find("[b-pay-date]").val(),$("[edit-bill-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/bills/updateBill",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(e.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(e.sum+" ₽").attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(e.accountNumber).attr("disabled",!0),null===e.payDate||""===e.payDate?ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").removeClass("column-bill__status_paid").html("Выставлен"):ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find(".column-bill__status").addClass("column-bill__status_paid").html("Оплачен"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+e.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(e.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(e.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)},error:function(e){var i=BILLS_INFO_TEMP[t.id];ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pay-date]").val(i.payDate).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-sum]").val(i.sum).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-account-number]").val(i.accountNumber).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-wrapper]").addClass("disabled"),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-selector]").removeClassWild("column_pmethod_*").addClass("column_pmethod_"+i.paymentMethodCode).attr("disabled",!0),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm]").val(i.paymentMethod),ACCEPT_EDITE_BTN.closest(".custom-table__body-row").find("[b-pm-code]").val(i.paymentMethodCode),ACCEPT_EDITE_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete BILLS_INFO_TEMP[e.id],$("[edit-bill-accept]").prop("disabled",!1)}})})),$(document).on("click","[js-add-reminder-button]",(function(e){e.preventDefault(),$(this).closest("[js-add-reminder-form]").trigger("submit")})),$(document).on("submit","[js-add-reminder-form]",(function(e){e.preventDefault(),openUpdateReminder($(this).find('[name="idDeal"]').val())})),$(document).on("click","[js-delete-reminder]",(function(e){e.preventDefault();var t=$(this).closest("[js-update-form-reminder]").find('[name="idDeal"]').val();$("[js-delete-reminder]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/deleteReminder",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){updateDealCard($CLIENT),$('[data-deal="'+t+'"]').find("[data-deal-reminder]").html('<div class="reminder"></div>'),clearReminderForm(),$("[js-menu-update-reminder]").removeClass("is-open"),checkBodyHidden(),$("[js-delete-reminder]").prop("disabled",!1)},error:function(e){$("[js-delete-reminder]").prop("disabled",!1)}})})),$(document).on("click","[js-update-reminder]",(function(e){e.preventDefault(),$("[js-update-form-reminder]").trigger("submit")})),$(document).on("submit","[js-update-form-reminder]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateReminder(t)}})),$(document).on("click","[js-search-client]",(function(e){resetSearchClientMenu(),$("[js-menu-search]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-create-client-btn]",(function(e){e.preventDefault(),$("[js-menu-search]").removeClass("is-open"),$("[js-create-client-form]").trigger("submit")})),$(document).on("submit","[js-create-client-form]",(function(e){e.preventDefault(),validateForm(this)&&createClientCard()})),$(document).on("submit","[js-menu-search-form]",(function(e){e.preventDefault();var t=$("[js-menu-search-input]").val();if(""!==$.trim(t)){var i={};i.search=t,$("[js-menu-search-input]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/searchClients",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){$("[js-client-card-list]").html(""),0===e.length?$("[js-create-client]").prop("disabled",!1):($("[js-create-client]").prop("disabled",!0),$.each(e,(function(e,t){var i=$("<div/>").attr("js-client-card","").attr("class","client-card").append($("<input/>").attr("type","hidden").attr("class","js-client-id-l").attr("js-client-id","").val(t.id)).append($("<div/>").attr("class","client-card__title").html(t.name)).append($("<div/>").attr("class","client-card__info").append($("<div/>").attr("class","client-card__info-link").html(t.link)).append($("<div/>").attr("class","client-card__info-phone").html(t.phone)));$("[js-client-card-list]").append(i)}))),$("[js-menu-search-input]").prop("disabled",!1)},error:function(e){$("[js-menu-search-input]").prop("disabled",!1)}})}})),$(document).on("click","[js-create-deal]",(function(e){resetCreateDealForm(),$("[js-menu-create-deal]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-save-deal]",(function(e){e.preventDefault(),SAVE_DEAL_TYPE="s",$("[js-deal-form]").trigger("submit")})),$(document).on("click","[js-save-and-bill-deal]",(function(e){e.preventDefault(),SAVE_DEAL_TYPE="sb",$("[js-deal-form]").trigger("submit")})),$(document).on("submit","[js-deal-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();"s"===SAVE_DEAL_TYPE?createDeal(t):"sb"===SAVE_DEAL_TYPE&&createDealAndBill(t)}})),$(document).on("change","[js-deal-form-sale-type]",(function(e){"traffic"===$(this).val()?($("[js-deal-form-mailing-block]").addClass("is-open"),checkBodyHidden()):($("[js-deal-form-mailing-block]").removeClass("is-open"),$("[js-deal-form-mailing]").prop("checked",!1),checkBodyHidden())})),$(document).on("change","[js-deal-form-product]",(function(e){$("[js-deal-form-price]").val($("option:selected",this).attr("data-price")),$("[js-deal-form-product-type]").val($("option:selected",this).attr("data-type")),$("[js-deal-form-product-id]").val($("option:selected",this).attr("data-id")),$list=createKindList($("option:selected",this).val()),$list.length>0?($("[js-deal-form-kind]").html(createKindOptions($list)),$("[js-deal-form-kind-block]").addClass("is-open")):($("[js-deal-form-kind-block]").removeClass("is-open"),$("[js-deal-form-kind]").html("")),"курс"==$("[product-types]").val()&&setStreams($("[js-deal-form-start-date]"),$("option:selected",this).attr("data-id"))})),$(document).on("submit","[js-bill-form]",(function(e){e.preventDefault(),validateForm(this)&&saveBill($(this).serializeObject())})),$(document).on("click","[js-save-bills]",(function(e){e.preventDefault(),$("[js-bills-form]").trigger("submit")})),$(document).on("submit","[js-bills-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();saveBillWithUpdate(t)}})),$(document).on("change","[product-types]",(function(e){$("[js-deal-form-price]").val(0),$("[js-deal-form-start-date]").val(""),$("#product-category option:selected").removeAttr("selected"),$("#product-category option:first").prop("selected",!0);var t=$("option:selected",this).attr("data-id");2==t?(createProductOptions($coursesList,"js-deal-form-product"),$("[product-block]").removeClass("menu-input_close"),$("[trial-block]").removeClass("menu-input_close"),$("[product-category-block]").addClass("menu-input_close"),$("[start-date-block]").removeClass("menu-input_close")):3==t?(createEmptyProductOptions("js-deal-form-product"),$("[product-category-block]").removeClass("menu-input_close"),$("[product-block]").addClass("menu-input_close"),$("[trial-block]").addClass("menu-input_close"),$("[start-date-block]").addClass("menu-input_close")):($("[product-block]").addClass("menu-input_close"),$("[trial-block]").addClass("menu-input_close"),$("[product-category-block]").addClass("menu-input_close"),$("[start-date-block]").addClass("menu-input_close"))})),$(document).on("change","[product-category]",(function(e){$("[js-deal-form-price]").val(0);var t=$("option:selected",this).val();createProductOptions($productMap[t],"js-deal-form-product"),$("[product-block]").removeClass("menu-input_close")})),$(document).on("change","[u-product-category]",(function(e){$("[js-update-form-deal-price]").val(0);var t=$("option:selected",this).val();createProductOptions($productMap[t],"js-update-form-deal-pr"),$("[u-product-block]").removeClass("menu-input_close")})),$(document).on("change","[u-product-types]",(function(e){$("[js-update-form-deal-price]").val(0),$("[js-update-form-deal-start-date]").html('<option value="" disabled selected>Выберите дату старта</option>'),$("#u-product-category option:selected").removeAttr("selected"),$("#u-product-category option:first").prop("selected",!0),$("#js-update-form-deal-pr option:selected").removeAttr("selected"),$("#js-update-form-deal-pr option:first").prop("selected",!0);var t=$("option:selected",this).attr("data-id");2==t?(createProductOptions($coursesList,"js-update-form-deal-pr"),$("[u-product-block]").removeClass("menu-input_close"),$("[u-trial-block]").removeClass("menu-input_close"),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-start-date-block]").removeClass("menu-input_close")):3==t?(createEmptyProductOptions("js-update-form-deal-pr"),$("[u-product-category-block]").removeClass("menu-input_close"),$("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-start-date-block]").addClass("menu-input_close")):($("[u-product-block]").addClass("menu-input_close"),$("[u-trial-block]").addClass("menu-input_close"),$("[u-product-category-block]").addClass("menu-input_close"),$("[u-start-date-block]").removeClass("menu-input_close"))})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter(FILTER_FROM_BACK)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")})),$(".datepicker-here-f").datepicker({autoClose:!0});const s=$("[search-client]"),o=$("[search-client-form]"),r=$("[search-client-btn]"),l=$("[search-client-clear]");s.on("keyup",(function(){l.removeClass("is-open"),r.addClass("is-open"),$(this).addClass("active")})),r.on("click",(function(e){e.preventDefault(),o.trigger("submit")})),l.on("click",(function(e){e.preventDefault(),s.val(""),o.trigger("submit")}))})),$(document).on("click","[rate-homework]",(function(e){e.preventDefault();var t=new Object;t.id=Number($(this).closest("[data-homework]").data("homework")),getHomework(t,!0)})),$(document).on("click","[view-homework]",(function(e){e.preventDefault();var t=new Object;t.id=Number($(this).closest("[data-homework]").data("homework")),getHomework(t,!1)})),$(document).on("click","[js-menu-rate-homework-close-btn]",(function(e){closeRateHomework()})),$(document).on("click","[rate-homework-btn]",(function(e){e.preventDefault(),$("[rate-homework-form]").trigger("submit")})),$(document).on("submit","[rate-homework-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[rate-homework-form]")[0]);setFilesToFormData(t),saveRate(t)}})),$(document).on("click","[save-homework]",(function(e){e.preventDefault(),$("[save-homework-form]").trigger("submit")})),$(document).on("submit","[save-homework-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[save-homework-form]")[0]);setFilesToFormData(t),saveHomework(t)}})),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){"use strict";var i=[],n=e.document,a=Object.getPrototypeOf,s=i.slice,o=i.concat,r=i.push,l=i.indexOf,d={},c=d.toString,u=d.hasOwnProperty,p=u.toString,h=p.call(Object),f={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},b={type:!0,src:!0,nonce:!0,noModule:!0};function g(e,t,i){var a,s,o=(i=i||n).createElement("script");if(o.text=e,t)for(a in b)(s=t[a]||t.getAttribute&&t.getAttribute(a))&&o.setAttribute(a,s);i.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[c.call(e)]||"object":typeof e}var y="3.4.1",$=function(e,t){return new $.fn.init(e,t)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(e){var t=!!e&&"length"in e&&e.length,i=_(e);return!m(e)&&!v(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}$.fn=$.prototype={jquery:y,constructor:$,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=$.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return $.each(this,e)},map:function(e){return this.pushStack($.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:i.sort,splice:i.splice},$.extend=$.fn.extend=function(){var e,t,i,n,a,s,o=arguments[0]||{},r=1,l=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[r]||{},r++),"object"==typeof o||m(o)||(o={}),r===l&&(o=this,r--);r<l;r++)if(null!=(e=arguments[r]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(d&&n&&($.isPlainObject(n)||(a=Array.isArray(n)))?(i=o[t],s=a&&!Array.isArray(i)?[]:a||$.isPlainObject(i)?i:{},a=!1,o[t]=$.extend(d,s,n)):void 0!==n&&(o[t]=n));return o},$.extend({expando:"jQuery"+(y+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==c.call(e)||(t=a(e))&&("function"!=typeof(i=u.call(t,"constructor")&&t.constructor)||p.call(i)!==h))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){g(e,{nonce:t&&t.nonce})},each:function(e,t){var i,n=0;if(k(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(k(Object(e))?$.merge(i,"string"==typeof e?[e]:e):r.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:l.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;n<i;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,i){for(var n=[],a=0,s=e.length,o=!i;a<s;a++)!t(e[a],a)!==o&&n.push(e[a]);return n},map:function(e,t,i){var n,a,s=0,r=[];if(k(e))for(n=e.length;s<n;s++)null!=(a=t(e[s],s,i))&&r.push(a);else for(s in e)null!=(a=t(e[s],s,i))&&r.push(a);return o.apply([],r)},guid:1,support:f}),"function"==typeof Symbol&&($.fn[Symbol.iterator]=i[Symbol.iterator]),$.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var C=function(e){var t,i,n,a,s,o,r,l,d,c,u,p,h,f,m,v,b,g,_,y="sizzle"+1*new Date,$=e.document,w=0,k=0,C=le(),x=le(),j=le(),T=le(),E=function(e,t){return e===t&&(u=!0),0},S={}.hasOwnProperty,D=[],O=D.pop,P=D.push,A=D.push,N=D.slice,M=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),z=new RegExp("^"+L+"*,"+L+"*"),U=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp(L+"|>"),K=new RegExp(R),V=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){p()},oe=ye((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{A.apply(D=N.call($.childNodes),$.childNodes),D[$.childNodes.length].nodeType}catch(t){A={apply:D.length?function(e,t){P.apply(e,N.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function re(e,t,n,a){var s,r,d,c,u,f,b,g=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!a&&((t?t.ownerDocument||t:$)!==h&&p(t),t=t||h,m)){if(11!==w&&(u=Q.exec(e)))if(s=u[1]){if(9===w){if(!(d=t.getElementById(s)))return n;if(d.id===s)return n.push(d),n}else if(g&&(d=g.getElementById(s))&&_(t,d)&&d.id===s)return n.push(d),n}else{if(u[2])return A.apply(n,t.getElementsByTagName(e)),n;if((s=u[3])&&i.getElementsByClassName&&t.getElementsByClassName)return A.apply(n,t.getElementsByClassName(s)),n}if(i.qsa&&!T[e+" "]&&(!v||!v.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(b=e,g=t,1===w&&W.test(e)){for((c=t.getAttribute("id"))?c=c.replace(ne,ae):t.setAttribute("id",c=y),r=(f=o(e)).length;r--;)f[r]="#"+c+" "+_e(f[r]);b=f.join(","),g=ee.test(e)&&be(t.parentNode)||t}try{return A.apply(n,g.querySelectorAll(b)),n}catch(t){T(e,!0)}finally{c===y&&t.removeAttribute("id")}}}return l(e.replace(q,"$1"),t,n,a)}function le(){var e=[];return function t(i,a){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=a}}function de(e){return e[y]=!0,e}function ce(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var i=e.split("|"),a=i.length;a--;)n.attrHandle[i[a]]=t}function pe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return de((function(t){return t=+t,de((function(i,n){for(var a,s=e([],i.length,t),o=s.length;o--;)i[a=s[o]]&&(i[a]=!(n[a]=i[a]))}))}))}function be(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=re.support={},s=re.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!J.test(t||i&&i.nodeName||"HTML")},p=re.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:$;return o!==h&&9===o.nodeType&&o.documentElement&&(f=(h=o).documentElement,m=!s(h),$!==h&&(a=h.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",se,!1):a.attachEvent&&a.attachEvent("onunload",se)),i.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=ce((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=Z.test(h.getElementsByClassName),i.getById=ce((function(e){return f.appendChild(e).id=y,!h.getElementsByName||!h.getElementsByName(y).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var i,n,a,s=t.getElementById(e);if(s){if((i=s.getAttributeNode("id"))&&i.value===e)return[s];for(a=t.getElementsByName(e),n=0;s=a[n++];)if((i=s.getAttributeNode("id"))&&i.value===e)return[s]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},b=[],v=[],(i.qsa=Z.test(h.querySelectorAll))&&(ce((function(e){f.appendChild(e).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+L+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+y+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+y+"+*").length||v.push(".#.+[+~]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(i.matchesSelector=Z.test(g=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ce((function(e){i.disconnectedMatch=g.call(e,"*"),g.call(e,"[s!='']:x"),b.push("!=",R)})),v=v.length&&new RegExp(v.join("|")),b=b.length&&new RegExp(b.join("|")),t=Z.test(f.compareDocumentPosition),_=t||Z.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===h||e.ownerDocument===$&&_($,e)?-1:t===h||t.ownerDocument===$&&_($,t)?1:c?M(c,e)-M(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,a=e.parentNode,s=t.parentNode,o=[e],r=[t];if(!a||!s)return e===h?-1:t===h?1:a?-1:s?1:c?M(c,e)-M(c,t):0;if(a===s)return pe(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)r.unshift(i);for(;o[n]===r[n];)n++;return n?pe(o[n],r[n]):o[n]===$?-1:r[n]===$?1:0}),h},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&p(e),i.matchesSelector&&m&&!T[t+" "]&&(!b||!b.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return 0<re(t,h,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==h&&p(e),_(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==h&&p(e);var a=n.attrHandle[t.toLowerCase()],s=a&&S.call(n.attrHandle,t.toLowerCase())?a(e,t,!m):void 0;return void 0!==s?s:i.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},re.escape=function(e){return(e+"").replace(ne,ae)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],a=0,s=0;if(u=!i.detectDuplicates,c=!i.sortStable&&e.slice(0),e.sort(E),u){for(;t=e[s++];)t===e[s]&&(a=n.push(s));for(;a--;)e.splice(n[a],1)}return c=null,e},a=re.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=a(t);return i},(n=re.selectors={cacheLength:50,createPseudo:de,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&K.test(i)&&(t=o(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var a=re.attr(n,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&-1<a.indexOf(i):"$="===t?i&&a.slice(-i.length)===i:"~="===t?-1<(" "+a.replace(H," ")+" ").indexOf(i):"|="===t&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,p,h,f,m=s!==o?"nextSibling":"previousSibling",v=t.parentNode,b=r&&t.nodeName.toLowerCase(),g=!l&&!r,_=!1;if(v){if(s){for(;m;){for(p=t;p=p[m];)if(r?p.nodeName.toLowerCase()===b:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?v.firstChild:v.lastChild],o&&g){for(_=(h=(d=(c=(u=(p=v)[y]||(p[y]={}))[p.uniqueID]||(u[p.uniqueID]={}))[e]||[])[0]===w&&d[1])&&d[2],p=h&&v.childNodes[h];p=++h&&p&&p[m]||(_=h=0)||f.pop();)if(1===p.nodeType&&++_&&p===t){c[e]=[w,h,_];break}}else if(g&&(_=h=(d=(c=(u=(p=t)[y]||(p[y]={}))[p.uniqueID]||(u[p.uniqueID]={}))[e]||[])[0]===w&&d[1]),!1===_)for(;(p=++h&&p&&p[m]||(_=h=0)||f.pop())&&((r?p.nodeName.toLowerCase()!==b:1!==p.nodeType)||!++_||(g&&((c=(u=p[y]||(p[y]={}))[p.uniqueID]||(u[p.uniqueID]={}))[e]=[w,_]),p!==t)););return(_-=a)===n||_%n==0&&0<=_/n}}},PSEUDO:function(e,t){var i,a=n.pseudos[e]||n.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return a[y]?a(t):1<a.length?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?de((function(e,i){for(var n,s=a(e,t),o=s.length;o--;)e[n=M(e,s[o])]=!(i[n]=s[o])})):function(e){return a(e,0,i)}):a}},pseudos:{not:de((function(e){var t=[],i=[],n=r(e.replace(q,"$1"));return n[y]?de((function(e,t,i,a){for(var s,o=n(e,null,a,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))})):function(e,a,s){return t[0]=e,n(t,null,s,i),t[0]=null,!i.pop()}})),has:de((function(e){return function(t){return 0<re(e,t).length}})),contains:de((function(e){return e=e.replace(te,ie),function(t){return-1<(t.textContent||a(t)).indexOf(e)}})),lang:de((function(e){return V.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,i){return[i<0?i+t:i]})),even:ve((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:ve((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:ve((function(e,t,i){for(var n=i<0?i+t:t<i?t:i;0<=--n;)e.push(n);return e})),gt:ve((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ge(){}function _e(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(e,t,i){var n=t.dir,a=t.next,s=a||n,o=i&&"parentNode"===s,r=k++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,a);return!1}:function(t,i,l){var d,c,u,p=[w,r];if(l){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(c=(u=t[y]||(t[y]={}))[t.uniqueID]||(u[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[n]||t;else{if((d=c[s])&&d[0]===w&&d[1]===r)return p[2]=d[2];if((c[s]=p)[2]=e(t,i,l))return!0}return!1}}function $e(e){return 1<e.length?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function we(e,t,i,n,a){for(var s,o=[],r=0,l=e.length,d=null!=t;r<l;r++)(s=e[r])&&(i&&!i(s,n,a)||(o.push(s),d&&t.push(r)));return o}function ke(e,t,i,n,a,s){return n&&!n[y]&&(n=ke(n)),a&&!a[y]&&(a=ke(a,s)),de((function(s,o,r,l){var d,c,u,p=[],h=[],f=o.length,m=s||function(e,t,i){for(var n=0,a=t.length;n<a;n++)re(e,t[n],i);return i}(t||"*",r.nodeType?[r]:r,[]),v=!e||!s&&t?m:we(m,p,e,r,l),b=i?a||(s?e:f||n)?[]:o:v;if(i&&i(v,b,r,l),n)for(d=we(b,h),n(d,[],r,l),c=d.length;c--;)(u=d[c])&&(b[h[c]]=!(v[h[c]]=u));if(s){if(a||e){if(a){for(d=[],c=b.length;c--;)(u=b[c])&&d.push(v[c]=u);a(null,b=[],d,l)}for(c=b.length;c--;)(u=b[c])&&-1<(d=a?M(s,u):p[c])&&(s[d]=!(o[d]=u))}}else b=we(b===o?b.splice(f,b.length):b),a?a(null,o,b,l):A.apply(o,b)}))}function Ce(e){for(var t,i,a,s=e.length,o=n.relative[e[0].type],r=o||n.relative[" "],l=o?1:0,c=ye((function(e){return e===t}),r,!0),u=ye((function(e){return-1<M(t,e)}),r,!0),p=[function(e,i,n){var a=!o&&(n||i!==d)||((t=i).nodeType?c(e,i,n):u(e,i,n));return t=null,a}];l<s;l++)if(i=n.relative[e[l].type])p=[ye($e(p),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[y]){for(a=++l;a<s&&!n.relative[e[a].type];a++);return ke(1<l&&$e(p),1<l&&_e(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(q,"$1"),i,l<a&&Ce(e.slice(l,a)),a<s&&Ce(e=e.slice(a)),a<s&&_e(e))}p.push(i)}return $e(p)}return ge.prototype=n.filters=n.pseudos,n.setFilters=new ge,o=re.tokenize=function(e,t){var i,a,s,o,r,l,d,c=x[e+" "];if(c)return t?0:c.slice(0);for(r=e,l=[],d=n.preFilter;r;){for(o in i&&!(a=z.exec(r))||(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),i=!1,(a=U.exec(r))&&(i=a.shift(),s.push({value:i,type:a[0].replace(q," ")}),r=r.slice(i.length)),n.filter)!(a=Y[o].exec(r))||d[o]&&!(a=d[o](a))||(i=a.shift(),s.push({value:i,type:o,matches:a}),r=r.slice(i.length));if(!i)break}return t?r.length:r?re.error(e):x(e,l).slice(0)},r=re.compile=function(e,t){var i,a,s,r,l,c,u=[],f=[],v=j[e+" "];if(!v){for(t||(t=o(e)),i=t.length;i--;)(v=Ce(t[i]))[y]?u.push(v):f.push(v);(v=j(e,(a=f,r=0<(s=u).length,l=0<a.length,c=function(e,t,i,o,c){var u,f,v,b=0,g="0",_=e&&[],y=[],$=d,k=e||l&&n.find.TAG("*",c),C=w+=null==$?1:Math.random()||.1,x=k.length;for(c&&(d=t===h||t||c);g!==x&&null!=(u=k[g]);g++){if(l&&u){for(f=0,t||u.ownerDocument===h||(p(u),i=!m);v=a[f++];)if(v(u,t||h,i)){o.push(u);break}c&&(w=C)}r&&((u=!v&&u)&&b--,e&&_.push(u))}if(b+=g,r&&g!==b){for(f=0;v=s[f++];)v(_,y,t,i);if(e){if(0<b)for(;g--;)_[g]||y[g]||(y[g]=O.call(o));y=we(y)}A.apply(o,y),c&&!e&&0<y.length&&1<b+s.length&&re.uniqueSort(o)}return c&&(w=C,d=$),_},r?de(c):c))).selector=e}return v},l=re.select=function(e,t,i,a){var s,l,d,c,u,p="function"==typeof e&&e,h=!a&&o(e=p.selector||e);if(i=i||[],1===h.length){if(2<(l=h[0]=h[0].slice(0)).length&&"ID"===(d=l[0]).type&&9===t.nodeType&&m&&n.relative[l[1].type]){if(!(t=(n.find.ID(d.matches[0].replace(te,ie),t)||[])[0]))return i;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=Y.needsContext.test(e)?0:l.length;s--&&(d=l[s],!n.relative[c=d.type]);)if((u=n.find[c])&&(a=u(d.matches[0].replace(te,ie),ee.test(l[0].type)&&be(t.parentNode)||t))){if(l.splice(s,1),!(e=a.length&&_e(l)))return A.apply(i,a),i;break}}return(p||r(e,h))(a,t,!m,i,!t||ee.test(e)&&be(t.parentNode)||t),i},i.sortStable=y.split("").sort(E).join("")===y,i.detectDuplicates=!!u,p(),i.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||ue(I,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),re}(e);$.find=C,$.expr=C.selectors,$.expr[":"]=$.expr.pseudos,$.uniqueSort=$.unique=C.uniqueSort,$.text=C.getText,$.isXMLDoc=C.isXML,$.contains=C.contains,$.escapeSelector=C.escape;var x=function(e,t,i){for(var n=[],a=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&$(e).is(i))break;n.push(e)}return n},j=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},T=$.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var S=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,i){return m(t)?$.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?$.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?$.grep(e,(function(e){return-1<l.call(t,e)!==i})):$.filter(t,e,i)}$.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?$.find.matchesSelector(n,e)?[n]:[]:$.find.matches(e,$.grep(t,(function(e){return 1===e.nodeType})))},$.fn.extend({find:function(e){var t,i,n=this.length,a=this;if("string"!=typeof e)return this.pushStack($(e).filter((function(){for(t=0;t<n;t++)if($.contains(a[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)$.find(e,a[t],i);return 1<n?$.uniqueSort(i):i},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&T.test(e)?$(e):e||[],!1).length}});var O,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;($.fn.init=function(e,t,i){var a,s;if(!e)return this;if(i=i||O,"string"==typeof e){if(!(a="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:P.exec(e))||!a[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof $?t[0]:t,$.merge(this,$.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:n,!0)),S.test(a[1])&&$.isPlainObject(t))for(a in t)m(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return(s=n.getElementById(a[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==i.ready?i.ready(e):e($):$.makeArray(e,this)}).prototype=$.fn,O=$(n);var A=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}$.fn.extend({has:function(e){var t=$(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if($.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,a=this.length,s=[],o="string"!=typeof e&&$(e);if(!T.test(e))for(;n<a;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&$.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(1<s.length?$.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?l.call($(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack($.uniqueSort($.merge(this.get(),$(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),$.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,i){return x(e,"parentNode",i)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,i){return x(e,"nextSibling",i)},prevUntil:function(e,t,i){return x(e,"previousSibling",i)},siblings:function(e){return j((e.parentNode||{}).firstChild,e)},children:function(e){return j(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(E(e,"template")&&(e=e.content||e),$.merge([],e.childNodes))}},(function(e,t){$.fn[e]=function(i,n){var a=$.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=$.filter(n,a)),1<this.length&&(N[e]||$.uniqueSort(a),A.test(e)&&a.reverse()),this.pushStack(a)}}));var I=/[^\x20\t\r\n\f]+/g;function L(e){return e}function F(e){throw e}function B(e,t,i,n){var a;try{e&&m(a=e.promise)?a.call(e).done(t).fail(i):e&&m(a=e.then)?a.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}$.Callbacks=function(e){var t,i;e="string"==typeof e?(t=e,i={},$.each(t.match(I)||[],(function(e,t){i[t]=!0})),i):$.extend({},e);var n,a,s,o,r=[],l=[],d=-1,c=function(){for(o=o||e.once,s=n=!0;l.length;d=-1)for(a=l.shift();++d<r.length;)!1===r[d].apply(a[0],a[1])&&e.stopOnFalse&&(d=r.length,a=!1);e.memory||(a=!1),n=!1,o&&(r=a?[]:"")},u={add:function(){return r&&(a&&!n&&(d=r.length-1,l.push(a)),function t(i){$.each(i,(function(i,n){m(n)?e.unique&&u.has(n)||r.push(n):n&&n.length&&"string"!==_(n)&&t(n)}))}(arguments),a&&!n&&c()),this},remove:function(){return $.each(arguments,(function(e,t){for(var i;-1<(i=$.inArray(t,r,i));)r.splice(i,1),i<=d&&d--})),this},has:function(e){return e?-1<$.inArray(e,r):0<r.length},empty:function(){return r&&(r=[]),this},disable:function(){return o=l=[],r=a="",this},disabled:function(){return!r},lock:function(){return o=l=[],a||n||(r=a=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),n||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},$.extend({Deferred:function(t){var i=[["notify","progress",$.Callbacks("memory"),$.Callbacks("memory"),2],["resolve","done",$.Callbacks("once memory"),$.Callbacks("once memory"),0,"resolved"],["reject","fail",$.Callbacks("once memory"),$.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return $.Deferred((function(t){$.each(i,(function(i,n){var a=m(e[n[4]])&&e[n[4]];s[n[1]]((function(){var e=a&&a.apply(this,arguments);e&&m(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(t,n,a){var s=0;function o(t,i,n,a){return function(){var r=this,l=arguments,d=function(){var e,d;if(!(t<s)){if((e=n.apply(r,l))===i.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(d)?a?d.call(e,o(s,i,L,a),o(s,i,F,a)):(s++,d.call(e,o(s,i,L,a),o(s,i,F,a),o(s,i,L,i.notifyWith))):(n!==L&&(r=void 0,l=[e]),(a||i.resolveWith)(r,l))}},c=a?d:function(){try{d()}catch(e){$.Deferred.exceptionHook&&$.Deferred.exceptionHook(e,c.stackTrace),s<=t+1&&(n!==F&&(r=void 0,l=[e]),i.rejectWith(r,l))}};t?c():($.Deferred.getStackHook&&(c.stackTrace=$.Deferred.getStackHook()),e.setTimeout(c))}}return $.Deferred((function(e){i[0][3].add(o(0,e,m(a)?a:L,e.notifyWith)),i[1][3].add(o(0,e,m(t)?t:L)),i[2][3].add(o(0,e,m(n)?n:F))})).promise()},promise:function(e){return null!=e?$.extend(e,a):a}},s={};return $.each(i,(function(e,t){var o=t[2],r=t[5];a[t[1]]=o.add,r&&o.add((function(){n=r}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),o.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=o.fireWith})),a.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,i=t,n=Array(i),a=s.call(arguments),o=$.Deferred(),r=function(e){return function(i){n[e]=this,a[e]=1<arguments.length?s.call(arguments):i,--t||o.resolveWith(n,a)}};if(t<=1&&(B(e,o.done(r(i)).resolve,o.reject,!t),"pending"===o.state()||m(a[i]&&a[i].then)))return o.then();for(;i--;)B(a[i],r(i),o.reject);return o.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;$.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&R.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},$.readyException=function(t){e.setTimeout((function(){throw t}))};var H=$.Deferred();function q(){n.removeEventListener("DOMContentLoaded",q),e.removeEventListener("load",q),$.ready()}$.fn.ready=function(e){return H.then(e).catch((function(e){$.readyException(e)})),this},$.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--$.readyWait:$.isReady)||($.isReady=!0)!==e&&0<--$.readyWait||H.resolveWith(n,[$])}}),$.ready.then=H.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout($.ready):(n.addEventListener("DOMContentLoaded",q),e.addEventListener("load",q));var z=function(e,t,i,n,a,s,o){var r=0,l=e.length,d=null==i;if("object"===_(i))for(r in a=!0,i)z(e,t,r,i[r],!0,s,o);else if(void 0!==n&&(a=!0,m(n)||(o=!0),d&&(o?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call($(e),i)})),t))for(;r<l;r++)t(e[r],i,o?n:n.call(e[r],r,t(e[r],i)));return a?e:d?t.call(e):l?t(e[0],i):s},U=/^-ms-/,W=/-([a-z])/g;function K(e,t){return t.toUpperCase()}function V(e){return e.replace(U,"ms-").replace(W,K)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=$.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,a=this.cache(e);if("string"==typeof t)a[V(t)]=i;else for(n in t)a[V(n)]=t[n];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(V):(t=V(t))in n?[t]:t.match(I)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||$.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!$.isEmptyObject(t)}};var X=new J,G=new J,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function ee(e,t,i){var n,a;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(a=i)||"false"!==a&&("null"===a?null:a===+a+""?+a:Z.test(a)?JSON.parse(a):a)}catch(e){}G.set(e,t,i)}else i=void 0;return i}$.extend({hasData:function(e){return G.hasData(e)||X.hasData(e)},data:function(e,t,i){return G.access(e,t,i)},removeData:function(e,t){G.remove(e,t)},_data:function(e,t,i){return X.access(e,t,i)},_removeData:function(e,t){X.remove(e,t)}}),$.fn.extend({data:function(e,t){var i,n,a,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(a=G.get(s),1===s.nodeType&&!X.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=V(n.slice(5)),ee(s,n,a[n]));X.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each((function(){G.set(this,e)})):z(this,(function(t){var i;if(s&&void 0===t)return void 0!==(i=G.get(s,e))||void 0!==(i=ee(s,e))?i:void 0;this.each((function(){G.set(this,e,t)}))}),null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){G.remove(this,e)}))}}),$.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=X.get(e,t),i&&(!n||Array.isArray(i)?n=X.access(e,t,$.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=$.queue(e,t),n=i.length,a=i.shift(),s=$._queueHooks(e,t);"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete s.stop,a.call(e,(function(){$.dequeue(e,t)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return X.get(e,i)||X.access(e,i,{empty:$.Callbacks("once memory").add((function(){X.remove(e,[t+"queue",i])}))})}}),$.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?$.queue(this[0],e):void 0===t?this:this.each((function(){var i=$.queue(this,e,t);$._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&$.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){$.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=$.Deferred(),s=this,o=this.length,r=function(){--n||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=X.get(s[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),a.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ae=n.documentElement,se=function(e){return $.contains(e.ownerDocument,e)},oe={composed:!0};ae.getRootNode&&(se=function(e){return $.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===$.css(e,"display")},le=function(e,t,i,n){var a,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in a=i.apply(e,n||[]),t)e.style[s]=o[s];return a};function de(e,t,i,n){var a,s,o=20,r=n?function(){return n.cur()}:function(){return $.css(e,t,"")},l=r(),d=i&&i[3]||($.cssNumber[t]?"":"px"),c=e.nodeType&&($.cssNumber[t]||"px"!==d&&+l)&&ie.exec($.css(e,t));if(c&&c[3]!==d){for(l/=2,d=d||c[3],c=+l||1;o--;)$.style(e,t,c+d),(1-s)*(1-(s=r()/l||.5))<=0&&(o=0),c/=s;c*=2,$.style(e,t,c+d),i=i||[]}return i&&(c=+c||+l||0,a=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=a)),a}var ce={};function ue(e,t){for(var i,n,a,s,o,r,l,d=[],c=0,u=e.length;c<u;c++)(n=e[c]).style&&(i=n.style.display,t?("none"===i&&(d[c]=X.get(n,"display")||null,d[c]||(n.style.display="")),""===n.style.display&&re(n)&&(d[c]=(l=o=s=void 0,o=(a=n).ownerDocument,r=a.nodeName,(l=ce[r])||(s=o.body.appendChild(o.createElement(r)),l=$.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),ce[r]=l)))):"none"!==i&&(d[c]="none",X.set(n,"display",i)));for(c=0;c<u;c++)null!=d[c]&&(e[c].style.display=d[c]);return e}$.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){re(this)?$(this).show():$(this).hide()}))}});var pe=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?$.merge([e],i):i}function be(e,t){for(var i=0,n=e.length;i<n;i++)X.set(e[i],"globalEval",!t||X.get(t[i],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ge,_e,ye=/<|&#?\w+;/;function $e(e,t,i,n,a){for(var s,o,r,l,d,c,u=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((s=e[h])||0===s)if("object"===_(s))$.merge(p,s.nodeType?[s]:s);else if(ye.test(s)){for(o=o||u.appendChild(t.createElement("div")),r=(he.exec(s)||["",""])[1].toLowerCase(),l=me[r]||me._default,o.innerHTML=l[1]+$.htmlPrefilter(s)+l[2],c=l[0];c--;)o=o.lastChild;$.merge(p,o.childNodes),(o=u.firstChild).textContent=""}else p.push(t.createTextNode(s));for(u.textContent="",h=0;s=p[h++];)if(n&&-1<$.inArray(s,n))a&&a.push(s);else if(d=se(s),o=ve(u.appendChild(s),"script"),d&&be(o),i)for(c=0;s=o[c++];)fe.test(s.type||"")&&i.push(s);return u}ge=n.createDocumentFragment().appendChild(n.createElement("div")),(_e=n.createElement("input")).setAttribute("type","radio"),_e.setAttribute("checked","checked"),_e.setAttribute("name","t"),ge.appendChild(_e),f.checkClone=ge.cloneNode(!0).cloneNode(!0).lastChild.checked,ge.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!ge.cloneNode(!0).lastChild.defaultValue;var we=/^key/,ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function je(){return!1}function Te(e,t){return e===function(){try{return n.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,i,n,a,s){var o,r;if("object"==typeof t){for(r in"string"!=typeof i&&(n=n||i,i=void 0),t)Ee(e,r,i,n,t[r],s);return e}if(null==n&&null==a?(a=i,n=i=void 0):null==a&&("string"==typeof i?(a=n,n=void 0):(a=n,n=i,i=void 0)),!1===a)a=je;else if(!a)return e;return 1===s&&(o=a,(a=function(e){return $().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=$.guid++)),e.each((function(){$.event.add(this,t,a,n,i)}))}function Se(e,t,i){i?(X.set(e,t,!1),$.event.add(e,t,{namespace:!1,handler:function(e){var n,a,o=X.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)($.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),X.set(this,t,o),n=i(this,t),this[t](),o!==(a=X.get(this,t))||n?X.set(this,t,!1):a={},o!==a)return e.stopImmediatePropagation(),e.preventDefault(),a.value}else o.length&&(X.set(this,t,{value:$.event.trigger($.extend(o[0],$.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&$.event.add(e,t,xe)}$.event={global:{},add:function(e,t,i,n,a){var s,o,r,l,d,c,u,p,h,f,m,v=X.get(e);if(v)for(i.handler&&(i=(s=i).handler,a=s.selector),a&&$.find.matchesSelector(ae,a),i.guid||(i.guid=$.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(t){return void 0!==$&&$.event.triggered!==t.type?$.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(I)||[""]).length;d--;)h=m=(r=Ce.exec(t[d])||[])[1],f=(r[2]||"").split(".").sort(),h&&(u=$.event.special[h]||{},h=(a?u.delegateType:u.bindType)||h,u=$.event.special[h]||{},c=$.extend({type:h,origType:m,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&$.expr.match.needsContext.test(a),namespace:f.join(".")},s),(p=l[h])||((p=l[h]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,o)||e.addEventListener&&e.addEventListener(h,o)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),a?p.splice(p.delegateCount++,0,c):p.push(c),$.event.global[h]=!0)},remove:function(e,t,i,n,a){var s,o,r,l,d,c,u,p,h,f,m,v=X.hasData(e)&&X.get(e);if(v&&(l=v.events)){for(d=(t=(t||"").match(I)||[""]).length;d--;)if(h=m=(r=Ce.exec(t[d])||[])[1],f=(r[2]||"").split(".").sort(),h){for(u=$.event.special[h]||{},p=l[h=(n?u.delegateType:u.bindType)||h]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=p.length;s--;)c=p[s],!a&&m!==c.origType||i&&i.guid!==c.guid||r&&!r.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(p.splice(s,1),c.selector&&p.delegateCount--,u.remove&&u.remove.call(e,c));o&&!p.length&&(u.teardown&&!1!==u.teardown.call(e,f,v.handle)||$.removeEvent(e,h,v.handle),delete l[h])}else for(h in l)$.event.remove(e,h+t[d],i,n,!0);$.isEmptyObject(l)&&X.remove(e,"handle events")}},dispatch:function(e){var t,i,n,a,s,o,r=$.event.fix(e),l=new Array(arguments.length),d=(X.get(this,"events")||{})[r.type]||[],c=$.event.special[r.type]||{};for(l[0]=r,t=1;t<arguments.length;t++)l[t]=arguments[t];if(r.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,r)){for(o=$.event.handlers.call(this,r,d),t=0;(a=o[t++])&&!r.isPropagationStopped();)for(r.currentTarget=a.elem,i=0;(s=a.handlers[i++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!1!==s.namespace&&!r.rnamespace.test(s.namespace)||(r.handleObj=s,r.data=s.data,void 0!==(n=(($.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))&&!1===(r.result=n)&&(r.preventDefault(),r.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,r),r.result}},handlers:function(e,t){var i,n,a,s,o,r=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&1<=e.button))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(s=[],o={},i=0;i<l;i++)void 0===o[a=(n=t[i]).selector+" "]&&(o[a]=n.needsContext?-1<$(a,this).index(d):$.find(a,this,null,[d]).length),o[a]&&s.push(n);s.length&&r.push({elem:d,handlers:s})}return d=this,l<t.length&&r.push({elem:d,handlers:t.slice(l)}),r},addProp:function(e,t){Object.defineProperty($.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[$.expando]?e:new $.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&E(t,"input")&&Se(t,"click",xe),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&E(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&E(t,"input")&&X.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},$.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},$.Event=function(e,t){if(!(this instanceof $.Event))return new $.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:je,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&$.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[$.expando]=!0},$.Event.prototype={constructor:$.Event,isDefaultPrevented:je,isPropagationStopped:je,isImmediatePropagationStopped:je,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},$.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ke.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},$.event.addProp),$.each({focus:"focusin",blur:"focusout"},(function(e,t){$.event.special[e]={setup:function(){return Se(this,e,Te),!1},trigger:function(){return Se(this,e),!0},delegateType:t}})),$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){$.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,a=e.handleObj;return n&&(n===this||$.contains(this,n))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}})),$.fn.extend({on:function(e,t,i,n){return Ee(this,e,t,i,n)},one:function(e,t,i,n){return Ee(this,e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,$(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=je),this.each((function(){$.event.remove(this,e,i,t)}))}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&$(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var i,n,a,s,o,r,l,d;if(1===t.nodeType){if(X.hasData(e)&&(s=X.access(e),o=X.set(t,s),d=s.events))for(a in delete o.handle,o.events={},d)for(i=0,n=d[a].length;i<n;i++)$.event.add(t,a,d[a][i]);G.hasData(e)&&(r=G.access(e),l=$.extend({},r),G.set(t,l))}}function Fe(e,t,i,n){t=o.apply([],t);var a,s,r,l,d,c,u=0,p=e.length,h=p-1,v=t[0],b=m(v);if(b||1<p&&"string"==typeof v&&!f.checkClone&&Pe.test(v))return e.each((function(a){var s=e.eq(a);b&&(t[0]=v.call(this,a,s.html())),Fe(s,t,i,n)}));if(p&&(s=(a=$e(t,e[0].ownerDocument,!1,e,n)).firstChild,1===a.childNodes.length&&(a=s),s||n)){for(l=(r=$.map(ve(a,"script"),Me)).length;u<p;u++)d=a,u!==h&&(d=$.clone(d,!0,!0),l&&$.merge(r,ve(d,"script"))),i.call(e[u],d,u);if(l)for(c=r[r.length-1].ownerDocument,$.map(r,Ie),u=0;u<l;u++)d=r[u],fe.test(d.type||"")&&!X.access(d,"globalEval")&&$.contains(c,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?$._evalUrl&&!d.noModule&&$._evalUrl(d.src,{nonce:d.nonce||d.getAttribute("nonce")}):g(d.textContent.replace(Ae,""),d,c))}return e}function Be(e,t,i){for(var n,a=t?$.filter(t,e):e,s=0;null!=(n=a[s]);s++)i||1!==n.nodeType||$.cleanData(ve(n)),n.parentNode&&(i&&se(n)&&be(ve(n,"script")),n.parentNode.removeChild(n));return e}$.extend({htmlPrefilter:function(e){return e.replace(De,"<$1></$2>")},clone:function(e,t,i){var n,a,s,o,r,l,d,c=e.cloneNode(!0),u=se(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||$.isXMLDoc(e)))for(o=ve(c),n=0,a=(s=ve(e)).length;n<a;n++)r=s[n],"input"===(d=(l=o[n]).nodeName.toLowerCase())&&pe.test(r.type)?l.checked=r.checked:"input"!==d&&"textarea"!==d||(l.defaultValue=r.defaultValue);if(t)if(i)for(s=s||ve(e),o=o||ve(c),n=0,a=s.length;n<a;n++)Le(s[n],o[n]);else Le(e,c);return 0<(o=ve(c,"script")).length&&be(o,!u&&ve(e,"script")),c},cleanData:function(e){for(var t,i,n,a=$.event.special,s=0;void 0!==(i=e[s]);s++)if(Y(i)){if(t=i[X.expando]){if(t.events)for(n in t.events)a[n]?$.event.remove(i,n):$.removeEvent(i,n,t.handle);i[X.expando]=void 0}i[G.expando]&&(i[G.expando]=void 0)}}}),$.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return z(this,(function(e){return void 0===e?$.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Fe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Fe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&($.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return $.clone(this,e,t)}))},html:function(e){return z(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!me[(he.exec(e)||["",""])[1].toLowerCase()]){e=$.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&($.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,(function(t){var i=this.parentNode;$.inArray(this,e)<0&&($.cleanData(ve(this)),i&&i.replaceChild(t,this))}),e)}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){$.fn[e]=function(e){for(var i,n=[],a=$(e),s=a.length-1,o=0;o<=s;o++)i=o===s?this:this.clone(!0),$(a[o])[t](i),r.apply(n,i.get());return this.pushStack(n)}}));var Re=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),He=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},qe=new RegExp(ne.join("|"),"i");function ze(e,t,i){var n,a,s,o,r=e.style;return(i=i||He(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||se(e)||(o=$.style(e,t)),!f.pixelBoxStyles()&&Re.test(o)&&qe.test(t)&&(n=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=n,r.minWidth=a,r.maxWidth=s)),void 0!==o?o+"":o}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(d).appendChild(c);var t=e.getComputedStyle(c);a="1%"!==t.top,l=12===i(t.marginLeft),c.style.right="60%",r=36===i(t.right),s=36===i(t.width),c.style.position="absolute",o=12===i(c.offsetWidth/3),ae.removeChild(d),c=null}}function i(e){return Math.round(parseFloat(e))}var a,s,o,r,l,d=n.createElement("div"),c=n.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,$.extend(f,{boxSizingReliable:function(){return t(),s},pixelBoxStyles:function(){return t(),r},pixelPosition:function(){return t(),a},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o}}))}();var We=["Webkit","Moz","ms"],Ke=n.createElement("div").style,Ve={};function Ye(e){return $.cssProps[e]||Ve[e]||(e in Ke?e:Ve[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=We.length;i--;)if((e=We[i]+t)in Ke)return e}(e)||e)}var Je=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ge={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function Qe(e,t,i){var n=ie.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function et(e,t,i,n,a,s){var o="width"===t?1:0,r=0,l=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(l+=$.css(e,i+ne[o],!0,a)),n?("content"===i&&(l-=$.css(e,"padding"+ne[o],!0,a)),"margin"!==i&&(l-=$.css(e,"border"+ne[o]+"Width",!0,a))):(l+=$.css(e,"padding"+ne[o],!0,a),"padding"!==i?l+=$.css(e,"border"+ne[o]+"Width",!0,a):r+=$.css(e,"border"+ne[o]+"Width",!0,a));return!n&&0<=s&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-r-.5))||0),l}function tt(e,t,i){var n=He(e),a=(!f.boxSizingReliable()||i)&&"border-box"===$.css(e,"boxSizing",!1,n),s=a,o=ze(e,t,n),r="offset"+t[0].toUpperCase()+t.slice(1);if(Re.test(o)){if(!i)return o;o="auto"}return(!f.boxSizingReliable()&&a||"auto"===o||!parseFloat(o)&&"inline"===$.css(e,"display",!1,n))&&e.getClientRects().length&&(a="border-box"===$.css(e,"boxSizing",!1,n),(s=r in e)&&(o=e[r])),(o=parseFloat(o)||0)+et(e,t,i||(a?"border":"content"),s,n,o)+"px"}function it(e,t,i,n,a){return new it.prototype.init(e,t,i,n,a)}$.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ze(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o,r=V(t),l=Xe.test(t),d=e.style;if(l||(t=Ye(r)),o=$.cssHooks[t]||$.cssHooks[r],void 0===i)return o&&"get"in o&&void 0!==(a=o.get(e,!1,n))?a:d[t];"string"==(s=typeof i)&&(a=ie.exec(i))&&a[1]&&(i=de(e,t,a),s="number"),null!=i&&i==i&&("number"!==s||l||(i+=a&&a[3]||($.cssNumber[r]?"":"px")),f.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,n){var a,s,o,r=V(t);return Xe.test(t)||(t=Ye(r)),(o=$.cssHooks[t]||$.cssHooks[r])&&"get"in o&&(a=o.get(e,!0,i)),void 0===a&&(a=ze(e,t,n)),"normal"===a&&t in Ze&&(a=Ze[t]),""===i||i?(s=parseFloat(a),!0===i||isFinite(s)?s||0:a):a}}),$.each(["height","width"],(function(e,t){$.cssHooks[t]={get:function(e,i,n){if(i)return!Je.test($.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,n):le(e,Ge,(function(){return tt(e,t,n)}))},set:function(e,i,n){var a,s=He(e),o=!f.scrollboxSize()&&"absolute"===s.position,r=(o||n)&&"border-box"===$.css(e,"boxSizing",!1,s),l=n?et(e,t,n,r,s):0;return r&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-et(e,t,"border",!1,s)-.5)),l&&(a=ie.exec(i))&&"px"!==(a[3]||"px")&&(e.style[t]=i,i=$.css(e,t)),Qe(0,i,l)}}})),$.cssHooks.marginLeft=Ue(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-le(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),$.each({margin:"",padding:"",border:"Width"},(function(e,t){$.cssHooks[e+t]={expand:function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];n<4;n++)a[e+ne[n]+t]=s[n]||s[n-2]||s[0];return a}},"margin"!==e&&($.cssHooks[e+t].set=Qe)})),$.fn.extend({css:function(e,t){return z(this,(function(e,t,i){var n,a,s={},o=0;if(Array.isArray(t)){for(n=He(e),a=t.length;o<a;o++)s[t[o]]=$.css(e,t[o],!1,n);return s}return void 0!==i?$.style(e,t,i):$.css(e,t)}),e,t,1<arguments.length)}}),(($.Tween=it).prototype={constructor:it,init:function(e,t,i,n,a,s){this.elem=e,this.prop=i,this.easing=a||$.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||($.cssNumber[i]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,i=it.propHooks[this.prop];return this.options.duration?this.pos=t=$.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):it.propHooks._default.set(this),this}}).init.prototype=it.prototype,(it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=$.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){$.fx.step[e.prop]?$.fx.step[e.prop](e):1!==e.elem.nodeType||!$.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:$.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},$.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},$.fx=it.prototype.init,$.fx.step={};var nt,at,st,ot,rt=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function dt(){at&&(!1===n.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(dt):e.setTimeout(dt,$.fx.interval),$.fx.tick())}function ct(){return e.setTimeout((function(){nt=void 0})),nt=Date.now()}function ut(e,t){var i,n=0,a={height:e};for(t=t?1:0;n<4;n+=2-t)a["margin"+(i=ne[n])]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function pt(e,t,i){for(var n,a=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),s=0,o=a.length;s<o;s++)if(n=a[s].call(i,t,e))return n}function ht(e,t,i){var n,a,s=0,o=ht.prefilters.length,r=$.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var t=nt||ct(),i=Math.max(0,d.startTime+d.duration-t),n=1-(i/d.duration||0),s=0,o=d.tweens.length;s<o;s++)d.tweens[s].run(n);return r.notifyWith(e,[d,n,i]),n<1&&o?i:(o||r.notifyWith(e,[d,1,0]),r.resolveWith(e,[d]),!1)},d=r.promise({elem:e,props:$.extend({},t),opts:$.extend(!0,{specialEasing:{},easing:$.easing._default},i),originalProperties:t,originalOptions:i,startTime:nt||ct(),duration:i.duration,tweens:[],createTween:function(t,i){var n=$.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(a)return this;for(a=!0;i<n;i++)d.tweens[i].run(1);return t?(r.notifyWith(e,[d,1,0]),r.resolveWith(e,[d,t])):r.rejectWith(e,[d,t]),this}}),c=d.props;for(function(e,t){var i,n,a,s,o;for(i in e)if(a=t[n=V(i)],s=e[i],Array.isArray(s)&&(a=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(o=$.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete e[n],s)i in e||(e[i]=s[i],t[i]=a);else t[n]=a}(c,d.opts.specialEasing);s<o;s++)if(n=ht.prefilters[s].call(d,e,c,d.opts))return m(n.stop)&&($._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return $.map(c,pt,d),m(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),$.fx.timer($.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}$.Animation=$.extend(ht,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return de(i.elem,e,ie.exec(t),i),i}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(I);for(var i,n=0,a=e.length;n<a;n++)i=e[n],ht.tweeners[i]=ht.tweeners[i]||[],ht.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,a,s,o,r,l,d,c,u="width"in t||"height"in t,p=this,h={},f=e.style,m=e.nodeType&&re(e),v=X.get(e,"fxshow");for(n in i.queue||(null==(o=$._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,r=o.empty.fire,o.empty.fire=function(){o.unqueued||r()}),o.unqueued++,p.always((function(){p.always((function(){o.unqueued--,$.queue(e,"fx").length||o.empty.fire()}))}))),t)if(a=t[n],rt.test(a)){if(delete t[n],s=s||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!v||void 0===v[n])continue;m=!0}h[n]=v&&v[n]||$.style(e,n)}if((l=!$.isEmptyObject(t))||!$.isEmptyObject(h))for(n in u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(d=v&&v.display)&&(d=X.get(e,"display")),"none"===(c=$.css(e,"display"))&&(d?c=d:(ue([e],!0),d=e.style.display||d,c=$.css(e,"display"),ue([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===$.css(e,"float")&&(l||(p.done((function(){f.display=d})),null==d&&(c=f.display,d="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,h)l||(v?"hidden"in v&&(m=v.hidden):v=X.access(e,"fxshow",{display:d}),s&&(v.hidden=!m),m&&ue([e],!0),p.done((function(){for(n in m||ue([e]),X.remove(e,"fxshow"),h)$.style(e,n,h[n])}))),l=pt(m?v[n]:0,n,p),n in v||(v[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),$.speed=function(e,t,i){var n=e&&"object"==typeof e?$.extend({},e):{complete:i||!i&&t||m(e)&&e,duration:e,easing:i&&t||t&&!m(t)&&t};return $.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in $.fx.speeds?n.duration=$.fx.speeds[n.duration]:n.duration=$.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&$.dequeue(this,n.queue)},n},$.fn.extend({fadeTo:function(e,t,i,n){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=$.isEmptyObject(e),s=$.speed(t,i,n),o=function(){var t=ht(this,$.extend({},e),s);(a||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",s=$.timers,o=X.get(this);if(a)o[a]&&o[a].stop&&n(o[a]);else for(a in o)o[a]&&o[a].stop&&lt.test(a)&&n(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(i),t=!1,s.splice(a,1));!t&&i||$.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=X.get(this),n=i[e+"queue"],a=i[e+"queueHooks"],s=$.timers,o=n?n.length:0;for(i.finish=!0,$.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),$.each(["toggle","show","hide"],(function(e,t){var i=$.fn[t];$.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ut(t,!0),e,n,a)}})),$.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){$.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),$.timers=[],$.fx.tick=function(){var e,t=0,i=$.timers;for(nt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||$.fx.stop(),nt=void 0},$.fx.timer=function(e){$.timers.push(e),$.fx.start()},$.fx.interval=13,$.fx.start=function(){at||(at=!0,dt())},$.fx.stop=function(){at=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(t,i){return t=$.fx&&$.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,n){var a=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(a)}}))},st=n.createElement("input"),ot=n.createElement("select").appendChild(n.createElement("option")),st.type="checkbox",f.checkOn=""!==st.value,f.optSelected=ot.selected,(st=n.createElement("input")).value="t",st.type="radio",f.radioValue="t"===st.value;var ft,mt=$.expr.attrHandle;$.fn.extend({attr:function(e,t){return z(this,$.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){$.removeAttr(this,e)}))}}),$.extend({attr:function(e,t,i){var n,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?$.prop(e,t,i):(1===s&&$.isXMLDoc(e)||(a=$.attrHooks[t.toLowerCase()]||($.expr.match.bool.test(t)?ft:void 0)),void 0!==i?null===i?void $.removeAttr(e,t):a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:(e.setAttribute(t,i+""),i):a&&"get"in a&&null!==(n=a.get(e,t))?n:null==(n=$.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&E(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,a=t&&t.match(I);if(a&&1===e.nodeType)for(;i=a[n++];)e.removeAttribute(i)}}),ft={set:function(e,t,i){return!1===t?$.removeAttr(e,i):e.setAttribute(i,i),i}},$.each($.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=mt[t]||$.find.attr;mt[t]=function(e,t,n){var a,s,o=t.toLowerCase();return n||(s=mt[o],mt[o]=a,a=null!=i(e,t,n)?o:null,mt[o]=s),a}}));var vt=/^(?:input|select|textarea|button)$/i,bt=/^(?:a|area)$/i;function gt(e){return(e.match(I)||[]).join(" ")}function _t(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(I)||[]}$.fn.extend({prop:function(e,t){return z(this,$.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[$.propFix[e]||e]}))}}),$.extend({prop:function(e,t,i){var n,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&$.isXMLDoc(e)||(t=$.propFix[t]||t,a=$.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=$.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||($.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){$.propFix[this.toLowerCase()]=this})),$.fn.extend({addClass:function(e){var t,i,n,a,s,o,r,l=0;if(m(e))return this.each((function(t){$(this).addClass(e.call(this,t,_t(this)))}));if((t=yt(e)).length)for(;i=this[l++];)if(a=_t(i),n=1===i.nodeType&&" "+gt(a)+" "){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a!==(r=gt(n))&&i.setAttribute("class",r)}return this},removeClass:function(e){var t,i,n,a,s,o,r,l=0;if(m(e))return this.each((function(t){$(this).removeClass(e.call(this,t,_t(this)))}));if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;i=this[l++];)if(a=_t(i),n=1===i.nodeType&&" "+gt(a)+" "){for(o=0;s=t[o++];)for(;-1<n.indexOf(" "+s+" ");)n=n.replace(" "+s+" "," ");a!==(r=gt(n))&&i.setAttribute("class",r)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):m(e)?this.each((function(i){$(this).toggleClass(e.call(this,i,_t(this),t),t)})):this.each((function(){var t,a,s,o;if(n)for(a=0,s=$(this),o=yt(e);t=o[a++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==i||((t=_t(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+gt(_t(i))+" ").indexOf(t))return!0;return!1}});var $t=/\r/g;$.fn.extend({val:function(e){var t,i,n,a=this[0];return arguments.length?(n=m(e),this.each((function(i){var a;1===this.nodeType&&(null==(a=n?e.call(this,i,$(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=$.map(a,(function(e){return null==e?"":e+""}))),(t=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=$.valHooks[a.type]||$.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:"string"==typeof(i=a.value)?i.replace($t,""):null==i?"":i:void 0}}),$.extend({valHooks:{option:{get:function(e){var t=$.find.attr(e,"value");return null!=t?t:gt($.text(e))}},select:{get:function(e){var t,i,n,a=e.options,s=e.selectedIndex,o="select-one"===e.type,r=o?null:[],l=o?s+1:a.length;for(n=s<0?l:o?s:0;n<l;n++)if(((i=a[n]).selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!E(i.parentNode,"optgroup"))){if(t=$(i).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var i,n,a=e.options,s=$.makeArray(t),o=a.length;o--;)((n=a[o]).selected=-1<$.inArray($.valHooks.option.get(n),s))&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),$.each(["radio","checkbox"],(function(){$.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<$.inArray($(e).val(),t)}},f.checkOn||($.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};$.extend($.event,{trigger:function(t,i,a,s){var o,r,l,d,c,p,h,f,b=[a||n],g=u.call(t,"type")?t.type:t,_=u.call(t,"namespace")?t.namespace.split("."):[];if(r=f=l=a=a||n,3!==a.nodeType&&8!==a.nodeType&&!wt.test(g+$.event.triggered)&&(-1<g.indexOf(".")&&(g=(_=g.split(".")).shift(),_.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[$.expando]?t:new $.Event(g,"object"==typeof t&&t)).isTrigger=s?2:3,t.namespace=_.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),i=null==i?[t]:$.makeArray(i,[t]),h=$.event.special[g]||{},s||!h.trigger||!1!==h.trigger.apply(a,i))){if(!s&&!h.noBubble&&!v(a)){for(d=h.delegateType||g,wt.test(d+g)||(r=r.parentNode);r;r=r.parentNode)b.push(r),l=r;l===(a.ownerDocument||n)&&b.push(l.defaultView||l.parentWindow||e)}for(o=0;(r=b[o++])&&!t.isPropagationStopped();)f=r,t.type=1<o?d:h.bindType||g,(p=(X.get(r,"events")||{})[t.type]&&X.get(r,"handle"))&&p.apply(r,i),(p=c&&r[c])&&p.apply&&Y(r)&&(t.result=p.apply(r,i),!1===t.result&&t.preventDefault());return t.type=g,s||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(b.pop(),i)||!Y(a)||c&&m(a[g])&&!v(a)&&((l=a[c])&&(a[c]=null),$.event.triggered=g,t.isPropagationStopped()&&f.addEventListener(g,kt),a[g](),t.isPropagationStopped()&&f.removeEventListener(g,kt),$.event.triggered=void 0,l&&(a[c]=l)),t.result}},simulate:function(e,t,i){var n=$.extend(new $.Event,i,{type:e,isSimulated:!0});$.event.trigger(n,null,t)}}),$.fn.extend({trigger:function(e,t){return this.each((function(){$.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return $.event.trigger(e,t,i,!0)}}),f.focusin||$.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){$.event.simulate(t,e.target,$.event.fix(e))};$.event.special[t]={setup:function(){var n=this.ownerDocument||this,a=X.access(n,t);a||n.addEventListener(e,i,!0),X.access(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=X.access(n,t)-1;a?X.access(n,t,a):(n.removeEventListener(e,i,!0),X.remove(n,t))}}}));var Ct=e.location,xt=Date.now(),jt=/\?/;$.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+t),i};var Tt=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,n){var a;if(Array.isArray(t))$.each(t,(function(t,a){i||Tt.test(e)?n(e,a):Ot(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,i,n)}));else if(i||"object"!==_(t))n(e,t);else for(a in t)Ot(e+"["+a+"]",t[a],i,n)}$.param=function(e,t){var i,n=[],a=function(e,t){var i=m(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!$.isPlainObject(e))$.each(e,(function(){a(this.name,this.value)}));else for(i in e)Ot(i,e[i],t,a);return n.join("&")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=$.prop(this,"elements");return e?$.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!$(this).is(":disabled")&&Dt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))})).map((function(e,t){var i=$(this).val();return null==i?null:Array.isArray(i)?$.map(i,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:i.replace(Et,"\r\n")}})).get()}});var Pt=/%20/g,At=/#.*$/,Nt=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,Lt=/^\/\//,Ft={},Bt={},Rt="*/".concat("*"),Ht=n.createElement("a");function qt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,s=t.toLowerCase().match(I)||[];if(m(i))for(;n=s[a++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function zt(e,t,i,n){var a={},s=e===Bt;function o(r){var l;return a[r]=!0,$.each(e[r]||[],(function(e,r){var d=r(t,i,n);return"string"!=typeof d||s||a[d]?s?!(l=d):void 0:(t.dataTypes.unshift(d),o(d),!1)})),l}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Ut(e,t){var i,n,a=$.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&$.extend(!0,e,n),e}Ht.href=Ct.href,$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,$.ajaxSettings),t):Ut($.ajaxSettings,e)},ajaxPrefilter:qt(Ft),ajaxTransport:qt(Bt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var a,s,o,r,l,d,c,u,p,h,f=$.ajaxSetup({},i),m=f.context||f,v=f.context&&(m.nodeType||m.jquery)?$(m):$.event,b=$.Deferred(),g=$.Callbacks("once memory"),_=f.statusCode||{},y={},w={},k="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!r)for(r={};t=Mt.exec(o);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||k;return a&&a.abort(t),x(0,t),this}};if(b.promise(C),f.url=((t||f.url||Ct.href)+"").replace(Lt,Ct.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(I)||[""],null==f.crossDomain){d=n.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=Ht.protocol+"//"+Ht.host!=d.protocol+"//"+d.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=$.param(f.data,f.traditional)),zt(Ft,f,i,C),c)return C;for(p in(u=$.event&&f.global)&&0==$.active++&&$.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!It.test(f.type),s=f.url.replace(At,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pt,"+")):(h=f.url.slice(s.length),f.data&&(f.processData||"string"==typeof f.data)&&(s+=(jt.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(Nt,"$1"),h=(jt.test(s)?"&":"?")+"_="+xt+++h),f.url=s+h),f.ifModified&&($.lastModified[s]&&C.setRequestHeader("If-Modified-Since",$.lastModified[s]),$.etag[s]&&C.setRequestHeader("If-None-Match",$.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(m,C,f)||c))return C.abort();if(k="abort",g.add(f.complete),C.done(f.success),C.fail(f.error),a=zt(Bt,f,i,C)){if(C.readyState=1,u&&v.trigger("ajaxSend",[C,f]),c)return C;f.async&&0<f.timeout&&(l=e.setTimeout((function(){C.abort("timeout")}),f.timeout));try{c=!1,a.send(y,x)}catch(t){if(c)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,i,n,r){var d,p,h,y,w,k=i;c||(c=!0,l&&e.clearTimeout(l),a=void 0,o=r||"",C.readyState=0<t?4:0,d=200<=t&&t<300||304===t,n&&(y=function(e,t,i){for(var n,a,s,o,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in r)if(r[a]&&r[a].test(n)){l.unshift(a);break}if(l[0]in i)s=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){s=a;break}o||(o=a)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}(f,C,n)),y=function(e,t,i,n){var a,s,o,r,l,d={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=d[l+" "+s]||d["* "+s]))for(a in d)if((r=a.split(" "))[1]===s&&(o=d[l+" "+r[0]]||d["* "+r[0]])){!0===o?o=d[a]:!0!==d[a]&&(s=r[0],c.unshift(r[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(f,y,C,d),d?(f.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&($.lastModified[s]=w),(w=C.getResponseHeader("etag"))&&($.etag[s]=w)),204===t||"HEAD"===f.type?k="nocontent":304===t?k="notmodified":(k=y.state,p=y.data,d=!(h=y.error))):(h=k,!t&&k||(k="error",t<0&&(t=0))),C.status=t,C.statusText=(i||k)+"",d?b.resolveWith(m,[p,k,C]):b.rejectWith(m,[C,k,h]),C.statusCode(_),_=void 0,u&&v.trigger(d?"ajaxSuccess":"ajaxError",[C,f,d?p:h]),g.fireWith(m,[C,k]),u&&(v.trigger("ajaxComplete",[C,f]),--$.active||$.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,i){return $.get(e,t,i,"json")},getScript:function(e,t){return $.get(e,void 0,t,"script")}}),$.each(["get","post"],(function(e,t){$[t]=function(e,i,n,a){return m(i)&&(a=a||n,n=i,i=void 0),$.ajax($.extend({url:e,type:t,dataType:a,data:i,success:n},$.isPlainObject(e)&&e))}})),$._evalUrl=function(e,t){return $.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){$.globalEval(e,t)}})},$.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=$(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return m(e)?this.each((function(t){$(this).wrapInner(e.call(this,t))})):this.each((function(){var t=$(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m(e);return this.each((function(i){$(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){$(this).replaceWith(this.childNodes)})),this}}),$.expr.pseudos.hidden=function(e){return!$.expr.pseudos.visible(e)},$.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},$.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Kt=$.ajaxSettings.xhr();f.cors=!!Kt&&"withCredentials"in Kt,f.ajax=Kt=!!Kt,$.ajaxTransport((function(t){var i,n;if(f.cors||Kt&&!t.crossDomain)return{send:function(a,s){var o,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];for(o in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)r.setRequestHeader(o,a[o]);i=function(e){return function(){i&&(i=n=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(Wt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),n=r.onerror=r.ontimeout=i("error"),void 0!==r.onabort?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout((function(){i&&n()}))},i=i("abort");try{r.send(t.hasContent&&t.data||null)}catch(a){if(i)throw a}},abort:function(){i&&i()}}})),$.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return $.globalEval(e),e}}}),$.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),$.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(a,s){t=$("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),n.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Vt,Yt=[],Jt=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||$.expando+"_"+xt++;return this[e]=!0,e}}),$.ajaxPrefilter("json jsonp",(function(t,i,n){var a,s,o,r=!1!==t.jsonp&&(Jt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Jt,"$1"+a):!1!==t.jsonp&&(t.url+=(jt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||$.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){o=arguments},n.always((function(){void 0===s?$(e).removeProp(a):e[a]=s,t[a]&&(t.jsonpCallback=i.jsonpCallback,Yt.push(a)),o&&m(s)&&s(o[0]),o=s=void 0})),"script"})),f.createHTMLDocument=((Vt=n.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),$.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(f.createHTMLDocument?((a=(t=n.implementation.createHTMLDocument("")).createElement("base")).href=n.location.href,t.head.appendChild(a)):t=n),o=!i&&[],(s=S.exec(e))?[t.createElement(s[1])]:(s=$e([e],t,o),o&&o.length&&$(o).remove(),$.merge([],s.childNodes)));var a,s,o},$.fn.load=function(e,t,i){var n,a,s,o=this,r=e.indexOf(" ");return-1<r&&(n=gt(e.slice(r)),e=e.slice(0,r)),m(t)?(i=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<o.length&&$.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(n?$("<div>").append($.parseHTML(e)).find(n):e)})).always(i&&function(e,t){o.each((function(){i.apply(this,s||[e.responseText,t,e])}))}),this},$.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){$.fn[t]=function(e){return this.on(t,e)}})),$.expr.pseudos.animated=function(e){return $.grep($.timers,(function(t){return e===t.elem})).length},$.offset={setOffset:function(e,t,i){var n,a,s,o,r,l,d=$.css(e,"position"),c=$(e),u={};"static"===d&&(e.style.position="relative"),r=c.offset(),s=$.css(e,"top"),l=$.css(e,"left"),("absolute"===d||"fixed"===d)&&-1<(s+l).indexOf("auto")?(o=(n=c.position()).top,a=n.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),m(t)&&(t=t.call(e,i,$.extend({},r))),null!=t.top&&(u.top=t.top-r.top+o),null!=t.left&&(u.left=t.left-r.left+a),"using"in t?t.using.call(e,u):c.css(u)}},$.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){$.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],a={top:0,left:0};if("fixed"===$.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===$.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((a=$(e).offset()).top+=$.css(e,"borderTopWidth",!0),a.left+=$.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-$.css(n,"marginTop",!0),left:t.left-a.left-$.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===$.css(e,"position");)e=e.offsetParent;return e||ae}))}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;$.fn[e]=function(n){return z(this,(function(e,n,a){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===a)return s?s[t]:e[n];s?s.scrollTo(i?s.pageXOffset:a,i?a:s.pageYOffset):e[n]=a}),e,n,arguments.length)}})),$.each(["top","left"],(function(e,t){$.cssHooks[t]=Ue(f.pixelPosition,(function(e,i){if(i)return i=ze(e,t),Re.test(i)?$(e).position()[t]+"px":i}))})),$.each({Height:"height",Width:"width"},(function(e,t){$.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){$.fn[n]=function(a,s){var o=arguments.length&&(i||"boolean"!=typeof a),r=i||(!0===a||!0===s?"margin":"border");return z(this,(function(t,i,a){var s;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===a?$.css(t,i,r):$.style(t,i,a,r)}),t,o?a:void 0,o)}}))})),$.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){$.fn[t]=function(e,i){return 0<arguments.length?this.on(t,null,e,i):this.trigger(t)}})),$.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),$.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),$.proxy=function(e,t){var i,n,a;if("string"==typeof t&&(i=e[t],t=e,e=i),m(e))return n=s.call(arguments,2),(a=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||$.guid++,a},$.holdReady=function(e){e?$.readyWait++:$.ready(!0)},$.isArray=Array.isArray,$.parseJSON=JSON.parse,$.nodeName=E,$.isFunction=m,$.isWindow=v,$.camelCase=V,$.type=_,$.now=Date.now,$.isNumeric=function(e){var t=$.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return $}));var Xt=e.jQuery,Gt=e.$;return $.noConflict=function(t){return e.$===$&&(e.$=Gt),t&&e.jQuery===$&&(e.jQuery=Xt),$},t||(e.jQuery=e.$=$),$})),
/*! jQuery UI - v1.12.1 - 2016-09-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,n)}function n(){e.datepicker._isDisabledDatepicker(p.inline?p.dpDiv.parent()[0]:p.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function a(t,i){for(var n in e.extend(t,i),i)null==i[n]&&(t[n]=i[n]);return t}function s(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.ui.version="1.12.1";var o=0,r=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,a,s;for(s=0;null!=(a=i[s]);s++)try{(n=e._data(a,"events"))&&n.remove&&e(a).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var a,s,o,r={},l=t.split(".")[0],d=l+"-"+(t=t.split(".")[1]);return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[":"][d.toLowerCase()]=function(t){return!!e.data(t,d)},e[l]=e[l]||{},a=e[l][t],s=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(o=new i).options=e.widget.extend({},o.options),e.each(n,(function(t,n){return e.isFunction(n)?void(r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function a(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=a,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(r[t]=n)})),s.prototype=e.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||t},r,{constructor:s,namespace:l,widgetName:t,widgetFullName:d}),a?(e.each(a._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)})),delete a._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,n,a=r.call(arguments,1),s=0,o=a.length;o>s;s++)for(i in a[s])n=a[s][i],a[s].hasOwnProperty(i)&&void 0!==n&&(t[i]=e.isPlainObject(n)?e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(a){var s="string"==typeof a,o=r.call(arguments,1),l=this;return s?this.length||"instance"!==a?this.each((function(){var i,s=e.data(this,n);return"instance"===a?(l=s,!1):s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(i=s[a].apply(s,o))!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")})):l=void 0:(o.length&&(a=e.widget.extend.apply(null,[a].concat(o))),this.each((function(){var t=e.data(this,n);t?(t.option(a||{}),t._init&&t._init()):e.data(this,n,new i(a,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=o++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,a,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(a=o[t]=e.widget.extend({},this.options[t]),s=0;n.length-1>s;s++)a[n[s]]=a[n[s]]||{},a=a[n[s]];if(t=n.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,a;for(i in t)a=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&a&&a.length&&(n=e(a.get()),this._removeClass(a,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,s){var o,r;for(r=0;i.length>r;r++)o=a.classesElementLookup[i[r]]||e(),o=t.add?e(e.unique(o.get().concat(t.element.get()))):e(o.not(t.element).get()),a.classesElementLookup[i[r]]=o,n.push(i[r]),s&&t.classes[i[r]]&&n.push(t.classes[i[r]])}var n=[],a=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,a){-1!==e.inArray(t.target,a)&&(i.classesElementLookup[n]=e(a.not(t.target).get()))}))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var a="string"==typeof e||null===e,s={extra:a?t:i,keys:a?e:t,element:a?this.element:e,add:n};return s.element.toggleClass(this._classes(s),n),this},_on:function(t,i,n){var a,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=a=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),e.each(n,(function(n,o){function r(){return t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+s.eventNamespace,c=l[2];c?a.on(d,c,r):i.on(d,r)}))},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var a,s,o=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?i:a.effect||i:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&e.effects&&e.effects.effect[r]?n[t](a):r!==t&&n[r]?n[r](a.duration,a.easing,s):n.queue((function(i){e(this)[t](),s&&s.call(n[0]),i()}))}})),e.widget,function(){function t(e,t,i){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var a,s=Math.max,o=Math.abs,r=/left|center|right/,l=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=n.children()[0];return e("body").append(n),t=s.offsetWidth,n.css("overflow","scroll"),t===(i=s.offsetWidth)&&(i=n[0].clientWidth),n.remove(),a=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),a=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:a,offset:!n&&!a?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(a){if(!a||!a.of)return p.apply(this,arguments);a=e.extend({},a);var u,h,f,m,v,b,g=e(a.of),_=e.position.getWithinInfo(a.within),y=e.position.getScrollInfo(_),$=(a.collision||"flip").split(" "),w={};return b=n(g),g[0].preventDefault&&(a.at="left top"),h=b.width,f=b.height,m=b.offset,v=e.extend({},m),e.each(["my","at"],(function(){var e,t,i=(a[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),w[this]=[e?e[0]:0,t?t[0]:0],a[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]})),1===$.length&&($[1]=$[0]),"right"===a.at[0]?v.left+=h:"center"===a.at[0]&&(v.left+=h/2),"bottom"===a.at[1]?v.top+=f:"center"===a.at[1]&&(v.top+=f/2),u=t(w.at,h,f),v.left+=u[0],v.top+=u[1],this.each((function(){var n,r,l=e(this),d=l.outerWidth(),c=l.outerHeight(),p=i(this,"marginLeft"),b=i(this,"marginTop"),k=d+p+i(this,"marginRight")+y.width,C=c+b+i(this,"marginBottom")+y.height,x=e.extend({},v),j=t(w.my,l.outerWidth(),l.outerHeight());"right"===a.my[0]?x.left-=d:"center"===a.my[0]&&(x.left-=d/2),"bottom"===a.my[1]?x.top-=c:"center"===a.my[1]&&(x.top-=c/2),x.left+=j[0],x.top+=j[1],n={marginLeft:p,marginTop:b},e.each(["left","top"],(function(t,i){e.ui.position[$[t]]&&e.ui.position[$[t]][i](x,{targetWidth:h,targetHeight:f,elemWidth:d,elemHeight:c,collisionPosition:n,collisionWidth:k,collisionHeight:C,offset:[u[0]+j[0],u[1]+j[1]],my:a.my,at:a.at,within:_,elem:l})})),a.using&&(r=function(e){var t=m.left-x.left,i=t+h-d,n=m.top-x.top,r=n+f-c,u={target:{element:g,left:m.left,top:m.top,width:h,height:f},element:{element:l,left:x.left,top:x.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>r?"top":n>0?"bottom":"middle"};d>h&&h>o(t+i)&&(u.horizontal="center"),c>f&&f>o(n+r)&&(u.vertical="middle"),u.important=s(o(t),o(i))>s(o(n),o(r))?"horizontal":"vertical",a.using.call(this,e,u)}),l.offset(e.extend(x,{using:r}))}))},e.ui.position={fit:{left:function(e,t){var i,n=t.within,a=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,r=e.left-t.collisionPosition.marginLeft,l=a-r,d=r+t.collisionWidth-o-a;t.collisionWidth>o?l>0&&0>=d?(i=e.left+l+t.collisionWidth-o-a,e.left+=l-i):e.left=d>0&&0>=l?a:l>d?a+o-t.collisionWidth:a:l>0?e.left+=l:d>0?e.left-=d:e.left=s(e.left-r,e.left)},top:function(e,t){var i,n=t.within,a=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,r=e.top-t.collisionPosition.marginTop,l=a-r,d=r+t.collisionHeight-o-a;t.collisionHeight>o?l>0&&0>=d?(i=e.top+l+t.collisionHeight-o-a,e.top+=l-i):e.top=d>0&&0>=l?a:l>d?a+o-t.collisionHeight:a:l>0?e.top+=l:d>0?e.top-=d:e.top=s(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,a=t.within,s=a.offset.left+a.scrollLeft,r=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-r-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>c?(0>(i=e.left+p+h+f+t.collisionWidth-r-s)||o(c)>i)&&(e.left+=p+h+f):u>0&&(((n=e.left-t.collisionPosition.marginLeft+p+h+f-l)>0||u>o(n))&&(e.left+=p+h+f))},top:function(e,t){var i,n,a=t.within,s=a.offset.top+a.scrollTop,r=a.height,l=a.isWindow?a.scrollTop:a.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-r-l,p="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>c?(0>(n=e.top+p+h+f+t.collisionHeight-r-s)||o(c)>n)&&(e.top+=p+h+f):u>0&&(((i=e.top-t.collisionPosition.marginTop+p+h+f-l)>0||u>o(i))&&(e.top+=p+h+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])}}),e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",(function(e){e.preventDefault()}))}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var l="ui-effects-",d="ui-effects-style",c="ui-effects-animated",u=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var n=c[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function n(i){var n=l(),a=n._rgba=[];return i=i.toLowerCase(),h(r,(function(e,s){var o,r=s.re.exec(i),l=r&&s.parse(r),c=s.space||"rgba";return l?(o=n[c](l),n[d[c].cache]=o[d[c].cache],a=n._rgba=o._rgba,!1):t})),a.length?("0,0,0,0"===a.join()&&e.extend(a,s.transparent),n):s[i]}function a(e,t,i){return 1>6*(i=(i+1)%1)?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var s,o=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,a){return new e.Color.fn.parse(t,i,n,a)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=l.support={},p=e("<p>")[0],h=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=p.style.backgroundColor.indexOf("rgba")>-1,h(d,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),l.fn=e.extend(l.prototype,{parse:function(a,o,r,c){if(a===t)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(o),o=t);var u=this,p=e.type(a),f=this._rgba=[];return o!==t&&(a=[a,o,r,c],p="array"),"string"===p?this.parse(n(a)||s._default):"array"===p?(h(d.rgba.props,(function(e,t){f[t.idx]=i(a[t.idx],t)})),this):"object"===p?(h(d,a instanceof l?function(e,t){a[t.cache]&&(u[t.cache]=a[t.cache].slice())}:function(t,n){var s=n.cache;h(n.props,(function(e,t){if(!u[s]&&n.to){if("alpha"===e||null==a[e])return;u[s]=n.to(u._rgba)}u[s][t.idx]=i(a[e],t,!0)})),u[s]&&0>e.inArray(null,u[s].slice(0,3))&&(u[s][3]=1,n.from&&(u._rgba=n.from(u[s])))}),this):t},is:function(e){var i=l(e),n=!0,a=this;return h(d,(function(e,s){var o,r=i[s.cache];return r&&(o=a[s.cache]||s.to&&s.to(a._rgba)||[],h(s.props,(function(e,i){return null!=r[i.idx]?n=r[i.idx]===o[i.idx]:t}))),n})),n},_space:function(){var e=[],t=this;return h(d,(function(i,n){t[n.cache]&&e.push(i)})),e.pop()},transition:function(e,t){var n=l(e),a=n._space(),s=d[a],o=0===this.alpha()?l("transparent"):this,r=o[s.cache]||s.to(o._rgba),u=r.slice();return n=n[s.cache],h(s.props,(function(e,a){var s=a.idx,o=r[s],l=n[s],d=c[a.type]||{};null!==l&&(null===o?u[s]=l:(d.mod&&(l-o>d.mod/2?o+=d.mod:o-l>d.mod/2&&(o-=d.mod)),u[s]=i((l-o)*t+o,a)))})),this[a](u)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),a=l(t)._rgba;return l(e.map(i,(function(e,t){return(1-n)*a[t]+n*e})))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e}));return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,a=e[1]/255,s=e[2]/255,o=e[3],r=Math.max(n,a,s),l=Math.min(n,a,s),d=r-l,c=r+l,u=.5*c;return t=l===r?0:n===r?60*(a-s)/d+360:a===r?60*(s-n)/d+120:60*(n-a)/d+240,i=0===d?0:.5>=u?d/c:d/(2-c),[Math.round(t)%360,i,u,null==o?1:o]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],o=.5>=n?n*(1+i):n+i-n*i,r=2*n-o;return[Math.round(255*a(r,o,t+1/3)),Math.round(255*a(r,o,t)),Math.round(255*a(r,o,t-1/3)),s]},h(d,(function(n,a){var s=a.props,r=a.cache,d=a.to,c=a.from;l.fn[n]=function(n){if(d&&!this[r]&&(this[r]=d(this._rgba)),n===t)return this[r].slice();var a,o=e.type(n),u="array"===o||"object"===o?n:arguments,p=this[r].slice();return h(s,(function(e,t){var n=u["object"===o?e:t.idx];null==n&&(n=p[t.idx]),p[t.idx]=i(n,t)})),c?((a=l(c(p)))[r]=p,a):l(p)},h(s,(function(t,i){l.fn[t]||(l.fn[t]=function(a){var s,r=e.type(a),l="alpha"===t?this._hsla?"hsla":"rgba":n,d=this[l](),c=d[i.idx];return"undefined"===r?c:("function"===r&&(a=a.call(this,c),r=e.type(a)),null==a&&i.empty?this:("string"===r&&((s=o.exec(a))&&(a=c+parseFloat(s[2])*("+"===s[1]?1:-1))),d[i.idx]=a,this[l](d)))})}))})),l.hook=function(t){var i=t.split(" ");h(i,(function(t,i){e.cssHooks[i]={set:function(t,a){var s,o,r="";if("transparent"!==a&&("string"!==e.type(a)||(s=n(a)))){if(a=l(s||a),!u.rgba&&1!==a._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}a=a.blend(r&&"transparent"!==r?r:"_default")}a=a.toRgbaString()}try{t.style[i]=a}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}))},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e})),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(u),function(){function t(t){var i,n,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(a&&a.length&&a[0]&&a[a[0]])for(n=a.length;n--;)"string"==typeof a[i=a[n]]&&(s[e.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(s[i]=a[i]);return s}function i(t,i){var n,s,o={};for(n in i)s=i[n],t[n]!==s&&(a[n]||(e.fx.step[n]||!isNaN(parseFloat(s)))&&(o[n]=s));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(u.style(e.elem,i,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(a,s,o,r){var l=e.speed(s,o,r);return this.queue((function(){var s,o=e(this),r=o.attr("class")||"",d=l.children?o.find("*").addBack():o;d=d.map((function(){return{el:e(this),start:t(this)}})),(s=function(){e.each(n,(function(e,t){a[t]&&o[t+"Class"](a[t])}))})(),d=d.map((function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this})),o.attr("class",r),d=d.map((function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()})),e.when.apply(e,d.get()).done((function(){s(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(o[0])}))}))},e.fn.extend({addClass:function(t){return function(i,n,a,s){return n?e.effects.animateClass.call(this,{add:i},n,a,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,a,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,a,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,a,s,o){return"boolean"==typeof n||void 0===n?a?e.effects.animateClass.call(this,n?{add:i}:{remove:i},a,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,a,s)}}(e.fn.toggleClass),switchClass:function(t,i,n,a,s){return e.effects.animateClass.call(this,{add:i,remove:t},n,a,s)}})}(),function(){function t(t,i,n,a){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(a=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=n,n=i,i={}),e.isFunction(n)&&(a=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=a||i.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}function n(e,t){var i=t.outerWidth(),n=t.outerHeight(),a=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,n,0];return{top:parseFloat(a[1])||0,right:"auto"===a[2]?i:parseFloat(a[2]),bottom:"auto"===a[3]?n:parseFloat(a[3]),left:parseFloat(a[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=function(t){return function(i){return!!e(i).data(c)||t(i)}}(e.expr.filters.animated)),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var i=0,n=t.length;n>i;i++)null!==t[i]&&e.data(l+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i,n=0,a=t.length;a>n;n++)null!==t[n]&&(i=e.data(l+t[n]),e.css(t[n],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(e){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).trigger("focus"),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,i,n){return n||(n=i,i="effect"),e.effects.effect[t]=n,e.effects.effect[t].mode=i,n},scaledDimensions:function(e,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(t||100)/100:1,a="vertical"!==i?(t||100)/100:1;return{height:e.height()*a,width:e.width()*n,outerHeight:e.outerHeight()*a,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();t>1&&n.splice.apply(n,[1,0].concat(n.splice(t,i))),e.dequeue()},saveStyle:function(e){e.data(d,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(d)||"",e.removeData(d)},mode:function(e,t){var i=e.is(":hidden");return"toggle"===t&&(t=i?"show":"hide"),(i?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(t){var i,n=t.css("position"),a=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(l+"placeholder",i)),t.css({position:n,left:a.left,top:a.top}),i},removePlaceholder:function(e){var t=l+"placeholder",i=e.data(t);i&&(i.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,i,n,a){return a=a||{},e.each(i,(function(e,i){var s=t.cssUnit(i);s[0]>0&&(a[i]=s[0]*n+s[1])})),a}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(l)&&l.call(o[0]),e.isFunction(t)&&t()}var o=e(this);n.mode=u.shift(),!1===e.uiBackCompat||s?"none"===n.mode?(o[d](),i()):a.call(o[0],n,(function(){o.removeData(c),e.effects.cleanUp(o),"hide"===n.mode&&o.hide(),i()})):(o.is(":hidden")?"hide"===d:"show"===d)?(o[d](),i()):a.call(o[0],n,i)}var n=t.apply(this,arguments),a=e.effects.effect[n.effect],s=a.mode,o=n.queue,r=o||"fx",l=n.complete,d=n.mode,u=[],p=function(t){var i=e(this),n=e.effects.mode(i,d)||s;i.data(c,!0),u.push(n),s&&("show"===n||n===s&&"hide"===n)&&i.show(),s&&"none"===n||e.effects.saveStyle(i),e.isFunction(t)&&t()};return e.fx.off||!a?d?this[d](n.duration,l):this.each((function(){l&&l.call(this)})):!1===o?this.each(p).each(i):this.queue(r,p).queue(r,i)},show:function(e){return function(n){if(i(n))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="show",this.effect.call(this,a)}}(e.fn.show),hide:function(e){return function(n){if(i(n))return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="hide",this.effect.call(this,a)}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n)return e.apply(this,arguments);var a=t.apply(this,arguments);return a.mode="toggle",this.effect.call(this,a)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])})),n},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):n(this.css("clip"),this)},transfer:function(t,i){var n=e(this),a=e(t.to),s="fixed"===a.css("position"),o=e("body"),r=s?o.scrollTop():0,l=s?o.scrollLeft():0,d=a.offset(),c={top:d.top-r,left:d.left-l,height:a.innerHeight(),width:a.innerWidth()},u=n.offset(),p=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:u.top-r,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(c,t.duration,t.easing,(function(){p.remove(),e.isFunction(i)&&i()}))}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=n(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}}))}();e.effects;e.effects.define("blind","hide",(function(t,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},a=e(this),s=t.direction||"up",o=a.cssClip(),r={clip:e.extend({},o)},l=e.effects.createPlaceholder(a);r.clip[n[s][0]]=r.clip[n[s][1]],"show"===t.mode&&(a.cssClip(r.clip),l&&l.css(e.effects.clipToBox(r)),r.clip=o),l&&l.animate(e.effects.clipToBox(r),t.duration,t.easing),a.animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:i})})),e.effects.define("bounce",(function(t,i){var n,a,s,o=e(this),r=t.mode,l="hide"===r,d="show"===r,c=t.direction||"up",u=t.distance,p=t.times||5,h=2*p+(d||l?1:0),f=t.duration/h,m=t.easing,v="up"===c||"down"===c?"top":"left",b="up"===c||"left"===c,g=0,_=o.queue().length;for(e.effects.createPlaceholder(o),s=o.css(v),u||(u=o["top"===v?"outerHeight":"outerWidth"]()/3),d&&((a={opacity:1})[v]=s,o.css("opacity",0).css(v,b?2*-u:2*u).animate(a,f,m)),l&&(u/=Math.pow(2,p-1)),(a={})[v]=s;p>g;g++)(n={})[v]=(b?"-=":"+=")+u,o.animate(n,f,m).animate(a,f,m),u=l?2*u:u/2;l&&((n={opacity:0})[v]=(b?"-=":"+=")+u,o.animate(n,f,m)),o.queue(i),e.effects.unshift(o,_,h+1)})),e.effects.define("clip","hide",(function(t,i){var n,a={},s=e(this),o=t.direction||"vertical",r="both"===o,l=r||"horizontal"===o,d=r||"vertical"===o;n=s.cssClip(),a.clip={top:d?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:d?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left},e.effects.createPlaceholder(s),"show"===t.mode&&(s.cssClip(a.clip),a.clip=n),s.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:i})})),e.effects.define("drop","hide",(function(t,i){var n,a=e(this),s="show"===t.mode,o=t.direction||"left",r="up"===o||"down"===o?"top":"left",l="up"===o||"left"===o?"-=":"+=",d="+="===l?"-=":"+=",c={opacity:0};e.effects.createPlaceholder(a),n=t.distance||a["top"===r?"outerHeight":"outerWidth"](!0)/2,c[r]=l+n,s&&(a.css(c),c[r]=d+n,c.opacity=1),a.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:i})})),e.effects.define("explode","hide",(function(t,i){function n(){b.push(this),b.length===c*u&&(p.css({visibility:"visible"}),e(b).remove(),i())}var a,s,o,r,l,d,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=c,p=e(this),h="show"===t.mode,f=p.show().css("visibility","hidden").offset(),m=Math.ceil(p.outerWidth()/u),v=Math.ceil(p.outerHeight()/c),b=[];for(a=0;c>a;a++)for(r=f.top+a*v,d=a-(c-1)/2,s=0;u>s;s++)o=f.left+s*m,l=s-(u-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*m,top:-a*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:v,left:o+(h?l*m:0),top:r+(h?d*v:0),opacity:h?0:1}).animate({left:o+(h?0:l*m),top:r+(h?0:d*v),opacity:h?1:0},t.duration||500,t.easing,n)})),e.effects.define("fade","toggle",(function(t,i){var n="show"===t.mode;e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:i})})),e.effects.define("fold","hide",(function(t,i){var n=e(this),a=t.mode,s="show"===a,o="hide"===a,r=t.size||15,l=/([0-9]+)%/.exec(r),d=!!t.horizFirst?["right","bottom"]:["bottom","right"],c=t.duration/2,u=e.effects.createPlaceholder(n),p=n.cssClip(),h={clip:e.extend({},p)},f={clip:e.extend({},p)},m=[p[d[0]],p[d[1]]],v=n.queue().length;l&&(r=parseInt(l[1],10)/100*m[o?0:1]),h.clip[d[0]]=r,f.clip[d[0]]=r,f.clip[d[1]]=0,s&&(n.cssClip(f.clip),u&&u.css(e.effects.clipToBox(f)),f.clip=p),n.queue((function(i){u&&u.animate(e.effects.clipToBox(h),c,t.easing).animate(e.effects.clipToBox(f),c,t.easing),i()})).animate(h,c,t.easing).animate(f,c,t.easing).queue(i),e.effects.unshift(n,v,4)})),e.effects.define("highlight","show",(function(t,i){var n=e(this),a={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(a.opacity=0),e.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:i})})),e.effects.define("size",(function(t,i){var n,a,s,o=e(this),r=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=t.mode,u="effect"!==c,p=t.scale||"both",h=t.origin||["middle","center"],f=o.css("position"),m=o.position(),v=e.effects.scaledDimensions(o),b=t.from||v,g=t.to||e.effects.scaledDimensions(o,0);e.effects.createPlaceholder(o),"show"===c&&(s=b,b=g,g=s),a={from:{y:b.height/v.height,x:b.width/v.width},to:{y:g.height/v.height,x:g.width/v.width}},("box"===p||"both"===p)&&(a.from.y!==a.to.y&&(b=e.effects.setTransition(o,l,a.from.y,b),g=e.effects.setTransition(o,l,a.to.y,g)),a.from.x!==a.to.x&&(b=e.effects.setTransition(o,d,a.from.x,b),g=e.effects.setTransition(o,d,a.to.x,g))),("content"===p||"both"===p)&&a.from.y!==a.to.y&&(b=e.effects.setTransition(o,r,a.from.y,b),g=e.effects.setTransition(o,r,a.to.y,g)),h&&(n=e.effects.getBaseline(h,v),b.top=(v.outerHeight-b.outerHeight)*n.y+m.top,b.left=(v.outerWidth-b.outerWidth)*n.x+m.left,g.top=(v.outerHeight-g.outerHeight)*n.y+m.top,g.left=(v.outerWidth-g.outerWidth)*n.x+m.left),o.css(b),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(r),d=d.concat(["marginLeft","marginRight"]),o.find("*[width]").each((function(){var i=e(this),n=e.effects.scaledDimensions(i),s={height:n.height*a.from.y,width:n.width*a.from.x,outerHeight:n.outerHeight*a.from.y,outerWidth:n.outerWidth*a.from.x},o={height:n.height*a.to.y,width:n.width*a.to.x,outerHeight:n.height*a.to.y,outerWidth:n.width*a.to.x};a.from.y!==a.to.y&&(s=e.effects.setTransition(i,l,a.from.y,s),o=e.effects.setTransition(i,l,a.to.y,o)),a.from.x!==a.to.x&&(s=e.effects.setTransition(i,d,a.from.x,s),o=e.effects.setTransition(i,d,a.to.x,o)),u&&e.effects.saveStyle(i),i.css(s),i.animate(o,t.duration,t.easing,(function(){u&&e.effects.restoreStyle(i)}))}))),o.animate(g,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=o.offset();0===g.opacity&&o.css("opacity",b.opacity),u||(o.css("position","static"===f?"relative":f).offset(t),e.effects.saveStyle(o)),i()}})})),e.effects.define("scale",(function(t,i){var n=e(this),a=t.mode,s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==a?0:100),o=e.extend(!0,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,s,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(o.from.opacity=1,o.to.opacity=0),e.effects.effect.size.call(this,o,i)})),e.effects.define("puff","hide",(function(t,i){var n=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,i)})),e.effects.define("pulsate","show",(function(t,i){var n=e(this),a=t.mode,s="show"===a,o=s||"hide"===a,r=2*(t.times||5)+(o?1:0),l=t.duration/r,d=0,c=1,u=n.queue().length;for((s||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1);r>c;c++)n.animate({opacity:d},l,t.easing),d=1-d;n.animate({opacity:d},l,t.easing),n.queue(i),e.effects.unshift(n,u,r+1)})),e.effects.define("shake",(function(t,i){var n=1,a=e(this),s=t.direction||"left",o=t.distance||20,r=t.times||3,l=2*r+1,d=Math.round(t.duration/l),c="up"===s||"down"===s?"top":"left",u="up"===s||"left"===s,p={},h={},f={},m=a.queue().length;for(e.effects.createPlaceholder(a),p[c]=(u?"-=":"+=")+o,h[c]=(u?"+=":"-=")+2*o,f[c]=(u?"-=":"+=")+2*o,a.animate(p,d,t.easing);r>n;n++)a.animate(h,d,t.easing).animate(f,d,t.easing);a.animate(h,d,t.easing).animate(p,d/2,t.easing).queue(i),e.effects.unshift(a,m,l+1)})),e.effects.define("slide","show",(function(t,i){var n,a,s=e(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=t.mode,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u=t.distance||s["top"===d?"outerHeight":"outerWidth"](!0),p={};e.effects.createPlaceholder(s),n=s.cssClip(),a=s.position()[d],p[d]=(c?-1:1)*u+a,p.clip=s.cssClip(),p.clip[o[l][1]]=p.clip[o[l][0]],"show"===r&&(s.cssClip(p.clip),s.css(d,p[d]),p.clip=n,p[d]=a),s.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:i})})),!1!==e.uiBackCompat&&e.effects.define("transfer",(function(t,i){e(this).transfer(t,i)})),e.ui.focusable=function(t,i){var n,a,s,o,r,l=t.nodeName.toLowerCase();return"area"===l?(a=(n=t.parentNode).name,!(!t.href||!a||"map"!==n.nodeName.toLowerCase())&&((s=e("img[usemap='#"+a+"']")).length>0&&s.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(o=!t.disabled)&&((r=e(t).closest("fieldset")[0])&&(o=!r.disabled)):o="a"===l&&t.href||i,o&&e(t).is(":visible")&&function(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}(e(t)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable,e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var i=t.data("ui-form-reset-instances");e.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===e.fn.jquery.substring(0,3)&&(e.each(["Width","Height"],(function(t,i){function n(t,i,n,s){return e.each(a,(function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)})),i}var a="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each((function(){e(this).css(s,n(this,t)+"px")}))},e.fn["outer"+i]=function(t,a){return"number"!=typeof t?o["outer"+i].call(this,t):this.each((function(){e(this).css(s,n(this,t,!0,a)+"px")}))}})),e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}(),e.fn.labels=function(){var t,i,n,a,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(a=this.eq(0).parents("label"),(n=this.attr("id"))&&(s=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),i="label[for='"+e.ui.escapeSelector(n)+"']",a=a.add(s.find(i).addBack(i))),this.pushStack(a))},e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter((function(){var t=e(this);return(!n||"static"!==t.css("position"))&&a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)},e.extend(e.expr[":"],{tabbable:function(t){var i=e.attr(t,"tabindex"),n=null!=i;return(!n||i>=0)&&e.ui.focusable(t,n)}}),e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}}(),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}}),e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,i,n=this.options.icons;n&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header),t.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),void("icons"===e&&(this._destroyIcons(),t&&this._createIcons())))},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,a=this.headers.index(t.target),s=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(a+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(a-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),e(s).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,n=i.heightStyle,a=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var t=e(this),i=t.uniqueId().attr("id"),n=t.next(),a=n.uniqueId().attr("id");t.attr("aria-controls",a),n.attr("aria-labelledby",i)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(t=a.height(),this.element.siblings(":visible").each((function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))})),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each((function(){var i=e(this).is(":visible");i||e(this).show(),t=Math.max(t,e(this).css("height","").height()),i||e(this).hide()})).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i,n,a=this.options,s=this.active,o=e(t.currentTarget),r=o[0]===s[0],l=r&&a.collapsible,d=l?e():o.next(),c=s.next(),u={oldHeader:s,oldPanel:c,newHeader:l?e():o,newPanel:d};t.preventDefault(),r&&!a.collapsible||!1===this._trigger("beforeActivate",t,u)||(a.active=!l&&this.headers.index(o),this.active=r?e():o,this._toggle(u),this._removeClass(s,"ui-accordion-header-active","ui-state-active"),a.icons&&(i=s.children(".ui-accordion-header-icon"),this._removeClass(i,null,a.icons.activeHeader)._addClass(i,null,a.icons.header)),r||(this._removeClass(o,"ui-accordion-header-collapsed")._addClass(o,"ui-accordion-header-active","ui-state-active"),a.icons&&(n=o.children(".ui-accordion-header-icon"),this._removeClass(n,null,a.icons.header)._addClass(n,null,a.icons.activeHeader)),this._addClass(o.next(),"ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter((function(){return 0===parseInt(e(this).attr("tabIndex"),10)})).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var n,a,s,o=this,r=0,l=e.css("box-sizing"),d=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},u=d&&c.down||c,p=function(){o._toggleComplete(i)};return"number"==typeof u&&(s=u),"string"==typeof u&&(a=u),a=a||u.easing||c.easing,s=s||u.duration||c.duration,t.length?e.length?(n=e.show().outerHeight(),t.animate(this.hideProps,{duration:s,easing:a,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:s,easing:a,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===l&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(n-t.outerHeight()-r),r=0)}})):t.animate(this.hideProps,s,a,p):e.animate(this.showProps,s,a,p)},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target),n=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var i,n,a,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,n=this.previousFilter||"",s=!1,a=t.keyCode>=96&&105>=t.keyCode?""+(t.keyCode-96):String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),a===n?s=!0:a=n+a,i=this._filterMenuItems(a),(i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(a=String.fromCharCode(t.keyCode),i=this._filterMenuItems(a)),i.length?(this.focus(t,i),this.previousFilter=a,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,n,a,s=this,o=this.options.icons.submenu,r=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=r.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",!0);s._addClass(n,"ui-menu-icon","ui-icon "+o),i.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(t=r.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);s._isDivider(t)&&s._addClass(t,"ui-menu-divider","ui-widget-content")})),a=(n=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(a,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e+""),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,a;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),a=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(a,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,a,s,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>a?this.activeMenu.scrollTop(s+a):a+r>o&&this.activeMenu.scrollTop(s+a-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(t){var i,n,a;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return 0>(i=e(this)).offset().top-n-a})),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,a;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n+a>0})),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return n.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))}))}}),e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,a=this.element[0].nodeName.toLowerCase(),s="textarea"===a,o="input"===a;this.isMultiLine=s||!o&&this._isContentEditable(this.element),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(a.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",a);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case s.UP:t=!0,this._keyEvent("previous",a);break;case s.DOWN:t=!0,this._keyEvent("next",a);break;case s.ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case s.TAB:this.menu.active&&this.menu.select(a);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:this._move("previousPage",n);break;case a.PAGE_DOWN:this._move("nextPage",n);break;case a.UP:this._keyEvent("previous",n);break;case a.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")}))},menufocus:function(t,i){var n,a;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}))):(a=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:a})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(a.value),void((n=i.item.attr("aria-label")||a.value)&&e.trim(n).length&&(this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(t,i){var n=i.item.data("ui-autocomplete-item"),a=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=a,this._delay((function(){this.previous=a,this.selectedItem=n}))),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!n)&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,(function(e,i){n._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var p,h=/ui-corner-([a-z]){2,6}/g;e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,(function(n,a){var s,o={};return a?"controlgroupLabel"===n?((s=t.element.find(a)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(s.get()))):void(e.fn[n]&&(o=t["_"+n+"Options"]?t["_"+n+"Options"]("middle"):{classes:{}},t.element.find(a).each((function(){var a=e(this),s=a[n]("instance"),r=e.widget.extend({},o);if("button"!==n||!a.parent(".ui-spinner").length){s||(s=a[n]()[n]("instance")),s&&(r.classes=t._resolveClassesValues(r.classes,s)),a[n](r);var l=a[n]("widget");e.data(l[0],"ui-controlgroup-data",s||a[n]("instance")),i.push(l[0])}})))):void 0})),this.childWidgets=e(e.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var i=e(this).data("ui-controlgroup-data");i&&i[t]&&i[t]()}))},_updateCornerClass:function(e,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,i){var n={};return e.each(t,(function(a){var s=i.options.classes[a]||"";s=e.trim(s.replace(h,"")),n[a]=(s+" "+t[a]).replace(/\s+/g," ")})),n},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,n){var a=t[n]().data("ui-controlgroup-data");if(a&&i["_"+a.widgetName+"Options"]){var s=i["_"+a.widgetName+"Options"](1===t.length?"only":n);s.classes=i._resolveClassesValues(s.classes,a),a.element[a.widgetName](s)}else i._updateCornerClass(t[n](),n)})),this._callChildMethod("refresh"))}}),e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,n=this,a=this._super()||{};return this._readType(),i=this.element.labels(),this.label=e(i[i.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){n.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML})),this.originalLabel&&(a.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(a.disabled=t),a},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,i="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(i):e(i).filter((function(){return 0===e(this).form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){return"label"!==e||t?(this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()):void 0},_updateIcon:function(t){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio,e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var n="iconPosition"!==t,a=n?this.options.iconPosition:i,s="top"===a||"bottom"===a;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(a),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(a))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,i=void 0===e.icon?this.options.icon:e.icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.12.1"}}),e.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return a(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,a,s;a="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(s=this._newInst(e(t),a)).settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,s):a&&this._inlineDatepicker(t,s)},_newInst:function(t,n){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,a,s,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),("focus"===(n=this._get(i,"showOn"))||"both"===n)&&t.on("focus",this._showDatepicker),("button"===n||"both"===n)&&(a=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:a,title:a}):a)),t[r?"before":"after"](i.trigger),i.trigger.on("click",(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,a,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,n=0,a=0;e.length>a;a++)e[a].length>i&&(i=e[a].length,n=a);return n},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,s,o){var r,l,d,c,u,p=this._dialogInst;return p||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",p)),a(p.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,d=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",p),this},_destroyDatepicker:function(t){var i,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(a.append.remove(),a.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty(),p===a&&(p=null))},_enableDatepicker:function(t){var i,n,a=e(t),s=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,s.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&((n=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var i,n,a=e(t),s=e.data(t,"datepicker");a.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,s.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&((n=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var s,o,r,l,d=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):d?"all"===i?e.extend({},d.settings):this._get(d,i):null:(s=i||{},"string"==typeof i&&((s={})[i]=n),void(d&&(this._curInst===d&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(d,"min"),l=this._getMinMaxDate(d,"max"),a(d.settings,s),null!==r&&void 0!==s.dateFormat&&void 0===s.minDate&&(d.settings.minDate=this._formatDate(d,r)),null!==l&&void 0!==s.dateFormat&&void 0===s.maxDate&&(d.settings.maxDate=this._formatDate(d,l)),"disabled"in s&&(s.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),d),this._autoSize(d),this._setDate(d,o),this._updateAlternate(d),this._updateDatepicker(d))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,a,s=e.datepicker._getInst(t.target),o=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return(a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv))[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,a[0]),(i=e.datepicker._get(s,"onSelect"))?(n=e.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,a=e.datepicker._getInst(t.target);return e.datepicker._get(a,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){var i,n,s,o,r,l,d;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(s=(n=e.datepicker._get(i,"beforeShow"))?n.apply(t,[t,i]):{})&&(a(i.settings,s),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each((function(){return!(o|="fixed"===e(this).css("position"))})),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),d=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),d):i.dpDiv[l||"show"](l?d:null),e.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),e.datepicker._curInst=i)))},_updateDatepicker:function(t){this.maxRows=4,p=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,a=this._getNumberOfMonths(t),s=a[1],o=t.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&n.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(i=t.yearshtml,setTimeout((function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null}),0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var a=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),d=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?a-o:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>l&&l>a?Math.abs(i.left+a-l):0),i.top-=Math.min(i.top,i.top+s>d&&d>s?Math.abs(s+r):0),i},_findPos:function(t){for(var i,n=this._getInst(t),a=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,n,a,s,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),n=this._get(o,"duration"),a=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),n,a):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,a),i||a(),this._datepickerShowing=!1,(s=this._get(o,"onClose"))&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var a=e(t),s=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(t){var i,n=e(t),a=this._getInst(n[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var a=e(t),s=this._getInst(a[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(a)},_selectDay:function(t,i,n,a){var s,o=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((s=this._getInst(o[0])).selectedDay=s.currentDay=e("a",a).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,a=e(t),s=this._getInst(a[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),(n=this._get(s,"onSelect"))?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,n,a,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),a=this.formatDate(i,n,this._getFormatConfig(t)),e(s).val(a))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?""+i:i+""))return null;var a,s,o,r,l=0,d=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,b=-1,g=-1,_=!1,y=function(e){var i=t.length>a+1&&t.charAt(a+1)===e;return i&&a++,i},$=function(e){var t=y(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a=RegExp("^\\d{"+("y"===e?n:1)+","+n+"}"),s=i.substring(l).match(a);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},w=function(t,n,a){var s=-1,o=e.map(y(t)?a:n,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(o,(function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(s=t[0],l+=n.length,!1):void 0})),-1!==s)return s+1;throw"Unknown name at position "+l},k=function(){if(i.charAt(l)!==t.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;t.length>a;a++)if(_)"'"!==t.charAt(a)||y("'")?k():_=!1;else switch(t.charAt(a)){case"d":b=$("d");break;case"D":w("D",u,p);break;case"o":g=$("o");break;case"m":v=$("m");break;case"M":v=w("M",h,f);break;case"y":m=$("y");break;case"@":m=(r=new Date($("@"))).getFullYear(),v=r.getMonth()+1,b=r.getDate();break;case"!":m=(r=new Date(($("!")-this._ticksTo1970)/1e4)).getFullYear(),v=r.getMonth()+1,b=r.getDate();break;case"'":y("'")?k():_=!0;break;default:k()}if(i.length>l&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=m?0:-100)),g>-1)for(v=1,b=g;!((s=this._getDaysInMonth(m,v-1))>=b);)v++,b-=s;if((r=this._daylightSavingAdjust(new Date(m,v-1,b))).getFullYear()!==m||r.getMonth()+1!==v||r.getDate()!==b)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},d=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",p=!1;if(t)for(n=0;e.length>n;n++)if(p)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):p=!1;else switch(e.charAt(n)){case"d":u+=d("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),a,s);break;case"o":u+=d("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=d("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),o,r);break;case"y":u+=l("y")?t.getFullYear():(10>t.getFullYear()%100?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":p=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,a=function(i){var n=e.length>t+1&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;e.length>t;t++)if(n)"'"!==e.charAt(t)||a("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),s=a,o=this._getFormatConfig(e);try{s=this.parseDate(i,n,o)||a}catch(e){n=t?"":n}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=n?s.getDate():0,e.currentMonth=n?s.getMonth():0,e.currentYear=n?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var a=null==i||""===i?n:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),s=n.getMonth(),o=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(a,s));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(a,s))}l=r.exec(i)}return new Date(a,s,o)}(i):"number"==typeof i?isNaN(i)?n:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return(a=a&&"Invalid Date"==""+a?n:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,a=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var t,i,n,a,s,o,r,l,d,c,u,p,h,f,m,v,b,g,_,y,$,w,k,C,x,j,T,E,S,D,O,P,A,N,M,I,L,F,B,R=new Date,H=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),q=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),J=1!==K[0]||1!==K[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),Q=e.drawMonth-V,ee=e.drawYear;if(0>Q&&(Q+=12,ee--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-K[0]*K[1]+1,Z.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(ee,Q,1))>t;)0>--Q&&(Q=11,ee--);for(e.drawMonth=Q,e.drawYear=ee,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Q-Y,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>",a=this._get(e,"nextText"),a=W?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Q+Y,1)),this._getFormatConfig(e)):a,s=this._canAdjustMonth(e,1,ee,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+a+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+a+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:H,o=W?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",d=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(q?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(e,"showWeek"),p=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),v=this._get(e,"beforeShowDay"),b=this._get(e,"showOtherMonths"),g=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),y="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,C=0;K[1]>C;C++){if(x=this._daylightSavingAdjust(new Date(ee,Q,e.selectedDay)),j=" ui-corner-all",T="",J){if(T+="<div class='ui-datepicker-group",K[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",j=" ui-corner-"+(q?"right":"left");break;case K[1]-1:T+=" ui-datepicker-group-last",j=" ui-corner-"+(q?"left":"right");break;default:T+=" ui-datepicker-group-middle",j=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+j+"'>"+(/all|left/.test(j)&&0===w?q?s:n:"")+(/all|right/.test(j)&&0===w?q?n:s:"")+this._generateMonthYearHeader(e,Q,ee,G,Z,w>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",$=0;7>$;$++)E+="<th scope='col'"+(($+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[S=($+c)%7]+"'>"+h[S]+"</span></th>";for(T+=E+"</tr></thead><tbody>",D=this._getDaysInMonth(ee,Q),ee===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,D)),O=(this._getFirstDayOfMonth(ee,Q)-c+7)%7,P=Math.ceil((O+D)/7),A=J&&this.maxRows>P?this.maxRows:P,this.maxRows=A,N=this._daylightSavingAdjust(new Date(ee,Q,1-O)),M=0;A>M;M++){for(T+="<tr>",I=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",$=0;7>$;$++)L=v?v.apply(e.input?e.input[0]:null,[N]):[!0,""],B=(F=N.getMonth()!==Q)&&!g||!L[0]||G&&G>N||Z&&N>Z,I+="<td class='"+(($+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(N.getTime()===x.getTime()&&Q===e.selectedMonth&&e._keyEvent||_.getTime()===N.getTime()&&_.getTime()===x.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!b?"":" "+L[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(F&&!b||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(F&&!b?"&#xa0;":B?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===H.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=I+"</tr>"}++Q>11&&(Q=0,ee++),k+=T+="</tbody></table>"+(J?"</div>"+(K[0]>0&&C===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=k}return y+=d,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,i,n,a,s,o,r){var l,d,c,u,p,h,f,m,v=this._get(e,"changeMonth"),b=this._get(e,"changeYear"),g=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",y="";if(s||!v)y+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=n&&n.getFullYear()===i,d=a&&a.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=n.getMonth())&&(!d||a.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(g||(_+=y+(!s&&v&&b?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!b)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),p=(new Date).getFullYear(),f=(h=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t})(u[0]),m=Math.max(f,h(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),g&&(_+=(!s&&v&&b?"":"&#xa0;")+y),_+"</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),a=e.selectedMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,a))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,a,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return n&&a>n?n:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var a=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(0>t?t:a[0]*a[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,n,a=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!a||t.getTime()>=a.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new t,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1",e.datepicker,e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var f=!1;e(document).on("mouseup",(function(){f=!1})),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),f=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,f=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,i,n){var a,s=e.ui[t].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(e,t,i,n){var a,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;s.length>a;a++)e.options[s[a][0]]&&s[a][1].apply(e.element,i)}},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")},e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",t)&&i._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),a=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&a[0]===this.element[0]&&this._setPositionRelative(),a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options,s=this.document[0];return this.relativeContainer=null,a.containment?"window"===a.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),void((n=(i=e(a.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,a,s,o=this.options,r=this._isRootNode(this.scrollParent[0]),l=e.pageX,d=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(d=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(d=i[3]+this.offset.click.top)),o.grid&&(a=o.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,d=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-o.grid[1]:a+o.grid[1]:a,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(d=this.originalPageY)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var a=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each((function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,a))}))},stop:function(t,i,n){var a=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,(function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,a))}))},drag:function(t,i,n){e.each(n.sortables,(function(){var a=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(a=!0,e.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(a=!1),a}))),a?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",t),n.dropped=s.element,e.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var a=e("body"),s=n.options;a.css("cursor")&&(s._cursor=a.css("cursor")),a.css("cursor",s.cursor)},stop:function(t,i,n){var a=n.options;a._cursor&&e("body").css("cursor",a._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var a=e(i.helper),s=n.options;a.css("opacity")&&(s._opacity=a.css("opacity")),a.css("opacity",s.opacity)},stop:function(t,i,n){var a=n.options;a._opacity&&e(i.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var a=n.options,s=!1,o=n.scrollParentNotHidden[0],r=n.document[0];o!==r&&"HTML"!==o.tagName?(a.axis&&"x"===a.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<a.scrollSensitivity?o.scrollTop=s=o.scrollTop+a.scrollSpeed:t.pageY-n.overflowOffset.top<a.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<a.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+a.scrollSpeed:t.pageX-n.overflowOffset.left<a.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(t.pageY-e(r).scrollTop()<a.scrollSensitivity?s=e(r).scrollTop(e(r).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<a.scrollSensitivity&&(s=e(r).scrollTop(e(r).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(t.pageX-e(r).scrollLeft()<a.scrollSensitivity?s=e(r).scrollLeft(e(r).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<a.scrollSensitivity&&(s=e(r).scrollLeft(e(r).scrollLeft()+a.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var a=n.options;n.snapElements=[],e(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each((function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,i,n){var a,s,o,r,l,d,c,u,p,h,f=n.options,m=f.snapTolerance,v=i.offset.left,b=v+n.helperProportions.width,g=i.offset.top,_=g+n.helperProportions.height;for(p=n.snapElements.length-1;p>=0;p--)d=(l=n.snapElements[p].left-n.margins.left)+n.snapElements[p].width,u=(c=n.snapElements[p].top-n.margins.top)+n.snapElements[p].height,l-m>b||v>d+m||c-m>_||g>u+m||!e.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)?(n.snapElements[p].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(a=m>=Math.abs(c-_),s=m>=Math.abs(u-g),o=m>=Math.abs(l-b),r=m>=Math.abs(d-v),a&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left)),h=a||s||o||r,"outer"!==f.snapMode&&(a=m>=Math.abs(c-g),s=m>=Math.abs(u-_),o=m>=Math.abs(l-v),r=m>=Math.abs(d-b),a&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left)),!n.snapElements[p].snapping&&(a||s||o||r||h)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=a||s||o||r||h)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var a,s=n.options,o=e.makeArray(e(s.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}));o.length&&(a=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each((function(t){e(this).css("zIndex",a+t)})),this.css("zIndex",a+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var a=e(i.helper),s=n.options;a.css("zIndex")&&(s._zIndex=a.css("zIndex")),a.css("zIndex",s.zIndex)},stop:function(t,i,n){var a=n.options;a._zIndex&&e(i.helper).css("zIndex",a._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0||(t[n]=1,a=t[n]>0,t[n]=0,a)},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",(function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())})).on("mouseleave",(function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,a,s,o=this.options,r=this;if(this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;n.length>i;i++)a="ui-resizable-"+(t=e.trim(n[i])),s=e("<div>"),this._addClass(s,"ui-resizable-handle "+a),s.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var i,n,a,s;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(a,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){r.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=s&&s[1]?s[1]:"se")})),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,a=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(t){var i,n,a,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),s.containment&&(i+=e(s.containment).scrollLeft()||0,n+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,a=this.originalMousePosition,s=this.axis,o=t.pageX-a.left||0,r=t.pageY-a.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,a,s,o,r,l,d=this.options,c=this;return this._helper&&(a=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,s=n?0:c.sizeDiff.width,o={width:c.helper.width()-s,height:c.helper.height()-a},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,d.animate||this.element.css(e.extend(o,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!d.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,a,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,a=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),s.maxWidth>i&&(s.maxWidth=i),s.maxHeight>a&&(s.maxHeight=a)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),s&&d&&(e.left=r-t.minWidth),n&&d&&(e.left=r-t.maxWidth),o&&c&&(e.top=l-t.minHeight),a&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],a=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(a[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,a=i._proportionallyResizeElements,s=a.length&&/textarea/i.test(a[0].nodeName),o=s&&i._hasScroll(a[0],"left")?0:i.sizeDiff.height,r=s?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},d=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};a&&a.length&&e(a[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,a,s,o,r,l=e(this).resizable("instance"),d=l.options,c=l.element,u=d.containment,p=u instanceof e?u.get(0):/parent/.test(u)?c.parent().get(0):u;p&&(l.containerElement=e(p),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),i=[],e(["Top","Right","Left","Bottom"]).each((function(e,n){i[e]=l._num(t.css("padding"+n))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,a=l.containerSize.height,s=l.containerSize.width,o=l._hasScroll(p,"left")?p.scrollWidth:s,r=l._hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:o,height:r}))},resize:function(t){var i,n,a,s,o=e(this).resizable("instance"),r=o.options,l=o.containerOffset,d=o.position,c=o._aspectRatio||t.shiftKey,u={top:0,left:0},p=o.containerElement,h=!0;p[0]!==document&&/static/.test(p.css("position"))&&(u=l),d.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio,h=!1),o.position.left=r.helper?l.left:0),d.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio,h=!1),o.position.top=o._helper?l.top:0),a=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),a&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-l.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-l.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio,h=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,c&&(o.size.width=o.size.height*o.aspectRatio,h=!1)),h||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,a=t.containerPosition,s=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,d=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:r.left-a.left-n.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:r.left-a.left-n.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,i){var n=e(this).resizable("instance"),a=n.options,s=n.originalSize,o=n.originalPosition,r={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0};e(a.alsoResize).each((function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},s=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,(function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)})),t.css(a)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,a=i.size,s=i.originalSize,o=i.originalPosition,r=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,d=l[0]||1,c=l[1]||1,u=Math.round((a.width-s.width)/d)*d,p=Math.round((a.height-s.height)/c)*c,h=s.width+u,f=s.height+p,m=n.maxWidth&&h>n.maxWidth,v=n.maxHeight&&f>n.maxHeight,b=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>f;n.grid=l,b&&(h+=d),g&&(f+=c),m&&(h-=d),v&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=h,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=h,i.size.height=f,i.position.top=o.top-p):/^(sw)$/.test(r)?(i.size.width=h,i.size.height=f,i.position.left=o.left-u):((0>=f-c||0>=h-d)&&(t=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=o.top-p):(f=c-t.height,i.size.height=f,i.position.top=o.top+s.height-f),h-d>0?(i.size.width=h,i.position.left=o.left-u):(h=d-t.width,i.size.width=h,i.position.left=o.left+s.width-h))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=!1,a=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),s=Math.max.apply(null,a);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),n=!0),n&&!i&&this._trigger("focus",t),n},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function i(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),a=i.filter(":last");t.target!==a[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){a.trigger("focus")})),t.preventDefault()):(this._delay((function(){n.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(i,(function(i,n){var a,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),a=n.click,s={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,e("<button></button>",n).button(s).appendTo(t.uiButtonSet).on("click",(function(){a.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,a){i._addClass(e(this),"ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(a))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(a,s){var o=s.offset.left-i.document.scrollLeft(),r=s.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(r>=0?"+":"")+r,of:i.window},i._removeClass(e(this),"ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",a,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,a=n.resizable,s=this.uiDialog.css("position"),o="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,a){i._addClass(e(this),"ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(a))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(a,s){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),l=o.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(l>=0?"+":"")+l,of:i.window},i._removeClass(e(this),"ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",a,t(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,a={};e.each(t,(function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(a[e]=t)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,i){var n,a,s=this.uiDialog;"disabled"!==t&&(this._super(t,i),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=s.is(":data(ui-draggable)"))&&!i&&s.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((a=s.is(":data(ui-resizable)"))&&!i&&s.resizable("destroy"),a&&"string"==typeof i&&s.resizable("option","handles",i),a||!1===i||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay((function(){t=!1})),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog,e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,a=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&m(n,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(a=!0,!1):void 0})),!a&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var m=e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,n,a){if(!i.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=s+t.helperProportions.width,l=o+t.helperProportions.height,d=i.offset.left,c=i.offset.top,u=d+i.proportions().width,p=c+i.proportions().height;switch(n){case"fit":return s>=d&&u>=r&&o>=c&&p>=l;case"intersect":return s+t.helperProportions.width/2>d&&u>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>c&&p>l-t.helperProportions.height/2;case"pointer":return e(a.pageY,c,i.proportions().height)&&e(a.pageX,d,i.proportions().width);case"touch":return(o>=c&&p>=o||l>=c&&p>=l||c>o&&l>p)&&(s>=d&&u>=s||r>=d&&u>=r||d>s&&r>u);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,a,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;s.length>n;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(a=0;r.length>a;a++)if(r[a]===s[n].element[0]){s[n].proportions().height=0;continue e}s[n].visible="none"!==s[n].element.css("display"),s[n].visible&&("mousedown"===o&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions({width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&m(t,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),n},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}))},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,a,s,o=m(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(a=this.options.scope,(s=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===a}))).length&&((n=e(s[0]).droppable("instance")).greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}}))},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable,e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each((function(){var i=e(this),n=i.offset(),a={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:a.left,top:a.top,right:a.left+i.outerWidth(),bottom:a.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))})),e(t.target).parents().addBack().each((function(){var n,a=e.data(this,"selectable-item");return a?(n=!t.metaKey&&!t.ctrlKey||!a.$element.hasClass("ui-selected"),i._removeClass(a.$element,n?"ui-unselecting":"ui-selected")._addClass(a.$element,n?"ui-selecting":"ui-unselecting"),a.unselecting=!n,a.selecting=n,a.selected=n,n?i._trigger("selecting",t,{selecting:a.element}):i._trigger("unselecting",t,{unselecting:a.element}),!1):void 0})))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,a=this.options,s=this.opos[0],o=this.opos[1],r=t.pageX,l=t.pageY;return s>r&&(i=r,r=s,s=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:s,top:o,width:r-s,height:l-o}),this.selectees.each((function(){var i=e.data(this,"selectable-item"),d=!1,c={};i&&i.element!==n.element[0]&&(c.left=i.left+n.elementPos.left,c.right=i.right+n.elementPos.left,c.top=i.top+n.elementPos.top,c.bottom=i.bottom+n.elementPos.top,"touch"===a.tolerance?d=!(c.left>r||s>c.right||c.top>l||o>c.bottom):"fit"===a.tolerance&&(d=c.left>s&&r>c.right&&c.top>o&&l>c.bottom),d?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))})),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})})),e(".ui-selecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})})),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){i._rendered||i._refreshMenu()}))},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&n.index!==t.focusIndex&&(t._trigger("focus",e,{item:n}),t.isOpen||t._select(n,e)),t.focusIndex=n.index,t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");return this._setText(i,t.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(t,i){var n=this,a="";e.each(i,(function(i,s){var o;s.optgroup!==a&&(o=e("<li>",{text:s.optgroup}),n._addClass(o,"ui-selectmenu-optgroup","ui-menu-divider"+(s.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),o.appendTo(t),a=s.optgroup),n._renderItemData(t,s)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),a=e("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(a,i.label),n.append(a).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,n,a=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),a+=":not(.ui-state-disabled)"),(n="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](a).eq(-1):i[e+"All"](a).eq(0)).length&&this.menuInstance.focus(t,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;return!1===e?void this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var i=this,n=[];t.each((function(t,a){n.push(i._parseOption(e(a),t))})),this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,a=this.element.find(".ui-slider-handle"),s=[];for(i=n.values&&n.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),t=a.length;i>t;t++)s.push("<span tabindex='0'></span>");this.handles=a.add(e(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===t.range||"max"===t.range)&&this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,n,a,s,o,r,l,d=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var i=Math.abs(n-d.values(t));(a>i||a===i&&(t===d._lastChangedValue||d.values(t)===c.min))&&(a=i,s=e(this),o=t)})),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),r=s.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-s.width()/2,top:t.pageY-r.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,a,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),s=this._valueMin()+n*a,this._trimAlignValue(s)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==t?t:this.values(e),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,a=this.value(),s=this.values();this._hasMultipleValues()&&(n=this.values(t?0:1),a=this.values(t),2===this.options.values.length&&!0===this.options.range&&(i=0===t?Math.min(n,i):Math.max(n,i)),s[t]=i),i!==a&&(!1!==this._trigger("slide",e,this._uiHash(t,i,s))&&(this._hasMultipleValues()?this.values(t,i):this.value(i)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,a,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,a=arguments[0],s=0;n.length>s;s+=1)n[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,a=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),this._super(t,i),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=a-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step;(e=Math.round((e-t)/i)*i+t)>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,i,n,a,s,o=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i})):(n=this.value(),a=this._valueMin(),s=this._valueMax(),i=s!==a?(n-a)/(s-a)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:100-i+"%"},r.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(t){var i,n,a,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,s)))return}switch(a=this.options.step,i=n=this._hasMultipleValues()?this.values(s):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-a)}this._slide(t,s,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(e(t.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,a=!1,s=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each((function(){return e.data(this,s.widgetName+"-item")===s?(n=e(this),!1):void 0})),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each((function(){this===t.target&&(a=!0)})),!a))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var a,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,a,s,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(a=(n=this.items[i]).item[0],(s=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"!==this.options.type||!e.contains(this.element[0],a))){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,a=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))})),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")})),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,a=n+this.helperProportions.height,s=e.left,o=s+e.width,r=e.top,l=r+e.height,d=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||n+d>r&&l>n+d,p="y"===this.options.axis||t+c>s&&o>t+c,h=u&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:t+this.helperProportions.width/2>s&&o>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>r&&l>a-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!!(n&&a)&&(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&i||"left"===a&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var n,a,s,o,r=[],l=[],d=this._connectWith();if(d&&t)for(n=d.length-1;n>=0;n--)for(a=(s=e(d[n],this.document[0])).length-1;a>=0;a--)(o=e.data(s[a],this.widgetFullName))&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,a,s,o,r,l,d,c=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(i=p.length-1;i>=0;i--)for(n=(a=e(p[i],this.document[0])).length-1;n>=0;n--)(s=e.data(a[n],this.widgetFullName))&&s!==this&&!s.options.disabled&&(u.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=u.length-1;i>=0;i--)for(o=u[i][1],n=0,d=(r=u[i][0]).length;d>n;n++)(l=e(r[n])).data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,n,a,s;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=a.outerWidth(),n.height=a.outerHeight()),s=a.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+n+">",t.document[0]);return t._addClass(a,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(a,"ui-sortable-helper"),"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(a)):"tr"===n?t._createTrPlaceholder(t.currentItem,a):"img"===n&&a.attr("src",t.currentItem.attr("src")),i||a.css("visibility","hidden"),a},update:function(e,a){(!i||n.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each((function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(t){var i,n,a,s,o,r,l,d,c,u,p=null,h=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(p&&e.contains(this.containers[i].element[0],p.element[0]))continue;p=this.containers[i],h=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(a=1e4,s=null,o=(c=p.floating||this._isFloating(this.currentItem))?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[h].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[o],d=!1,t[u]-l>this.items[n][r]/2&&(d=!0),a>Math.abs(t[u]-l)&&(a=Math.abs(t[u]-l),s=this.items[n],this.direction=d?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),("document"===a.containment||"window"===a.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===a.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===a.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],i=e(a.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:a.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:a.scrollLeft())*n}},_generatePosition:function(t){var i,n,a=this.options,s=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),a.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/a.grid[1])*a.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/a.grid[0])*a.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-a.grid[0]:n+a.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay((function(){a===this.counter&&this.refreshPositions(!n)}))},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&a.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||a.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(a.push((function(e){this._trigger("remove",e,this._uiHash())})),a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||a.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(a.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;a.length>n;n++)a[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),i=this.element;return e.each(["min","max","step"],(function(e,n){var a=i.attr(n);null!=a&&a.length&&(t[n]=a)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===e.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=n,this._delay((function(){this.previous=n})))}var n;n=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,i.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,i)}),e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return i=e-(t=null!==n.min?n.min:0),e=t+(i=Math.round(i/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&n.min>e?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var i,n,a;return"culture"===e||"numberFormat"===e?(i=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(i))):(("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,t.up),a=this.buttons.last().find(".ui-icon"),this._removeClass(a,null,this.options.icons.down),this._addClass(a,null,t.down)),void this._super(e,t))},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:s((function(e){this._super(e)})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:s((function(e){this._stepUp(e)})),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:s((function(e){this._stepDown(e)})),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:s((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:s((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){return arguments.length?void s(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),!1!==e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),e.ui.spinner,e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;i=t.href.replace(e,""),n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return t.hash.length>1&&i===n}}(),_create:function(){var t=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each((function(i,a){return e(a).attr("aria-controls")===n?(t=i,!1):void 0})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=!!this.tabs.length&&0)),!1!==t&&(-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0)),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(e.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),a=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:a=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){for(var n=this.tabs.length-1;-1!==e.inArray((t>n&&(t=0),0>t&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){return"active"===e?void this._activate(t):(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,a=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each((function(i,n){var a,s,o,r=e(n).uniqueId().attr("id"),l=e(n).closest("li"),d=l.attr("aria-controls");t._isLocal(n)?(o=(a=n.hash).substring(1),s=t.element.find(t._sanitizeSelector(a))):(a="#"+(o=l.attr("aria-controls")||e({}).uniqueId()[0].id),(s=t.element.find(a)).length||(s=t._createPanel(o)).insertAfter(t.panels[i-1]||t.tablist),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),d&&l.data("ui-tabs-aria-controls",d),l.attr({"aria-controls":o,"aria-labelledby":r}),s.attr("aria-labelledby",r)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(a.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var i,n,a;for(e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),a=0;n=this.tabs[a];a++)i=e(n),!0===t||-1!==e.inArray(a,t)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,a=e(t.currentTarget).closest("li"),s=a[0]===n[0],o=s&&i.collapsible,r=o?e():this._getPanelForTab(a),l=n.length?this._getPanelForTab(n):e(),d={oldTab:n,oldPanel:l,newTab:o?e():a,newPanel:r};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||!1===this._trigger("beforeActivate",t,d)||(i.active=!o&&this.tabs.index(a),this.active=s?e():a,this.xhr&&this.xhr.abort(),l.length||r.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(a),t),this._toggle(t,d))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function a(){s._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,n):(o.show(),n())}var s=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,(function(){s._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()})):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),a()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,(function(e){return e!==t?e:null})):e.map(this.tabs,(function(e,i){return i!==t?i:null}))),this._setOptionDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setOptionDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,a=this.tabs.eq(t),s=a.find(".ui-tabs-anchor"),o=this._getPanelForTab(a),r={tab:a,panel:o},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),n._removeClass(a,"ui-tabs-loading"),o.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(a,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done((function(e,t,a){setTimeout((function(){o.html(e),n._trigger("load",i,r),l(a,t)}),1)})).fail((function(e,t){setTimeout((function(){l(e,t)}),1)}))))},_ajaxSettings:function(t,i,n){var a=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,s){return a._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs,e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),a=e.inArray(i,n);-1!==a&&n.splice(a,1),t.removeData("ui-tooltip-id"),(n=e.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i),"content"===t&&e.each(this.tooltips,(function(e,t){n._updateContent(t.element)}))},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(i,n){var a=e.Event("blur");a.target=a.currentTarget=n.element[0],t.close(a,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);return t.is("[title]")?t.data("ui-tooltip-title",t.attr("title")).removeAttr("title"):void 0})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})),this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each((function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))})),this._registerCloseHandlers(t,n),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,a=this,s=t?t.type:null;return"string"==typeof n||n.nodeType||n.jquery?this._open(t,e,n):void((i=n.call(e[0],(function(i){a._delay((function(){e.data("ui-tooltip-open")&&(t&&(t.type=s),this._open(t,e,i))}))})))&&this._open(t,e,i))},_open:function(t,i,n){function a(e){d.of=e,o.is(":hidden")||o.position(d)}var s,o,r,l,d=e.extend({},this.options.position);if(n){if(s=this._find(i))return void s.tooltip.find(".ui-tooltip-content").html(n);i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),o=s.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),(l=e("<div>").html(o.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:a}),a(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval((function(){o.is(":visible")&&(a(d.of),clearInterval(r))}),e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,i,n)},close:function(t){var i,n=this,a=e(t?t.currentTarget:this.element),s=this._find(a);return s?(i=s.tooltip,void(s.closing||(clearInterval(this.delayedShow),a.data("ui-tooltip-title")&&!a.attr("title")&&a.attr("title",a.data("ui-tooltip-title")),this._removeDescribedBy(a),s.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){n._removeTooltip(e(this))})),a.removeData("ui-tooltip-open"),this._off(a,"mouseleave focusout keyup"),a[0]!==this.element[0]&&this._off(a,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]})),s.closing=!0,this._trigger("close",t,{tooltip:i}),s.hiding||(s.closing=!1)))):void a.removeData("ui-tooltip-open")},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),a=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(t)),this.tooltips[a]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,(function(i,n){var a=e.Event("blur"),s=n.element;a.target=a.currentTarget=s[0],t.close(a,!0),e("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip})),function(e,t,i,n){"use strict";function a(e,t){var n,a,s,o=[],r=0;e&&e.isDefaultPrevented()||(e.preventDefault(),t=t||{},e&&e.data&&(t=h(e.data.options,t)),n=t.$target||i(e.currentTarget).trigger("blur"),(s=i.fancybox.getInstance())&&s.$trigger&&s.$trigger.is(n)||(t.selector?o=i(t.selector):(a=n.attr("data-fancybox")||"")?o=(o=e.data?e.data.items:[]).length?o.filter('[data-fancybox="'+a+'"]'):i('[data-fancybox="'+a+'"]'):o=[n],(r=i(o).index(n))<0&&(r=0),(s=i.fancybox.open(o,t,r)).$trigger=n))}if(e.console=e.console||{info:function(e){}},i){if(i.fn.fancybox)return void console.info("fancyBox already initialized");var s={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeClose:i.noop,afterClose:i.noop,onActivate:i.noop,onDeactivate:i.noop,clickContent:function(e,t){return"image"===e.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(e,t){return"image"===e.type&&"toggleControls"},clickSlide:function(e,t){return"image"===e.type?"toggleControls":"close"},dblclickContent:function(e,t){return"image"===e.type&&"zoom"},dblclickSlide:function(e,t){return"image"===e.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},o=i(e),r=i(t),l=0,d=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||function(t){return e.setTimeout(t,1e3/60)},c=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||function(t){e.clearTimeout(t)},u=function(){var e,i=t.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==i.style[e])return n[e];return"transitionend"}(),p=function(e){return e&&e.length&&e[0].offsetHeight},h=function(e,t){var n=i.extend(!0,{},e,t);return i.each(t,(function(e,t){i.isArray(t)&&(n[e]=t)})),n},f=function(e){var n,a;return!(!e||e.ownerDocument!==t)&&(i(".fancybox-container").css("pointer-events","none"),n={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2},a=t.elementFromPoint(n.x,n.y)===e,i(".fancybox-container").css("pointer-events",""),a)},m=function(e,t,n){var a=this;a.opts=h({index:n},i.fancybox.defaults),i.isPlainObject(t)&&(a.opts=h(a.opts,t)),i.fancybox.isMobile&&(a.opts=h(a.opts,a.opts.mobile)),a.id=a.opts.id||++l,a.currIndex=parseInt(a.opts.index,10)||0,a.prevIndex=null,a.prevPos=null,a.currPos=0,a.firstRun=!0,a.group=[],a.slides={},a.addContent(e),a.group.length&&a.init()};i.extend(m.prototype,{init:function(){var n,a,s=this,o=s.group[s.currIndex].opts;o.closeExisting&&i.fancybox.close(!0),i("body").addClass("fancybox-active"),!i.fancybox.getInstance()&&!1!==o.hideScrollbar&&!i.fancybox.isMobile&&t.body.scrollHeight>e.innerHeight&&(i("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(e.innerWidth-t.documentElement.clientWidth)+"px;}</style>"),i("body").addClass("compensate-for-scrollbar")),a="",i.each(o.buttons,(function(e,t){a+=o.btnTpl[t]||""})),n=i(s.translate(s,o.baseTpl.replace("{{buttons}}",a).replace("{{arrows}}",o.btnTpl.arrowLeft+o.btnTpl.arrowRight))).attr("id","fancybox-container-"+s.id).addClass(o.baseClass).data("FancyBox",s).appendTo(o.parentEl),s.$refs={container:n},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach((function(e){s.$refs[e]=n.find(".fancybox-"+e)})),s.trigger("onInit"),s.activate(),s.jumpTo(s.currIndex)},translate:function(e,t){var i=e.opts.i18n[e.opts.lang]||e.opts.i18n.en;return t.replace(/\{\{(\w+)\}\}/g,(function(e,t){return void 0===i[t]?e:i[t]}))},addContent:function(e){var t,n=this,a=i.makeArray(e);i.each(a,(function(e,t){var a,s,o,r,l,d={},c={};i.isPlainObject(t)?(d=t,c=t.opts||t):"object"===i.type(t)&&i(t).length?(c=(a=i(t)).data()||{},(c=i.extend(!0,{},c,c.options)).$orig=a,d.src=n.opts.src||c.src||a.attr("href"),d.type||d.src||(d.type="inline",d.src=t)):d={type:"html",src:t+""},d.opts=i.extend(!0,{},n.opts,c),i.isArray(c.buttons)&&(d.opts.buttons=c.buttons),i.fancybox.isMobile&&d.opts.mobile&&(d.opts=h(d.opts,d.opts.mobile)),s=d.type||d.opts.type,r=d.src||"",!s&&r&&((o=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(s="video",d.opts.video.format||(d.opts.video.format="video/"+("ogv"===o[1]?"ogg":o[1]))):r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s="image":r.match(/\.(pdf)((\?|#).*)?$/i)?(s="iframe",d=i.extend(!0,d,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===r.charAt(0)&&(s="inline")),s?d.type=s:n.trigger("objectNeedsType",d),d.contentType||(d.contentType=i.inArray(d.type,["html","inline","ajax"])>-1?"html":d.type),d.index=n.group.length,"auto"==d.opts.smallBtn&&(d.opts.smallBtn=i.inArray(d.type,["html","inline","ajax"])>-1),"auto"===d.opts.toolbar&&(d.opts.toolbar=!d.opts.smallBtn),d.$thumb=d.opts.$thumb||null,d.opts.$trigger&&d.index===n.opts.index&&(d.$thumb=d.opts.$trigger.find("img:first"),d.$thumb.length&&(d.opts.$orig=d.opts.$trigger)),d.$thumb&&d.$thumb.length||!d.opts.$orig||(d.$thumb=d.opts.$orig.find("img:first")),d.$thumb&&!d.$thumb.length&&(d.$thumb=null),d.thumb=d.opts.thumb||(d.$thumb?d.$thumb[0].src:null),"function"===i.type(d.opts.caption)&&(d.opts.caption=d.opts.caption.apply(t,[n,d])),"function"===i.type(n.opts.caption)&&(d.opts.caption=n.opts.caption.apply(t,[n,d])),d.opts.caption instanceof i||(d.opts.caption=void 0===d.opts.caption?"":d.opts.caption+""),"ajax"===d.type&&((l=r.split(/\s+/,2)).length>1&&(d.src=l.shift(),d.opts.filter=l.shift())),d.opts.modal&&(d.opts=i.extend(!0,d.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),n.group.push(d)})),Object.keys(n.slides).length&&(n.updateControls(),(t=n.Thumbs)&&t.isActive&&(t.create(),t.focus()))},addEvents:function(){var t=this;t.removeEvents(),t.$refs.container.on("click.fb-close","[data-fancybox-close]",(function(e){e.stopPropagation(),e.preventDefault(),t.close(e)})).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",(function(e){e.stopPropagation(),e.preventDefault(),t.previous()})).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",(function(e){e.stopPropagation(),e.preventDefault(),t.next()})).on("click.fb","[data-fancybox-zoom]",(function(e){t[t.isScaledDown()?"scaleToActual":"scaleToFit"]()})),o.on("orientationchange.fb resize.fb",(function(e){e&&e.originalEvent&&"resize"===e.originalEvent.type?(t.requestId&&c(t.requestId),t.requestId=d((function(){t.update(e)}))):(t.current&&"iframe"===t.current.type&&t.$refs.stage.hide(),setTimeout((function(){t.$refs.stage.show(),t.update(e)}),i.fancybox.isMobile?600:250))})),r.on("keydown.fb",(function(e){var n=(i.fancybox?i.fancybox.getInstance():null).current,a=e.keyCode||e.which;if(9!=a)return!n.opts.keyboard||e.ctrlKey||e.altKey||e.shiftKey||i(e.target).is("input,textarea,video,audio,select")?void 0:8===a||27===a?(e.preventDefault(),void t.close(e)):37===a||38===a?(e.preventDefault(),void t.previous()):39===a||40===a?(e.preventDefault(),void t.next()):void t.trigger("afterKeydown",e,a);n.opts.trapFocus&&t.focus(e)})),t.group[t.currIndex].opts.idleTime&&(t.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",(function(e){t.idleSecondsCounter=0,t.isIdle&&t.showControls(),t.isIdle=!1})),t.idleInterval=e.setInterval((function(){++t.idleSecondsCounter>=t.group[t.currIndex].opts.idleTime&&!t.isDragging&&(t.isIdle=!0,t.idleSecondsCounter=0,t.hideControls())}),1e3))},removeEvents:function(){var t=this;o.off("orientationchange.fb resize.fb"),r.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),t.idleInterval&&(e.clearInterval(t.idleInterval),t.idleInterval=null)},previous:function(e){return this.jumpTo(this.currPos-1,e)},next:function(e){return this.jumpTo(this.currPos+1,e)},jumpTo:function(e,t){var n,a,s,o,r,l,d,c,u,h=this,f=h.group.length;if(!(h.isDragging||h.isClosing||h.isAnimating&&h.firstRun)){if(e=parseInt(e,10),!(s=h.current?h.current.opts.loop:h.opts.loop)&&(e<0||e>=f))return!1;if(n=h.firstRun=!Object.keys(h.slides).length,r=h.current,h.prevIndex=h.currIndex,h.prevPos=h.currPos,o=h.createSlide(e),f>1&&((s||o.index<f-1)&&h.createSlide(e+1),(s||o.index>0)&&h.createSlide(e-1)),h.current=o,h.currIndex=o.index,h.currPos=o.pos,h.trigger("beforeShow",n),h.updateControls(),o.forcedDuration=void 0,i.isNumeric(t)?o.forcedDuration=t:t=o.opts[n?"animationDuration":"transitionDuration"],t=parseInt(t,10),a=h.isMoved(o),o.$slide.addClass("fancybox-slide--current"),n)return o.opts.animationEffect&&t&&h.$refs.container.css("transition-duration",t+"ms"),h.$refs.container.addClass("fancybox-is-open").trigger("focus"),h.loadSlide(o),void h.preload("image");l=i.fancybox.getTranslate(r.$slide),d=i.fancybox.getTranslate(h.$refs.stage),i.each(h.slides,(function(e,t){i.fancybox.stop(t.$slide,!0)})),r.pos!==o.pos&&(r.isComplete=!1),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),a?(u=l.left-(r.pos*l.width+r.pos*r.opts.gutter),i.each(h.slides,(function(e,n){n.$slide.removeClass("fancybox-animated").removeClass((function(e,t){return(t.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}));var a=n.pos*l.width+n.pos*n.opts.gutter;i.fancybox.setTranslate(n.$slide,{top:0,left:a-d.left+u}),n.pos!==o.pos&&n.$slide.addClass("fancybox-slide--"+(n.pos>o.pos?"next":"previous")),p(n.$slide),i.fancybox.animate(n.$slide,{top:0,left:(n.pos-o.pos)*l.width+(n.pos-o.pos)*n.opts.gutter},t,(function(){n.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),n.pos===h.currPos&&h.complete()}))}))):t&&o.opts.transitionEffect&&(c="fancybox-animated fancybox-fx-"+o.opts.transitionEffect,r.$slide.addClass("fancybox-slide--"+(r.pos>o.pos?"next":"previous")),i.fancybox.animate(r.$slide,c,t,(function(){r.$slide.removeClass(c).removeClass("fancybox-slide--next fancybox-slide--previous")}),!1)),o.isLoaded?h.revealContent(o):h.loadSlide(o),h.preload("image")}},createSlide:function(e){var t,n,a=this;return n=(n=e%a.group.length)<0?a.group.length+n:n,!a.slides[e]&&a.group[n]&&(t=i('<div class="fancybox-slide"></div>').appendTo(a.$refs.stage),a.slides[e]=i.extend(!0,{},a.group[n],{pos:e,$slide:t,isLoaded:!1}),a.updateSlide(a.slides[e])),a.slides[e]},scaleToActual:function(e,t,n){var a,s,o,r,l,d=this,c=d.current,u=c.$content,p=i.fancybox.getTranslate(c.$slide).width,h=i.fancybox.getTranslate(c.$slide).height,f=c.width,m=c.height;d.isAnimating||d.isMoved()||!u||"image"!=c.type||!c.isLoaded||c.hasError||(d.isAnimating=!0,i.fancybox.stop(u),e=void 0===e?.5*p:e,t=void 0===t?.5*h:t,(a=i.fancybox.getTranslate(u)).top-=i.fancybox.getTranslate(c.$slide).top,a.left-=i.fancybox.getTranslate(c.$slide).left,r=f/a.width,l=m/a.height,s=.5*p-.5*f,o=.5*h-.5*m,f>p&&((s=a.left*r-(e*r-e))>0&&(s=0),s<p-f&&(s=p-f)),m>h&&((o=a.top*l-(t*l-t))>0&&(o=0),o<h-m&&(o=h-m)),d.updateCursor(f,m),i.fancybox.animate(u,{top:o,left:s,scaleX:r,scaleY:l},n||366,(function(){d.isAnimating=!1})),d.SlideShow&&d.SlideShow.isActive&&d.SlideShow.stop())},scaleToFit:function(e){var t,n=this,a=n.current,s=a.$content;n.isAnimating||n.isMoved()||!s||"image"!=a.type||!a.isLoaded||a.hasError||(n.isAnimating=!0,i.fancybox.stop(s),t=n.getFitPos(a),n.updateCursor(t.width,t.height),i.fancybox.animate(s,{top:t.top,left:t.left,scaleX:t.width/s.width(),scaleY:t.height/s.height()},e||366,(function(){n.isAnimating=!1})))},getFitPos:function(e){var t,n,a,s,o=e.$content,r=e.$slide,l=e.width||e.opts.width,d=e.height||e.opts.height,c={};return!!(e.isLoaded&&o&&o.length)&&(t=i.fancybox.getTranslate(this.$refs.stage).width,n=i.fancybox.getTranslate(this.$refs.stage).height,t-=parseFloat(r.css("paddingLeft"))+parseFloat(r.css("paddingRight"))+parseFloat(o.css("marginLeft"))+parseFloat(o.css("marginRight")),n-=parseFloat(r.css("paddingTop"))+parseFloat(r.css("paddingBottom"))+parseFloat(o.css("marginTop"))+parseFloat(o.css("marginBottom")),l&&d||(l=t,d=n),(l*=a=Math.min(1,t/l,n/d))>t-.5&&(l=t),(d*=a)>n-.5&&(d=n),"image"===e.type?(c.top=Math.floor(.5*(n-d))+parseFloat(r.css("paddingTop")),c.left=Math.floor(.5*(t-l))+parseFloat(r.css("paddingLeft"))):"video"===e.contentType&&(d>l/(s=e.opts.width&&e.opts.height?l/d:e.opts.ratio||16/9)?d=l/s:l>d*s&&(l=d*s)),c.width=l,c.height=d,c)},update:function(e){var t=this;i.each(t.slides,(function(i,n){t.updateSlide(n,e)}))},updateSlide:function(e,t){var n=this,a=e&&e.$content,s=e.width||e.opts.width,o=e.height||e.opts.height,r=e.$slide;n.adjustCaption(e),a&&(s||o||"video"===e.contentType)&&!e.hasError&&(i.fancybox.stop(a),i.fancybox.setTranslate(a,n.getFitPos(e)),e.pos===n.currPos&&(n.isAnimating=!1,n.updateCursor())),n.adjustLayout(e),r.length&&(r.trigger("refresh"),e.pos===n.currPos&&n.$refs.toolbar.add(n.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",r.get(0).scrollHeight>r.get(0).clientHeight)),n.trigger("onUpdate",e,t)},centerSlide:function(e){var t=this,n=t.current,a=n.$slide;!t.isClosing&&n&&(a.siblings().css({transform:"",opacity:""}),a.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),i.fancybox.animate(a,{top:0,left:0,opacity:1},void 0===e?0:e,(function(){a.css({transform:"",opacity:""}),n.isComplete||t.complete()}),!1))},isMoved:function(e){var t,n,a=e||this.current;return!!a&&(n=i.fancybox.getTranslate(this.$refs.stage),t=i.fancybox.getTranslate(a.$slide),!a.$slide.hasClass("fancybox-animated")&&(Math.abs(t.top-n.top)>.5||Math.abs(t.left-n.left)>.5))},updateCursor:function(e,t){var n,a,s=this,o=s.current,r=s.$refs.container;o&&!s.isClosing&&s.Guestures&&(r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),a=!!(n=s.canPan(e,t))||s.isZoomable(),r.toggleClass("fancybox-is-zoomable",a),i("[data-fancybox-zoom]").prop("disabled",!a),n?r.addClass("fancybox-can-pan"):a&&("zoom"===o.opts.clickContent||i.isFunction(o.opts.clickContent)&&"zoom"==o.opts.clickContent(o))?r.addClass("fancybox-can-zoomIn"):o.opts.touch&&(o.opts.touch.vertical||s.group.length>1)&&"video"!==o.contentType&&r.addClass("fancybox-can-swipe"))},isZoomable:function(){var e,t=this,i=t.current;if(i&&!t.isClosing&&"image"===i.type&&!i.hasError){if(!i.isLoaded)return!0;if((e=t.getFitPos(i))&&(i.width>e.width||i.height>e.height))return!0}return!1},isScaledDown:function(e,t){var n=!1,a=this.current,s=a.$content;return void 0!==e&&void 0!==t?n=e<a.width&&t<a.height:s&&(n=(n=i.fancybox.getTranslate(s)).width<a.width&&n.height<a.height),n},canPan:function(e,t){var n=this.current,a=null,s=!1;return"image"===n.type&&(n.isComplete||e&&t)&&!n.hasError&&(s=this.getFitPos(n),void 0!==e&&void 0!==t?a={width:e,height:t}:n.isComplete&&(a=i.fancybox.getTranslate(n.$content)),a&&s&&(s=Math.abs(a.width-s.width)>1.5||Math.abs(a.height-s.height)>1.5)),s},loadSlide:function(e){var t,n,a,s=this;if(!e.isLoading&&!e.isLoaded){if(e.isLoading=!0,!1===s.trigger("beforeLoad",e))return e.isLoading=!1,!1;switch(t=e.type,(n=e.$slide).off("refresh").trigger("onReset").addClass(e.opts.slideClass),t){case"image":s.setImage(e);break;case"iframe":s.setIframe(e);break;case"html":s.setContent(e,e.src||e.content);break;case"video":s.setContent(e,e.opts.video.tpl.replace(/\{\{src\}\}/gi,e.src).replace("{{format}}",e.opts.videoFormat||e.opts.video.format||"").replace("{{poster}}",e.thumb||""));break;case"inline":i(e.src).length?s.setContent(e,i(e.src)):s.setError(e);break;case"ajax":s.showLoading(e),a=i.ajax(i.extend({},e.opts.ajax.settings,{url:e.src,success:function(t,i){"success"===i&&s.setContent(e,t)},error:function(t,i){t&&"abort"!==i&&s.setError(e)}})),n.one("onReset",(function(){a.abort()}));break;default:s.setError(e)}return!0}},setImage:function(e){var n,a=this;setTimeout((function(){var t=e.$image;a.isClosing||!e.isLoading||t&&t.length&&t[0].complete||e.hasError||a.showLoading(e)}),50),a.checkSrcset(e),e.$content=i('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide.addClass("fancybox-slide--image")),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&e.thumb&&(e.width=e.opts.width,e.height=e.opts.height,(n=t.createElement("img")).onerror=function(){i(this).remove(),e.$ghost=null},n.onload=function(){a.afterLoad(e)},e.$ghost=i(n).addClass("fancybox-image").appendTo(e.$content).attr("src",e.thumb)),a.setBigImage(e)},checkSrcset:function(t){var i,n,a,s,o=t.opts.srcset||t.opts.image.srcset;if(o){a=e.devicePixelRatio||1,s=e.innerWidth*a,(n=o.split(",").map((function(e){var t={};return e.trim().split(/\s+/).forEach((function(e,i){var n=parseInt(e.substring(0,e.length-1),10);if(0===i)return t.url=e;n&&(t.value=n,t.postfix=e[e.length-1])})),t}))).sort((function(e,t){return e.value-t.value}));for(var r=0;r<n.length;r++){var l=n[r];if("w"===l.postfix&&l.value>=s||"x"===l.postfix&&l.value>=a){i=l;break}}!i&&n.length&&(i=n[n.length-1]),i&&(t.src=i.url,t.width&&t.height&&"w"==i.postfix&&(t.height=t.width/t.height*i.value,t.width=i.value),t.opts.srcset=o)}},setBigImage:function(e){var n=this,a=t.createElement("img"),s=i(a);e.$image=s.one("error",(function(){n.setError(e)})).one("load",(function(){var t;e.$ghost||(n.resolveImageSlideSize(e,this.naturalWidth,this.naturalHeight),n.afterLoad(e)),n.isClosing||(e.opts.srcset&&((t=e.opts.sizes)&&"auto"!==t||(t=(e.width/e.height>1&&o.width()/o.height()>1?"100":Math.round(e.width/e.height*100))+"vw"),s.attr("sizes",t).attr("srcset",e.opts.srcset)),e.$ghost&&setTimeout((function(){e.$ghost&&!n.isClosing&&e.$ghost.hide()}),Math.min(300,Math.max(1e3,e.height/1600))),n.hideLoading(e))})).addClass("fancybox-image").attr("src",e.src).appendTo(e.$content),(a.complete||"complete"==a.readyState)&&s.naturalWidth&&s.naturalHeight?s.trigger("load"):a.error&&s.trigger("error")},resolveImageSlideSize:function(e,t,i){var n=parseInt(e.opts.width,10),a=parseInt(e.opts.height,10);e.width=t,e.height=i,n>0&&(e.width=n,e.height=Math.floor(n*i/t)),a>0&&(e.width=Math.floor(a*t/i),e.height=a)},setIframe:function(e){var t,n=this,a=e.opts.iframe,s=e.$slide;e.$content=i('<div class="fancybox-content'+(a.preload?" fancybox-is-hidden":"")+'"></div>').css(a.css).appendTo(s),s.addClass("fancybox-slide--"+e.contentType),e.$iframe=t=i(a.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(a.attr).appendTo(e.$content),a.preload?(n.showLoading(e),t.on("load.fb error.fb",(function(t){this.isReady=1,e.$slide.trigger("refresh"),n.afterLoad(e)})),s.on("refresh.fb",(function(){var i,n=e.$content,o=a.css.width,r=a.css.height;if(1===t[0].isReady){try{i=t.contents().find("body")}catch(e){}i&&i.length&&i.children().length&&(s.css("overflow","visible"),n.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===o&&(o=Math.ceil(Math.max(i[0].clientWidth,i.outerWidth(!0)))),n.css("width",o||"").css("max-width",""),void 0===r&&(r=Math.ceil(Math.max(i[0].clientHeight,i.outerHeight(!0)))),n.css("height",r||""),s.css("overflow","auto")),n.removeClass("fancybox-is-hidden")}}))):n.afterLoad(e),t.attr("src",e.src),s.one("onReset",(function(){try{i(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(e){}i(this).off("refresh.fb").empty(),e.isLoaded=!1,e.isRevealed=!1}))},setContent:function(e,t){var n=this;n.isClosing||(n.hideLoading(e),e.$content&&i.fancybox.stop(e.$content),e.$slide.empty(),function(e){return e&&e.hasOwnProperty&&e instanceof i}(t)&&t.parent().length?((t.hasClass("fancybox-content")||t.parent().hasClass("fancybox-content"))&&t.parents(".fancybox-slide").trigger("onReset"),e.$placeholder=i("<div>").hide().insertAfter(t),t.css("display","inline-block")):e.hasError||("string"===i.type(t)&&(t=i("<div>").append(i.trim(t)).contents()),e.opts.filter&&(t=i("<div>").html(t).find(e.opts.filter))),e.$slide.one("onReset",(function(){i(this).find("video,audio").trigger("pause"),e.$placeholder&&(e.$placeholder.after(t.removeClass("fancybox-content").hide()).remove(),e.$placeholder=null),e.$smallBtn&&(e.$smallBtn.remove(),e.$smallBtn=null),e.hasError||(i(this).empty(),e.isLoaded=!1,e.isRevealed=!1)})),i(t).appendTo(e.$slide),i(t).is("video,audio")&&(i(t).addClass("fancybox-video"),i(t).wrap("<div></div>"),e.contentType="video",e.opts.width=e.opts.width||i(t).attr("width"),e.opts.height=e.opts.height||i(t).attr("height")),e.$content=e.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),e.$content.siblings().hide(),e.$content.length||(e.$content=e.$slide.wrapInner("<div></div>").children().first()),e.$content.addClass("fancybox-content"),e.$slide.addClass("fancybox-slide--"+e.contentType),n.afterLoad(e))},setError:function(e){e.hasError=!0,e.$slide.trigger("onReset").removeClass("fancybox-slide--"+e.contentType).addClass("fancybox-slide--error"),e.contentType="html",this.setContent(e,this.translate(e,e.opts.errorTpl)),e.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(e){var t=this;(e=e||t.current)&&!e.$spinner&&(e.$spinner=i(t.translate(t,t.opts.spinnerTpl)).appendTo(e.$slide).hide().fadeIn("fast"))},hideLoading:function(e){(e=e||this.current)&&e.$spinner&&(e.$spinner.stop().remove(),delete e.$spinner)},afterLoad:function(e){var t=this;t.isClosing||(e.isLoading=!1,e.isLoaded=!0,t.trigger("afterLoad",e),t.hideLoading(e),!e.opts.smallBtn||e.$smallBtn&&e.$smallBtn.length||(e.$smallBtn=i(t.translate(e,e.opts.btnTpl.smallBtn)).appendTo(e.$content)),e.opts.protect&&e.$content&&!e.hasError&&(e.$content.on("contextmenu.fb",(function(e){return 2==e.button&&e.preventDefault(),!0})),"image"===e.type&&i('<div class="fancybox-spaceball"></div>').appendTo(e.$content)),t.adjustCaption(e),t.adjustLayout(e),e.pos===t.currPos&&t.updateCursor(),t.revealContent(e))},adjustCaption:function(e){var t,i=this,n=e||i.current,a=n.opts.caption,s=n.opts.preventCaptionOverlap,o=i.$refs.caption,r=!1;o.toggleClass("fancybox-caption--separate",s),s&&a&&a.length&&(n.pos!==i.currPos?((t=o.clone().appendTo(o.parent())).children().eq(0).empty().html(a),r=t.outerHeight(!0),t.empty().remove()):i.$caption&&(r=i.$caption.outerHeight(!0)),n.$slide.css("padding-bottom",r||""))},adjustLayout:function(e){var t,i,n,a,s=e||this.current;s.isLoaded&&!0!==s.opts.disableLayoutFix&&(s.$content.css("margin-bottom",""),s.$content.outerHeight()>s.$slide.height()+.5&&(n=s.$slide[0].style["padding-bottom"],a=s.$slide.css("padding-bottom"),parseFloat(a)>0&&(t=s.$slide[0].scrollHeight,s.$slide.css("padding-bottom",0),Math.abs(t-s.$slide[0].scrollHeight)<1&&(i=a),s.$slide.css("padding-bottom",n))),s.$content.css("margin-bottom",i))},revealContent:function(e){var t,n,a,s,o=this,r=e.$slide,l=!1,d=!1,c=o.isMoved(e),u=e.isRevealed;return e.isRevealed=!0,t=e.opts[o.firstRun?"animationEffect":"transitionEffect"],a=e.opts[o.firstRun?"animationDuration":"transitionDuration"],a=parseInt(void 0===e.forcedDuration?a:e.forcedDuration,10),!c&&e.pos===o.currPos&&a||(t=!1),"zoom"===t&&(e.pos===o.currPos&&a&&"image"===e.type&&!e.hasError&&(d=o.getThumbPos(e))?l=o.getFitPos(e):t="fade"),"zoom"===t?(o.isAnimating=!0,l.scaleX=l.width/d.width,l.scaleY=l.height/d.height,"auto"==(s=e.opts.zoomOpacity)&&(s=Math.abs(e.width/e.height-d.width/d.height)>.1),s&&(d.opacity=.1,l.opacity=1),i.fancybox.setTranslate(e.$content.removeClass("fancybox-is-hidden"),d),p(e.$content),void i.fancybox.animate(e.$content,l,a,(function(){o.isAnimating=!1,o.complete()}))):(o.updateSlide(e),t?(i.fancybox.stop(r),n="fancybox-slide--"+(e.pos>=o.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+t,r.addClass(n).removeClass("fancybox-slide--current"),e.$content.removeClass("fancybox-is-hidden"),p(r),"image"!==e.type&&e.$content.hide().show(0),void i.fancybox.animate(r,"fancybox-slide--current",a,(function(){r.removeClass(n).css({transform:"",opacity:""}),e.pos===o.currPos&&o.complete()}),!0)):(e.$content.removeClass("fancybox-is-hidden"),u||!c||"image"!==e.type||e.hasError||e.$content.hide().fadeIn("fast"),void(e.pos===o.currPos&&o.complete())))},getThumbPos:function(e){var t,n,a,s,o,r=!1,l=e.$thumb;return!(!l||!f(l[0]))&&(t=i.fancybox.getTranslate(l),n=parseFloat(l.css("border-top-width")||0),a=parseFloat(l.css("border-right-width")||0),s=parseFloat(l.css("border-bottom-width")||0),o=parseFloat(l.css("border-left-width")||0),r={top:t.top+n,left:t.left+o,width:t.width-a-o,height:t.height-n-s,scaleX:1,scaleY:1},t.width>0&&t.height>0&&r)},complete:function(){var e,t=this,n=t.current,a={};!t.isMoved()&&n.isLoaded&&(n.isComplete||(n.isComplete=!0,n.$slide.siblings().trigger("onReset"),t.preload("inline"),p(n.$slide),n.$slide.addClass("fancybox-slide--complete"),i.each(t.slides,(function(e,n){n.pos>=t.currPos-1&&n.pos<=t.currPos+1?a[n.pos]=n:n&&(i.fancybox.stop(n.$slide),n.$slide.off().remove())})),t.slides=a),t.isAnimating=!1,t.updateCursor(),t.trigger("afterShow"),n.opts.video.autoStart&&n.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",(function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),t.next()})),n.opts.autoFocus&&"html"===n.contentType&&((e=n.$content.find("input[autofocus]:enabled:visible:first")).length?e.trigger("focus"):t.focus(null,!0)),n.$slide.scrollTop(0).scrollLeft(0))},preload:function(e){var t,i,n=this;n.group.length<2||(i=n.slides[n.currPos+1],(t=n.slides[n.currPos-1])&&t.type===e&&n.loadSlide(t),i&&i.type===e&&n.loadSlide(i))},focus:function(e,n){var a,s,o=this,r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");o.isClosing||((a=(a=!e&&o.current&&o.current.isComplete?o.current.$slide.find("*:visible"+(n?":not(.fancybox-close-small)":"")):o.$refs.container.find("*:visible")).filter(r).filter((function(){return"hidden"!==i(this).css("visibility")&&!i(this).hasClass("disabled")}))).length?(s=a.index(t.activeElement),e&&e.shiftKey?(s<0||0==s)&&(e.preventDefault(),a.eq(a.length-1).trigger("focus")):(s<0||s==a.length-1)&&(e&&e.preventDefault(),a.eq(0).trigger("focus"))):o.$refs.container.trigger("focus"))},activate:function(){var e=this;i(".fancybox-container").each((function(){var t=i(this).data("FancyBox");t&&t.id!==e.id&&!t.isClosing&&(t.trigger("onDeactivate"),t.removeEvents(),t.isVisible=!1)})),e.isVisible=!0,(e.current||e.isIdle)&&(e.update(),e.updateControls()),e.trigger("onActivate"),e.addEvents()},close:function(e,t){var n,a,s,o,r,l,c,u=this,h=u.current,f=function(){u.cleanUp(e)};return!(u.isClosing||(u.isClosing=!0,!1===u.trigger("beforeClose",e)?(u.isClosing=!1,d((function(){u.update()})),1):(u.removeEvents(),s=h.$content,n=h.opts.animationEffect,a=i.isNumeric(t)?t:n?h.opts.animationDuration:0,h.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==e?i.fancybox.stop(h.$slide):n=!1,h.$slide.siblings().trigger("onReset").remove(),a&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",a+"ms"),u.hideLoading(h),u.hideControls(!0),u.updateCursor(),"zoom"!==n||s&&a&&"image"===h.type&&!u.isMoved()&&!h.hasError&&(c=u.getThumbPos(h))||(n="fade"),"zoom"===n?(i.fancybox.stop(s),o=i.fancybox.getTranslate(s),l={top:o.top,left:o.left,scaleX:o.width/c.width,scaleY:o.height/c.height,width:c.width,height:c.height},r=h.opts.zoomOpacity,"auto"==r&&(r=Math.abs(h.width/h.height-c.width/c.height)>.1),r&&(c.opacity=0),i.fancybox.setTranslate(s,l),p(s),i.fancybox.animate(s,c,a,f),0):(n&&a?i.fancybox.animate(h.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+n,a,f):!0===e?setTimeout(f,a):f(),0))))},cleanUp:function(t){var n,a,s,o=this,r=o.current.opts.$orig;o.current.$slide.trigger("onReset"),o.$refs.container.empty().remove(),o.trigger("afterClose",t),o.current.opts.backFocus&&(r&&r.length&&r.is(":visible")||(r=o.$trigger),r&&r.length&&(a=e.scrollX,s=e.scrollY,r.trigger("focus"),i("html, body").scrollTop(s).scrollLeft(a))),o.current=null,(n=i.fancybox.getInstance())?n.activate():(i("body").removeClass("fancybox-active compensate-for-scrollbar"),i("#fancybox-style-noscroll").remove())},trigger:function(e,t){var n,a=Array.prototype.slice.call(arguments,1),s=this,o=t&&t.opts?t:s.current;if(o?a.unshift(o):o=s,a.unshift(s),i.isFunction(o.opts[e])&&(n=o.opts[e].apply(o,a)),!1===n)return n;"afterClose"!==e&&s.$refs?s.$refs.container.trigger(e+".fb",a):r.trigger(e+".fb",a)},updateControls:function(){var e=this,n=e.current,a=n.index,s=e.$refs.container,o=e.$refs.caption,r=n.opts.caption;n.$slide.trigger("refresh"),r&&r.length?(e.$caption=o,o.children().eq(0).html(r)):e.$caption=null,e.hasHiddenControls||e.isIdle||e.showControls(),s.find("[data-fancybox-count]").html(e.group.length),s.find("[data-fancybox-index]").html(a+1),s.find("[data-fancybox-prev]").prop("disabled",!n.opts.loop&&a<=0),s.find("[data-fancybox-next]").prop("disabled",!n.opts.loop&&a>=e.group.length-1),"image"===n.type?s.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",n.opts.image.src||n.src).show():n.opts.toolbar&&s.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),i(t.activeElement).is(":hidden,[disabled]")&&e.$refs.container.trigger("focus")},hideControls:function(e){var t=["infobar","toolbar","nav"];!e&&this.current.opts.preventCaptionOverlap||t.push("caption"),this.$refs.container.removeClass(t.map((function(e){return"fancybox-show-"+e})).join(" ")),this.hasHiddenControls=!0},showControls:function(){var e=this,t=e.current?e.current.opts:e.opts,i=e.$refs.container;e.hasHiddenControls=!1,e.idleSecondsCounter=0,i.toggleClass("fancybox-show-toolbar",!(!t.toolbar||!t.buttons)).toggleClass("fancybox-show-infobar",!!(t.infobar&&e.group.length>1)).toggleClass("fancybox-show-caption",!!e.$caption).toggleClass("fancybox-show-nav",!!(t.arrows&&e.group.length>1)).toggleClass("fancybox-is-modal",!!t.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),i.fancybox={version:"3.5.7",defaults:s,getInstance:function(e){var t=i('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),n=Array.prototype.slice.call(arguments,1);return t instanceof m&&("string"===i.type(e)?t[e].apply(t,n):"function"===i.type(e)&&e.apply(t,n),t)},open:function(e,t,i){return new m(e,t,i)},close:function(e){var t=this.getInstance();t&&(t.close(),!0===e&&this.close(e))},destroy:function(){this.close(!0),r.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var i=t.createElement("div");return e.getComputedStyle&&e.getComputedStyle(i)&&e.getComputedStyle(i).getPropertyValue("transform")&&!(t.documentMode&&t.documentMode<11)}(),getTranslate:function(e){var t;return!(!e||!e.length)&&{top:(t=e[0].getBoundingClientRect()).top||0,left:t.left||0,width:t.width,height:t.height,opacity:parseFloat(e.css("opacity"))}},setTranslate:function(e,t){var i="",n={};if(e&&t)return void 0===t.left&&void 0===t.top||(i=(void 0===t.left?e.position().left:t.left)+"px, "+(void 0===t.top?e.position().top:t.top)+"px",i=this.use3d?"translate3d("+i+", 0px)":"translate("+i+")"),void 0!==t.scaleX&&void 0!==t.scaleY?i+=" scale("+t.scaleX+", "+t.scaleY+")":void 0!==t.scaleX&&(i+=" scaleX("+t.scaleX+")"),i.length&&(n.transform=i),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.width&&(n.width=t.width),void 0!==t.height&&(n.height=t.height),e.css(n)},animate:function(e,t,n,a,s){var o,r=this;i.isFunction(n)&&(a=n,n=null),r.stop(e),o=r.getTranslate(e),e.on(u,(function(l){(!l||!l.originalEvent||e.is(l.originalEvent.target)&&"z-index"!=l.originalEvent.propertyName)&&(r.stop(e),i.isNumeric(n)&&e.css("transition-duration",""),i.isPlainObject(t)?void 0!==t.scaleX&&void 0!==t.scaleY&&r.setTranslate(e,{top:t.top,left:t.left,width:o.width*t.scaleX,height:o.height*t.scaleY,scaleX:1,scaleY:1}):!0!==s&&e.removeClass(t),i.isFunction(a)&&a(l))})),i.isNumeric(n)&&e.css("transition-duration",n+"ms"),i.isPlainObject(t)?(void 0!==t.scaleX&&void 0!==t.scaleY&&(delete t.width,delete t.height,e.parent().hasClass("fancybox-slide--image")&&e.parent().addClass("fancybox-is-scaling")),i.fancybox.setTranslate(e,t)):e.addClass(t),e.data("timer",setTimeout((function(){e.trigger(u)}),n+33))},stop:function(e,t){e&&e.length&&(clearTimeout(e.data("timer")),t&&e.trigger(u),e.off(u).css("transition-duration",""),e.parent().removeClass("fancybox-is-scaling"))}},i.fn.fancybox=function(e){var t;return(t=(e=e||{}).selector||!1)?i("body").off("click.fb-start",t).on("click.fb-start",t,{options:e},a):this.off("click.fb-start").on("click.fb-start",{items:this,options:e},a),this},r.on("click.fb-start","[data-fancybox]",a),r.on("click.fb-start","[data-fancybox-trigger]",(function(e){i('[data-fancybox="'+i(this).attr("data-fancybox-trigger")+'"]').eq(i(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:i(this)})})),function(){var e=null;r.on("mousedown mouseup focus blur",".fancybox-button",(function(t){switch(t.type){case"mousedown":e=i(this);break;case"mouseup":e=null;break;case"focusin":i(".fancybox-button").removeClass("fancybox-focus"),i(this).is(e)||i(this).is("[disabled]")||i(this).addClass("fancybox-focus");break;case"focusout":i(".fancybox-button").removeClass("fancybox-focus")}}))}()}}(window,document,jQuery),function(e){"use strict";var t={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(e){return"//maps.google."+e[2]+"/?ll="+(e[9]?e[9]+"&z="+Math.floor(e[10])+(e[12]?e[12].replace(/^\//,"&"):""):e[12]+"").replace(/\?/,"&")+"&output="+(e[12]&&e[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(e){return"//maps.google."+e[2]+"/maps?q="+e[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},i=function(t,i,n){if(t)return n=n||"","object"===e.type(n)&&(n=e.param(n,!0)),e.each(i,(function(e,i){t=t.replace("$"+e,i||"")})),n.length&&(t+=(t.indexOf("?")>0?"&":"?")+n),t};e(document).on("objectNeedsType.fb",(function(n,a,s){var o,r,l,d,c,u,p,h=s.src||"",f=!1;o=e.extend(!0,{},t,s.opts.media),e.each(o,(function(t,n){if(l=h.match(n.matcher)){if(f=n.type,p=t,u={},n.paramPlace&&l[n.paramPlace]){"?"==(c=l[n.paramPlace])[0]&&(c=c.substring(1)),c=c.split("&");for(var a=0;a<c.length;++a){var o=c[a].split("=",2);2==o.length&&(u[o[0]]=decodeURIComponent(o[1].replace(/\+/g," ")))}}return d=e.extend(!0,{},n.params,s.opts[t],u),h="function"===e.type(n.url)?n.url.call(this,l,d,s):i(n.url,l,d),r="function"===e.type(n.thumb)?n.thumb.call(this,l,d,s):i(n.thumb,l),"youtube"===t?h=h.replace(/&t=((\d+)m)?(\d+)s/,(function(e,t,i,n){return"&start="+((i?60*parseInt(i,10):0)+parseInt(n,10))})):"vimeo"===t&&(h=h.replace("&%23","#")),!1}})),f?(s.opts.thumb||s.opts.$thumb&&s.opts.$thumb.length||(s.opts.thumb=r),"iframe"===f&&(s.opts=e.extend(!0,s.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),e.extend(s,{type:f,src:h,origSrc:s.src,contentSource:p,contentType:"image"===f?"image":"gmap_place"==p||"gmap_search"==p?"map":"video"})):h&&(s.type=s.opts.defaultType)}));var n={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(e){var t,i=this;this[e].loaded?setTimeout((function(){i.done(e)})):this[e].loading||(this[e].loading=!0,(t=document.createElement("script")).type="text/javascript",t.src=this[e].src,"youtube"===e?window.onYouTubeIframeAPIReady=function(){i[e].loaded=!0,i.done(e)}:t.onload=function(){i[e].loaded=!0,i.done(e)},document.body.appendChild(t))},done:function(t){var i,n;"youtube"===t&&delete window.onYouTubeIframeAPIReady,(i=e.fancybox.getInstance())&&(n=i.current.$content.find("iframe"),"youtube"===t&&void 0!==YT&&YT?new YT.Player(n.attr("id"),{events:{onStateChange:function(e){0==e.data&&i.next()}}}):"vimeo"===t&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(n).on("ended",(function(){i.next()})))}};e(document).on({"afterShow.fb":function(e,t,i){t.group.length>1&&("youtube"===i.contentSource||"vimeo"===i.contentSource)&&n.load(i.contentSource)}})}(jQuery),function(e,t,i){"use strict";var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||function(t){return e.setTimeout(t,1e3/60)},a=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||function(t){e.clearTimeout(t)},s=function(t){var i=[];for(var n in t=(t=t.originalEvent||t||e.e).touches&&t.touches.length?t.touches:t.changedTouches&&t.changedTouches.length?t.changedTouches:[t])t[n].pageX?i.push({x:t[n].pageX,y:t[n].pageY}):t[n].clientX&&i.push({x:t[n].clientX,y:t[n].clientY});return i},o=function(e,t,i){return t&&e?"x"===i?e.x-t.x:"y"===i?e.y-t.y:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0},r=function(e){if(e.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||i.isFunction(e.get(0).onclick)||e.data("selectable"))return!0;for(var t=0,n=e[0].attributes,a=n.length;t<a;t++)if("data-fancybox-"===n[t].nodeName.substr(0,14))return!0;return!1},l=function(t){var i=e.getComputedStyle(t)["overflow-y"],n=e.getComputedStyle(t)["overflow-x"],a=("scroll"===i||"auto"===i)&&t.scrollHeight>t.clientHeight,s=("scroll"===n||"auto"===n)&&t.scrollWidth>t.clientWidth;return a||s},d=function(e){for(var t=!1;!(t=l(e.get(0)))&&((e=e.parent()).length&&!e.hasClass("fancybox-stage")&&!e.is("body")););return t},c=function(e){var t=this;t.instance=e,t.$bg=e.$refs.bg,t.$stage=e.$refs.stage,t.$container=e.$refs.container,t.destroy(),t.$container.on("touchstart.fb.touch mousedown.fb.touch",i.proxy(t,"ontouchstart"))};c.prototype.destroy=function(){var e=this;e.$container.off(".fb.touch"),i(t).off(".fb.touch"),e.requestId&&(a(e.requestId),e.requestId=null),e.tapped&&(clearTimeout(e.tapped),e.tapped=null)},c.prototype.ontouchstart=function(n){var a=this,l=i(n.target),c=a.instance,u=c.current,p=u.$slide,h=u.$content,f="touchstart"==n.type;if(f&&a.$container.off("mousedown.fb.touch"),(!n.originalEvent||2!=n.originalEvent.button)&&p.length&&l.length&&!r(l)&&!r(l.parent())&&(l.is("img")||!(n.originalEvent.clientX>l[0].clientWidth+l.offset().left))){if(!u||c.isAnimating||u.$slide.hasClass("fancybox-animated"))return n.stopPropagation(),void n.preventDefault();a.realPoints=a.startPoints=s(n),a.startPoints.length&&(u.touch&&n.stopPropagation(),a.startEvent=n,a.canTap=!0,a.$target=l,a.$content=h,a.opts=u.opts.touch,a.isPanning=!1,a.isSwiping=!1,a.isZooming=!1,a.isScrolling=!1,a.canPan=c.canPan(),a.startTime=(new Date).getTime(),a.distanceX=a.distanceY=a.distance=0,a.canvasWidth=Math.round(p[0].clientWidth),a.canvasHeight=Math.round(p[0].clientHeight),a.contentLastPos=null,a.contentStartPos=i.fancybox.getTranslate(a.$content)||{top:0,left:0},a.sliderStartPos=i.fancybox.getTranslate(p),a.stagePos=i.fancybox.getTranslate(c.$refs.stage),a.sliderStartPos.top-=a.stagePos.top,a.sliderStartPos.left-=a.stagePos.left,a.contentStartPos.top-=a.stagePos.top,a.contentStartPos.left-=a.stagePos.left,i(t).off(".fb.touch").on(f?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",i.proxy(a,"ontouchend")).on(f?"touchmove.fb.touch":"mousemove.fb.touch",i.proxy(a,"ontouchmove")),i.fancybox.isMobile&&t.addEventListener("scroll",a.onscroll,!0),((a.opts||a.canPan)&&(l.is(a.$stage)||a.$stage.find(l).length)||(l.is(".fancybox-image")&&n.preventDefault(),i.fancybox.isMobile&&l.parents(".fancybox-caption").length))&&(a.isScrollable=d(l)||d(l.parent()),i.fancybox.isMobile&&a.isScrollable||n.preventDefault(),(1===a.startPoints.length||u.hasError)&&(a.canPan?(i.fancybox.stop(a.$content),a.isPanning=!0):a.isSwiping=!0,a.$container.addClass("fancybox-is-grabbing")),2===a.startPoints.length&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(a.canTap=!1,a.isSwiping=!1,a.isPanning=!1,a.isZooming=!0,i.fancybox.stop(a.$content),a.centerPointStartX=.5*(a.startPoints[0].x+a.startPoints[1].x)-i(e).scrollLeft(),a.centerPointStartY=.5*(a.startPoints[0].y+a.startPoints[1].y)-i(e).scrollTop(),a.percentageOfImageAtPinchPointX=(a.centerPointStartX-a.contentStartPos.left)/a.contentStartPos.width,a.percentageOfImageAtPinchPointY=(a.centerPointStartY-a.contentStartPos.top)/a.contentStartPos.height,a.startDistanceBetweenFingers=o(a.startPoints[0],a.startPoints[1]))))}},c.prototype.onscroll=function(e){this.isScrolling=!0,t.removeEventListener("scroll",this.onscroll,!0)},c.prototype.ontouchmove=function(e){var t=this;return void 0!==e.originalEvent.buttons&&0===e.originalEvent.buttons?void t.ontouchend(e):t.isScrolling?void(t.canTap=!1):(t.newPoints=s(e),void((t.opts||t.canPan)&&t.newPoints.length&&t.newPoints.length&&(t.isSwiping&&!0===t.isSwiping||e.preventDefault(),t.distanceX=o(t.newPoints[0],t.startPoints[0],"x"),t.distanceY=o(t.newPoints[0],t.startPoints[0],"y"),t.distance=o(t.newPoints[0],t.startPoints[0]),t.distance>0&&(t.isSwiping?t.onSwipe(e):t.isPanning?t.onPan():t.isZooming&&t.onZoom()))))},c.prototype.onSwipe=function(t){var s,o=this,r=o.instance,l=o.isSwiping,d=o.sliderStartPos.left||0;if(!0!==l)"x"==l&&(o.distanceX>0&&(o.instance.group.length<2||0===o.instance.current.index&&!o.instance.current.opts.loop)?d+=Math.pow(o.distanceX,.8):o.distanceX<0&&(o.instance.group.length<2||o.instance.current.index===o.instance.group.length-1&&!o.instance.current.opts.loop)?d-=Math.pow(-o.distanceX,.8):d+=o.distanceX),o.sliderLastPos={top:"x"==l?0:o.sliderStartPos.top+o.distanceY,left:d},o.requestId&&(a(o.requestId),o.requestId=null),o.requestId=n((function(){o.sliderLastPos&&(i.each(o.instance.slides,(function(e,t){var n=t.pos-o.instance.currPos;i.fancybox.setTranslate(t.$slide,{top:o.sliderLastPos.top,left:o.sliderLastPos.left+n*o.canvasWidth+n*t.opts.gutter})})),o.$container.addClass("fancybox-is-sliding"))}));else if(Math.abs(o.distance)>10){if(o.canTap=!1,r.group.length<2&&o.opts.vertical?o.isSwiping="y":r.isDragging||!1===o.opts.vertical||"auto"===o.opts.vertical&&i(e).width()>800?o.isSwiping="x":(s=Math.abs(180*Math.atan2(o.distanceY,o.distanceX)/Math.PI),o.isSwiping=s>45&&s<135?"y":"x"),"y"===o.isSwiping&&i.fancybox.isMobile&&o.isScrollable)return void(o.isScrolling=!0);r.isDragging=o.isSwiping,o.startPoints=o.newPoints,i.each(r.slides,(function(e,t){var n,a;i.fancybox.stop(t.$slide),n=i.fancybox.getTranslate(t.$slide),a=i.fancybox.getTranslate(r.$refs.stage),t.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass((function(e,t){return(t.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")})),t.pos===r.current.pos&&(o.sliderStartPos.top=n.top-a.top,o.sliderStartPos.left=n.left-a.left),i.fancybox.setTranslate(t.$slide,{top:n.top-a.top,left:n.left-a.left})})),r.SlideShow&&r.SlideShow.isActive&&r.SlideShow.stop()}},c.prototype.onPan=function(){var e=this;o(e.newPoints[0],e.realPoints[0])<(i.fancybox.isMobile?10:5)?e.startPoints=e.newPoints:(e.canTap=!1,e.contentLastPos=e.limitMovement(),e.requestId&&a(e.requestId),e.requestId=n((function(){i.fancybox.setTranslate(e.$content,e.contentLastPos)})))},c.prototype.limitMovement=function(){var e,t,i,n,a,s,o=this,r=o.canvasWidth,l=o.canvasHeight,d=o.distanceX,c=o.distanceY,u=o.contentStartPos,p=u.left,h=u.top,f=u.width,m=u.height;return a=f>r?p+d:p,s=h+c,e=Math.max(0,.5*r-.5*f),t=Math.max(0,.5*l-.5*m),i=Math.min(r-f,.5*r-.5*f),n=Math.min(l-m,.5*l-.5*m),d>0&&a>e&&(a=e-1+Math.pow(-e+p+d,.8)||0),d<0&&a<i&&(a=i+1-Math.pow(i-p-d,.8)||0),c>0&&s>t&&(s=t-1+Math.pow(-t+h+c,.8)||0),c<0&&s<n&&(s=n+1-Math.pow(n-h-c,.8)||0),{top:s,left:a}},c.prototype.limitPosition=function(e,t,i,n){var a=this.canvasWidth,s=this.canvasHeight;return i>a?e=(e=e>0?0:e)<a-i?a-i:e:e=Math.max(0,a/2-i/2),n>s?t=(t=t>0?0:t)<s-n?s-n:t:t=Math.max(0,s/2-n/2),{top:t,left:e}},c.prototype.onZoom=function(){var t=this,s=t.contentStartPos,r=s.width,l=s.height,d=s.left,c=s.top,u=o(t.newPoints[0],t.newPoints[1])/t.startDistanceBetweenFingers,p=Math.floor(r*u),h=Math.floor(l*u),f=(r-p)*t.percentageOfImageAtPinchPointX,m=(l-h)*t.percentageOfImageAtPinchPointY,v=(t.newPoints[0].x+t.newPoints[1].x)/2-i(e).scrollLeft(),b=(t.newPoints[0].y+t.newPoints[1].y)/2-i(e).scrollTop(),g=v-t.centerPointStartX,_={top:c+(m+(b-t.centerPointStartY)),left:d+(f+g),scaleX:u,scaleY:u};t.canTap=!1,t.newWidth=p,t.newHeight=h,t.contentLastPos=_,t.requestId&&a(t.requestId),t.requestId=n((function(){i.fancybox.setTranslate(t.$content,t.contentLastPos)}))},c.prototype.ontouchend=function(e){var n=this,o=n.isSwiping,r=n.isPanning,l=n.isZooming,d=n.isScrolling;if(n.endPoints=s(e),n.dMs=Math.max((new Date).getTime()-n.startTime,1),n.$container.removeClass("fancybox-is-grabbing"),i(t).off(".fb.touch"),t.removeEventListener("scroll",n.onscroll,!0),n.requestId&&(a(n.requestId),n.requestId=null),n.isSwiping=!1,n.isPanning=!1,n.isZooming=!1,n.isScrolling=!1,n.instance.isDragging=!1,n.canTap)return n.onTap(e);n.speed=100,n.velocityX=n.distanceX/n.dMs*.5,n.velocityY=n.distanceY/n.dMs*.5,r?n.endPanning():l?n.endZooming():n.endSwiping(o,d)},c.prototype.endSwiping=function(e,t){var n=this,a=!1,s=n.instance.group.length,o=Math.abs(n.distanceX),r="x"==e&&s>1&&(n.dMs>130&&o>10||o>50);n.sliderLastPos=null,"y"==e&&!t&&Math.abs(n.distanceY)>50?(i.fancybox.animate(n.instance.current.$slide,{top:n.sliderStartPos.top+n.distanceY+150*n.velocityY,opacity:0},200),a=n.instance.close(!0,250)):r&&n.distanceX>0?a=n.instance.previous(300):r&&n.distanceX<0&&(a=n.instance.next(300)),!1!==a||"x"!=e&&"y"!=e||n.instance.centerSlide(200),n.$container.removeClass("fancybox-is-sliding")},c.prototype.endPanning=function(){var e,t,n,a=this;a.contentLastPos&&(!1===a.opts.momentum||a.dMs>350?(e=a.contentLastPos.left,t=a.contentLastPos.top):(e=a.contentLastPos.left+500*a.velocityX,t=a.contentLastPos.top+500*a.velocityY),(n=a.limitPosition(e,t,a.contentStartPos.width,a.contentStartPos.height)).width=a.contentStartPos.width,n.height=a.contentStartPos.height,i.fancybox.animate(a.$content,n,366))},c.prototype.endZooming=function(){var e,t,n,a,s=this,o=s.instance.current,r=s.newWidth,l=s.newHeight;s.contentLastPos&&(e=s.contentLastPos.left,a={top:t=s.contentLastPos.top,left:e,width:r,height:l,scaleX:1,scaleY:1},i.fancybox.setTranslate(s.$content,a),r<s.canvasWidth&&l<s.canvasHeight?s.instance.scaleToFit(150):r>o.width||l>o.height?s.instance.scaleToActual(s.centerPointStartX,s.centerPointStartY,150):(n=s.limitPosition(e,t,r,l),i.fancybox.animate(s.$content,n,150)))},c.prototype.onTap=function(t){var n,a=this,o=i(t.target),r=a.instance,l=r.current,d=t&&s(t)||a.startPoints,c=d[0]?d[0].x-i(e).scrollLeft()-a.stagePos.left:0,u=d[0]?d[0].y-i(e).scrollTop()-a.stagePos.top:0,p=function(e){var n=l.opts[e];if(i.isFunction(n)&&(n=n.apply(r,[l,t])),n)switch(n){case"close":r.close(a.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(a.startEvent);break;case"zoom":"image"==l.type&&(l.isLoaded||l.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(c,u):r.group.length<2&&r.close(a.startEvent))}};if((!t.originalEvent||2!=t.originalEvent.button)&&(o.is("img")||!(c>o[0].clientWidth+o.offset().left))){if(o.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))n="Outside";else if(o.is(".fancybox-slide"))n="Slide";else{if(!r.current.$content||!r.current.$content.find(o).addBack().filter(o).length)return;n="Content"}if(a.tapped){if(clearTimeout(a.tapped),a.tapped=null,Math.abs(c-a.tapX)>50||Math.abs(u-a.tapY)>50)return this;p("dblclick"+n)}else a.tapX=c,a.tapY=u,l.opts["dblclick"+n]&&l.opts["dblclick"+n]!==l.opts["click"+n]?a.tapped=setTimeout((function(){a.tapped=null,r.isAnimating||p("click"+n)}),500):p("click"+n);return this}},i(t).on("onActivate.fb",(function(e,t){t&&!t.Guestures&&(t.Guestures=new c(t))})).on("beforeClose.fb",(function(e,t){t&&t.Guestures&&t.Guestures.destroy()}))}(window,document,jQuery),function(e,t){"use strict";t.extend(!0,t.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var i=function(e){this.instance=e,this.init()};t.extend(i.prototype,{timer:null,isActive:!1,$button:null,init:function(){var e=this,i=e.instance,n=i.group[i.currIndex].opts.slideShow;e.$button=i.$refs.toolbar.find("[data-fancybox-play]").on("click",(function(){e.toggle()})),i.group.length<2||!n?e.$button.hide():n.progress&&(e.$progress=t('<div class="fancybox-progress"></div>').appendTo(i.$refs.inner))},set:function(e){var i=this,n=i.instance,a=n.current;a&&(!0===e||a.opts.loop||n.currIndex<n.group.length-1)?i.isActive&&"video"!==a.contentType&&(i.$progress&&t.fancybox.animate(i.$progress.show(),{scaleX:1},a.opts.slideShow.speed),i.timer=setTimeout((function(){n.current.opts.loop||n.current.index!=n.group.length-1?n.next():n.jumpTo(0)}),a.opts.slideShow.speed)):(i.stop(),n.idleSecondsCounter=0,n.showControls())},clear:function(){var e=this;clearTimeout(e.timer),e.timer=null,e.$progress&&e.$progress.removeAttr("style").hide()},start:function(){var e=this,t=e.instance.current;t&&(e.$button.attr("title",(t.opts.i18n[t.opts.lang]||t.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),e.isActive=!0,t.isComplete&&e.set(!0),e.instance.trigger("onSlideShowChange",!0))},stop:function(){var e=this,t=e.instance.current;e.clear(),e.$button.attr("title",(t.opts.i18n[t.opts.lang]||t.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),e.isActive=!1,e.instance.trigger("onSlideShowChange",!1),e.$progress&&e.$progress.removeAttr("style").hide()},toggle:function(){var e=this;e.isActive?e.stop():e.start()}}),t(e).on({"onInit.fb":function(e,t){t&&!t.SlideShow&&(t.SlideShow=new i(t))},"beforeShow.fb":function(e,t,i,n){var a=t&&t.SlideShow;n?a&&i.opts.slideShow.autoStart&&a.start():a&&a.isActive&&a.clear()},"afterShow.fb":function(e,t,i){var n=t&&t.SlideShow;n&&n.isActive&&n.set()},"afterKeydown.fb":function(i,n,a,s,o){var r=n&&n.SlideShow;!r||!a.opts.slideShow||80!==o&&32!==o||t(e.activeElement).is("button,a,input")||(s.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(e,t){var i=t&&t.SlideShow;i&&i.stop()}}),t(e).on("visibilitychange",(function(){var i=t.fancybox.getInstance(),n=i&&i.SlideShow;n&&n.isActive&&(e.hidden?n.clear():n.set())}))}(document,jQuery),function(e,t){"use strict";var i=function(){for(var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i={},n=0;n<t.length;n++){var a=t[n];if(a&&a[1]in e){for(var s=0;s<a.length;s++)i[t[0][s]]=a[s];return i}}return!1}();if(i){var n={request:function(t){(t=t||e.documentElement)[i.requestFullscreen](t.ALLOW_KEYBOARD_INPUT)},exit:function(){e[i.exitFullscreen]()},toggle:function(t){t=t||e.documentElement,this.isFullscreen()?this.exit():this.request(t)},isFullscreen:function(){return Boolean(e[i.fullscreenElement])},enabled:function(){return Boolean(e[i.fullscreenEnabled])}};t.extend(!0,t.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),t(e).on(i.fullscreenchange,(function(){var e=n.isFullscreen(),i=t.fancybox.getInstance();i&&(i.current&&"image"===i.current.type&&i.isAnimating&&(i.isAnimating=!1,i.update(!0,!0,0),i.isComplete||i.complete()),i.trigger("onFullscreenChange",e),i.$refs.container.toggleClass("fancybox-is-fullscreen",e),i.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!e).toggleClass("fancybox-button--fsexit",e))}))}t(e).on({"onInit.fb":function(e,t){i?t&&t.group[t.currIndex].opts.fullScreen?(t.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",(function(e){e.stopPropagation(),e.preventDefault(),n.toggle()})),t.opts.fullScreen&&!0===t.opts.fullScreen.autoStart&&n.request(),t.FullScreen=n):t&&t.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():t.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(e,t,i,n,a){t&&t.FullScreen&&70===a&&(n.preventDefault(),t.FullScreen.toggle())},"beforeClose.fb":function(e,t){t&&t.FullScreen&&t.$refs.container.hasClass("fancybox-is-fullscreen")&&n.exit()}})}(document,jQuery),function(e,t){"use strict";var i="fancybox-thumbs";t.fancybox.defaults=t.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},t.fancybox.defaults);var n=function(e){this.init(e)};t.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(e){var t=this,i=e.group,n=0;t.instance=e,t.opts=i[e.currIndex].opts.thumbs,e.Thumbs=t,t.$button=e.$refs.toolbar.find("[data-fancybox-thumbs]");for(var a=0,s=i.length;a<s&&(i[a].thumb&&n++,!(n>1));a++);n>1&&t.opts?(t.$button.removeAttr("style").on("click",(function(){t.toggle()})),t.isActive=!0):t.$button.hide()},create:function(){var e,n=this,a=n.instance,s=n.opts.parentEl,o=[];n.$grid||(n.$grid=t('<div class="'+i+" "+i+"-"+n.opts.axis+'"></div>').appendTo(a.$refs.container.find(s).addBack().filter(s)),n.$grid.on("click","a",(function(){a.jumpTo(t(this).attr("data-index"))}))),n.$list||(n.$list=t('<div class="'+i+'__list">').appendTo(n.$grid)),t.each(a.group,(function(t,i){(e=i.thumb)||"image"!==i.type||(e=i.src),o.push('<a href="javascript:;" tabindex="0" data-index="'+t+'"'+(e&&e.length?' style="background-image:url('+e+')"':'class="fancybox-thumbs-missing"')+"></a>")})),n.$list[0].innerHTML=o.join(""),"x"===n.opts.axis&&n.$list.width(parseInt(n.$grid.css("padding-right"),10)+a.group.length*n.$list.children().eq(0).outerWidth(!0))},focus:function(e){var t,i,n=this,a=n.$list,s=n.$grid;n.instance.current&&(i=(t=a.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+n.instance.current.index+'"]').addClass("fancybox-thumbs-active")).position(),"y"===n.opts.axis&&(i.top<0||i.top>a.height()-t.outerHeight())?a.stop().animate({scrollTop:a.scrollTop()+i.top},e):"x"===n.opts.axis&&(i.left<s.scrollLeft()||i.left>s.scrollLeft()+(s.width()-t.outerWidth()))&&a.parent().stop().animate({scrollLeft:i.left},e))},update:function(){var e=this;e.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),e.isVisible?(e.$grid||e.create(),e.instance.trigger("onThumbsShow"),e.focus(0)):e.$grid&&e.instance.trigger("onThumbsHide"),e.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),t(e).on({"onInit.fb":function(e,t){var i;t&&!t.Thumbs&&((i=new n(t)).isActive&&!0===i.opts.autoStart&&i.show())},"beforeShow.fb":function(e,t,i,n){var a=t&&t.Thumbs;a&&a.isVisible&&a.focus(n?0:250)},"afterKeydown.fb":function(e,t,i,n,a){var s=t&&t.Thumbs;s&&s.isActive&&71===a&&(n.preventDefault(),s.toggle())},"beforeClose.fb":function(e,t){var i=t&&t.Thumbs;i&&i.isVisible&&!1!==i.opts.hideOnClose&&i.$grid.hide()}})}(document,jQuery),function(e,t){"use strict";t.extend(!0,t.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(e,t){return!e.currentHash&&"inline"!==t.type&&"html"!==t.type&&(t.origSrc||t.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),t(e).on("click","[data-fancybox-share]",(function(){var e,i,n=t.fancybox.getInstance(),a=n.current||null;a&&("function"===t.type(a.opts.share.url)&&(e=a.opts.share.url.apply(a,[n,a])),i=a.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===a.type?encodeURIComponent(a.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(e)).replace(/\{\{url_raw\}\}/g,function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}(e)).replace(/\{\{descr\}\}/g,n.$caption?encodeURIComponent(n.$caption.text()):""),t.fancybox.open({src:n.translate(n,i),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(e,t){n.$refs.container.one("beforeClose.fb",(function(){e.close(null,0)})),t.$content.find(".fancybox-share__button").click((function(){return window.open(this.href,"Share","width=550, height=450"),!1}))},mobile:{autoFocus:!1}}}))}))}(document,jQuery),function(e,t,i){"use strict";function n(){var t=e.location.hash.substr(1),i=t.split("-"),n=i.length>1&&/^\+?\d+$/.test(i[i.length-1])&&parseInt(i.pop(-1),10)||1;return{hash:t,index:n<1?1:n,gallery:i.join("-")}}function a(e){""!==e.gallery&&i("[data-fancybox='"+i.escapeSelector(e.gallery)+"']").eq(e.index-1).focus().trigger("click.fb-start")}function s(e){var t,i;return!!e&&(""!==(i=(t=e.current?e.current.opts:e.opts).hash||(t.$orig?t.$orig.data("fancybox")||t.$orig.data("fancybox-trigger"):""))&&i)}i.escapeSelector||(i.escapeSelector=function(e){return(e+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}))}),i((function(){!1!==i.fancybox.defaults.hash&&(i(t).on({"onInit.fb":function(e,t){var i,a;!1!==t.group[t.currIndex].opts.hash&&(i=n(),(a=s(t))&&i.gallery&&a==i.gallery&&(t.currIndex=i.index-1))},"beforeShow.fb":function(i,n,a,o){var r;a&&!1!==a.opts.hash&&(r=s(n))&&(n.currentHash=r+(n.group.length>1?"-"+(a.index+1):""),e.location.hash!=="#"+n.currentHash&&(o&&!n.origHash&&(n.origHash=e.location.hash),n.hashTimer&&clearTimeout(n.hashTimer),n.hashTimer=setTimeout((function(){"replaceState"in e.history?(e.history[o?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+n.currentHash),o&&(n.hasCreatedHistory=!0)):e.location.hash=n.currentHash,n.hashTimer=null}),300)))},"beforeClose.fb":function(i,n,a){a&&!1!==a.opts.hash&&(clearTimeout(n.hashTimer),n.currentHash&&n.hasCreatedHistory?e.history.back():n.currentHash&&("replaceState"in e.history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+(n.origHash||"")):e.location.hash=n.origHash),n.currentHash=null)}}),i(e).on("hashchange.fb",(function(){var e=n(),t=null;i.each(i(".fancybox-container").get().reverse(),(function(e,n){var a=i(n).data("FancyBox");if(a&&a.currentHash)return t=a,!1})),t?t.currentHash===e.gallery+"-"+e.index||1===e.index&&t.currentHash==e.gallery||(t.currentHash=null,t.close()):""!==e.gallery&&a(e)})),setTimeout((function(){i.fancybox.getInstance()||a(n())}),50))}))}(window,document,jQuery),function(e,t){"use strict";var i=(new Date).getTime();t(e).on({"onInit.fb":function(e,t,n){t.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",(function(e){var n=t.current,a=(new Date).getTime();t.group.length<2||!1===n.opts.wheel||"auto"===n.opts.wheel&&"image"!==n.type||(e.preventDefault(),e.stopPropagation(),n.$slide.hasClass("fancybox-animated")||(e=e.originalEvent||e,a-i<250||(i=a,t[(-e.deltaY||-e.deltaX||e.wheelDelta||-e.detail)<0?"next":"previous"]())))}))}})}(document,jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}((function(e){var t,i=navigator.userAgent,n=/iphone/i.test(i),a=/chrome/i.test(i),s=/android/i.test(i);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(i,o){var r,l,d,c,u,p,h;if(!i&&this.length>0){var f=e(this[0]).data(e.mask.dataName);return f?f():void 0}return o=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},o),r=e.mask.definitions,l=[],d=p=i.length,c=null,e.each(i.split(""),(function(e,t){"?"==t?(p--,d=e):r[t]?(l.push(new RegExp(r[t])),null===c&&(c=l.length-1),d>e&&(u=l.length-1)):l.push(null)})),this.trigger("unmask").each((function(){function f(){if(o.completed){for(var e=c;u>=e;e++)if(l[e]&&k[e]===m(e))return;o.completed.call(w)}}function m(e){return o.placeholder.charAt(e<o.placeholder.length?e:0)}function v(e){for(;++e<p&&!l[e];);return e}function b(e,t){var i,n;if(!(0>e)){for(i=e,n=v(t);p>i;i++)if(l[i]){if(!(p>n&&l[i].test(k[n])))break;k[i]=k[n],k[n]=m(n),n=v(n)}y(),w.caret(Math.max(c,e))}}function g(){$(),w.val()!=x&&w.change()}function _(e,t){var i;for(i=e;t>i&&p>i;i++)l[i]&&(k[i]=m(i))}function y(){w.val(k.join(""))}function $(e){var t,i,n,a=w.val(),s=-1;for(t=0,n=0;p>t;t++)if(l[t]){for(k[t]=m(t);n++<a.length;)if(i=a.charAt(n-1),l[t].test(i)){k[t]=i,s=t;break}if(n>a.length){_(t+1,p);break}}else k[t]===a.charAt(n)&&n++,d>t&&(s=t);return e?y():d>s+1?o.autoclear||k.join("")===C?(w.val()&&w.val(""),_(0,p)):y():(y(),w.val(w.val().substring(0,s+1))),d?t:c}var w=e(this),k=e.map(i.split(""),(function(e,t){return"?"!=e?r[e]?m(t):e:void 0})),C=k.join(""),x=w.val();w.data(e.mask.dataName,(function(){return e.map(k,(function(e,t){return l[t]&&e!=m(t)?e:null})).join("")})),w.one("unmask",(function(){w.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;w.prop("readonly")||(clearTimeout(t),x=w.val(),e=$(),t=setTimeout((function(){w.get(0)===document.activeElement&&(y(),e==i.replace("?","").length?w.caret(0,e):w.caret(e))}),10))})).on("blur.mask",g).on("keydown.mask",(function(e){if(!w.prop("readonly")){var t,i,a,s=e.which||e.keyCode;h=w.val(),8===s||46===s||n&&127===s?(i=(t=w.caret()).begin,(a=t.end)-i==0&&(i=46!==s?function(e){for(;--e>=0&&!l[e];);return e}(i):a=v(i-1),a=46===s?v(a):a),_(i,a),b(i,a-1),e.preventDefault()):13===s?g.call(this,e):27===s&&(w.val(x),w.caret(0,$()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!w.prop("readonly")){var i,n,a,o=t.which||t.keyCode,r=w.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>o)&&o&&13!==o){if(r.end-r.begin!=0&&(_(r.begin,r.end),b(r.begin,r.end-1)),i=v(r.begin-1),p>i&&(n=String.fromCharCode(o),l[i].test(n))){if(function(e){var t,i,n,a;for(t=e,i=m(e);p>t;t++)if(l[t]){if(n=v(t),a=k[t],k[t]=i,!(p>n&&l[n].test(a)))break;i=a}}(i),k[i]=n,y(),a=v(i),s){setTimeout((function(){e.proxy(e.fn.caret,w,a)()}),0)}else w.caret(a);r.begin<=u&&f()}t.preventDefault()}}})).on("input.mask paste.mask",(function(){w.prop("readonly")||setTimeout((function(){var e=$(!0);w.caret(e),f()}),0)})),a&&s&&w.off("input.mask").on("input.mask",(function(){var e=w.val(),t=w.caret();if(h&&h.length&&h.length>e.length){for($(!0);t.begin>0&&!l[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<c&&!l[t.begin];)t.begin++;w.caret(t.begin,t.begin)}else{for($(!0);t.begin<p&&!l[t.begin];)t.begin++;w.caret(t.begin,t.begin)}f()})),$()}))}})})),function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){"undefined"!=typeof console&&void 0!==console.debug?console.log(e):alert(e)}function buildParserCache(e,t){if(e.config.debug)var i="";var n=e.tBodies[0].rows;if(e.tBodies[0].rows[0])for(var a=[],s=n[0].cells,o=s.length,r=0;r<o;r++){var l=!1;$.metadata&&$(t[r]).metadata()&&$(t[r]).metadata().sorter?l=getParserById($(t[r]).metadata().sorter):e.config.headers[r]&&e.config.headers[r].sorter&&(l=getParserById(e.config.headers[r].sorter)),l||(l=detectParserForColumn(e,s[r])),e.config.debug&&(i+="column:"+r+" parser:"+l.id+"\n"),a.push(l)}return e.config.debug&&log(i),a}function detectParserForColumn(e,t){for(var i=parsers.length,n=1;n<i;n++)if(parsers[n].is($.trim(getElementText(e.config,t)),e,t))return parsers[n];return parsers[0]}function getParserById(e){for(var t=parsers.length,i=0;i<t;i++)if(parsers[i].id.toLowerCase()==e.toLowerCase())return parsers[i];return!1}function buildCache(e){if(e.config.debug)var t=new Date;for(var i=e.tBodies[0]&&e.tBodies[0].rows.length||0,n=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,a=e.config.parsers,s={row:[],normalized:[]},o=0;o<i;++o){var r=e.tBodies[0].rows[o],l=[];s.row.push($(r));for(var d=0;d<n;++d)l.push(a[d].format(getElementText(e.config,r.cells[d]),e,r.cells[d]));l.push(o),s.normalized.push(l),l=null}return e.config.debug&&benchmark("Building cache for "+i+" rows:",t),s}function getElementText(e,t){if(!t)return"";return"simple"==e.textExtraction?t.childNodes[0]&&t.childNodes[0].hasChildNodes()?t.childNodes[0].innerHTML:t.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(t):$(t).text()}function appendToTable(e,t){if(e.config.debug)var i=new Date;for(var n=t,a=n.row,s=n.normalized,o=s.length,r=s[0].length-1,l=$(e.tBodies[0]),d=[],c=0;c<o;c++)if(d.push(a[s[c][r]]),!e.config.appender)for(var u=a[s[c][r]],p=u.length,h=0;h<p;h++)l[0].appendChild(u[h]);e.config.appender&&e.config.appender(e,d),d=null,e.config.debug&&benchmark("Rebuilt table:",i),applyWidget(e),setTimeout((function(){$(e).trigger("sortEnd")}),0)}function buildHeaders(e){if(e.config.debug)var t=new Date;$.metadata;for(var i=[],n=0;n<e.tHead.rows.length;n++)i[n]=0;return $tableHeaders=$("thead th",e),$tableHeaders.each((function(t){this.count=0,this.column=t,this.order=formatSortingOrder(e.config.sortInitialOrder),(checkHeaderMetadata(this)||checkHeaderOptions(e,t))&&(this.sortDisabled=!0),this.sortDisabled||$(this).addClass(e.config.cssHeader),e.config.headerList[t]=this})),e.config.debug&&(benchmark("Built headers:",t),log($tableHeaders)),$tableHeaders}function checkCellColSpan(e,t,i){for(var n=[],a=e.tHead.rows,s=a[i].cells,o=0;o<s.length;o++){var r=s[o];r.colSpan>1?n=n.concat(checkCellColSpan(e,headerArr,i++)):(1==e.tHead.length||r.rowSpan>1||!a[i+1])&&n.push(r)}return n}function checkHeaderMetadata(e){return!(!$.metadata||!1!==$(e).metadata().sorter)}function checkHeaderOptions(e,t){return!(!e.config.headers[t]||!1!==e.config.headers[t].sorter)}function applyWidget(e){for(var t=e.config.widgets,i=t.length,n=0;n<i;n++)getWidgetById(t[n]).format(e)}function getWidgetById(e){for(var t=widgets.length,i=0;i<t;i++)if(widgets[i].id.toLowerCase()==e.toLowerCase())return widgets[i]}function formatSortingOrder(e){return i="Number"!=typeof e?"desc"==e.toLowerCase()?1:0:1==e?e:0,i}function isValueInArray(e,t){for(var i=t.length,n=0;n<i;n++)if(t[n][0]==e)return!0;return!1}function setHeadersCss(e,t,i,n){t.removeClass(n[0]).removeClass(n[1]);var a=[];t.each((function(e){this.sortDisabled||(a[this.column]=$(this))}));for(var s=i.length,o=0;o<s;o++)a[i[o][0]].addClass(n[i[o][1]])}function fixColumnWidth(e,t){if(e.config.widthFixed){var i=$("<colgroup>");$("tr:first td",e.tBodies[0]).each((function(){i.append($("<col>").css("width",$(this).width()))})),$(e).prepend(i)}}function updateHeaderSortCount(e,t){for(var i=e.config,n=t.length,a=0;a<n;a++){var s=t[a],o=i.headerList[s[0]];o.count=s[1],o.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==getCachedSortType(table.config.parsers,c)?0==order?"sortText":"sortTextDesc":0==order?"sortNumeric":"sortNumericDesc",e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ",dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function sortText(e,t){return e<t?-1:e>t?1:0}function sortTextDesc(e,t){return t<e?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:!1},this.benchmark=benchmark,this.construct=function(e){return this.each((function(){if(this.tHead&&this.tBodies){var t,i,n,a;this.config={},a=$.extend(this.config,$.tablesorter.defaults,e),t=$(this),i=buildHeaders(this),this.config.parsers=buildParserCache(this,i),n=buildCache(this);var s=[a.cssDesc,a.cssAsc];fixColumnWidth(this),i.click((function(e){t.trigger("sortStart");var o=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&o>0){$(this);var r=this.column;if(this.order=this.count++%2,e[a.sortMultiSortKey])if(isValueInArray(r,a.sortList))for(u=0;u<a.sortList.length;u++){var l=a.sortList[u],d=a.headerList[l[0]];l[0]==r&&(d.count=l[1],d.count++,l[1]=d.count%2)}else a.sortList.push([r,this.order]);else{if(a.sortList=[],null!=a.sortForce)for(var c=a.sortForce,u=0;u<c.length;u++)c[u][0]!=r&&a.sortList.push(c[u]);a.sortList.push([r,this.order])}return setTimeout((function(){setHeadersCss(t[0],i,a.sortList,s),appendToTable(t[0],multisort(t[0],a.sortList,n))}),1),!1}})).mousedown((function(){if(a.cancelSelection)return this.onselectstart=function(){return!1},!1})),t.bind("update",(function(){this.config.parsers=buildParserCache(this,i),n=buildCache(this)})).bind("sorton",(function(e,t){$(this).trigger("sortStart"),a.sortList=t;var o=a.sortList;updateHeaderSortCount(this,o),setHeadersCss(this,i,o,s),appendToTable(this,multisort(this,o,n))})).bind("appendCache",(function(){appendToTable(this,n)})).bind("applyWidgetId",(function(e,t){getWidgetById(t).format(this)})).bind("applyWidgets",(function(){applyWidget(this)})),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(a.sortList=$(this).metadata().sortlist),a.sortList.length>0&&t.trigger("sorton",[a.sortList]),applyWidget(this)}}))},this.addParser=function(e){for(var t=parsers.length,i=!0,n=0;n<t;n++)parsers[n].id.toLowerCase()==e.id.toLowerCase()&&(i=!1);i&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t},this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t},this.isDigit=function(e,t){var i="\\"+t.decimal;return RegExp("/(^[+]?0("+i+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+i+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+i+"0+$)/").test($.trim(e))},this.clearTableBody=function(e){if($.browser.msie){(function(){for(;this.firstChild;)this.removeChild(this.firstChild)}).apply(e.tBodies[0])}else e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(e){return!0},format:function(e){return $.trim(e.toLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){var i=t.config;return $.tablesorter.isDigit(e,i)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return/^[A?$a��?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){for(var t=e.split("."),i="",n=t.length,a=0;a<n;a++){var s=t[a];2==s.length?i+="0"+s:i+=s}return $.tablesorter.formatFloat(i)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(""!=e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var i=t.config;return e=e.replace(/\-/g,"/"),"us"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"dd/mm/yy"!=i.dateFormat&&"dd-mm-yy"!=i.dateFormat||(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(e){return!1},format:function(e,t,i){var n=t.config,a=n.parserMetadataName?n.parserMetadataName:"sortValue";return $(i).metadata()[a]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;$("tr:visible",e.tBodies[0]).filter(":even").removeClass(e.config.widgetZebra.css[1]).addClass(e.config.widgetZebra.css[0]).end().filter(":odd").removeClass(e.config.widgetZebra.css[0]).addClass(e.config.widgetZebra.css[1]),e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",(function(t){i.submitButton=t.currentTarget,e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)})),this.on("submit.validate",(function(t){function n(){var n,a;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(a=i.settings.submitHandler.call(i,i.currentForm,t),n&&n.remove(),void 0!==a&&a)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)}))),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i,n;return e(this[0]).is("form")?t=this.validate().form():(n=[],t=!0,i=e(this[0].form).validate(),this.each((function(){(t=i.element(this)&&t)||(n=n.concat(i.errorList))})),i.errorList=n),t},rules:function(t,i){var n,a,s,o,r,l,d=this[0],c=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=d&&(!d.form&&c&&(d.form=this.closest("form")[0],d.name=this.attr("name")),null!=d.form)){if(t)switch(n=e.data(d.form,"validator").settings,a=n.rules,s=e.validator.staticRules(d),t){case"add":e.extend(s,e.validator.normalizeRule(i)),delete s.messages,a[d.name]=s,i.messages&&(n.messages[d.name]=e.extend(n.messages[d.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),(function(e,t){l[t]=s[t],delete s[t]})),l):(delete a[d.name],s)}return(o=e.validator.normalizeRules(e.extend({},e.validator.classRules(d),e.validator.attributeRules(d),e.validator.dataRules(d),e.validator.staticRules(d)),d)).required&&(r=o.required,delete o.required,o=e.extend({required:r},o)),o.remote&&(r=o.remote,delete o.remote,o=e.extend(o,{remote:r})),o}}}),e.extend(e.expr.pseudos||e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var i=e(t).val();return null!==i&&!!e.trim(""+i)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(void 0===i||(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,(function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),(function(){return i}))}))),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=void 0!==e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");if(!this.form&&i&&(this.form=e(this).closest("form")[0],this.name=e(this).attr("name")),n===this.form){var a=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),o=a.settings;o[s]&&!e(this).is(o.ignore)&&o[s].call(a,this,t)}}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.currentForm,a=this.groups={};e.each(this.settings.groups,(function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,(function(e,i){a[i]=t}))})),i=this.settings.rules,e.each(i,(function(t,n){i[t]=e.validator.normalizeRule(n)})),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i,n,a=this.clean(t),s=this.validationTargetFor(a),o=this,r=!0;return void 0===s?delete this.invalid[a.name]:(this.prepareElement(s),this.currentElements=e(s),(n=this.groups[s.name])&&e.each(this.groups,(function(e,t){t===n&&e!==s.name&&((a=o.validationTargetFor(o.clean(o.findByName(e))))&&a.name in o.invalid&&(o.currentElements.push(a),r=o.check(a)&&r))})),i=!1!==this.check(s),r=r&&i,this.invalid[s.name]=!i,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!i)),r},showErrors:function(t){if(t){var i=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,(function(e,t){return{message:e,element:i.findByName(t)[0]}})),this.successList=e.grep(this.successList,(function(e){return!(e.name in t)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,(function(e){return e.element.name===t.name})).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter((function(){var n=this.name||e(this).attr("name"),a=void 0!==e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");return!n&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),a&&(this.form=e(this).closest("form")[0],this.name=n),!(this.form!==t.currentForm||n in i||!t.objectLength(e(this).rules())||(i[n]=!0,0))}))},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,n,a=e(t),s=t.type,o=void 0!==a.attr("contenteditable")&&"false"!==a.attr("contenteditable");return"radio"===s||"checkbox"===s?this.findByName(t.name).filter(":checked").val():"number"===s&&void 0!==t.validity?t.validity.badInput?"NaN":a.val():(i=o?a.text():a.val(),"file"===s?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(n=i.lastIndexOf("/"))>=0?i.substr(n+1):(n=i.lastIndexOf("\\"))>=0?i.substr(n+1):i:"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n,a,s,o=e(t).rules(),r=e.map(o,(function(e,t){return t})).length,l=!1,d=this.elementValue(t);for(n in"function"==typeof o.normalizer?s=o.normalizer:"function"==typeof this.settings.normalizer&&(s=this.settings.normalizer),s&&(d=s.call(t,d),delete o.normalizer),o){a={method:n,parameters:o[n]};try{if("dependency-mismatch"===(i=e.validator.methods[n].call(this,d,t,a.parameters))&&1===r){l=!0;continue}if(l=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,a),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+a.method+"' method."),e}}if(!l)return this.objectLength(o)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){"string"==typeof i&&(i={method:i});var n=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),a=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,i.parameters,t):a.test(n)&&(n=e.validator.format(n.replace(a,"{$1}"),i.parameters)),n},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map((function(){return this.element}))},showLabel:function(t,i){var n,a,s,o,r=this.errorsFor(t),l=this.idOrName(t),d=e(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(n=r=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,e(t)):n.insertAfter(t),r.is("label")?r.attr("for",l):0===r.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(s=r.attr("id"),d?d.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(d+=" "+s):d=s,e(t).attr("aria-describedby",d),(a=this.groups[t.name])&&(o=this,e.each(o.groups,(function(t,i){i===a&&e("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",r.attr("id"))}))))),!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.escapeCssMeta(this.idOrName(t)),n=e(t).attr("aria-describedby"),a="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(a=a+", #"+this.escapeCssMeta(n).replace(/\s+/g,", #")),this.errors().filter(a)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.submitButton&&e("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return i="string"==typeof i&&i||"remote",e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),(function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])})),i},normalizeAttributeRule:function(e,t,i,n){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?e[i]=n:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,n,a={},s=e(t),o=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(n=t.getAttribute(i))&&(n=!0),n=!!n):n=s.attr(i),this.normalizeAttributeRule(a,o,i,n);return a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength,a},dataRules:function(t){var i,n,a={},s=e(t),o=t.getAttribute("type");for(i in e.validator.methods)""===(n=s.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(n=!0),this.normalizeAttributeRule(a,o,i,n);return a},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,(function(n,a){if(!1!==a){if(a.param||a.depends){var s=!0;switch(typeof a.depends){case"string":s=!!e(a.depends,i.form).length;break;case"function":s=a.depends.call(i,i)}s?t[n]=void 0===a.param||a.param:(e.data(i.form,"validator").resetElements(e(i)),delete t[n])}}else delete t[n]})),e.each(t,(function(n,a){t[n]=e.isFunction(a)&&"normalizer"!==n?a(i):a})),e.each(["minlength","maxlength"],(function(){t[this]&&(t[this]=Number(t[this]))})),e.each(["rangelength","range"],(function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))})),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),(function(){i[this]=!0})),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var a=e(i).val();return a&&a.length>0}return this.checkable(i)?this.getLength(t,i)>0:null!=t&&t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(){var e=!1;return function(t,i){return e||(e=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(i)||!/Invalid|NaN/.test(new Date(t).toString())}}(),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,i,n){var a=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||a>=n},maxlength:function(t,i,n){var a=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||a<=n},rangelength:function(t,i,n){var a=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||a>=n[0]&&a<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(t,i,n){var a,s=e(i).attr("type"),o="Step attribute on input type "+s+" is not supported.",r=new RegExp("\\b"+s+"\\b"),l=function(e){var t=(""+e).match(/(?:\.(\d+))?$/);return t&&t[1]?t[1].length:0},d=function(e){return Math.round(e*Math.pow(10,a))},c=!0;if(s&&!r.test(["text","number","range"].join()))throw new Error(o);return a=l(n),(l(t)>a||d(t)%d(n)!=0)&&(c=!1),this.optional(i)||c},equalTo:function(t,i,n){var a=e(n);return this.settings.onfocusout&&a.not(".validate-equalTo-blur").length&&a.addClass("validate-equalTo-blur").on("blur.validate-equalTo",(function(){e(i).valid()})),t===a.val()},remote:function(t,i,n,a){if(this.optional(i))return"dependency-mismatch";a="string"==typeof a&&a||"remote";var s,o,r,l=this.previousValue(i,a);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][a],this.settings.messages[i.name][a]=l.message,n="string"==typeof n&&{url:n}||n,r=e.param(e.extend({data:t},n.data)),l.old===r?l.valid:(l.old=r,s=this,this.startRequest(i),(o={})[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:o,context:s.currentForm,success:function(e){var n,o,r,d=!0===e||"true"===e;s.settings.messages[i.name][a]=l.originalMessage,d?(r=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(i),s.formSubmitted=r,s.successList.push(i),s.invalid[i.name]=!1,s.showErrors()):(n={},o=e||s.defaultMessage(i,{method:a,parameters:t}),n[i.name]=l.message=o,s.invalid[i.name]=!0,s.showErrors(n)),l.valid=d,s.stopRequest(i,d)}},n)),"pending")}}});var t,i={};return e.ajaxPrefilter?e.ajaxPrefilter((function(e,t,n){var a=e.port;"abort"===e.mode&&(i[a]&&i[a].abort(),i[a]=n)})):(t=e.ajax,e.ajax=function(n){var a=("mode"in n?n:e.ajaxSettings).mode,s=("port"in n?n:e.ajaxSettings).port;return"abort"===a?(i[s]&&i[s].abort(),i[s]=t.apply(this,arguments),i[s]):t.apply(this,arguments)}),e})),$(document).ready((function(){const e=$("[common-chart-form]");$("[common-chart-line]").on("change",(function(){e.trigger("submit")}))})),$(document).ready((function(){const e=$("[js-menu-button]"),t=$("[js-menu-channel]"),i=$("[js-menu-purchase]"),n=$("[js-menu-close-btn]"),a=$("[js-menu]"),s=$("[filter-form]"),o=$("[js-advertiser]"),r=$("[js-menu-platform]"),l=$("[js-menu-manager]"),d=$("[js-menu-direction]"),c=$("[js-menu-course]"),u=$("[js-menu-search]"),p=$("[js-menu-purchase]");l.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),s.trigger("submit")})),d.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),s.trigger("submit")})),c.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),s.trigger("submit")})),o.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),s.trigger("submit")})),r.on("change",(function(){"unknown"===$(this).val()?e.val("Неизвестно"):e.val("Все аудитории"),s.trigger("submit")})),t.on("change",(function(){e.val("Все аудитории"),s.trigger("submit")})),e.on("click",(function(){"all"!=t.val()&&"unknown"!=t.val()&&(displayCommunities(),a.addClass("is-open"))})),n.on("click",(function(){a.removeClass("is-open"),closeCommunities(),showAll()})),i.on("click",(function(){e.val($(this).find("[js-menu-community]").text()),s.trigger("submit")})),u.on("keyup",(function(){var e=$(this).val().toLowerCase();p.each((function(){~$(this).find("[js-menu-community]").text().toLowerCase().indexOf(e)?$(this).removeClass("none"):$(this).addClass("none")}))}))})),$(document).ready((function(){checkChannel();const e=$("[js-menu-button]"),t=$("[js-menu-channel]"),i=$("[js-menu-close-btn]"),n=$("[js-menu]"),a=$("[filter-form]"),s=$("[filter-form-communities]"),o=$("[js-advertiser]"),r=$("[js-menu-platform]"),l=$("[js-menu-manager]"),d=$("[js-menu-direction]"),c=$("[js-menu-course]"),u=$("[js-menu-search]"),p=$("[js-menu-purchase]"),h=$("[js-menu-purchase-all]");l.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),a.trigger("submit")})),d.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),a.trigger("submit")})),c.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),a.trigger("submit")})),o.on("change",(function(){t.val("all"),r.val("all"),e.val("Все аудитории"),a.trigger("submit")})),r.on("change",(function(){"unknown"===$(this).val()?e.val("Неизвестно"):e.val("Все аудитории"),t.val("all"),a.trigger("submit")})),t.on("change",(function(){e.val("Все аудитории"),a.trigger("submit")})),h.on("click",(function(){let e=$(this).find("[js-menu-checker]").prop("checked");p.each((function(){$(this).find("[js-menu-checker]").prop("checked",!e)}))})),e.on("click",(function(){"all"!=t.val()&&"unknown"!=t.val()&&(displayCommunities(),n.addClass("is-open"))})),i.on("click",(function(){n.removeClass("is-open"),closeCommunities(),showAll(),s.trigger("submit")})),s.on("submit",(function(e){e.preventDefault(),$.ajax({type:"POST",contentType:"application/json",url:"communities",data:JSON.stringify($(this).serializeObject()),dataType:"json",cache:!1,success:function(e){location.reload()},error:function(e){location.reload()}})})),p.on("click",(function(e){var t=$(this).attr("js-menu-purchase-all");if(void 0===t||!1===t){var i=$(this).find("[js-menu-checker]");i.prop("checked",!i.prop("checked")),h.find("[js-menu-checker]").prop("checked",!1),checkSelect(),e.preventDefault()}})),u.on("keyup",(function(){var e=$(this).val().toLowerCase();p.each((function(){~$(this).find("[js-menu-community]").text().toLowerCase().indexOf(e)?$(this).removeClass("none"):$(this).addClass("none")}))})),selectAll()})),$(document).ready((function(){const e=$("[js-menu-button]"),t=$("[js-menu-purchase]"),i=$("[js-menu-channel]"),n=$("[js-menu-close-btn]"),a=$("[distribute-submit-btn]"),s=$("[js-menu]"),o=$("[js-menu-search]"),r=$("[js-menu-purchase]");var l=null;n.on("click",(function(){s.removeClass("is-open"),closeChannelsPurchases()}));const d=[],c=[];i.on("change",(function(){var e={},t=$(this).closest("tr.body__row").find("[distribute-id]").val();if(d.forEach((function(e,i){d[i].distributeId===t&&d.splice(i,1)})),c.forEach((function(e,i){c[i].distributeId===t&&c.splice(i,1)})),"unknown"===$(this).val())$(this).closest("tr.body__row").find("[js-menu-button]").val("Неизвестный"),$(this).closest("tr.body__row").find("[js-menu-button]").prop("disabled",!0),e.distributeIdChannel="unknown",e.distributeChannel="unknown",e.distributeId=t,d.push(e);else{$(this).closest("tr.body__row").find("[js-menu-button]").val(""),$(this).closest("tr.body__row").find("[js-menu-button]").prop("disabled",!1);var i=$(this).closest("tr.body__row").find("[js-menu-channel] option:selected").text();e.distributeIdChannel="",e.distributeChannel=i,e.distributeId=t,c.push(e)}check(d)})),e.on("click",(function(){"Неизвестный"!==$(this).val()&&(displayChannelsPurchases($(this).closest("tr.body__row").find("[js-menu-channel] option:selected").val()),l=$(this),s.addClass("is-open"))})),t.on("click",(function(){l.val($(this).find("[js-menu-purchase-name]").val());var e=l.closest("tr.body__row").find("[distribute-id]").val(),t=$(this).find("[js-menu-purchase-id]").val();d.forEach((function(i,n){d[n].distributeId===e&&(d[n].distributeIdChannel=t)})),c.forEach((function(i,n){c[n].distributeId===e&&(c[n].distributeIdChannel=t,d.push(c[n]),c.splice(n,1))})),s.removeClass("is-open"),closeChannelsPurchases(),check(d)})),a.on("click",(function(e){e.preventDefault(),$.ajax({url:"/payment/distributeFew/",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(d),async:!1,cache:!1,processData:!1,success:function(e){location.reload()}})})),o.on("keyup",(function(){var e=$(this).val().toLowerCase();r.each((function(){~$(this).find("[js-menu-purchase-date]").text().toLowerCase().indexOf(e)||~$(this).find("[js-menu-purchase-community]").text().toLowerCase().indexOf(e)||~$(this).find("[js-menu-purchase-course]").text().toLowerCase().indexOf(e)||~$(this).find("[js-menu-purchase-link]").text().toLowerCase().indexOf(e)||~$(this).find("[js-menu-purchase-tiser]").text().toLowerCase().indexOf(e)?$(this).removeClass("none"):$(this).addClass("none")}))}))})),$(document).ready((function(){const e=$("[js-menu-button]"),t=$("[js-menu-channel]");e.on("click",(function(){if("Неизвестный"!==$(this).val()){var e=$(this).closest("tr.body__row").find("[js-menu-channel] option:selected").val(),t=$(this).closest("tr.body__row").find("[js-menu-channel] option:selected").text();$(this).closest("tr.body__row").find("[distribute-from]").find("[distribute-channel]").val(t),displayChannelsPurchases(e),$target=$(this),$menu.addClass("is-open")}})),t.on("change",(function(){"unknown"===$(this).val()?$(this).closest("tr.body__row").find("[js-menu-button]").val("Неизвестный"):$(this).closest("tr.body__row").find("[js-menu-button]").val("")})),$menuCloseBtn.on("click",(function(){$menu.removeClass("is-open"),closeChannelsPurchases(),showAll()})),$menuPurchase.on("click",(function(){$menuPurchase.removeClass("active"),$(this).addClass("active"),$target.val($(this).find("[js-menu-purchase-name]").val()),$target.closest("tr.body__row").find("[distribute-from]").find("[distribute-id-channel]").val($(this).find("[js-menu-purchase-id]").val())})),$menuSubmitBtn.on("click",(function(e){var t=$(this).closest("tr.body__row").find("[js-menu-button]").val(),i=$(this).closest("tr.body__row").find("[js-menu-channel]").val();null!==t&&""!==t&&null!==i&&""!==i||e.preventDefault()})),$searchInput.on("keyup",(function(){var e=$(this).val();$purchases.each((function(){~$(this).find("[js-menu-purchase-date]").text().indexOf(e)||~$(this).find("[js-menu-purchase-community]").text().indexOf(e)||~$(this).find("[js-menu-purchase-course]").text().indexOf(e)||~$(this).find("[js-menu-purchase-link]").text().indexOf(e)||~$(this).find("[js-menu-purchase-tiser]").text().indexOf(e)?$(this).removeClass("none"):$(this).addClass("none")}))}))}));var LESSON_BLOCK_COUNTER=0;function recheckLessonBlockIndex(e){$.each(e,(function(e,t){$(t).find('[name$=".index"]').val(e)}))}$(document).ready((function(){$(".sortableList").sortable({revert:!0,placeholder:"sortable-placeholder",stop:function(e,t){var i=t.item.attr("data-type");if(void 0!==i&&!1!==i){var n="";"video"===i?n='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="video" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Видео</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Cсылку на видео *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].value" type="text" required placeholder="Введите ссылку" class="lesson-element__input">                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete"></div>                                    </div>':"text"===i?n='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="text" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Текстовый блок</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Заголовок *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" type="text" required placeholder="Введите заголовок" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Текст *</div>                                                        <div class="lesson-element__wrapper">                                                            <textarea name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].value" required placeholder="Введите текст" class="lesson-element__input lesson-element__input_textarea"></textarea>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete"></div>                                    </div>':"document"===i?n='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="document" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Документ</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Название *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" type="text" required placeholder="Введите название" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper lesson-element__wrapper_list">                                                               <div class="file-loader">                                                                   <input type="file" name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].files" id="files'+LESSON_BLOCK_COUNTER+'" accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx" class="file-loader__file file-loader__file_file" required>                                                                   <label for="files'+LESSON_BLOCK_COUNTER+'" class="file-loader__label"><span class="file-loader__title"></span></label>                                                               </div>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete"></div>                                    </div>':"image"===i?n='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="image" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Изображение</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Название *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" type="text" required placeholder="Введите название" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper lesson-element__wrapper_list">                                                               <div class="file-loader">                                                                   <input type="file" name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].files" id="files'+LESSON_BLOCK_COUNTER+'" accept=".png,.jpg,.jpeg" class="file-loader__file file-loader__file_image" required>                                                                   <label for="files'+LESSON_BLOCK_COUNTER+'" class="file-loader__label"><span class="file-loader__title"></span></label>                                                               </div>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete"></div>                                    </div>':"gallery"===i?n='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="gallery" type="hidden" required>                                        <div class="lesson-block__wrapper lesson-block__wrapper_pb0">                                            <div class="lesson-block__title">Галлерея</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Название *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" type="text" required placeholder="Введите название" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper lesson-element__wrapper_list">                                                               <div class="file-loader file-loader_mb20">                                                                   <input type="file" data-name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].files" id="files'+LESSON_BLOCK_COUNTER+'" accept=".png,.jpg,.jpeg" class="file-loader__file file-loader__file_gallery" multiple>                                                                   <label for="files'+LESSON_BLOCK_COUNTER+'" class="file-loader__label"><span class="file-loader__title"></span></label>                                                               </div>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete"></div>                                    </div>':"question"===i&&(n='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="question" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Открытый вопрос</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].blockValues[0].value" type="checkbox" id="images'+LESSON_BLOCK_COUNTER+'" class="checkbox" value="images">                                                            <label class="checkbox-label checkbox-label_gray" for="images'+LESSON_BLOCK_COUNTER+'" >Разрешить загружать изображения</label>                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].blockValues[1].value" type="checkbox" id="files'+LESSON_BLOCK_COUNTER+'" class="checkbox" value="files">                                                            <label class="checkbox-label checkbox-label_gray" for="files'+LESSON_BLOCK_COUNTER+'" >Разрешить загружать файлы</label>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete"></div>                                    </div>'),LESSON_BLOCK_COUNTER++,t.item.replaceWith(n)}recheckLessonBlockIndex($(this).find(".lesson-block"))}}),$(".draggable").draggable({connectToSortable:".sortableList",helper:"clone",revert:"invalid"}),$(".draggable").disableSelection()})),$(document).on("click",".lesson-block__delete",(function(e){var t=$(this).closest(".lesson-block"),i=t.closest(".lesson-content__blocks");t.remove(),recheckLessonBlockIndex(i.find(".lesson-block"))}));var DELETE_LESSON_BLOCKS=[];function setCourseModules(e){$("[modules-list]").html(""),$.each(e,(function(e,t){$("[modules-list]").append(createModule(t,e+1));var i=$('[data-module="'+t.id+'"]').find(".module__lessons"),n=i.find(".module__lesson").length+1;$.each(t.lessonList,(function(e,t){i.append(createLesson(t,n)),n++}))}))}function saveModule(e){$("[js-add-module]").prop("disabled",!0),$.ajax({type:"POST",url:"saveModule",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){setNewModule(e),$("[js-menu-add-module]").removeClass("is-open"),checkBodyHidden(),$("[js-add-module]").prop("disabled",!1)},error:function(e){$("[js-add-module]").prop("disabled",!1)}})}function setNewModule(e){var t=$("[modules-list]").find(".module").length+1;$("[modules-list]").append(createModule(e,t))}function createModule(e,t){return'<div data-module="'+e.id+'" class="module">                                                <div class="module__wrapper">                                                    <div class="module__header collapsed"                                                         data-toggle="collapse"                                                         data-target="#module'+e.id+'"                                                         aria-expanded="false"                                                         aria-controls="module'+e.id+'">                                                  <div js-delete-module class="module__header-delete" data-module-id="'+e.id+'">                                                        <img src="/img/close.svg">                                                  </div>                                                        <div class="module-desc">                                                            <div class="module-desc__number">'+t+'</div>                                                            <div class="module-desc__wrapper">                                                                <div class="module-name module-desc__title">'+e.name+'</div>                                                                <div class="module-desc__desc">                                                                    <div class="lesson-count module-desc__text module-desc__text_video" data-item-count="'+e.lessonCount+'">'+e.lessonCount+' уроков</div>                                                                    <div class="module-desc__delim"><span></span></div>                                                                    <div class="homework-count module-desc__text module-desc__text_work" data-item-count="'+e.homeworkCount+'">'+e.homeworkCount+' домашнее задание</div>                                                                </div>                                                            </div>                                                        </div>                                                        <div class="module__switch"></div>                                                    </div>                                                    <div class="module__body collapse" id="module'+e.id+'">                                                        <div class="module__lessons">                                                        </div>                                                        <div class="modules__btn-wrapper">                                                            <div add-lesson data-type="lesson" class="module-btn module-btn_low">+ Добавить урок</div>'+(0==e.homeworkCount?'                                                            <div add-lesson data-type="homework" class="module-btn module-btn_low">+ Добавить домашнее задание</div>':"")+'                                                        </div>                                                    </div>                                                </div>                                                <div update-module class="module-setting"></div>                                            </div>'}function createLesson(e,t){var i=Math.trunc(e.duration/60),n=e.duration%60;return'<div data-lesson="'+e.id+'" class="module__lesson"><div js-delete-lesson class="module__lesson-delete" data-lesson-id="'+e.id+'" data-lesson-homework="'+("homework"==e.type)+'"><img src="/img/close.svg"></div><div class="module-desc"><div class="module-desc__number">'+t+'</div><div class="module-desc__wrapper"><div class="module-desc__title">'+e.title+'</div><div class="module-desc__desc"><div class="module-desc__text module-desc__text_clock">'+i+" ч "+n+' мин</div><div class="module-desc__delim"><span></span></div><div class="module-desc__text module-desc__text_document">'+e.documentsCounter+' файла</div></div></div></div><div update-lesson class="module__btn module__btn_right">'+("homework"==e.type?"Настроить ДЗ":"Настроить урок")+"</div></div>"}function setUpdateModuleInfo(e){$("[js-update-module-form]").trigger("reset"),$("[js-update-module-form]").find("[img-title]").html("Загрузите изображение (410 х 280px)"),$("[u-module-name]").val(e.name),$("[u-module-description]").html(e.description),$("[u-module-access]").prop("checked",e.accessLimitation),$("[u-module-id]").val(e.id),$("[js-menu-update-module]").addClass("is-open"),checkBodyHidden()}function updateModule(e){$("[js-update-module]").prop("disabled",!0),$.ajax({type:"POST",url:"updateModule",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-module="'+e.id+'"]').find(".module-name").html(e.name),$("[js-menu-update-module]").removeClass("is-open"),checkBodyHidden(),$("[js-update-module]").prop("disabled",!1)},error:function(e){$("[js-update-module]").prop("disabled",!1)}})}function saveLesson(e){$("[js-add-lesson]").prop("disabled",!0),$.ajax({type:"POST",url:"saveLesson",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){var t=$('[data-module="'+e.idModule+'"]').find(".module__lessons"),i=t.find(".module__lesson").length+1;t.append(createLesson(e,i)),updateModuleInfo(e.idModule),$("[js-menu-add-lesson]").removeClass("is-open"),checkBodyHidden(),$("[js-add-lesson]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-add-lesson]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()},afterSend:function(){hideLoader()}})}function updateModuleInfo(e){var t=new FormData;t.append("id",Number(e)),$.ajax({type:"POST",url:"getModule",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-module="'+e.id+'"]').find(".lesson-count").data("item-count",e.lessonCount).html(e.lessonCount+" уроков"),$('[data-module="'+e.id+'"]').find(".homework-count").data("item-count",e.homeworkCount).html(e.homeworkCount+" домашнее задание"),e.homeworkCount>0?$('[data-module="'+e.id+'"]').find('[add-lesson][data-type="homework"]').hide():$('[data-module="'+e.id+'"]').find('[add-lesson][data-type="homework"]').show()},error:function(e){}})}function deleteFilePreview(e){var t=e.siblings(".file-loader__file-preview"),i=t.closest(".file-loader").find(".file-loader__file_file"),n=i.siblings(".file-loader__label");t.remove(),i.val(""),n.removeClassWild("file-loader__label_*")}function deleteImagePreview(e){var t=e.siblings(".file-loader__preview"),i=t.closest(".file-loader").find(".file-loader__file_image"),n=i.siblings(".file-loader__label");t.remove(),i.val(""),n.removeClassWild("file-loader__label_*")}$(document).on("click",".lesson-block__delete.update",(function(e){var t=$(this).closest(".lesson-block");DELETE_LESSON_BLOCKS.push(Number(t.find('[name$=".id"]').val()));var i=t.closest(".lesson-content__blocks");t.remove(),recheckLessonBlockIndex(i.find(".lesson-block"))})),$(document).on("click","[lesson-tab]",(function(e){var t=$(this),i=new FormData;i.set("id",Number(t.attr("current-course"))),$("[lesson-tab]").prop("disabled",!0),$.ajax({type:"POST",url:"getModules",data:i,processData:!1,contentType:!1,cache:!1,success:function(e){setCourseModules(e);var i=t.data("tab");t.closest(".tabs__wrapper").find("[js-tab]").removeClass("active"),t.addClass("active"),t.closest(".tabs__wrapper").find("[js-tab-panel]").removeClass("is-open"),t.closest(".tabs__wrapper").find("[js-tab-panel]").filter("[data-tab="+i+"]").addClass("is-open"),$("[lesson-tab]").prop("disabled",!1)},error:function(e){$("[lesson-tab]").prop("disabled",!1)}})})),$(document).on("click","[js-delete-module]",(function(e){if(e.stopPropagation(),confirm("Вы действительно хотите удалить модуль?")){console.log("deleteModule",$(this).data("module-id"));var t=$(this).data("module-id");$.ajax({type:"POST",contentType:"application/json",url:"deleteModule",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('.module[data-module="'+t+'"]').remove()},error:function(e){}})}})),$(document).on("click","[js-delete-lesson]",(function(e){if(e.stopPropagation(),confirm("Вы действительно хотите удалить урок?")){console.log("deleteLesson",$(this).data("lesson-id"));var t=$(this).data("lesson-id"),i="true"==$(this).data("lesson-homework");$.ajax({type:"POST",contentType:"application/json",url:"deleteLesson",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){var n=$('.module__lesson[data-lesson="'+t+'"]').parents(".module__wrapper");if($('.module__lesson[data-lesson="'+t+'"]').remove(),i){var a=n.find(".homework-count"),s=parseInt(a.data("item-count"))-1;a.data("item-count",s),a.html(s+" домашнее задание")}else{a=n.find(".lesson-count"),s=parseInt(a.data("item-count"))-1;a.data("item-count",s),a.html(s+" уроков")}},error:function(e){}})}})),$(document).on("click","[add-module]",(function(e){$("[js-add-module-form]").trigger("reset"),$("[js-add-module-form]").find("[img-title]").html("Загрузите изображение (410 х 280px)"),$("[m-course-id]").val($(this).attr("current-course")),$("[js-menu-add-module]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-module-close-btn]",(function(e){$("[js-menu-add-module]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-add-module]",(function(e){e.preventDefault(),$("[js-add-module-form]").trigger("submit")})),$(document).on("submit","[js-add-module-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveModule(new FormData($("[js-add-module-form]")[0]))})),$(document).on("click","[update-module]",(function(e){var t=new FormData;t.append("id",Number($(this).closest("[data-module]").data("module"))),$("[update-module]").prop("disabled",!0),$.ajax({type:"POST",url:"getModule",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setUpdateModuleInfo(e),$("[update-module]").prop("disabled",!1)},error:function(e){$("[update-module]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-module-close-btn]",(function(e){$("[js-menu-update-module]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-update-module]",(function(e){e.preventDefault(),$("[js-update-module-form]").trigger("submit")})),$(document).on("submit","[js-update-module-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateModule(new FormData($("[js-update-module-form]")[0]))})),$(document).on("click","[add-lesson]",(function(e){$(".constructor-blocks.add-lesson").find(".not-common").addClass("constructor-blocks__wrapper_hide"),$("[js-add-lesson-form]").trigger("reset"),$("[js-add-lesson-form]").find(".lesson-content__blocks").html(""),TEMP_DATA={},LESSON_BLOCK_COUNTER=0,$("[a-lesson-module]").val($(this).closest("[data-module]").data("module")),$("[a-lesson-type]").val($(this).data("type")),"homework"===$(this).data("type")&&$(".constructor-blocks.add-lesson").find(".not-common").removeClass("constructor-blocks__wrapper_hide"),$("[js-menu-add-lesson]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-lesson-close-btn]",(function(e){$("[js-menu-add-lesson]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-add-lesson]",(function(e){e.preventDefault(),$("[js-add-lesson-form]").trigger("submit")})),$(document).on("submit","[js-add-lesson-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-add-lesson-form]")[0]);$.each(TEMP_DATA,(function(e,i){t.append(i.name,i.file)})),saveLesson(t)}})),$(document).on("change",".file-loader__file_file",(function(e){var t=$(this).siblings(".file-loader__label");if(e.target.value){var i=e.target.value.split("\\").pop().split(".").pop();t.addClass("file-loader__label_attached"),t.after('<div class="file-loader__file-preview file-loader__file-preview_'+i+'">   <span class="file-loader__title">'+i+'</span></div><span class="file-loader__delete file-preview"></span>')}})),$(document).on("click",".file-loader__delete.file-preview",(function(e){deleteFilePreview($(this)),$(this).remove()})),$(document).on("click",".file-loader__delete.file-preview_update",(function(e){deleteFilePreview($(this)),$(this).siblings("input").attr("required","required"),$(this).remove()})),$(document).on("change",".file-loader__file_image",(function(e){var t=$(this).siblings(".file-loader__label");if(e.target.value){var i=URL.createObjectURL(e.target.files[0]);t.addClass("file-loader__label_attached"),t.after('<a class="file-loader__preview" href="'+i+'" data-fancybox="'+e.target.value.split("\\").pop()+'">    <img src="'+i+'"></a><span class="file-loader__delete preview"></span>')}})),$(document).on("click",".file-loader__delete.preview",(function(e){deleteImagePreview($(this)),$(this).remove()})),$(document).on("click",".file-loader__delete.preview_update",(function(e){deleteImagePreview($(this)),$(this).siblings("input").attr("required","required"),$(this).remove()}));var TEMP_DATA={};$(document).on("change",".file-loader__file_gallery",(function(e){if(e.target.value){var t=$(this).closest(".file-loader"),i=$(this).data("name");$.each(e.target.files,(function(e,n){var a=URL.createObjectURL(n);t.before('<div class="file-loader file-loader_mb20">   <a class="file-loader__preview" href="'+a+'" data-fancybox="'+n.name+'">       <img src="'+a+'">   </a><span class="file-loader__delete gallery"></span></div>');var s={};s.name=i,s.file=n,TEMP_DATA[a]=s})),$(this).val("")}})),$(document).on("click",".file-loader__delete.gallery",(function(e){var t=$(this).closest(".file-loader");delete TEMP_DATA[t.find("img").attr("src")],t.remove()}));var DELETE_GALLERY=[],FILTER_FROM_BACK,FILTER_FROM_BACK,$employeeTypes,$employeeByTypes,DELETE_PASSWORD;function setUpdateLessonBlock(e){var t="";$.each(e,(function(e,i){if("video"===i.type)t+='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].id" value="'+i.id+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" value="'+i.index+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="video" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Видео</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Cсылка на видео *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].value" value="'+i.value+'" type="text" required placeholder="Введите ссылку" class="lesson-element__input">                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete update"></div>                                    </div>';else if("text"===i.type)t+='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].id" value="'+i.id+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" value="'+i.index+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="text" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Текстовый блок</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Заголовок *</div>                                                        <div class="lesson-element__wrapper">                                                            <input value="'+i.title+'" name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" type="text" required placeholder="Введите заголовок" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Текст *</div>                                                        <div class="lesson-element__wrapper">                                                            <textarea name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].value" required placeholder="Введите текст" class="lesson-element__input lesson-element__input_textarea">'+i.value+'</textarea>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete update"></div>                                    </div>';else if("document"===i.type){var n=i.value.split("\\").pop().split(".").pop();t+='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].id" value="'+i.id+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" value="'+i.index+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="document" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Документ</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Название *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" value="'+i.title+'" type="text" required placeholder="Введите название" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper lesson-element__wrapper_list">                                                               <div class="file-loader">                                                                   <input type="file" name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].files" id="files'+LESSON_BLOCK_COUNTER+'" accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx" class="file-loader__file file-loader__file_file">                                                                   <label for="files'+LESSON_BLOCK_COUNTER+'" class="file-loader__label file-loader__label_attached"></label>                                                                       <div class="file-loader__file-preview file-loader__file-preview_'+n+'">                                                                           <span class="file-loader__title">'+n+'</span>                                                                       </div>                                                                   <span class="file-loader__delete file-preview_update"></span>                                                               </div>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete update"></div>                                    </div>'}else if("image"===i.type)t+='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].id" value="'+i.id+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" value="'+i.index+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="image" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Изображение</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Название *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" value="'+i.title+'" type="text" required placeholder="Введите название" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper lesson-element__wrapper_list">                                                               <div class="file-loader">                                                                   <input type="file" name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].files" id="files'+LESSON_BLOCK_COUNTER+'" accept=".png,.jpg,.jpeg" class="file-loader__file file-loader__file_image">                                                                   <label for="files'+LESSON_BLOCK_COUNTER+'" class="file-loader__label file-loader__label_attached"><span class="file-loader__title"></span></label>                                                                   <a class="file-loader__preview" href="/'+i.value+'" data-fancybox="'+i.value+'">                                                                       <img src="/'+i.value+'">                                                                   </a>                                                                   <span class="file-loader__delete preview_update"></span>                                                               </div>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete update"></div>                                    </div>';else if("gallery"===i.type){var a="";$.each(i.blockValues,(function(e,t){a+='<div data-gallery="'+t.id+'" class="file-loader file-loader_mb20">   <a class="file-loader__preview" href="/'+t.value+'" data-fancybox="'+t.value+'">       <img src="/'+t.value+'">   </a><span class="file-loader__delete gallery_update"></span></div>'})),t+='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].id" value="'+i.id+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" value="'+i.index+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="gallery" type="hidden" required>                                        <div class="lesson-block__wrapper lesson-block__wrapper_pb0">                                            <div class="lesson-block__title">Галлерея</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__title">Название *</div>                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].title" value="'+i.title+'" type="text" required placeholder="Введите название" class="lesson-element__input">                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper lesson-element__wrapper_list">'+a+'                                                               <div class="file-loader file-loader_mb20">                                                                   <input type="file" data-name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].files" id="files'+LESSON_BLOCK_COUNTER+'" accept=".png,.jpg,.jpeg" class="file-loader__file file-loader__file_gallery" multiple>                                                                   <label for="files'+LESSON_BLOCK_COUNTER+'" class="file-loader__label"><span class="file-loader__title"></span></label>                                                               </div>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete update"></div>                                    </div>'}else if("question"===i.type){var s=i.blockValues;t+='<div class="lesson-block draggable ui-draggable ui-draggable-handle ui-draggable-dragging ui-sortable-helper">                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].id" value="'+i.id+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].index" value="'+i.index+'" type="hidden" required>                                        <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].type" value="question" type="hidden" required>                                        <div class="lesson-block__wrapper">                                            <div class="lesson-block__title">Открытый вопрос</div>                                            <div class="lesson-elements">                                                <div class="lesson-elements__wrapper lesson-elements__wrapper_column">                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].blockValues[0].value" type="checkbox" id="images'+LESSON_BLOCK_COUNTER+'" class="checkbox" '+(s.filter(e=>"images"===e.value)[0]?"checked":"")+' value="images">                                                            <label class="checkbox-label checkbox-label_gray" for="images'+LESSON_BLOCK_COUNTER+'" >Разрешить загружать изображения</label>                                                        </div>                                                    </div>                                                    <div class="lesson-element">                                                        <div class="lesson-element__wrapper">                                                            <input name="lessonBlocks['+LESSON_BLOCK_COUNTER+'].blockValues[1].value" type="checkbox" id="files'+LESSON_BLOCK_COUNTER+'" class="checkbox" '+(s.filter(e=>"files"===e.value)[0]?"checked":"")+' value="files">                                                            <label class="checkbox-label checkbox-label_gray" for="files'+LESSON_BLOCK_COUNTER+'" >Разрешить загружать файлы</label>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                        <div class="lesson-block__delete update"></div>                                    </div>'}LESSON_BLOCK_COUNTER++})),$("[u-lesson-blocks]").html(t)}function updateLesson(e){$("[js-update-lesson]").prop("disabled",!0),$.ajax({type:"POST",url:"updateLesson",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){var t=$('[data-lesson="'+e.id+'"]').find(".module-desc__number").html();$('[data-lesson="'+e.id+'"]').replaceWith(createLesson(e,t)),$("[js-menu-update-lesson]").removeClass("is-open"),checkBodyHidden(),$("[js-update-lesson]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-update-lesson]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()},afterSend:function(){hideLoader()}})}function vote(e){$("[js-save-project]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"vote",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setMessage("Ваш голос принят, спасибо!")},error:function(e){setMessage("Произошла ошибка, попробуйте проголосовать позднее.")}})}function setMessage(e){$("[vote-block-wrapper]").html(createBlock(e))}function createBlock(e){return'<div class="content-element__header-item">       <div class="content-element__header-main">           <div class="content-element__header-element">               <span class="content-element__title title title-h6">'+e+"</span>           </div>       </div>   </div>"}function createLesson(e){$("[js-save-lesson]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"saveLesson",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateLessonInTutorialContainer(e),$("[js-menu-create-lesson]").removeClass("is-open"),resetCreateLessonForm(),checkBodyHidden(),$("[js-save-lesson]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-save-lesson]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()},afterSend:function(){hideLoader()}})}function updateLesson(e){$("[js-update-save-lesson]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"updateLesson",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateLessonAfterUpdate(e),$("[js-menu-update-lesson]").removeClass("is-open"),resetUpdateLessonForm(),checkBodyHidden(),$("[js-update-save-lesson]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-update-save-lesson]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()},afterSend:function(){hideLoader()}})}function updateLessonAfterUpdate(e){var t=$('.lesson[data-lesson="'+e.id+'"]');t.find(".lesson-header__title").html(e.name),t.find(".lesson-video").attr("href",e.videoLink);var i=e.videoLink.substr(e.videoLink.lastIndexOf("/")+1,e.videoLink.length);t.find(".lesson-video__preview").attr("src","//img.youtube.com/vi/"+i+"/hqdefault.jpg"),t.find(".lesson-description").html(e.description);var n="";$.each(e.documents,(function(e,t){var i='<a href="'+t.path+'" class="lesson-document"><div class="lesson-document__type lesson-document__type_'+t.type+'">'+t.type+'</div><div class="lesson-document__name">'+t.name+"</div></a>";n+=i})),t.find(".lesson__documents").html(n)}function updateLessonInTutorialContainer(e){var t=$('.theme[data-tutorial="'+e.idTutorial+'"]').find(".theme__lessons"),i=$('.theme[data-tutorial="'+e.idTutorial+'"]').find(".theme__lessons .lesson:last").find(".lesson-header__number").find("[lesson-counter]").html(),n=e.videoLink.substr(e.videoLink.lastIndexOf("/")+1,e.videoLink.length),a="";$.each(e.documents,(function(e,t){var i='<a href="'+t.path+'" class="lesson-document"><div class="lesson-document__type lesson-document__type_'+t.type+'">'+t.type+'</div><div class="lesson-document__name">'+t.name+"</div></a>";a+=i})),t.html(t.html()+'<div class="lesson" data-lesson="'+e.id+'"">   <div js-update-lesson class="theme-setting theme-setting_top theme-setting_absolute theme-setting_big"></div>   <div class="lesson__header">       <div class="lesson-header__number">           <span lesson-counter>'+(void 0===i?1:parseInt(i)+1)+'</span>           <span>урок</span>       </div>       <div class="lesson-header__title">'+e.name+'</div>   </div>   <div class="lesson__content">       <div class="lesson__content-wrapper">       <div class="lesson-content__side">           <a href="'+e.videoLink+'" class="lesson-video js-fancybox">               <img src="//img.youtube.com/vi/'+n+'/hqdefault.jpg" class="lesson-video__preview" alt="">           </a>       </div>       <div class="lesson-content__main">           <div class="lesson-description">'+e.description+'</div>           <div class="lesson__documents">'+a+"</div>       </div>       </div>   </div></div>"),initFancy()}function resetCreateLessonForm(){var e=$("[js-lesson-form]");e.trigger("reset"),clearFiles(e)}function resetUpdateLessonForm(){var e=$("[js-update-lesson-form]");e.trigger("reset"),$("[js-update-lesson-form-documents]").html(""),clearFiles(e)}function setUpdateLessonFormData(e){$("[js-update-lesson]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getLesson",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-update-lesson-form-id]").val(e.id),$("[js-update-lesson-form-name]").val(e.name),$("[js-update-lesson-form-desc]").val(e.description),$("[js-update-lesson-form-video-link]").val(e.videoLink);var t="";$.each(e.documents,(function(e,i){var n='<div class="input-element__document-wrapper"><div class="lesson-document lesson-document_full lesson-document_without-hover"><div class="lesson-document__type lesson-document__type_'+i.type+'">'+i.type+'</div><div class="lesson-document__name">'+i.name+'</div></div><div js-update-delete-doc data-file="'+i.name+"."+i.type+'" class="lesson-document__delete-btn"></div></div>';t+=n})),$("[js-update-lesson-form-documents]").html(t),$("[js-update-lesson]").prop("disabled",!1)},error:function(e){$("[js-update-lesson]").prop("disabled",!1)}})}function initDeleteLesson(){$("[js-delete-lesson]").on("click",(function(e){var t=$("[js-update-lesson-form-id]").val();$("[js-delete-lesson]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteLesson",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('.lesson[data-lesson="'+t+'"]').remove(),$("[js-menu-update-lesson]").removeClass("is-open"),checkBodyHidden(),resetUpdateLessonForm(),$("[js-delete-lesson]").prop("disabled",!1)},error:function(e){$("[js-delete-lesson]").prop("disabled",!1)}})}))}function setLineColors(){$.ajax({type:"POST",url:"getLineColors",data:null,processData:!1,contentType:!1,cache:!1,success:function(e){var t=$("[line-colors]"),i="";$.each(e,(function(e,t){i+='<div class="menu-input menu-input_xsmall menu-input_t30 menu-input_b0">                            <div class="menu-input__title">'+t.name+'</div>                           <input type="hidden" name="lineColors['+e+'].id" value="'+t.id+'" required>                        </div>                        <div class="menu-input__wrapper menu-input__wrapper_row menu-input__wrapper_margin">                            <div class="menu-input menu-input_m menu-input_full">                                <div class="menu-input__title">Зеленый</div>                                <div class="menu-input__wrapper ">                                    <input name="lineColors['+e+'].green" value="'+t.green+'" class="menu-input__input menu-input__input_small" placeholder="Введите значение" required>                                </div>                            </div>                            <div class="menu-input menu-input_m menu-input_full">                                <div class="menu-input__title">Желтый</div>                                <div class="menu-input__wrapper ">                                    <input name="lineColors['+e+'].yellow" value="'+t.yellow+'"class="menu-input__input menu-input__input_small" placeholder="Введите значение" required>                                </div>                            </div>                            <div class="menu-input menu-input_m  menu-input_full">                                <div class="menu-input__title">Красный</div>                                <div class="menu-input__wrapper ">                                    <input name="lineColors['+e+'].red" value="'+t.red+'" class="menu-input__input menu-input__input_small" placeholder="Введите значение" required>                                </div>                            </div>                        </div>'})),t.html(i),$("[js-menu-line-color]").addClass("is-open"),checkBodyHidden()},error:function(e){}})}function saveLineColors(e){$.ajax({type:"POST",url:"updateLineColors",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){closeLineColorMenu()},error:function(e){}})}function closeLineColorMenu(){$("[line-colors]").html(),$("[js-line-color-form]").trigger("reset"),$("[js-menu-line-color]").removeClass("is-open"),checkBodyHidden()}function clearFilterDate(){$("[filter-param-date]").find("option[selected]").val("change"),$("[filter-param-date]").append($("<option>",{value:"",text:""})),$("[filter-param-date]").val(""),$("[filter-form]").trigger("submit")}function checkBodyHidden(){$(".menu.is-open").length?$("body").addClass("hiddenOverflow"):$("body").removeClass("hiddenOverflow")}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t)},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function removeAcceptBtnAttribute(e){e.each((function(){var e=$.map(this.attributes,(function(e){return e.name})),t=$(this);$.each(e,(function(e,i){"accept-dialog"!==i&&"class"!==i&&t.removeAttr(i)}))}))}function numberWithSpaces(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function validateCheckboxForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.siblings("label").last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function processScroll(e,t){var i=$("body").scrollLeft(),n=i-e;i>e?(t.css("transform","translateX("+n+"px)"),t.css("-moz-transform","translateX("+n+"px)"),t.css("-webkit-transform","translateX("+n+"px)"),t.addClass("lb")):(t.removeClass("lb"),t.css("transform","translateX(0px)"))}function setDashboardFilter(e){FILTER_FROM_BACK=e}function resetFilter(e){$("#proceedType option:selected").removeAttr("selected"),$("#proceedType").val(e.proceedType),$("#projectId option:selected").removeAttr("selected"),$("#projectId").val(e.projectId)}function updateBackground(e){$("[js-save-background]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateCompanyBgColor",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[default-background-color]").prop("checked")?$("body").css("background-color",$("[default-background-color]").val()):$("body").css("background-color",e.color),$("[js-menu-update-background]").removeClass("is-open"),$("[default-background-color]").prop("checked",!1).attr("checked",!1).removeAttr("checked"),checkBodyHidden(),$("[js-save-background]").prop("disabled",!1)},error:function(e){$("[js-save-background]").prop("disabled",!1)}})}function openUpdateBackgroundMenu(e){$("[background-color]").val(e.color),$("[js-menu-update-background]").addClass("is-open"),checkBodyHidden()}function setArticleDataToModal(e){$("[js-open-article]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getArticle",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-open-title]").html(e.name),$("[js-open-text]").html(e.text),$("[js-open-article]").prop("disabled",!1)},error:function(e){$("[js-open-article]").prop("disabled",!1)}})}function initFancy(){$(".js-fancybox").fancybox({youtube:{showinfo:0}})}function setFilter(e){FILTER_FROM_BACK=e}function resetFilter(e){$("#idManager option:selected").removeAttr("selected"),$("#idManager").val(e.idManager),$("#scoreType option:selected").removeAttr("selected"),$("#scoreType").val(e.scoreType),$("#idRateStatus option:selected").removeAttr("selected"),$("#idRateStatus").val(e.idRateStatus),$("#rateDateFrom").val(e.rateDateFrom),$("#rateDateTo").val(e.rateDateTo),$("#rateDateFrom").val(e.rateDateFrom),$("#rateDateTo").val(e.rateDateTo)}function setTemplateItemsByTemplate(e){$("[tr-templates]").prop("disabled",!0),$.ajax({type:"POST",url:"getTemplateItems",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){var t=$("[tr-template-items]").html(),i="";$.each(e,(function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"})),$("[tr-template-items]").html(t+i),$("[tr-templates]").prop("disabled",!1)},error:function(e){$("[tr-templates]").prop("disabled",!1)}})}function closeAddCategoryMenu(){$("[js-menu-add-category]").removeClass("is-open"),$("[js-add-category-form]").trigger("reset"),checkBodyHidden()}function savePasswordCategory(e){$("[save-password-category]").prop("disabled",!0),$.ajax({type:"POST",url:"savePasswordCategory",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){addCategoryToList(e),closeAddCategoryMenu()},error:function(e){$("[save-password-category]").prop("disabled",!1)}})}function addCategoryToList(e){var t=$("[category-list]").html();$("[category-list]").html(t+'<div category data-category="'+e.id+'" class="side-category__item">   <div category-name open-category class="side-category__link">'+e.name+'</div>   <div class="side-category__setting"></div></div>')}function checkFullPassword(e,t){var i=!0;e.each((function(){1!==$(this).val().length&&(i=!1)})),i?(e.addClass("active"),t.closest("form").find("[disabled-btn]").removeAttr("disabled")):(e.removeClass("active"),t.closest("form").find("[disabled-btn]").attr("disabled","disabled"))}function removeAcceptBtnAttribute(e){e.each((function(){var e=$.map(this.attributes,(function(e){return e.name})),t=$(this);$.each(e,(function(e,i){"accept-dialog"!==i&&"class"!==i&&"disabled-btn"!==i&&"disabled"!==i&&t.removeAttr(i)}))}))}function openPasswordCategory(e){$("[category-accept]").prop("disabled",!0),$.ajax({type:"POST",url:"openPasswordCategory",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){resetTabooModal(),$("[category]").removeClass("active"),$("[category]").find("[category-name]").attr("open-category",""),setPasswordCategory(e.get("id"),t)},error:function(e){resetTabooModal(),resetCategory(),$("[category]").removeClass("active"),$("[category]").find("[category-name]").attr("open-category",""),$("[dialog-info]").find(".dialog__title").html("Ошибка входа в категорию"),$("[dialog-info]").find(".dialog__text").html("Пароль неверный, повторите ввод"),$("[dialog-info]").addClass("is-open")}})}function resetTabooModal(){$("[taboo-dialog]").removeClass("is-open"),removeAcceptBtnAttribute($("[taboo-dialog]").find("[accept-dialog]")),$("[category-form]").removeAttr("category-update-form"),$("[category-form]").removeAttr("category-open-form"),$("[category-form]").trigger("reset"),$("[category-form]").find("[disabled-btn]").attr("disabled","disabled"),$("[data-password-part]").removeClass("active")}function resetCategory(){$("[passwords]").html('<div class="message">   <div class="message__title">Пожалуйста, выберите<br>категорию</div></div>')}function setPasswordCategory(e,t){$('[category][data-category="'+e+'"]').addClass("active"),$('[category][data-category="'+e+'"]').find("[category-name]").removeAttr("open-category");var i='<div data-category="'+e+'" class="side-header side-header_bordered">    <div category-name class="side-header__title">'+$('[category][data-category="'+e+'"]').find("[category-name]").html()+'</div>    <div add-password class="add-button add-button_right">+ Добавить пароль</div></div>',n="";$.each(t,(function(e,t){n+=createRow(t)}));var a=' <div class="side-content__table">                <table class="custom-table">                    <thead class="custom-table__header">                        <td class="custom-table__header-col custom-table__header-col_big custom-table__header-col_gray">Назввание</td>                        <td class="custom-table__header-col custom-table__header-col_big custom-table__header-col_gray">Логин</td>                        <td class="custom-table__header-col custom-table__header-col_big custom-table__header-col_gray">Пароль</td>                        <td class="custom-table__header-col custom-table__header-col_big custom-table__header-col_gray">Телефон</td>                        <td class="custom-table__header-col custom-table__header-col_big custom-table__header-col_gray">Доступен</td>                        <td class="custom-table__header-col custom-table__header-col_big custom-table__header-col_gray"></td>                    </thead>                    <tbody password-rows class="custom-table__body custom-table__body_white">'+n+"                    </tbody>                </table>            </div>";$("[passwords]").html(i+a)}function createRow(e){var t="",i=0;return $.each(e.passwordDepartments,(function(e,n){$.each(n.employees,(function(e,n){i++,t+='<div class="c-tooltip__row">       <div class="avatar">           <div class="avatar__wrapper avatar__wrapper_small">                <span class="avatar-image '+(null===n.avatar||""===n.avatar?"avatar-image_default":"")+'">'+(null!==n.avatar?'<img src="/'+n.avatar+'" alt="">':"")+'                </span>           </div>        </div>   <div class="c-tooltip__text c-tooltip__text_p16">'+n.name+"</div></div>"}))})),'<tr data-password="'+e.id+'" class="custom-table__body-row custom-table__body-row_large">                            <td class="custom-table__body-col custom-table__body-col_30per">                               <div class="side-wrapper">                                   <div class="side-wrapper side-wrapper_col side-wrapper_w100">                                       <div class="side-text side-text_bold">'+e.name+'</div>                                       <div class="side-desc">'+e.desc+'</div>                                   </div>                                    <div class="column-links">                                        <div js-copy-link class="column_mwidth column_mwidth-copy" data-link="'+e.url+'"></div>                                        <a target="_blank" class="column_mwidth column_mwidth-open" href="'+e.url+'"></a>                                    </div>                               </div>                            </td>                            <td class="custom-table__body-col custom-table__body-col_20per">                                <div js-copy-link data-link="'+e.login+'" class="side-copy">                                    <div class="side-text">'+e.login+'</div>                                </div>                            </td>                            <td class="custom-table__body-col custom-table__body-col_10per">                                <div js-copy-link data-link="'+e.password+'" class="side-copy">                                    <div class="side-text">**********</div>                                </div>                            </td>                            <td class="custom-table__body-col custom-table__body-col_15per">                                <div class="side-text">'+e.phone+'</div>                            </td>                            <td class="custom-table__body-col custom-table__body-col_15per">                                <div class="side-tooltip '+(0!==i?"c-tooltip":"")+'">                                    <div class="c-tooltip__wrapper c-tooltip__wrapper_large">'+t+"</div>                                    <span>"+i+' сотрудников</span>                                </div>                            </td>                            <td class="custom-table__body-col custom-table__body-col_10per">                                <div class="column-links display-flex-none is-open">                                    <div update-password class="column_mwidth div-table__body-col_center column_mwidth-edit"></div>                                    <form class="column-form" action="#">                                        <button delete-password type="button" class="column_mwidth column_mwidth-delete"></button>                                    </form>                                </div>                            </td>                        </tr>'}function openUpdatePasswordCategory(e){$("[category-accept-update]").prop("disabled",!0),$.ajax({type:"POST",url:"getPasswordCategory",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){resetTabooModal(),$("[update-category-id]").val(t.id),$("[update-category-password]").val(e.get("password")),$("[update-category-name]").val(t.name),$("[js-menu-update-category]").addClass("is-open"),checkBodyHidden()},error:function(e){resetTabooModal(),$("[dialog-info]").find(".dialog__title").html("Ошибка входа в категорию"),$("[dialog-info]").find(".dialog__text").html("Пароль неверный, повторите ввод"),$("[dialog-info]").addClass("is-open")}})}function checkRequiredPassword(e){var t=!1;e.each((function(){1===$(this).val().length&&(t=!0)})),t?e.attr("required",""):e.removeAttr("required")}function closeUpdateCategoryMenu(){$("[js-menu-update-category]").removeClass("is-open"),$("[js-update-category-form]").trigger("reset"),checkBodyHidden()}function updatePasswordCategory(e){$("[update-password-category]").prop("disabled",!0),$.ajax({type:"POST",url:"updatePasswordCategory",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-category="'+e.id+'"]').find("[category-name]").html(e.name),closeUpdateCategoryMenu(),$("[update-password-category]").prop("disabled",!1)},error:function(e){$("[update-password-category]").prop("disabled",!1)}})}function setEmployeeTypes(e){$employeeTypes=e}function setEmployeeByTypes(e){$employeeByTypes=e}function setEmployee(e,t,i){e.html("");var n=e.closest("[data-access]").data("access");if(0!==t)if(0!==i){var a="";$.each($employeeByTypes[t][i],(function(e,t){a+='<div class="cb">    <input checked type="checkbox" id="block'+n+"id"+t.id+'" class="cb__checkbox"  name="passwordDepartments['+n+"].employees["+e+'].id" value="'+t.id+'">    <label class="cb__label" for="block'+n+"id"+t.id+'">       <div class="avatar">           <div class="avatar__wrapper">                <span class="avatar-image '+(null===t.avatar||""===t.avatar?"avatar-image_default":"")+'">'+(null!==t.avatar?'<img src="/'+t.avatar+'" alt="">':"")+'                </span>           </div>        </div>        <span class="cb__text cb__text_bordered">'+t.name+'</span>         <span class="cb__text">'+t.position+"</span>     </label></div>"})),e.html(a)}else{a="";var s=0;$.each($employeeByTypes[t],(function(e,t){$.each(t,(function(e,t){a+='<div class="cb">    <input checked type="checkbox" id="block'+n+"id"+t.id+'" class="cb__checkbox" name="passwordDepartments['+n+"].employees["+s+'].id" value="'+t.id+'">    <label class="cb__label" for="block'+n+"id"+t.id+'">       <div class="avatar">           <div class="avatar__wrapper">                <span class="avatar-image '+(null===t.avatar||""===t.avatar?"avatar-image_default":"")+'">'+(null!==t.avatar?'<img src="/'+t.avatar+'" alt="">':"")+'                </span>           </div>        </div>        <span class="cb__text cb__text_bordered">'+t.name+'</span>         <span class="cb__text">'+t.position+"</span>     </label></div>",s++}))})),e.html(a)}}function savePassword(e){$("[save-password]").prop("disabled",!0),$.ajax({type:"POST",url:"savePassword",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){addPasswordToList(e),closeAddPasswordMenu(),$("[save-password]").prop("disabled",!1)},error:function(e){$("[save-password]").prop("disabled",!1)}})}function addPasswordToList(e){var t=$("[password-rows]").html(),i=createRow(e);$("[password-rows]").html(i+t)}function closeAddPasswordMenu(){$("[js-menu-add-password]").removeClass("is-open"),$("[js-add-password-form]").trigger("reset"),$("[data-access]").remove(),ACCESS_BLOCK_COUNTER=-1,checkBodyHidden()}function openUpdatePasswordMenu(e){var t=new FormData;t.append("id",e),$("[update-password]").prop("disabled",!0),$.ajax({type:"POST",url:"getPassword",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setUpdatePasswordInfo(e),$("[update-password]").prop("disabled",!1)},error:function(e){$("[update-password]").prop("disabled",!1)}})}function setUpdatePasswordInfo(e){$("[u-password-id]").val(e.id),$("[u-password-category-id]").val(e.idCategory),$("[u-password-name]").val(e.name),$("[u-password-desc]").val(e.desc),$("[u-password-url]").val(e.url),$("[u-password-login]").val(e.login),$("[u-password-password]").val(e.password),$("[u-password-phone]").val(e.phone),$.each(e.passwordDepartments,(function(e,t){var i=' <div data-access="'+e+'" class="menu-input menu-input_xsmall">            <div class="menu-input__title">Отдел</div>            <div class="menu-input__wrapper menu-input__wrapper_select">                <select u-password-department id="u-password-department" name="passwordDepartments['+e+'].idDepartment" class="menu-input__input menu-input__input_small menu-input__input_select" required>                      <option value="" disabled>Выберите отдел</option>                      <option value="1000">Продажи</option>                      <option value="1001">Маркетинг</option>                 </select>            </div>        </div>        <div data-access="'+e+'" class="menu-input menu-input_xsmall">             <div class="menu-input__title">Роли</div>             <div class="menu-input__wrapper menu-input__wrapper_select">                 <select u-password-role id="u-password-role" name="passwordDepartments['+e+'].idEmployeeType" class="menu-input__input menu-input__input_small menu-input__input_select" required>                      <option value="" selected disabled>Выберите роль</option>                 </select>              </div>         </div>         <div data-access="'+e+'" class="menu-input__delim">              <span></span>         </div>         <div data-access="'+e+'" class="menu-input menu-input_xsmall">              <div class="input-element__input input-element__input_light-violet input-element__input_row">                  <div class="input-element__radio">                       <input u-password-type type="radio" id="utypeAll'+e+'" class="radio radio-check" name="passwordDepartments['+e+'].passwordType" value="1" checked="checked">                       <label for="utypeAll'+e+'">Все сотрудники</label>                  </div>                  <div class="input-element__radio">                       <input u-password-type type="radio" id="utypeFew'+e+'" class="radio radio-check" name="passwordDepartments['+e+'].passwordType" value="2">                       <label for="utypeFew'+e+'">Некоторые сотрудники</label>                  </div>              </div>         </div>         <div data-access="'+e+'" class="menu-input menu-input_xsmall">              <div u-manager-rows class="menu-input__checkbox-wrapper">              </div>         </div>         <div u-access-delimiter data-access="'+e+'" class="menu-input__delim">              <span></span>         </div>';0===e?$("[u-access-delimiter]").after(i):$('[u-access-delimiter][data-access="'+(e-1)+'"]').after(i),$('[data-access="'+e+'"]').find('[u-password-type][value="'+t.passwordType+'"]').prop("checked",!0),$('[data-access="'+e+'"]').find("[u-password-department]").val(t.idDepartment),$('[data-access="'+e+'"]').find("[u-password-department]").trigger("change"),$('[data-access="'+e+'"]').find("[u-password-role]").val(t.idEmployeeType),$('[data-access="'+e+'"]').find("[u-password-role]").trigger("change"),$('[data-access="'+e+'"]').find("[u-manager-rows]").find('input[type="checkbox"]').prop("checked",!1),$.each(t.employees,(function(t,i){$('[data-access="'+e+'"]').find("[u-manager-rows]").find('input[type="checkbox"][value="'+i.id+'"]').prop("checked",!0)}))})),ACCESS_BLOCK_COUNTER=e.passwordDepartments.length-1,$("[js-menu-update-password]").addClass("is-open"),checkBodyHidden()}function closeUpdatePasswordMenu(){$("[js-menu-update-password]").removeClass("is-open"),$("[js-update-password-form]").trigger("reset"),$("[data-access]").remove(),ACCESS_BLOCK_COUNTER=-1,checkBodyHidden()}function updatePassword(e){$("[save-update-password]").prop("disabled",!0),$.ajax({type:"POST",url:"updatePassword",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){$("[password-rows]").find('[data-password="'+e.get("id")+'"]').replaceWith(createRow(t)),closeUpdatePasswordMenu(),$("[save-update-password]").prop("disabled",!1)},error:function(e){$("[save-update-password]").prop("disabled",!1)}})}$(document).on("click",".file-loader__delete.gallery_update",(function(e){var t=$(this).closest(".file-loader");DELETE_GALLERY.push(Number(t.data("gallery"))),t.remove()})),$(document).on("click","[update-lesson]",(function(e){TEMP_DATA={},LESSON_BLOCK_COUNTER=0,DELETE_GALLERY=[],DELETE_LESSON_BLOCKS=[];var t=new FormData;t.set("id",Number($(this).closest("[data-lesson]").data("lesson"))),$("[update-lesson]").prop("disabled",!0),$.ajax({type:"POST",url:"getModuleLessonWithBlocks",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$("[u-lesson-id]").val(e.id),$("[u-lesson-title]").val(e.title),$("[u-lesson-duration]").val(e.duration),setUpdateLessonBlock(e.lessonBlocks),$("[js-menu-update-lesson]").addClass("is-open"),checkBodyHidden(),$("[update-lesson]").prop("disabled",!1)},error:function(e){$("[update-lesson]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-lesson-close-btn]",(function(e){$("[js-menu-update-lesson]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-update-lesson]",(function(e){e.preventDefault(),$("[js-update-lesson-form]").trigger("submit")})),$(document).on("submit","[js-update-lesson-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-update-lesson-form]")[0]);$.each(TEMP_DATA,(function(e,i){t.append(i.name,i.file)})),t.append("deleteGalleryElements",DELETE_GALLERY),t.append("deleteLessonBlocks",DELETE_LESSON_BLOCKS),updateLesson(t)}})),$(document).on("click","[vote]",(function(e){e.preventDefault();var t=new Object;t.rate=Number($(this).data("rate")),vote(t)})),$(document).on("click","[js-update-lesson]",(function(e){setUpdateLessonFormData($(this).closest(".lesson").attr("data-lesson")),$("[js-menu-update-lesson]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-update-delete-doc]",(function(){var e=new FormData;e.append("idLesson",$("[js-update-lesson-form-id]").val()),e.append("file",$(this).attr("data-file"));var t=$(this);$("[js-update-delete-doc]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"deleteDocument",data:e,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){t.closest(".input-element__document-wrapper").remove(),$("[js-update-delete-doc]").prop("disabled",!1)},error:function(e){$("[js-update-delete-doc]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-lesson-close-btn]",(function(e){$("[js-menu-update-lesson]").removeClass("is-open"),resetUpdateLessonForm(),checkBodyHidden()})),$(document).on("click","[js-update-save-lesson]",(function(e){e.preventDefault(),$("[js-update-lesson-form]").trigger("submit")})),$(document).on("submit","[js-update-lesson-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("[js-update-lesson-form]")[0],i=new FormData(t);addFilesToFormData(i),updateLesson(i)}})),$(document).on("click","[js-create-lesson]",(function(e){var t=$(this).closest(".theme").attr("data-tutorial");$("[js-lesson-form-id-tutorial]").val(t),$("[js-menu-create-lesson]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-create-lesson-close-btn]",(function(e){$("[js-menu-create-lesson]").removeClass("is-open"),resetCreateLessonForm(),checkBodyHidden()})),$(document).on("click","[js-save-lesson]",(function(e){e.preventDefault(),$("[js-lesson-form]").trigger("submit")})),$(document).on("submit","[js-lesson-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("[js-lesson-form]")[0],i=new FormData(t);addFilesToFormData(i),createLesson(i)}})),$(document).ready((function(){initDeleteLesson()})),$(document).on("click","[js-update-line-color]",(function(e){setLineColors()})),$(document).on("click","[js-menu-line-color-close-btn]",(function(e){closeLineColorMenu()})),$(document).on("click","[js-save-line-color]",(function(e){e.preventDefault(),$("[js-line-color-form]").trigger("submit")})),$(document).on("submit","[js-line-color-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveLineColors(new FormData($("[js-line-color-form]")[0]))})),$(document).ready((function(){var e=$("[js-mobile-menu]"),t=$("[js-open-mobile-menu]"),i=$("[js-close-mobile-menu]");t.click((function(){e.show(),document.body.style.overflow="hidden"})),i.click((function(){e.hide(),document.body.style.overflow="auto"}));const n=$("[filter-form]"),a=n.find("[filter-param]"),s=(n.find("[filter-param-btn]"),n.find("[filter-param-input]")),o=$("[filter-param-date-type]"),r=$("[filter-param-year]");o.on("change",(function(){clearFilterDate()})),r.on("change",(function(){clearFilterDate()})),a.on("change",(function(){n.trigger("submit")})),s.keydown((function(e){13==e.keyCode&&n.trigger("submit")}));const l=$("[filter-btn]"),d=$(".filter.custom-lg-2"),c=$(".custom-lg-10");l.on("click",(function(){$(this).toggleClass("filter__btn_active"),n.toggleClass("filter__wrapper_none"),d.toggleClass("custom-lg-2_active"),c.toggleClass("custom-lg-10_active")}));$(".table-body__accordion").on("click",(function(){const e=$(this).attr("data-target"),t=$(e);t.hasClass("collapsing")||t.hasClass("show")||$(this).text("-"),!t.hasClass("collapsing")&&t.hasClass("show")&&$(this).text("+")})),$("[js-copy-link]").on("click",(function(){var e=$("<textarea>");$("body").append(e),e.val($(this).attr("data-link")).select(),document.execCommand("copy"),e.remove()})),$("form").submit((function(){setTimeout((function(){$("label.error").hide()}),3e3)})),$("select").on("click",(function(){setTimeout((function(){$("label.error").hide()}),3e3)})),$("select").on("blur",(function(){setTimeout((function(){$("label.error").hide()}),3e3)})),$("select").on("focusout",(function(){setTimeout((function(){$("label.error").hide()}),3e3)}))})),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},$.fn.removeClassWild=function(e){return this.removeClass((function(t,i){var n=e.replace(/\*/g,"\\S+");return(i.match(new RegExp("\\b"+n,"g"))||[]).join(" ")}))},$(document).ready((function(){const e=$("[manager-name]"),t=e.offset().left;var i=t-$(".main-nav").width();processScroll(i,e),$(window).resize((function(){i=t-$(".main-nav").width()})),$(window).scroll((function(){processScroll(i,e)}))})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter(FILTER_FROM_BACK)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")}))})),$(document).on("change","[filter-parameter]",(function(){$(this).closest("form").trigger("submit")})),$(document).on("click","[js-menu-update-background-close-btn]",(function(){$("[js-menu-update-background]").removeClass("is-open"),$("[default-background-color]").prop("checked",!1).attr("checked",!1).removeAttr("checked"),checkBodyHidden()})),$(document).on("click","[js-save-background]",(function(){event.preventDefault(),$("[js-update-background-form]").trigger("submit")})),$(document).on("submit","[js-update-background-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateBackground($(this).serializeObject())})),$(document).on("click","[js-update-background]",(function(){var e={};e.id=$(this).find('[name="idCompany"]').val(),$("[js-update-background]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getCompanyBgColor",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){openUpdateBackgroundMenu(e),$("[js-update-background]").prop("disabled",!1)},error:function(e){$("[js-update-background]").prop("disabled",!1)}})})),$(document).on("mouseenter",".c-tooltip.tile__tooltip",(function(e){var t=$(this).find(".tooltip-content").html(),i=$(".c-tooltip__wrapper_right.tooltip-wrapper");if(void 0!==t&&""!==t){var n=$(this)[0].getBoundingClientRect();i.css({top:$(window).scrollTop()+n.top+-10,left:n.left-i.width()}),i.html(t),i.addClass("show")}})),$(document).on("mouseleave",".c-tooltip.tile__tooltip",(function(e){var t=$(".c-tooltip__wrapper_right.tooltip-wrapper");t.html(""),t.removeClass("show")})),$(document).on("mouseenter",".c-tooltip.action-info_prize",(function(e){var t=$(this).find(".tooltip-content").html(),i=$(".c-tooltip__wrapper_maxwidth.tooltip-wrapper");if(void 0!==t&&""!==t){var n=$(this)[0].getBoundingClientRect();i.css({top:$(window).scrollTop()+n.top+-10,left:n.left+n.width/2}),i.html(t),i.addClass("show")}})),$(document).on("mouseleave",".c-tooltip.action-info_prize",(function(e){var t=$(".c-tooltip__wrapper_maxwidth.tooltip-wrapper");t.html(""),t.removeClass("show")})),$(document).ready((function(){$("#collapseBlock").on("hide.bs.collapse",(function(){$(".action-collapse__btn").text("Показать акцию"),$(".action-collapse__btn").removeClass("action-collapse__btn_up")})),$("#collapseBlock").on("show.bs.collapse",(function(){$(".action-collapse__btn").text("Скрыть акцию"),$(".action-collapse__btn").addClass("action-collapse__btn_up")}))})),$(document).on("click","[js-open-article]",(function(e){setArticleDataToModal($(this).closest(".theme").attr("data-article")),$("[js-menu-open-article]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-open-article-close-btn]",(function(e){$("[js-menu-open-article]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click",".lesson .lesson__header",(function(e){$(".lesson .lesson__content").not($(this).next()).slideUp(400),$(this).next().slideToggle(400),$(".lesson .lesson__header").not($(this)).removeClass("lesson__header_active"),$(this).toggleClass("lesson__header_active")})),$(document).ready((function(){initFancy()})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter(FILTER_FROM_BACK)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")})),$(".datepicker-here-f").datepicker({autoClose:!0})})),$(document).on("change","[filter-parameter]",(function(){$(this).closest("form").trigger("submit")})),$(document).on("change","[tr-templates]",(function(){$("[tr-template-items]").html('<option value="0" selected>Все пункты</option>');var e=$("option:selected",this).attr("value");if(0!=e){var t=new FormData;t.append("id",e),setTemplateItemsByTemplate(t)}})),$(document).on("click","[add-category]",(function(e){$("[js-menu-add-category]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-category-close-btn]",(function(e){closeAddCategoryMenu()})),$(document).on("click","[save-password-category]",(function(e){e.preventDefault(),$("[js-add-category-form]").trigger("submit")})),$(document).on("submit","[js-add-category-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-add-category-form]")[0]);t.append("password",$('[data-part="1"]').val()+$('[data-part="2"]').val()+$('[data-part="3"]').val()+$('[data-part="4"]').val()),savePasswordCategory(t)}})),$(document).on("keydown","[data-part]",(function(e){46!=e.keyCode&&8!=e.keyCode&&(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})),$(document).on("keyup","[data-part]",(function(e){var t=Number($(this).attr("data-part"));if(46==e.keyCode||8==e.keyCode){var i=$('[data-part="'+(t-1)+'"]');i.length&&(i.focus(),i.select())}else if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105){var n=$('[data-part="'+(t+1)+'"]');n.length&&n.focus()}checkFullPassword($("[data-part]"),$(this))})),$(document).on("keydown","[data-password-part]",(function(e){46!=e.keyCode&&8!=e.keyCode&&13!=e.keyCode&&(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})),$(document).on("keyup","[data-password-part]",(function(e){var t=Number($(this).attr("data-password-part"));if(46==e.keyCode||8==e.keyCode){var i=$('[data-password-part="'+(t-1)+'"]');i.length&&(i.focus(),i.select())}else if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105){var n=$('[data-password-part="'+(t+1)+'"]');n.length&&n.focus()}checkFullPassword($("[data-password-part]"),$(this))})),$(document).on("click","[open-category]",(function(e){e.preventDefault(),$("[category-form-id]").val($(this).closest("[category]").data("category")),$("[taboo-dialog]").find("[accept-dialog]").attr("category-accept",""),$("[taboo-dialog]").find("form").attr("category-open-form",""),$("[taboo-dialog]").addClass("is-open")})),$(document).on("click","[close-dialog]",(function(e){removeAcceptBtnAttribute($(this).siblings("[accept-dialog]")),$(this).closest(".dialog").removeClass("is-open")})),$(document).on("click","[close-taboo-dialog]",(function(e){resetTabooModal()})),$(document).on("click","[category-accept]",(function(e){e.preventDefault(),$("[category-open-form]").trigger("submit")})),$(document).on("submit","[category-open-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[category-open-form]")[0]);t.append("password",$('[data-password-part="1"]').val()+$('[data-password-part="2"]').val()+$('[data-password-part="3"]').val()+$('[data-password-part="4"]').val()),openPasswordCategory(t)}})),$(document).on("click","[update-category]",(function(e){e.preventDefault(),$("[category-form-id]").val($(this).closest("[category]").data("category")),$("[taboo-dialog]").find("[accept-dialog]").attr("category-accept-update",""),$("[taboo-dialog]").find("form").attr("category-update-form",""),$("[taboo-dialog]").addClass("is-open")})),$(document).on("click","[category-accept-update]",(function(e){e.preventDefault(),$("[category-update-form]").trigger("submit")})),$(document).on("submit","[category-update-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[category-update-form]")[0]);t.append("password",$('[data-password-part="1"]').val()+$('[data-password-part="2"]').val()+$('[data-password-part="3"]').val()+$('[data-password-part="4"]').val()),openUpdatePasswordCategory(t)}})),$(document).on("keydown","[data-p]",(function(e){46!=e.keyCode&&8!=e.keyCode&&(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})),$(document).on("keyup","[data-p]",(function(e){var t=Number($(this).attr("data-p"));if(46==e.keyCode||8==e.keyCode){var i=$('[data-p="'+(t-1)+'"]');i.length&&(i.focus(),i.select())}else if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105){var n=$('[data-p="'+(t+1)+'"]');n.length&&n.focus()}checkRequiredPassword($("[data-p]"))})),$(document).on("click","[js-menu-update-category-close-btn]",(function(e){closeUpdateCategoryMenu()})),$(document).on("click","[update-password-category]",(function(e){e.preventDefault(),$("[js-update-category-form]").trigger("submit")})),$(document).on("submit","[js-update-category-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-update-category-form]")[0]);t.append("newPassword",$('[data-p="1"]').val()+$('[data-p="2"]').val()+$('[data-p="3"]').val()+$('[data-p="4"]').val()),updatePasswordCategory(t)}})),$(document).on("change","[password-department]",(function(e){var t=$(this).closest("[data-access]").data("access");$('[data-access="'+t+'"]').find("[password-role]").html('<option value="0" selected>Все роли</option>');var i=Number($("option:selected",this).val());if(0!==i){var n="";$.each($employeeTypes[i],(function(e,t){n+='<option value="'+t.id+'">'+t.title+"</option>"})),$('[data-access="'+t+'"]').find("[password-role]").html($('[data-access="'+t+'"]').find("[password-role]").html()+n)}var a=Number($('[data-access="'+t+'"]').find("[password-department] option:selected").val()),s=Number($('[data-access="'+t+'"]').find("[password-role] option:selected").val());setEmployee($('[data-access="'+t+'"]').find("[manager-rows]"),a,s)})),$(document).on("change","[u-password-department]",(function(e){var t=$(this).closest("[data-access]").data("access");$('[data-access="'+t+'"]').find("[u-password-role]").html('<option value="0" selected>Все роли</option>');var i=Number($("option:selected",this).val());if(0!==i){var n="";$.each($employeeTypes[i],(function(e,t){n+='<option value="'+t.id+'">'+t.title+"</option>"})),$('[data-access="'+t+'"]').find("[u-password-role]").html($('[data-access="'+t+'"]').find("[u-password-role]").html()+n)}var a=Number($('[data-access="'+t+'"]').find("[u-password-department] option:selected").val()),s=Number($('[data-access="'+t+'"]').find("[u-password-role] option:selected").val());setEmployee($('[data-access="'+t+'"]').find("[u-manager-rows]"),a,s)})),$(document).on("change","[u-password-role]",(function(e){var t=$(this).closest("[data-access]").data("access"),i=Number($('[data-access="'+t+'"]').find("[u-password-department] option:selected").val()),n=Number($('[data-access="'+t+'"]').find("[u-password-role] option:selected").val());setEmployee($('[data-access="'+t+'"]').find("[u-manager-rows]"),i,n)})),$(document).on("change","[password-role]",(function(e){var t=$(this).closest("[data-access]").data("access"),i=Number($('[data-access="'+t+'"]').find("[password-department] option:selected").val()),n=Number($('[data-access="'+t+'"]').find("[password-role] option:selected").val());setEmployee($('[data-access="'+t+'"]').find("[manager-rows]"),i,n)})),$(document).on("click","[add-password]",(function(e){$("[password-category-id]").val($(this).closest("[data-category]").data("category")),$("[js-menu-add-password]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-password-close-btn]",(function(e){closeAddPasswordMenu()})),$(document).on("click","[save-password]",(function(e){e.preventDefault(),$("[js-add-password-form]").trigger("submit")})),$(document).on("submit","[js-add-password-form]",(function(e){(e.preventDefault(),validateForm(this))&&savePassword(new FormData($("[js-add-password-form]")[0]))})),$(document).on("click","[delete-password]",(function(e){e.preventDefault(),$("[dialog-accept]").find(".dialog__title").html("Вы действительно хотите удалить пароль?"),$("[dialog-accept]").find(".dialog__text").html("Пароль будет удален"),$("[dialog-accept]").find("[accept-dialog]").attr("accept-delete-password",""),$("[dialog-accept]").addClass("is-open"),DELETE_PASSWORD=Number($(this).closest("[data-password]").data("password"))})),$(document).on("click","[accept-delete-password]",(function(e){var t=new FormData;t.append("id",DELETE_PASSWORD),$.ajax({type:"POST",url:"deletePassword",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-password="'+DELETE_PASSWORD+'"]').remove(),$("[dialog-accept]").removeClass("is-open"),removeAcceptBtnAttribute($(this))},error:function(e){$("[dialog-accept]").removeClass("is-open"),removeAcceptBtnAttribute($(this))}})})),$(document).on("click","[update-password]",(function(e){openUpdatePasswordMenu($(this).closest("[data-password]").data("password"))})),$(document).on("click","[js-menu-update-password-close-btn]",(function(e){closeUpdatePasswordMenu()})),$(document).on("click","[save-update-password]",(function(e){e.preventDefault(),$("[js-update-password-form]").trigger("submit")})),$(document).on("submit","[js-update-password-form]",(function(e){(e.preventDefault(),validateForm(this))&&updatePassword(new FormData($("[js-update-password-form]")[0]))}));var ACCESS_BLOCK_COUNTER=-1;function changeSelectorIndicator(){$(".indicated-select select").on("change",(function(e){var t=$("option:selected",this).attr("value");$(this).closest(".indicated-select").removeClassWild("indicated-select_*").addClass("indicated-select_"+t)}))}function createPaymentMethod(e){$("[js-save-row]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"savePaymentMethod",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addRowToFrontList(e),$("[js-menu-create-row]").removeClass("is-open"),checkBodyHidden(),$("[js-row-form]").trigger("reset"),$("[js-save-row]").prop("disabled",!1)},error:function(e){$("[js-save-row]").prop("disabled",!1)}})}$(document).on("click","[add-access]",(function(e){ACCESS_BLOCK_COUNTER++;var t="",i="",n="",a=$(this).attr("is-update"),s=void 0!==a&&!1!==a;s?(t=' u-password-department id="u-password-department" ',i=' u-password-role id="u-password-role" ',n=" u-manager-rows "):(t=' password-department id="password-department" ',i=' password-role id="password-role" ',n=" manager-rows ");var o=' <div data-access="'+ACCESS_BLOCK_COUNTER+'" class="menu-input menu-input_xsmall">            <div class="menu-input__title">Отдел</div>            <div class="menu-input__wrapper menu-input__wrapper_select">                <select '+t+' name="passwordDepartments['+ACCESS_BLOCK_COUNTER+'].idDepartment" class="menu-input__input menu-input__input_small menu-input__input_select" required>                      <option value="" disabled>Выберите отдел</option>                      <option value="1000">Продажи</option>                      <option value="1001">Маркетинг</option>                 </select>            </div>        </div>        <div data-access="'+ACCESS_BLOCK_COUNTER+'" class="menu-input menu-input_xsmall">             <div class="menu-input__title">Роли</div>             <div class="menu-input__wrapper menu-input__wrapper_select">                 <select '+i+' name="passwordDepartments['+ACCESS_BLOCK_COUNTER+'].idEmployeeType" class="menu-input__input menu-input__input_small menu-input__input_select" required>                      <option value="" selected disabled>Выберите роль</option>                 </select>              </div>         </div>         <div data-access="'+ACCESS_BLOCK_COUNTER+'" class="menu-input__delim">              <span></span>         </div>         <div data-access="'+ACCESS_BLOCK_COUNTER+'" class="menu-input menu-input_xsmall">              <div class="input-element__input input-element__input_light-violet input-element__input_row">                  <div class="input-element__radio">                       <input type="radio" id="typeAll'+ACCESS_BLOCK_COUNTER+'" class="radio radio-check" name="passwordDepartments['+ACCESS_BLOCK_COUNTER+'].passwordType" value="1" checked="checked">                       <label for="typeAll'+ACCESS_BLOCK_COUNTER+'">Все сотрудники</label>                  </div>                  <div class="input-element__radio">                       <input type="radio" id="typeFew'+ACCESS_BLOCK_COUNTER+'" class="radio radio-check" name="passwordDepartments['+ACCESS_BLOCK_COUNTER+'].passwordType" value="2">                       <label for="typeFew'+ACCESS_BLOCK_COUNTER+'">Некоторые сотрудники</label>                  </div>              </div>         </div>         <div data-access="'+ACCESS_BLOCK_COUNTER+'" class="menu-input menu-input_xsmall">              <div '+n+' class="menu-input__checkbox-wrapper">              </div>         </div>         <div '+(s?"u-access-delimiter":"")+' access-delimiter data-access="'+ACCESS_BLOCK_COUNTER+'" class="menu-input__delim">              <span></span>         </div>';0===ACCESS_BLOCK_COUNTER?s?$("[u-access-delimiter]").after(o):$("[access-delimiter]").after(o):s?$('[u-access-delimiter][data-access="'+(ACCESS_BLOCK_COUNTER-1)+'"]').after(o):$('[access-delimiter][data-access="'+(ACCESS_BLOCK_COUNTER-1)+'"]').after(o)})),$(document).on("click","[del-access]",(function(e){ACCESS_BLOCK_COUNTER>=0&&($('[data-access="'+ACCESS_BLOCK_COUNTER+'"]').remove(),ACCESS_BLOCK_COUNTER--)})),$(document).ready((function(){const e=$("[js-create-row]"),t=$("[js-menu-create-row-close-btn]"),i=$("[js-menu-create-row]"),n=$("[js-save-row]"),a=$("[js-row-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){(e.preventDefault(),validateForm(this))&&createPaymentMethod(a.serializeObject())})),initEditRowFromList(),initCancelEditRowFromList(),initAcceptEditUserFromList(),changeSelectorIndicator()}));var ROW_INFO_TEMP={},ROW_ACCEPT_BTN,FILTER_FROM_BACK;function initEditRowFromList(){$("[edit-row]").on("click",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={};$(this).closest(".custom-table__body-row").find("[pm-enable-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[pm-enable-selector]").removeAttr("disabled");var i=$(this).closest(".custom-table__body-row").find("[pm-enable-selector]");t.enable=i.val(),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),ROW_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[pm-id]").val()]=t}))}function initCancelEditRowFromList(){$("[edit-row-cancel]").on("click",(function(e){e.preventDefault();var t=ROW_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[pm-id]").val()];$(this).closest(".custom-table__body-row").find("[pm-enable-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.enable).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[pm-enable-selector]").val(t.enable).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete ROW_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[pm-id]").val()]}))}function initAcceptEditUserFromList(){$("[edit-row-accept]").on("click",(function(e){e.preventDefault(),ROW_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[pm-id]").val(),t.isActive=$(this).closest(".custom-table__body-row").find("[pm-enable-selector]").val(),$("[edit-row-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updatePaymentMethod",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){ROW_ACCEPT_BTN.closest(".custom-table__body-row").find("[pm-enable-wrapper]").addClass("disabled"),ROW_ACCEPT_BTN.closest(".custom-table__body-row").find("[pm-enable-selector]").val(e.isActive.toString()).attr("disabled",!0),ROW_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete ROW_INFO_TEMP[e.id],$("[edit-row-accept]").prop("disabled",!1)},error:function(e){var i=ROW_INFO_TEMP[t.id];ROW_ACCEPT_BTN.closest(".custom-table__body-row").find("[pm-enable-wrapper]").addClass("disabled"),ROW_ACCEPT_BTN.closest(".custom-table__body-row").find("[pm-enable-selector]").val(i.isActive).attr("disabled",!0),ROW_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete ROW_INFO_TEMP[e.id],$("[edit-row-accept]").prop("disabled",!1)}})}))}function addRowToFrontList(e){$("[table-body]").html('<tr class="custom-table__body-row"><input type="hidden" pm-id value="'+e.id+'" name="id" required><td class="custom-table__body-col"></td><td class="custom-table__body-col"><div class="column_pmethod column_pmethod_'+e.code+'"></div></td><td class="custom-table__body-col">'+e.title+'</td><td class="custom-table__body-col custom-table__body-col_medium"><div pm-enable-wrapper class="indicated-select menu-input__wrapper menu-input__wrapper_select indicated-select_true disabled"><select pm-enable-selector class="editable menu-input__input menu-input__input_medium menu-input__input_select menu-input__input_white" disabled><option value="true" selected>Активен</option><option value="false">Не активен</option></select></div></td><td class="custom-table__body-col custom-table__body-col_last"><div edit-btns class="column-links display-flex-none"><div edit-row-accept class="column_mwidth column_mwidth-accept"></div><div edit-row-cancel class="column_mwidth column_mwidth-cancel"></div></div><div edit-menu class="column-links display-flex-none is-open"><div edit-row class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div></div></td></tr>'+$("[table-body]").html()),initEditRowFromList(),initCancelEditRowFromList(),initAcceptEditUserFromList(),changeSelectorIndicator()}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.parent().last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function openCommentMenu(e){var t=new FormData;t.append("id",e),$("[open-comment]").prop("disabled",!0),$.ajax({type:"POST",url:"getRateItemInfo",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setRateItemInfo(e),$("[js-menu-open-comment]").addClass("is-open"),checkBodyHidden(),$("[open-comment]").prop("disabled",!1)},error:function(e){$("[open-comment]").prop("disabled",!1)}})}function resetOpenCommentMenu(){$("[process-btn]").removeClass("is-open"),$("[not-process-btn]").removeClass("is-open"),$("[debate-comment]").removeClass("is-open"),$("[js-open-comment-form]").trigger("reset"),$(".input-element__documents-new").html(""),FILES=new FormData,$("[comments]").nextAll(".comment").remove()}function setRateItemInfo(e){$("[c-rate-id]").val(e.id);var t="";$.each(e.comments,(function(e,i){var n=getDocuments(i.commentFiles);0==n.length&&null==i.text&&"manager"!=i.type||(t+='<div class="comment">   <div class="comment__wrapper '+("examiner"==i.type?"comment__wrapper_400 comment__wrapper_violet":"comment__wrapper_400 comment__wrapper_right")+'">'+("manager"==i.type?'<div class="comment__score"><span>Желаемая оценка </span><div class="score '+(i.wishScore>0?"score_green":0===i.wishScore?"score_gray":"score_red")+'">'+i.wishScore+"</div></div>":"")+(null!=i.text?'<div class="comment__text">'+i.text+"</div>":"")+'       <div class="comment__document-wrapper">'+n+"       </div>   </div></div>"),$("[c-rate-mscore]").val(i.wishScore)})),$("[comments]").after(t),2!==e.status?$("[not-process-btn]").addClass("is-open"):($("[process-btn]").addClass("is-open"),$("[debate-comment]").addClass("is-open"))}function getDocuments(e){var t="";return $.each(e,(function(e,i){"png"===i.type||"jpeg"===i.type||"jpg"===i.type?t+='<div class="comment__document">   <a class="comment__img" data-fancybox="'+i.name+'" href="/'+i.shortPath+'">         <img src="/'+i.shortPath+'">   </a></div>':t+='<div class="comment__document"><a href="'+i.path+'" class="comment__file comment__file_'+i.type+'"><div class="comment__file-type">'+i.type+"</div></a></div>"})),t}function updateRateOnList(e,t,i){if($('[data-item="'+e+'"]').find(".status").html(t),i){$('[data-item="'+e+'"]').find(".score").removeClassWild("score_*"),$('[data-item="'+e+'"]').find(".score").addClass(i>0?"score_green":0===i?"score_gray":"score_red");var n=0==(i.toString().includes(".")?i.toString().split(".").pop().length:0)?Number(i).toFixed(1):i;$('[data-item="'+e+'"]').find(".score").html(i>0?"+"+n:n)}}function setDashboardFilter(e){FILTER_FROM_BACK=e}function resetFilter(e){$("#createDateFrom").val(e.createDateFrom),$("#createDateTo").val(e.createDateTo)}function openRatesMenu(e){var t=new FormData;t.append("id",e),$("[open-rates]").prop("disabled",!0),$.ajax({type:"POST",url:"getRateTemplatesInfo",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){resetRateTemplatesInfo(),setRateTemplatesInfo(e),$("[js-menu-rates]").addClass("is-open"),checkBodyHidden(),$("[open-rates]").prop("disabled",!1)},error:function(e){$("[open-rates]").prop("disabled",!1)}})}function setRateTemplatesInfo(e){var t=e.employee.avatar;null===t?($("[rate-avatar]").addClass("avatar-image_default"),$("[rate-avatar]").html("")):$("[rate-avatar]").html('<img src="/'+t+'" alt="">'),$("[rate-employee-name]").html(e.employee.name),$("[rate-employee-position]").html(e.employee.position),$("[rate-date]").html(null!==e.editDate?e.editDate:""),$("[rate-deal]").html("Сделка № "+e.idDeal),$("[rate-id-deal]").val(e.idDeal);var i="";$.each(e.templates,(function(e,t){i+='<tr template-info="'+t.id+'" class="custom-table__body-row"><td class="custom-table__body-col custom-table__body-col_xxxsmall">   <div class="column_bstatus '+(t.isRated?"column_bstatus_checked":"column_bstatus_unchecked")+'"></div></td><td class="custom-table__body-col custom-table__body-col_60per">   <div class="column-text column-text_full">'+t.name+'</div></td><td class="custom-table__body-col custom-table__body-col_10per">   <div class="column-text">'+t.items.length+'</div></td><td class="custom-table__body-col custom-table__body-col_5per">'+(null!==t.totalScore?'<div class="score '+(t.totalScore>0?"score_green":0==t.totalScore?"score_gray":"score_red")+'">'+(t.totalScore>0?"+"+t.totalScore:t.totalScore)+"</div>":'<div class="score score_gray">—</div>')+'</td><td class="custom-table__body-col custom-table__body-col_20per custom-table__body-col_r16">'+(t.isRated?'<div data-rate="'+t.idRate+'" open-rate class="button button_white">Подробнее</div>':'<div data-template="'+t.id+'" add-rate class="button button_violet">Оценить по списку</div>')+"</td></tr>"})),$("[templates]").html(i)}function openAddRateMenu(e){var t=new FormData;t.append("id",e),$("[add-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"getPerformanceAssessmentTemplatesItems",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$("[rate-id-template]").val(t.get("id")),resetTotalScore(),setTemplateItems(e),$("[js-menu-rate]").addClass("is-open"),checkBodyHidden(),$("[add-rate]").prop("disabled",!1)},error:function(e){$("[add-rate]").prop("disabled",!1)}})}function resetRateTemplateInfo(){$("[js-save-rate]").attr("disabled",""),resetTotalScore(),TEMP_DATA={}}function resetRateTemplatesInfo(){$("[rate-avatar]").removeClass("avatar-image_default"),$("[rate-avatar]").html(""),$("[rate-employee-name]").html(""),$("[rate-employee-position]").html(""),$("[rate-date]").html(""),$("[rate-deal]").html(""),$("[templates]").html("")}function resetTotalScore(){$(".total-score").removeClassWild("score_*"),$(".total-score").html("—")}function setTemplateItems(e){var t="";$.each(e,(function(e,i){t+='<tr class="custom-table__body-row item-row"><input type="hidden" name="items['+e+'].idItem" value="'+i.id+'" required><td class="custom-table__body-col custom-table__body-col_25per">'+i.name+'</td><td class="custom-table__body-col custom-table__body-col_25per">   <div add-comment data-index="'+e+'" class="button button_white">Оставить комментарий</div></td><td class="custom-table__body-col custom-table__body-col_10per custom-table__body-col_center">   <div class="score item-score">—</div></td><td class="custom-table__body-col custom-table__body-col_40per">   <div class="rate-block">                  <div class="rate-block__wrapper">                          <div class="rate-block__btn rate-block__btn_small">                                  <input type="radio" id="good'+e+'" class="radio radio_icon radio_like rate-value" name="items['+e+'].score" value="'+i.goodScore+'" required>                                  <label for="good'+e+'" class="label">Отлично</label>                          </div>                          <div class="rate-block__btn rate-block__btn_small">                                  <input type="radio" id="bad'+e+'" class="radio radio_icon radio_dislike rate-value" name="items['+e+'].score" value="0" required>                                  <label for="bad'+e+'" class="label">Плохо</label>                          </div>                  </div>          </div></td></tr>'})),$("[template-fields]").html(t)}function checkAllRateValueSelected(){for(var e=0,t=!0;$('input[type="radio"][name="items['+e+'].score"]').length;)$('input[type="radio"][name="items['+e+'].score"]').is(":checked")||(t=!1),e++;t&&$("[js-save-rate]").removeAttr("disabled")}function countTotalScore(){var e=0;$.each($(".rate-value:checked"),(function(t){e+=Number($(this).val())}));var t=$(".total-score");t.removeClassWild("score_*"),e>0?t.addClass("score_green"):e<0?t.addClass("score_red"):t.addClass("score_gray"),t.html(e)}function saveRate(e){$("[js-save-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"saveRate",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){replaceTemplateInfoRow(e),resetRateTemplateInfo(),$("[js-menu-rate]").removeClass("is-open"),checkBodyHidden(),$("[js-save-rate]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-save-rate]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()},afterSend:function(){hideLoader()}})}function replaceTemplateInfoRow(e){$('[template-info="'+e.idPerformanceAssessmentTemplate+'"]').replaceWith('<tr template-info="'+e.idPerformanceAssessmentTemplate+'" class="custom-table__body-row"><td class="custom-table__body-col custom-table__body-col_xxxsmall">   <div class="column_bstatus column_bstatus_checked"></div></td><td class="custom-table__body-col custom-table__body-col_60per">   <div class="column-text">'+e.performanceAssessmentTemplateName+'</div></td><td class="custom-table__body-col custom-table__body-col_10per">   <div class="column-text">'+e.items.length+'</div></td><td class="custom-table__body-col custom-table__body-col_5per">   <div class="score '+(e.totalScore>0?"score_green":0==e.totalScore?"score_gray":"score_red")+'">'+(e.totalScore>0?"+"+e.totalScore:e.totalScore)+'</div></td><td class="custom-table__body-col custom-table__body-col_20per custom-table__body-col_r16">   <div data-rate="'+e.id+'" open-rate class="button button_white">Подробнее</div></td></tr>')}$(document).on("click","[open-comment]",(function(e){resetOpenCommentMenu(),openCommentMenu($(this).closest("[data-item]").data("item"))})),$(document).on("click","[js-menu-open-comment-close-btn]",(function(e){$("[js-menu-open-comment]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[approve]",(function(e){var t=new FormData($("[js-open-comment-form]")[0]);addFilesToFormData(t),$("[approve]").prop("disabled",!0),$.ajax({type:"POST",url:"approveDebate",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){updateRateOnList(t.get("id"),"Подтвержден",$("[c-rate-mscore]").val()),$("[js-menu-open-comment]").removeClass("is-open"),checkBodyHidden(),$("[approve]").prop("disabled",!1)},error:function(e){$("[approve]").prop("disabled",!1)}})})),$(document).on("click","[reject]",(function(e){var t=new FormData($("[js-open-comment-form]")[0]);addFilesToFormData(t),$("[reject]").prop("disabled",!0),$.ajax({type:"POST",url:"rejectDebate",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){updateRateOnList(t.get("id"),"Отклонен"),$("[js-menu-open-comment]").removeClass("is-open"),checkBodyHidden(),$("[reject]").prop("disabled",!1)},error:function(e){$("[reject]").prop("disabled",!1)}})})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter(FILTER_FROM_BACK)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")})),$(".datepicker-here-f").datepicker({autoClose:!0}),$searchDeal=$("[search-deal]"),$searchDealForm=$("[search-deal-form]"),$searchDealBtn=$("[search-deal-btn]"),$searchDealClear=$("[search-deal-clear]"),$searchDeal.on("keyup",(function(){$searchDealClear.removeClass("is-open"),$searchDealBtn.addClass("is-open"),$(this).addClass("active")})),$searchDealBtn.on("click",(function(e){e.preventDefault(),$searchDealForm.trigger("submit")})),$searchDealClear.on("click",(function(e){e.preventDefault(),$searchDeal.val(""),$searchDealForm.trigger("submit")}))})),$(document).on("click","[open-rates]",(function(e){openRatesMenu($(this).closest("[data-deal]").data("deal"))})),$(document).on("click","[js-menu-rates-close-btn]",(function(e){$("[js-menu-rates]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[add-rate]",(function(e){openAddRateMenu($(this).attr("data-template"))})),$(document).on("click","[js-menu-rate-close-btn]",(function(e){resetRateTemplateInfo(),$("[js-menu-rate]").removeClass("is-open"),checkBodyHidden()})),$(document).on("change","[rate-templates]",(function(e){var t=new FormData;t.append("id",Number($("option:selected",this).val())),$("[rate-templates]").prop("disabled",!0),$.ajax({type:"POST",url:"getPerformanceAssessmentTemplatesItems",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$("[rate-id-template]").val(t.get("id")),resetTotalScore(),setTemplateItems(e),$("[rate-templates]").prop("disabled",!1)},error:function(e){$("[rate-templates]").prop("disabled",!1)}})})),$(document).on("change",".rate-value",(function(){var e=Number($(this).val()),t=$(this).closest(".item-row").find(".item-score");t.removeClassWild("score_*"),e>0?t.addClass("score_green"):e<0?t.addClass("score_red"):t.addClass("score_gray"),t.html(e),checkAllRateValueSelected(),countTotalScore()})),$(document).on("click","[js-save-rate]",(function(e){e.preventDefault(),$("[js-rate-form]").trigger("submit")})),$(document).on("submit","[js-rate-form]",(function(e){if(e.preventDefault(),validateCheckboxForm(this)){var t=new FormData($("[js-rate-form]")[0]);$.each(TEMP_DATA,(function(e,i){t.append("items["+e+"].exComment",i.get("exComment")),$.each(i.getAll("files"),(function(i,n){t.append("items["+e+"].files",n)}))})),saveRate(t)}}));var TEMP_DATA={};function resetAddCommentForm(){$("[js-add-comment-form]").trigger("reset"),$(".input-element__documents-new").html(""),FILES=new FormData}function openCommentMenu(e){var t=new FormData;t.append("id",e),$("[view-comment]").prop("disabled",!0),$.ajax({type:"POST",url:"getRateItemInfo",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setRateItemInfo(e),$("[js-menu-open-comment]").addClass("is-open"),checkBodyHidden(),$("[view-comment]").prop("disabled",!1)},error:function(e){$("[view-comment]").prop("disabled",!1)}})}function setRateItemInfo(e){resetOpenCommentMenu(),$("[c-rate-item-name]").html(e.itemName),$("[c-rate-score]").html(e.score),$("[c-rate-score]").addClass(e.score>0?"score_green":0===e.score?"score_gray":"score_red");var t="";$.each(e.comments,(function(e,i){var n=getDocuments(i.commentFiles);0==n.length&&null==i.text&&"manager"!=i.type||(t+='<div class="comment">   <div class="comment__wrapper '+("examiner"==i.type?"comment__wrapper_400 comment__wrapper_violet":"comment__wrapper_400 comment__wrapper_right")+'">'+("manager"==i.type?'<div class="comment__score"><span>Желаемая оценка </span><div class="score '+(i.wishScore>0?"score_green":0===i.wishScore?"score_gray":"score_red")+'">'+i.wishScore+"</div></div>":"")+(null!=i.text?'<div class="comment__text">'+i.text+"</div>":"")+'       <div class="comment__document-wrapper">'+n+"       </div>   </div></div>")})),$("[comments]").after(t)}function getDocuments(e){var t="";return $.each(e,(function(e,i){"png"===i.type||"jpeg"===i.type||"jpg"===i.type?t+='<div class="comment__document">   <a class="comment__img" data-fancybox="'+i.name+'" href="/'+i.shortPath+'">         <img src="/'+i.shortPath+'">   </a></div>':t+='<div class="comment__document"><a href="'+i.path+'" class="comment__file comment__file_'+i.type+'"><div class="comment__file-type">'+i.type+"</div></a></div>"})),t}function resetOpenCommentMenu(){$("[comments]").nextAll(".comment").remove()}function openRateMenu(e){var t=new FormData;t.append("id",e),$("[open-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"getRateInfo",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setRateInfo(e),$("[js-menu-rate-items]").addClass("is-open"),checkBodyHidden(),$("[open-rate]").prop("disabled",!1)},error:function(e){$("[open-rate]").prop("disabled",!1)}})}function setRateInfo(e){var t="";$.each(e.items,(function(e,i){t+='<tr class="custom-table__body-row">   <td class="custom-table__body-col custom-table__body-col_xxxlarge">'+i.itemName+'</td>   <td class="custom-table__body-col custom-table__body-col_center custom-table__body-col_xsmall">       <div class="score '+(i.score>0?"score_green":0==i.score?"score_gray":"score_red")+'">'+(i.score>0?"+"+i.score:i.score)+'</div>   </td>   <td class="custom-table__body-col custom-table__body-col_r16">          <div view-comment data-item="'+i.id+'" class="button button_white">Посмотреть</div>   </td></tr>'})),$("[rate-items]").html(t)}function recalculateTotal(){var e=0;$(".rate-fields .menu-input__input_rate-value input").each((function(t,i){var n=parseFloat($(i).val());isNaN(n)||(e+=n)})),$("[u-template-items-total]").html("Итого: "+e).attr("template-items-total",e),$("[u-rate-alert]").toggle(5!==e)}function resetAddTemplateForm(){$("[js-template-form]").trigger("reset"),$('input[id^="addType"]').prop("checked",!0),$("[data-item]").filter('[data-item!="0"]').remove(),ITEMS_COUNT=0}$(document).on("click","[add-comment]",(function(e){var t=$(this).data("index");$("[comment-index]").val(t),$("[js-menu-add-comment]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-comment-close-btn]",(function(e){resetAddCommentForm(),$("[js-menu-add-comment]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-add-comment]",(function(e){e.preventDefault();var t=new FormData($("[js-add-comment-form]")[0]);addFilesToFormData(t);var i=$("[comment-index]").val();""!==t.get("exComment")||0!==t.getAll("files").length?($('[add-comment][data-index="'+i+'"]').removeClass("button_white"),$('[add-comment][data-index="'+i+'"]').html("Посмотреть комментарий"),$('[add-comment][data-index="'+i+'"]').removeAttr("add-comment").attr("open-comment",""),TEMP_DATA[i]=t):($('[add-comment][data-index="'+i+'"]').addClass("button_white"),$('[add-comment][data-index="'+i+'"]').html("Оставить комментарий"),$('[add-comment][data-index="'+i+'"]').removeAttr("open-comment").attr("add-comment",""),delete TEMP_DATA[i]),resetAddCommentForm(),$("[js-menu-add-comment]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[open-comment]",(function(e){var t=$(this).data("index");$("[comment-index]").val(t);var i=TEMP_DATA[t];$("[comment-index]").val(i.get("index")),$("[comment-desc]").val(i.get("exComment")),FILES=new FormData,setFiles(i.getAll("files")),updateFiles($("[comment-files]")),$("[js-menu-add-comment]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[view-comment]",(function(e){openCommentMenu($(this).attr("data-item"))})),$(document).on("click","[js-menu-open-comment-close-btn]",(function(e){$("[js-menu-open-comment]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-rate-close-btn]",(function(e){$("[js-menu-rate]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[open-rate]",(function(e){openRateMenu($(this).attr("data-rate"))})),$(document).on("click","[js-menu-rate-items-close-btn]",(function(e){$("[js-menu-rate-items]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[add-template]",(function(e){$("[js-menu-add-template]").addClass("is-open"),checkBodyHidden(),recalculateTotal()})),$(document).on("click","[js-menu-add-template-close-btn]",(function(e){resetAddTemplateForm(),$("[js-menu-add-template]").removeClass("is-open"),checkBodyHidden()})),$(document).on("keyup",".rate-fields .menu-input__input_rate-value input",(function(e){recalculateTotal()}));var ITEMS_COUNT=0,DELETE_TEMPLATE;function saveTemplate(e){5===parseFloat($("[u-template-items-total]").attr("template-items-total"))&&($("[save-template]").prop("disabled",!0),$.ajax({type:"POST",url:"savePerformanceAssessmentTemplate",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){setTemplate(e),resetAddTemplateForm(),$("[js-menu-add-template]").removeClass("is-open"),checkBodyHidden(),$("[save-template]").prop("disabled",!1)},error:function(e){$("[save-template]").prop("disabled",!1)}}))}function setTemplate(e){var t=$("[template-list]").html(),i=createRow(e);$("[template-list]").html(i+t)}function createRow(e){var t="",i="",n=0;return $.each(e.items,(function(e,i){n++,t+='<div class="c-tooltip__row">   <div class="c-tooltip__text">'+i.name+"</div> </div>"})),$.each(e.userTypes,(function(e,t){i+='<span class="side-list__item">'+t.title+"</span>"})),'<tr data-template="'+e.id+'" class="custom-table__body-row">                                <td class="custom-table__body-col custom-table__body-col_25per">                                    <div class="column-text">'+e.name+'</div>                                </td>                                <td class="custom-table__body-col custom-table__body-col_25per">                                    <div class="side-tooltip '+(0!==n?"c-tooltip":"")+'">                                        <div class="c-tooltip__wrapper">'+t+"                                        </div>                                        <span>"+n+' пунктов</span>                                    </div>                                </td>                                <td class="custom-table__body-col custom-table__body-col_40per">                                    <div class="side-list">'+i+'                                    </div>                                </td>                                <td class="custom-table__body-col custom-table__body-col_10per">                                    <div class="column-links display-flex-none is-open">                                        <div update-template class="column_mwidth div-table__body-col_center column_mwidth-edit"></div>                                        <form class="column-form" action="#">                                            <button delete-template type="button" class="column_mwidth column_mwidth-delete"></button>                                        </form>                                    </div>                                </td>                            </tr>'}function setUpdateTemplate(e){$("[u-template-id]").val(e.id),$("[u-template-name]").val(e.name),$.each(e.userTypes,(function(e,t){$('input[type="checkbox"][value="'+t.id+'"]').prop("checked",!0)}));var t="";$.each(e.items,(function(e,i){t+='<div data-item="'+e+'" class="rate-filed">        <input type="hidden" value="'+i.id+'" name="items['+e+'].id" required>    <div class="rate-filed__wrapper menu-input__input_rate-filed">        <input value="'+i.name+'" name="items['+e+'].name" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="Введите название пункта" required>    </div>    <div class="rate-filed__wrapper menu-input__input_rate-value">        <input value="'+i.goodScore+'" name="items['+e+'].goodScore" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="0" required>    </div>    <div '+(0!==e?"delete-item":"")+' class="rate-field__delete '+(0===e?"rate-field__delete_disabled":"")+'"></div></div>'})),$("[u-template-items]").after(t),ITEMS_COUNT=e.items.length,$("[js-menu-update-template]").addClass("is-open"),checkBodyHidden(),recalculateTotal()}function resetUpdateTemplateForm(){$("[js-update-template-form]").trigger("reset"),$('input[id^="updateType"]').prop("checked",!1),$("[u-template-items]").siblings("[data-item]").remove(),ITEMS_COUNT=0,recalculateTotal()}function updateTemplate(e){5===parseFloat($("[u-template-items-total]").attr("template-items-total"))&&($("[u-template]").prop("disabled",!0),$.ajax({type:"POST",url:"updatePerformanceAssessmentTemplate",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){$("[template-list]").find('[data-template="'+e.get("id")+'"]').replaceWith(createRow(t)),resetUpdateTemplateForm(),$("[js-menu-update-template]").removeClass("is-open"),checkBodyHidden(),$("[u-template]").prop("disabled",!1)},error:function(e){$("[u-template]").prop("disabled",!1)}}))}function openRateMenu(e){var t=new FormData;t.append("id",e),$("[open-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"/performance-assessment/getRateInfo",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setRateInfo(e),$("[js-menu-rate]").addClass("is-open"),checkBodyHidden(),$("[open-rate]").prop("disabled",!1)},error:function(e){$("[open-rate]").prop("disabled",!1)}})}function setRateInfo(e){$("[rate-header]").html(e.performanceAssessmentTemplateName),$("[rate-date]").html(e.createDate),$("[rate-deal]").html("Сделка № "+e.idDeal),$("[rate-score ]").html(e.totalScore),$("[rate-score ]").removeClassWild("score_*"),$("[rate-score ]").addClass(e.totalScore>0?"score_green":0===e.totalScore?"score_gray":"score_red");var t="";$.each(e.items,(function(e,i){t+='<tr class="custom-table__body-row">   <td class="custom-table__body-col custom-table__body-col_xxxlarge">'+i.itemName+'</td>   <td class="custom-table__body-col custom-table__body-col_center custom-table__body-col_xsmall">       <div class="score '+(i.score>0?"score_green":0==i.score?"score_gray":"score_red")+'">'+(i.score>0?"+"+i.score:i.score)+'</div>   </td>   <td class="custom-table__body-col custom-table__body-col_r16">          <div open-comment data-item="'+i.id+'" class="button button_white">Посмотреть</div>   </td></tr>'})),$("[rate-items]").html(t)}function openCommentMenu(e){var t=new FormData;t.append("id",e),$("[open-comment]").prop("disabled",!0),$.ajax({type:"POST",url:"/performance-assessment/getRateItemInfo",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setRateItemInfo(e),$("[js-menu-open-comment]").addClass("is-open"),checkBodyHidden(),$("[open-comment]").prop("disabled",!1)},error:function(e){$("[open-comment]").prop("disabled",!1)}})}function resetOpenCommentMenu(){$("[js-open-comment-form]").trigger("reset"),$(".input-element__documents-new").html(""),FILES=new FormData,$("[comments]").nextAll(".comment").remove(),$("[debate-btn-block]").removeClass("is-open"),$("[debate-block]").removeClass("is-open")}function setRateItemInfo(e){resetOpenCommentMenu(),$("[c-rate-id]").val(e.id),$("[c-rate-id-item]").val(e.idItem),$("[c-rate-item-name]").html(e.itemName),$("[c-rate-score]").html(e.score),$("[c-rate-score]").addClass(e.score>0?"score_green":0===e.score?"score_gray":"score_red");var t="";$.each(e.comments,(function(e,i){var n=getDocuments(i.commentFiles);0==n.length&&null==i.text&&"manager"!=i.type||(t+='<div class="comment">   <div class="comment__wrapper '+("examiner"==i.type?"comment__wrapper_400 comment__wrapper_violet":"comment__wrapper_400 comment__wrapper_right")+'">'+("manager"==i.type?'<div class="comment__score"><span>Желаемая оценка </span><div class="score '+(i.wishScore>0?"score_green":0===i.wishScore?"score_gray":"score_red")+'">'+i.wishScore+"</div></div>":"")+(null!=i.text?'<div class="comment__text">'+i.text+"</div>":"")+'       <div class="comment__document-wrapper">'+n+"       </div>   </div></div>")})),$("[comments]").after(t),e.isExpired||1!==e.status&&4!==e.status||$("[debate-btn-block]").addClass("is-open"),$("[c-rate-mgood]").val(e.goodScore),$("[c-rate-mbad]").val(e.badScore)}function getDocuments(e){var t="";return $.each(e,(function(e,i){"png"===i.type||"jpeg"===i.type||"jpg"===i.type?t+='<div class="comment__document">   <a class="comment__img" data-fancybox="'+i.name+'" href="/'+i.shortPath+'">         <img src="/'+i.shortPath+'">   </a></div>':t+='<div class="comment__document"><a href="'+i.path+'" class="comment__file comment__file_'+i.type+'"><div class="comment__file-type">'+i.type+"</div></a></div>"})),t}function saveDebate(e){$("[accept-debate]").prop("disabled",!0),$.ajax({type:"POST",url:"/performance-assessment/saveDebate",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){$("[js-menu-open-comment]").removeClass("is-open"),checkBodyHidden(),$('[data-item="'+e.get("id")+'"]').find(".status").html("На рассмотрении"),$("[accept-debate]").prop("disabled",!1),hideLoader()},error:function(e){$("[accept-debate]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()},afterSend:function(){hideLoader()}})}function updatePlanPercent(e){$("[js-update-percent]").prop("disabled",!0),$.ajax({type:"POST",url:"updatePlanPercents",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$.each(e,(function(e,t){$('[data-day="'+t.dayOfWeek+'"]').html(t.percent)})),$("[js-menu-update-percent]").removeClass("is-open"),checkBodyHidden(),$("[js-update-percent]").prop("disabled",!1)},error:function(e){$("[js-update-percent]").prop("disabled",!1)}})}function setPlanPercentInfo(e){$("[update-percent]").prop("disabled",!0),$.ajax({type:"POST",url:"getPlanPercents",processData:!1,contentType:!1,cache:!1,success:function(e){$.each(e,(function(e,t){$('[day-of-week="'+t.dayOfWeek+'"]').val(t.percent)})),setPercentsSum(),$("[js-menu-update-percent]").addClass("is-open"),checkBodyHidden(),$("[update-percent]").prop("disabled",!1)},error:function(e){$("[update-percent]").prop("disabled",!1)}})}function setPercentsSum(){var e=getPercentSum(),t=$("[percents-sum]");e<100?(t.removeClass("grade-value_green").addClass("grade-value_red"),$("[js-update-percent]").attr("disabled","disabled")):(t.removeClass("grade-value_red").addClass("grade-value_green"),$("[js-update-percent]").removeAttr("disabled")),t.html(e)}function getPercentSum(){var e=0;return $("[day-of-week]").each((function(){e+=Number($(this).val())})),e}function setProductInfo(e){var t=new FormData;t.set("id",e.data("product")),$("[js-update-product]").prop("disabled",!0),$.ajax({type:"POST",url:"getProduct",data:t,processData:!1,contentType:!1,cache:!1,success:function(t){setProductTypes(e),$("[up-product-id]").val(t.id),$("[up-product-name]").val(t.name),$("[up-product-vendor]").val(t.vendorCode),$("[up-product-price]").val(t.price),$("[up-product-description]").val(t.description),$("input[up-product-theme][value="+t.theme+"]").prop("checked",!0),$("[up-product-bg]").val(t.backgroundColor),t.isUsed||$("[update-footer]").html($("[update-footer]").html()+'<button delete-product type="button" class="button button_white button_right">    <span>Удалить</span></button>'),$("[js-menu-update]").addClass("is-open"),checkBodyHidden(),$("[js-update-product]").prop("disabled",!1)},error:function(e){$("[js-update-product]").prop("disabled",!1)}})}function updateProduct(e){$("[js-update]").prop("disabled",!0),$.ajax({type:"POST",url:"updateProduct",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateProductBlock(e),closeUpdateProductMenu(),$("[js-update]").prop("disabled",!1)},error:function(e){$("[js-update]").prop("disabled",!1)}})}function setProjectInfo(e){var t=e.closest(".products").data("project");$("[js-product-type-id-project]").val(t);var i=e.closest(".products__title").find(".block-title").html(),n=e.closest(".products__title").find(".block-subtitle").html();$("[js-product-type-project]").html(i),$("[js-product-type-project-tag]").html(n)}function saveProductType(e){$("[js-save-product-type]").prop("disabled",!0),$.ajax({type:"POST",url:"saveProductType",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){addProductType(e),$("[js-menu-product-type]").removeClass("is-open"),$("[js-product-type-form]").trigger("reset"),checkBodyHidden(),$("[js-save-product-type]").prop("disabled",!1)},error:function(e){$("[js-save-product-type]").prop("disabled",!1)}})}function addProductType(e){var t=$('[data-project="'+e.idProject+'"]');t.find(".tabs__list-wrapper").html('<div js-tab class="tab" data-tab="'+e.idProject+"type"+e.id+'">'+e.name+"</div>"+t.find(".tabs__list-wrapper").html()),t.find(".tabs__blocks").html('<div js-tab-panel class="tab-content" data-type="2" data-tab="'+e.idProject+"type"+e.id+'">       <div class="tab-content__wrapper tab-content__wrapper_overflow-unset">           <div class="products__list">              <div js-create-product class="product-block product-block_create" data-type="'+e.id+'" data-project="'+e.idProject+'">                  <div class="product-block__message">Добавить товар</div>              </div>          </div>       </div>    </div>'+t.find(".tabs__blocks").html()),t.find("[js-tab]").first().trigger("click")}function closeProductMenu(){$("[js-menu-product]").removeClass("is-open"),$("[js-product-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите изображение (290x240px)"),resetProductSelectors(),checkBodyHidden()}function closeUpdateProductMenu(){$("[js-menu-update]").removeClass("is-open"),$("[js-update-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите изображение (290x240px)"),$("[delete-product]").remove(),resetProductSelectors(),checkBodyHidden()}function setProductSelectors(e){$("[product-project]").val(e.data("project"));var t=e.attr("data-type");void 0!==t&&!1!==t&&$("[product-type]").val(e.data("type"))}function resetProductSelectors(){$("[product-project] option:selected").removeAttr("selected"),$("[product-type] option:selected").removeAttr("selected")}function setProductTypes(e){var t=new FormData;t.set("id",e.data("project")),$.ajax({type:"POST",url:"getProductTypes",data:t,processData:!1,contentType:!1,cache:!1,success:function(t){var i="";$.each(t,(function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"})),$("[product-type]").html(i),setProductSelectors(e)},error:function(t){setProductSelectors(e)}})}function saveProduct(e){$("[js-save-product]").prop("disabled",!0),$.ajax({type:"POST",url:"saveProduct",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){addProduct(e),addProductToCommon(e),closeProductMenu(),$("[js-save-product]").prop("disabled",!1)},error:function(e){$("[js-save-product]").prop("disabled",!1)}})}function updateProductBlock(e){var t=createProduct(e),i=$('[js-tab-panel][data-type!="all"]').find('.product-block[data-product="'+e.id+'"]');$('[js-tab-panel][data-type="all"]').find('.product-block[data-product="'+e.id+'"]').replaceWith(t),i.data("project")===e.idProject&&i.data("type")===e.idProductType?i.replaceWith(t):(i.remove(),addProduct(e))}function addProduct(e){var t=$('.products[data-project="'+e.idProject+'"]').find('[js-tab-panel][data-type="'+e.idProductType+'"]').find(".products__list");t.html(createProduct(e)+t.html())}function addProductToCommon(e){var t=$('.products[data-project="'+e.idProject+'"]').find('[js-tab-panel][data-type="all"]').find(".products__list");t.html(createProduct(e)+t.html())}function createProduct(e){return'<div js-update-product data-product="'+e.id+'" data-project="'+e.idProject+'" data-type="'+e.idProductType+'" class="product-block" style="background: '+e.backgroundColor+';">                 <div class="product-block__wrapper '+e.theme+'" >'+(null!==e.backgroundImage?'                    <div class="product-block__background">                       <img src="/'+e.backgroundImage+'" alt="">                     </div>':"")+'                     <div class="product-block__title">'+e.name+'</div>                     <div class="product-block__type">'+e.productType+'</div>                     <div class="product-block__text product-block__text_gray">Арт: '+e.vendorCode+'</div>                     <div class="product-block__text product-block__text_desc">'+e.description+'</div>                     <div class="product-block__price">'+numberWithSpaces(e.price)+" ₽</div>                 </div>              </div>"}function setCategoryInfo(e){var t=new FormData;t.set("id",e.closest(".tab").data("cat")),$("[js-update-category]").prop("disabled",!0),$.ajax({type:"POST",url:"getCategory",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$("[js-update-category-id]").val(e.id),$("[js-update-category-project]").val(e.idProject),$("[js-update-category-name]").val(e.name),e.isEmpty?$("[delete-category-block]").addClass("is-open"):$("[delete-category-block]").removeClass("is-open"),$("[js-menu-update-category]").addClass("is-open"),checkBodyHidden(),$("[js-update-category]").prop("disabled",!1)},error:function(e){$("[js-update-category]").prop("disabled",!1)}})}function deleteCategory(e){var t=e.siblings('[name="idDelete"]').val(),i=e.siblings('[name="idProject"]').val(),n=new FormData;n.set("id",t),$("[js-delete-category]").prop("disabled",!0),$.ajax({type:"POST",url:"deleteCategory",data:n,processData:!1,contentType:!1,cache:!1,success:function(e){var n=$('[data-cat="'+t+'"]').data("tab");$('[data-tab="'+n+'"]').remove(),$('[data-project="'+i+'"]').find("[js-tab]").first().trigger("click"),$("[js-menu-update-category]").removeClass("is-open"),checkBodyHidden(),$("[js-delete-category]").prop("disabled",!1)},error:function(e){$("[js-delete-category]").prop("disabled",!1)}})}function updateCategory(e){$("[js-save-update-category]").prop("disabled",!0),$.ajax({type:"POST",url:"updateCategory",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$('[js-tab][data-cat="'+e.id+'"]').find("span").html(e.name),$('.product-block[data-type="'+e.id+'"]').find("[category]").html(e.name),$("[js-menu-update-category]").removeClass("is-open"),checkBodyHidden(),$("[js-save-update-category]").prop("disabled",!1)},error:function(e){$("[js-save-update-category]").prop("disabled",!1)}})}function saveProject(e){$("[js-save-project]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveProject",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addProjectOnList(e),$("[js-menu-create-project]").removeClass("is-open"),checkBodyHidden(),$("[js-project-form]").trigger("reset"),$("[js-save-project]").prop("disabled",!1)},error:function(e){$("[js-save-project]").prop("disabled",!1)}})}function addProjectOnList(e){$("[projects-table]").html($("[projects-table]").html()+'<tr class="custom-table__body-row"><input type="hidden" p-id value="'+e.id+'" name="id" required><input type="hidden" p-id-company value="'+e.idCompany+'" name="idCompany" required>                        <td class="custom-table__body-col">'+e.id+'</td>                        <td class="custom-table__body-col custom-table__body-col_xxxlarge" >                            <input p-name name="name"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.name+'"                                   value="'+e.name+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-btns class="column-links display-flex-none">                                <div edit-project-accept class="column_mwidth column_mwidth-accept"></div>                                <div edit-project-cancel class="column_mwidth column_mwidth-cancel"></div>                            </div>                            <div edit-menu class="column-links display-flex-none is-open">                                <div edit-project class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>                            </div>                        </td>                    </tr>')}$(document).on("click","[add-rate-item]",(function(e){ITEMS_COUNT++,$("[data-item]").last().after('<div data-item="'+ITEMS_COUNT+'" class="rate-filed">   <div class="rate-filed__wrapper menu-input__input_rate-filed">      <input name="items['+ITEMS_COUNT+'].name" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="Введите название пункта" required>   </div>   <div class="rate-filed__wrapper menu-input__input_rate-value">      <input name="items['+ITEMS_COUNT+'].goodScore" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="0" required>   </div>   <div delete-item class="rate-field__delete"></div></div>'),recalculateTotal()})),$(document).on("click","[delete-item]",(function(e){$(this).closest("div[data-item]").remove(),recalculateTotal()})),$(document).on("click","[save-template]",(function(e){e.preventDefault(),$("[js-template-form]").trigger("submit")})),$(document).on("submit","[js-template-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-template-form]")[0]);saveTemplate(t)}})),$(document).on("click","[delete-template]",(function(e){e.preventDefault(),$("[dialog-accept]").find(".dialog__title").html("Вы действительно хотите удалить шаблон?"),$("[dialog-accept]").find(".dialog__text").html("Шаблон будет удален"),$("[dialog-accept]").find("[accept-dialog]").attr("accept-delete-template",""),$("[dialog-accept]").addClass("is-open"),DELETE_TEMPLATE=Number($(this).closest("[data-template]").data("template"))})),$(document).on("click","[close-dialog]",(function(e){removeAcceptBtnAttribute($(this).siblings("[accept-dialog]")),$(this).closest(".dialog").removeClass("is-open")})),$(document).on("click","[accept-delete-template]",(function(e){var t=new FormData;t.append("id",DELETE_TEMPLATE),$.ajax({type:"POST",url:"deletePerformanceAssessmentTemplate",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-template="'+DELETE_TEMPLATE+'"]').remove(),$("[dialog-accept]").removeClass("is-open"),removeAcceptBtnAttribute($(this))},error:function(e){$("[dialog-accept]").removeClass("is-open"),removeAcceptBtnAttribute($(this))}})})),$(document).on("click","[update-template]",(function(e){var t=new FormData;t.append("id",Number($(this).closest("[data-template]").data("template"))),$("[update-template]").prop("disabled",!0),$.ajax({type:"POST",url:"getPerformanceAssessmentTemplate",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){setUpdateTemplate(e),$("[update-template]").prop("disabled",!1)},error:function(e){$("[update-template]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-template-close-btn]",(function(e){resetUpdateTemplateForm(),$("[js-menu-update-template]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[u-template]",(function(e){e.preventDefault(),$("[js-update-template-form]").trigger("submit")})),$(document).on("submit","[js-update-template-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateTemplate(new FormData($("[js-update-template-form]")[0]))})),$(document).on("click","[js-menu-rate-close-btn]",(function(e){$("[js-menu-rate]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[open-rate]",(function(e){openRateMenu($(this).closest("[data-rate]").data("rate"))})),$(document).on("click","[open-comment]",(function(e){openCommentMenu($(this).closest("[data-item]").data("item"))})),$(document).on("click","[js-menu-open-comment-close-btn]",(function(e){$("[js-menu-open-comment]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[debate-btn]",(function(e){$("[debate-btn-block]").removeClass("is-open"),$("[debate-block]").addClass("is-open")})),$(document).on("click","[accept-debate]",(function(e){e.preventDefault(),$("[js-open-comment-form]").trigger("submit")})),$(document).on("submit","[js-open-comment-form]",(function(e){if(e.preventDefault(),validateCheckboxForm(this)){var t=new FormData($("[js-open-comment-form]")[0]);addFilesToFormData(t),saveDebate(t)}})),$(document).on("change",".wish-value",(function(){var e=Number($(this).val()),t=$(".wish-score");t.removeClassWild("score_*"),e>0?t.addClass("score_green"):e<0?t.addClass("score_red"):t.addClass("score_gray"),t.html(e)})),$(document).on("click","[js-menu-update-percent-close-btn]",(function(e){$("[js-menu-update-percent]").removeClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-update-percent]",(function(e){e.preventDefault(),$("[js-update-percent-form]").trigger("submit")})),$(document).on("submit","[js-update-percent-form]",(function(e){(e.preventDefault(),validateForm(this))&&updatePlanPercent(new FormData($("[js-update-percent-form]")[0]))})),$(document).on("click","[update-percent]",(function(e){setPlanPercentInfo()})),$(document).on("keyup","[day-of-week]",(function(e){var t=$(this).val();if($.isNumeric(t)||""===t){var i=getPercentSum();i>100&&$(this).val($(this).val()-(i-100))}else $(this).val("");setPercentsSum()})),$(document).on("click","[js-update-product]",(function(e){setProductInfo($(this))})),$(document).on("click","[delete-product]",(function(e){var t=new FormData,i=$("[up-product-id]").val();t.set("id",i),$("[delete-product]").prop("disabled",!0),$.ajax({type:"POST",url:"deleteProduct",data:t,processData:!1,contentType:!1,cache:!1,success:function(e){$('[data-product="'+i+'"]').remove(),closeUpdateProductMenu(),$("[delete-product]").prop("disabled",!1)},error:function(e){$("[delete-product]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-close-btn]",(function(e){closeUpdateProductMenu()})),$(document).on("click","[js-update]",(function(e){e.preventDefault(),$("[js-update-form]").trigger("submit")})),$(document).on("submit","[js-update-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateProduct(new FormData($("[js-update-form]")[0]))})),$(document).on("click","[js-create-product-type]",(function(e){$("[js-menu-product-type]").addClass("is-open"),setProjectInfo($(this)),checkBodyHidden()})),$(document).on("click","[js-menu-product-type-close-btn]",(function(e){$("[js-menu-product-type]").removeClass("is-open"),$("[js-product-type-form]").trigger("reset"),checkBodyHidden()})),$(document).on("click","[js-save-product-type]",(function(e){e.preventDefault(),$("[js-product-type-form]").trigger("submit")})),$(document).on("submit","[js-product-type-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveProductType(new FormData($("[js-product-type-form]")[0]))})),$(document).on("click","[js-create-product]",(function(e){$("[js-menu-product]").addClass("is-open"),setProductTypes($(this)),checkBodyHidden()})),$(document).on("click","[js-menu-product-close-btn]",(function(e){closeProductMenu()})),$(document).on("click","[js-save-product]",(function(e){e.preventDefault(),$("[js-product-form]").trigger("submit")})),$(document).on("submit","[js-product-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveProduct(new FormData($("[js-product-form]")[0]))})),$(document).on("change","[js-bg-default]",(function(e){var t=$(this).is(":checked");$("[js-bg-default]").prop("checked",!1).attr("checked",!1).removeAttr("checked"),t&&$(this).prop("checked",!0)})),$(document).on("click","[js-update-category]",(function(e){setCategoryInfo($(this))})),$(document).on("click","[js-menu-update-category-close-btn]",(function(e){$("[js-menu-update-category]").removeClass("is-open"),checkBodyHidden(),$("[js-update-category-form]").trigger("reset")})),$(document).on("click","[js-delete-category]",(function(e){deleteCategory($(this))})),$(document).on("click","[js-save-update-category]",(function(e){e.preventDefault(),$("[js-update-category-form]").trigger("submit")})),$(document).on("submit","[js-update-category-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateCategory(new FormData($("[js-update-category-form]")[0]))})),$(document).ready((function(){$.each($(".progress-bar"),(function(e,t){var i=$(t).find(".progress-bar__progress").width();$.each($(t).find(".progress-bar__text"),(function(e,t){var n=$(t).width(),a=100*(i-$(t).position().left)/n;a=a>100?100:a,$(t).css({background:"linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) "+a+"%, rgba(72,30,140,1) "+a+"%, rgba(72,30,140,1) 100%)",webkitBackgroundClip:"text",webkitTextFillColor:"transparent"})}))}))})),$(document).on("click","[js-save-project]",(function(e){e.preventDefault(),$("[js-project-form]").trigger("submit")})),$(document).on("submit","[js-project-form]",(function(e){e.preventDefault(),validateForm(this)&&saveProject($(this).serializeObject())})),$(document).on("click","[js-create-project]",(function(e){$("[js-menu-create-project]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-create-project-close-btn]",(function(e){$("[js-menu-create-project]").removeClass("is-open"),$("[js-project-form]").trigger("reset"),checkBodyHidden()}));var PROJECTS_INFO_TEMP={},CURRENT_BTN,ID_RATE_TEMP,FORM_TMP;function setDescription(){var e=CURRENT_BTN.closest(".custom-table__body-row");$("[rate-avatar]").html(e.find("[avatar]").html()),$("[rate-employee-name]").html(e.find("[employee-name]").html()),$("[rate-employee-position]").html(e.find("[employee-position]").html()),$("[rate-employee-department]").html(e.closest(".template-setting").find("[department]").html()),$("[rate-id-setting]").val(e.find("[data-setting]").data("setting")),$("[rate-id-template]").val(e.find("[data-template]").data("template")),$("[rate-day]").val(CURRENT_BTN.closest("[data-day]").data("day")),$("[rate-date ]").html(("00"+CURRENT_BTN.closest("[data-day]").data("day")).slice(-2)+"."+("00"+$("#month").val()).slice(-2)+"."+$("#year").val())}function setFields(){var e=CURRENT_BTN.closest(".custom-table__body-row").find("[data-template]").data("template"),t={};t.id=e,$.ajax({type:"POST",contentType:"application/json",url:"getFields",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){var t=$("[rate-fields]");$.each(e,(function(e,i){t.html(t.html()+'<div class="menu-rate-field"><input type="hidden" name="fields['+e+'].field.fieldId" value="'+i.fieldId+'">   <div class="menu-rate-field__title">'+i.fieldName+'</div>   <div rate-filed class="menu-rate-field__rate">       <div class="rate-block">           <div class="rate-block__wrapper">               <div class="rate-block__btn">                   <input type="radio" id="like'+e+'" class="radio radio_like rate-value" name="fields['+e+'].value" value="'+i.fieldValue+'" required>                   <label for="like'+e+'" class="label"></label>               </div>               <div class="rate-block__btn">                   <input type="radio" id="dislike'+e+'" class="radio radio_dislike rate-value" name="fields['+e+'].value" value="0" required>                   <label for="dislike'+e+'" class="label"></label>               </div>           </div>       </div>       <div class="grade grade_right">       <div class="grade__values grade__values_without-margin">           <span field-value class="grade-value grade-value_bold">—</span>       </div>    </div></div><div class="menu-input menu-input_mt">     <div class="menu-input__title">Ваш комментарий</div>     <div class="menu-input__wrapper">        <textarea name="fields['+e+'].comment" placeholder="Введите ваш комментарий" class="menu-input__input menu-input__input_textarea menu-input__input_small"></textarea>     </div></div><div class="rate-img">   <div class="rate-img__wrapper">       <input type="file" name="fields['+e+'].img" accept="image/*,image/jpeg" id="fileUpdate'+e+'" class="input-file">       <label for="fileUpdate'+e+'" class="js-labelFile rate-img__label js-upload-banner">           <span class="menu-input__title rate-image__title js-fileName">Загрузите изображение</span>       </label>   </div></div></div>')}))},error:function(e){}})}function resetForm(){$("[rate-fields]").html(""),$("[total-rate-value]").val(0),$("[total-fields-value]").html(0),$("[js-rate-form]").trigger("reset")}function countRateTotalValue(){var e=0;$.each($(".rate-value:checked"),(function(t){e+=Number($(this).val())})),$("[total-rate-value]").val(e),$("[total-fields-value]").html(e)}function countRateValue(e,t){var i=Number(e.find("[field-max]").html()),n=Math.round(i/5*t);e.find("[field-value]").html(n),e.find("[rate-value]").val(n),countRateValueSum()}function countRateValueSum(){var e=0;$.each($("[field-value]"),(function(t){e+=Number($(this).html())})),$("[total-rate-value]").val(e),$("[total-fields-value]").html(e)}function saveRate(e){$("[js-save-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"saveRate",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){$("[js-menu-rate]").removeClass("is-open"),checkBodyHidden(),resetForm();var i=Number(e.get("total"));CURRENT_BTN.html(i),CURRENT_BTN.removeAttr("add-rate").attr({"data-rate":t,"update-rate":""}),CURRENT_BTN.addClass(i>=90?"rate_green":i>50?"rate_yellow":"rate_red"),setTotalEmployeeRate(e.get("idSetting")),$("[js-save-rate]").prop("disabled",!1)},error:function(e){$("[js-save-rate]").prop("disabled",!1)}})}function setTotalEmployeeRate(e){var t={};t.id=Number(e),$.ajax({type:"POST",contentType:"application/json",url:"/api/rating/getEmployeeTotalRate",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){var t=CURRENT_BTN.closest(".custom-table__body-row").find("[total-emloyee-rate]");t.removeClass("grade-value_green grade-value_yellow grade-value_red"),t.addClass(e>=90?"grade-value_green":e>50?"grade-value_yellow":"grade-value_red"),t.html(e)},error:function(e){}})}function setRateInformation(e,t){$("[rate-id]").val(e.id),$("[rate-id-setting]").val(e.idSetting),$("[total-fields-value]").html(e.total),$("[rate-date]").html(e.date),$("[rate-employee-name]").html(e.employee.name),$("[rate-employee-position]").html(e.employee.position),$("[rate-employee-department]").html(e.employee.department),$("[rate-avatar]").html('<span class="avatar-image '+(null===e.employee.avatar||""===e.employee.avatar?"avatar-image_default":"")+'" >'+(null===e.employee.avatar||""===e.employee.avatar?"":'<img src="/'+e.employee.avatar+'" alt="">')+"</span>");var i=$("[rate-fields]");$.each(e.fields,(function(e,n){i.html(i.html()+'<div class="menu-rate-field"><input type="hidden" name="fields['+e+'].id" value="'+n.id+'">   <div class="menu-rate-field__title">'+n.field.fieldName+'</div>   <div rate-filed class="menu-rate-field__rate">       <div class="rate-block">           <div class="rate-block__wrapper">               <div class="rate-block__btn">                   <input class="radio active '+(0===n.value?"radio_dislike":"radio_like")+'">                   <label class="label"></label>               </div>           </div>       </div>       <div class="grade grade_right">       <div class="grade__values grade__values_without-margin">           <span class="grade-value grade-value_bold">'+n.value+'</span>       </div>    </div></div><div class="menu-input menu-input_mt">     <div class="menu-input__title">Комментарий специалиста по контролю</div>     <div class="menu-input__wrapper">        <div placeholder="" class="menu-input__input menu-input__input_textarea menu-input__input_textarea_disabled menu-input__input_small">'+n.comment+'</div>     </div></div><div class="rate-img">   <div class="rate-img__wrapper">'+(null!==n.imgPath?'<a class="rate-image" data-fancybox="gallery" href="/'+n.imgPath+'"><img src="/'+n.imgPath+'"></a>':'<div class="js-upload-banner rate-image__banner"></div>')+'   </div></div><div class="menu-input menu-input_mt">     <div class="menu-input__title">'+(t?"Комментарий сотрудника":"Ваш комментарий")+'</div>     <div class="menu-input__wrapper">'+(t?'        <div placeholder="Введите ваш комментарий" class="menu-input__input menu-input__input_textarea menu-input__input_textarea_disabled menu-input__input_small">'+n.exComment+"</div>":'       <textarea name="fields['+e+'].exComment" placeholder="Введите ваш комментарий" class="menu-input__input menu-input__input_textarea menu-input__input_small"></textarea>')+"     </div></div></div>")}))}function resetDebateForm(){$("[rate-fields]").html(""),$("[total-fields-value]").html(0),$("[js-debate-rate-form]").trigger("reset")}function debateRate(e){$("[js-debate-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"debateRate",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){$("[js-menu-debate-rate]").removeClass("is-open"),checkBodyHidden(),resetDebateForm();var i=$('[data-rating="'+e.get("id")+'"]').find("[js-debate-rate-btn]");i.removeAttr("js-debate-rate-btn"),i.addClass("button_debate"),i.find("span").html("На рассмотрении"),$("[js-debate-rate]").prop("disabled",!1)},error:function(e){$("[js-debate-rate]").prop("disabled",!1)}})}function debate(e){var t={};t.id=Number(ID_RATE_TEMP),$.ajax({type:"POST",contentType:"application/json",url:e,data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('[data-rating="'+ID_RATE_TEMP+'"]').remove()},error:function(e){}})}function resetUpdateForm(){$("[u-rate-fields]").html(""),$("[total-rate-value]").val(0),$("[total-fields-value]").html(0),$("[js-update-rate-form]").trigger("reset")}function setUpdateRateInformation(e){$("[u-rate-id]").val(e.id),$("[u-rate-id-setting]").val(e.idSetting),$("[total-fields-value]").html(e.total),$("[total-rate-value]").val(e.total),$("[u-rate-date]").html(e.date),$("[u-rate-employee-name]").html(e.employee.name),$("[u-rate-employee-position]").html(e.employee.position),$("[u-rate-employee-department]").html(e.employee.department),$("[u-rate-avatar]").html('<span class="avatar-image '+(null===e.employee.avatar||""===e.employee.avatar?"avatar-image_default":"")+'" >'+(null===e.employee.avatar||""===e.employee.avatar?"":'<img src="/'+e.employee.avatar+'" alt="">')+"</span>");var t=$("[u-rate-fields]");$.each(e.fields,(function(e,i){t.html(t.html()+'<div class="menu-rate-field"><input type="hidden" name="fields['+e+'].id" value="'+i.id+'">   <div class="menu-rate-field__title">'+i.field.fieldName+'</div>   <div rate-filed class="menu-rate-field__rate">       <div class="rate-block">           <div class="rate-block__wrapper">               <div class="rate-block__btn">                   <input '+(0!==i.value?"checked":"")+' type="radio" id="like'+e+'" class="radio radio_like rate-value" name="fields['+e+'].value" value="'+i.field.fieldValue+'" required>                   <label for="like'+e+'" class="label"></label>               </div>               <div class="rate-block__btn">                   <input '+(0===i.value?"checked":"")+' type="radio" id="dislike'+e+'" class="radio radio_dislike rate-value" name="fields['+e+'].value" value="0" required>                   <label for="dislike'+e+'" class="label"></label>               </div>           </div>       </div>       <div class="grade grade_right">       <div class="grade__values grade__values_without-margin">           <span field-value class="grade-value grade-value_bold">'+i.value+'</span>       </div>    </div></div><div class="menu-input menu-input_mt">     <div class="menu-input__title">Ваш комментарий</div>     <div class="menu-input__wrapper">        <textarea name="fields['+e+'].comment" placeholder="Введите ваш комментарий" class="menu-input__input menu-input__input_textarea menu-input__input_small">'+i.comment+'</textarea>     </div></div><div class="rate-img">   <div class="rate-img__wrapper">'+(null!==i.imgPath?'<a class="rate-image" data-fancybox="gallery" href="/'+i.imgPath+'"><img src="/'+i.imgPath+'"></a>':'       <input type="file" name="fields['+e+'].img" accept="image/*,image/jpeg" id="fileUpdate'+e+'" class="input-file">       <label for="fileUpdate'+e+'" class="js-labelFile rate-img__label js-upload-banner">           <span class="menu-input__title rate-image__title js-fileName">Загрузите изображение</span>       </label>')+"   </div></div></div>")}))}function updateRate(e){$("[js-update-rate]").prop("disabled",!0),$.ajax({type:"POST",url:"updateRate",data:e,processData:!1,contentType:!1,cache:!1,success:function(t){$("[js-menu-update-rate]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm();var i=Number(e.get("total"));CURRENT_BTN.html(i),CURRENT_BTN.removeClass("rate_green rate_yellow rate_red"),CURRENT_BTN.addClass(i>=90?"rate_green":i>50?"rate_yellow":"rate_red"),setTotalEmployeeRate(e.get("idSetting")),$("[js-update-rate]").prop("disabled",!1)},error:function(e){$("[js-update-rate]").prop("disabled",!1)}})}function validateCheckboxForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.siblings("label").last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function deleteRate(e){var t={};t.id=e.id,$("[js-delete-rate]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"removeRate",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(t){$("[js-menu-update-rate]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm(),CURRENT_BTN.html("—"),CURRENT_BTN.removeClass("rate_green rate_yellow rate_red"),CURRENT_BTN.removeAttr("update-rate").removeAttr("data-rate").attr("add-rate",""),setTotalEmployeeRate(e.idSetting),$("[js-delete-rate]").prop("disabled",!1)},error:function(e){$("[js-delete-rate]").prop("disabled",!1)}})}$(document).on("click","[edit-project]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[p-name]");i.removeAttr("disabled"),t.name=i.val(),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),PROJECTS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[p-id]").val()]=t})),$(document).on("click","[edit-project-cancel]",(function(e){e.preventDefault();var t=PROJECTS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[p-id]").val()];$(this).closest(".custom-table__body-row").find("[p-name]").val(t.name).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete PROJECTS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[p-id]").val()]})),$(document).on("click","[edit-project-accept]",(function(e){e.preventDefault(),PROJECT_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[p-id]").val(),t.name=$(this).closest(".custom-table__body-row").find("[p-name]").val(),$("[edit-project-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateProject",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){PROJECT_ACCEPT_BTN.closest(".custom-table__body-row").find("[p-name]").val(e.name).attr("disabled",!0),PROJECT_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete PROJECTS_INFO_TEMP[e.id],$("[edit-project-accept]").prop("disabled",!1)},error:function(e){var i=PROJECTS_INFO_TEMP[t.id];PROJECT_ACCEPT_BTN.closest(".custom-table__body-row").find("[p-name]").val(i.name).attr("disabled",!0),PROJECT_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete PROJECTS_INFO_TEMP[e.id],$("[edit-user-accept]").prop("disabled",!1)}})})),$(document).on("change","[qs-filter]",(function(){$("[qs-filter-form]").trigger("submit")})),$(document).on("click","[add-rate]",(function(){CURRENT_BTN=$(this),setDescription(),setFields(),$("[js-menu-rate]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-rate-close-btn]",(function(e){$("[js-menu-rate]").removeClass("is-open"),checkBodyHidden(),resetForm()})),$(document).on("change",".rate-value",(function(){var e=Number($(this).val());$(this).closest("[rate-filed]").find("[field-value]").html(e),countRateTotalValue()})),$(document).on("click",".rate-star",(function(e){var t=Number($(this).html());$(this).closest("[rate-filed]").find("[rate-start]").val(t);var i=$(this).closest(".rate-stars").find(".rate-star");$.each(i,(function(e){e<t?$(this).addClass("active"):$(this).removeClass("active")})),countRateValue($(this).closest("[rate-filed]"),t)})),$(document).on("click","[js-save-rate]",(function(e){e.preventDefault(),$("[js-rate-form]").trigger("submit")})),$(document).on("submit","[js-rate-form]",(function(e){if(e.preventDefault(),validateCheckboxForm(this)){var t=new FormData($("[js-rate-form]")[0]);saveRate(t)}})),$(document).on("click","[js-debate-rate-btn]",(function(e){var t={};t.id=Number($(this).siblings('[name="id"]').val());var i=$(this).attr("examiner");$("[js-debate-rate-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/rating/getFullRateInformation",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){setRateInformation(e,void 0!==i&&!1!==i),$("[js-menu-debate-rate]").addClass("is-open"),checkBodyHidden(),$("[js-debate-rate-btn]").prop("disabled",!1)},error:function(e){$("[js-debate-rate-btn]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-debate-rate-close-btn]",(function(e){$("[js-menu-debate-rate]").removeClass("is-open"),checkBodyHidden(),resetDebateForm()})),$(document).on("click","[js-debate-rate]",(function(e){e.preventDefault(),$("[js-debate-rate-form]").trigger("submit")})),$(document).on("submit","[js-debate-rate-form]",(function(e){(e.preventDefault(),validateForm(this))&&debateRate(new FormData($("[js-debate-rate-form]")[0]))})),$(document).on("click","[apply]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно согласны с претензией?"),$("[dialog]").find(".dialog__text").html("Оценка будет удалена"),$("[dialog]").find("[accept-dialog]").attr("apply-debate",""),$("[dialog]").addClass("is-open"),ID_RATE_TEMP=Number($(this).closest(".apply-block").siblings('[name="id"]').val())})),$(document).on("click","[reject]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите отклонить претензию?"),$("[dialog]").find(".dialog__text").html("Оценка будет учитываться"),$("[dialog]").find("[accept-dialog]").attr("reject-debate",""),$("[dialog]").addClass("is-open"),ID_RATE_TEMP=Number($(this).closest(".apply-block").siblings('[name="id"]').val())})),$(document).on("click","[close-dialog]",(function(e){removeAcceptBtnAttribute($(this).siblings("[accept-dialog]")),$(this).closest(".dialog").removeClass("is-open")})),$(document).on("click","[apply-debate]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),debate("applyDebate"),$("[js-menu-debate-rate]").removeClass("is-open"),checkBodyHidden(),resetDebateForm()})),$(document).on("click","[reject-debate]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),debate("rejectDebate"),$("[js-menu-debate-rate]").removeClass("is-open"),checkBodyHidden(),resetDebateForm()})),$(document).on("mouseenter",".c-tooltip",(function(e){var t=$(this).find(".tooltip-content").html(),i=$(".tooltip-wrapper");if(void 0!==t&&""!==t){var n=$(this)[0].getBoundingClientRect();i.css({top:$(window).scrollTop()+n.top+-10,left:n.left}),i.html(t),i.addClass("show")}})),$(document).on("mouseleave",".c-tooltip",(function(e){var t=$(".tooltip-wrapper");t.html(""),t.removeClass("show")})),$(document).on("click","[update-rate]",(function(){CURRENT_BTN=$(this);var e={};e.id=Number($(this).attr("data-rate")),$("[update-rate]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/rating/getFullRateInformation",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setUpdateRateInformation(e),$("[js-menu-update-rate]").addClass("is-open"),checkBodyHidden(),$("[update-rate]").prop("disabled",!1)},error:function(e){$("[update-rate]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-rate-close-btn]",(function(){$("[js-menu-update-rate]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm()})),$(document).on("click","[js-update-rate]",(function(e){e.preventDefault(),$("[js-update-rate-form]").trigger("submit")})),$(document).on("submit","[js-update-rate-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateRate(new FormData($("[js-update-rate-form]")[0]))})),$(document).on("click","[js-delete-rate]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите удалить оценку?"),$("[dialog]").find(".dialog__text").html("Оценка будет удалена"),$("[dialog]").find("[accept-dialog]").attr("remove-rate",""),$("[dialog]").addClass("is-open")})),$(document).on("click","[remove-rate]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),deleteRate($("[js-update-rate-form]").serializeObject())})),$(document).on("change","[qs-filter]",(function(){$("[qs-filter-form]").trigger("submit")}));var JSON_OBJECT=[];function check(e){e.length>0?$(".drop-message").addClass("active"):$(".drop-message").removeClass("active")}function saveSettings(e){$("[setting-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveSettings",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){check(JSON_OBJECT=[]),$("[setting-btn]").prop("disabled",!1)},error:function(e){$("[setting-btn]").prop("disabled",!1)}})}function getLevelField(){return'<div class="rate-level"><input rate-level js-rate-level name="templateCoefficients[0].level" type="hidden" value="1"><div class="menu-input__input menu-input__input_small menu-input__input_level">1</div><div class="rate-filed__wrapper menu-input__input_level-filed"><input rate-level-from name="templateCoefficients[0].levelFrom" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="0" required></div><div class="level-reverse"></div><div class="rate-filed__wrapper menu-input__input_level-filed"><input rate-level-to name="templateCoefficients[0].levelTo" autocomplete="off" class="menu-input__input menu-input__input_small" placeholder="0" required></div><div class="rate-filed__wrapper menu-input__input_rate-value"><input rate-level-coef name="templateCoefficients[0].levelCoefficient" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="0.0" required></div><div class="rate-level__delete"></div></div>'}function getRateField(){return'<div class="rate-filed"><div class="rate-filed__wrapper menu-input__input_rate-filed"><input field-name name="templateFields[0].fieldName" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="Введите название пункта" required></div><div class="rate-filed__wrapper menu-input__input_rate-value"><input field-value grade-value name="templateFields[0].fieldValue" autocomplete="off" class="menu-input__input menu-input__input_small " placeholder="0" required></div><div class="rate-field__delete"></div></div>'}function resetTemplateForm(){$("[js-template-form]").trigger("reset"),$('input:checkbox[name="metrics"]').attr("checked",!1).prop("checked",!1),$(".rate-fields").html(getRateField()),setGradeValuesSum(),$(".rate-levels").html(getLevelField()),setLevels()}function recountRateField(){$("[field-name]").each((function(e){$(this).attr("name","templateFields["+e+"].fieldName")})),$("[field-value]").each((function(e){$(this).attr("name","templateFields["+e+"].fieldValue")}))}function recountRateLevel(){$("[rate-level]").each((function(e){$(this).attr("name","templateCoefficients["+e+"].level")})),$("[rate-level-from]").each((function(e){$(this).attr("name","templateCoefficients["+e+"].levelFrom")})),$("[rate-level-to]").each((function(e){$(this).attr("name","templateCoefficients["+e+"].levelTo")})),$("[rate-level-coef]").each((function(e){$(this).attr("name","templateCoefficients["+e+"].levelCoefficient")}))}function setGradeValuesSum(){var e=sumGradeValues(),t=$("[grade-values-sum]");e<100?(t.removeClass("grade-value_green").addClass("grade-value_red"),$("[js-save-template]").attr("disabled","disabled")):(t.removeClass("grade-value_red").addClass("grade-value_green"),$("[js-save-template]").removeAttr("disabled")),t.html(e)}function sumGradeValues(){var e=0;return $("[grade-value]").each((function(){e+=Number($(this).val())})),e}$(document).on("change","[template-setting]",(function(){var e={};e.year=$("#year").val(),e.month=$(this).closest("[data-month]").data("month"),e.idEmployee=$(this).closest("[data-employee]").data("employee"),e.idDepartment=$(this).closest("[data-department]").data("department"),e.idTemplate=Number($(this).val()),JSON_OBJECT.push(e),check(JSON_OBJECT)})),$(document).on("click","[setting-btn]",(function(e){e.preventDefault(),$("[setting-form]").trigger("submit")})),$(document).on("submit","[setting-form]",(function(e){e.preventDefault(),validateForm(this)&&saveSettings(JSON_OBJECT)})),$(document).on("click","[js-create-template]",(function(e){$("[js-menu-create-template]").addClass("is-open"),$("[js-template-form-department]").val($(this).closest("[data-department]").data("department")),checkBodyHidden()})),$(document).on("click","[js-menu-create-template-close-btn]",(function(e){$("[js-menu-create-template]").removeClass("is-open"),checkBodyHidden(),resetTemplateForm()})),$(document).on("click",".rate-field__delete",(function(e){$(this).closest(".rate-filed").remove(),setGradeValuesSum(),recountRateField()})),$(document).on("keyup","[rate-level-from]",(function(e){var t=$(this).val();$.isNumeric(t)||$(this).val("")})),$(document).on("keyup","[rate-level-to]",(function(e){var t=$(this).val();$.isNumeric(t)||$(this).val("")})),$(document).on("keyup","[rate-level-coef]",(function(e){var t=$(this).val();$.isNumeric(t)||"."===t||$(this).val("")})),$(document).on("keyup","[grade-value]",(function(e){var t=$(this).val();if($.isNumeric(t)||""===t){var i=sumGradeValues();i>100&&$(this).val($(this).val()-(i-100))}else $(this).val("");setGradeValuesSum()})),$(document).on("click","[js-add-rate-filed]",(function(e){var t=$(".rate-fields"),i=t.find(".rate-filed").last(),n=t.find(".rate-titles");0!==i.length?(i.after(getRateField()),recountRateField()):n.after(getRateField())}));const $tabs=$("[js-tab]"),$tabPanels=$("[js-tab-panel]");function setLevels(){$(".menu-input__input_level").each((function(e){$(this).html(e+1)})),$("[js-rate-level]").each((function(e){$(this).val(e+1)}))}function saveTemplate(e){$("[js-save-template]").prop("disabled",!0),$.ajax({type:"POST",url:"saveTemplate",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){createTemplate(e),$("[js-menu-create-template]").removeClass("is-open"),checkBodyHidden(),resetTemplateForm(),$("[js-save-template]").prop("disabled",!1)},error:function(e){$("[js-save-template]").prop("disabled",!1)}})}function createTemplate(e){var t=$('[data-department="'+e.idDepartment+'"]').find(".templates__list"),i="";$.each(e.templateFields,(function(e,t){i+='<div class="template-field">   <div class="template-field__title" >'+t.fieldName+'</div>   <div class="template-field__value" >'+t.fieldValue+"</div></div>"}));var n="";$.each(e.templateCoefficients,(function(e,t){n+='<div class="c-tooltip__text c-tooltip__text_flex">   <span>'+t.levelFrom+" - "+t.levelTo+'</span>   <span class="c-tooltip__note">'+t.levelCoefficient+"</span></div>"}));var a="";$.each(e.metrics,(function(e,t){a+='<div class="c-tooltip__text">'+t.name+"</div>"})),t.html('<div class="template" data-template="'+e.id+'">   <div class="template__header">       <div class="template-title" >'+e.name+'</div>   </div>   <div class="template__fields template__fields_told custom-scroll">'+i+'   </div>   <div class="template__fields">       <div class="template-field">           <div class="template-field__title">Коэффициенты</div>           <div class="template-field__tooltip c-tooltip">               <div class="c-tooltip__wrapper c-tooltip__wrapper_medium">'+n+"               </div>               <span>"+e.templateCoefficients[0].levelCoefficient+" - "+e.templateCoefficients[e.templateCoefficients.length-1].levelCoefficient+'                </span>            </div>        </div>        <div class="template-field">            <div class="template-field__title">Метрики учитываются</div>            <div class="template-field__tooltip c-tooltip">                <div class="c-tooltip__wrapper c-tooltip__wrapper_medium">'+a+"                </div>                <span >"+e.metrics.length+'</span>            </div>         </div>      </div>      <div class="template__footer">           <form class="button_full" action="#" js-disable-template-form>               <input name="id" type="hidden" value="'+e.id+'">                   <button type="button" class="button button_white button_full" js-disable-template-btn>                            <span class="hidden-btn hidden-btn_right hidden-btn_right-large hidden-btn_hide">Удалить шаблон</span>                   </button>           </form>       </div></div>'+t.html())}var DISABLE_TEMPLATE_FORM,ENABLE_TEMPLATE_FORM;function disableTemplate(e){$("[js-disable-template-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"disableTemplate",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-disable-template-btn]").prop("disabled",!1),$('[data-template="'+e.id+'"]').remove()},error:function(e){$("[js-disable-template-btn]").prop("disabled",!1)}})}function enableTemplate(e){$("[js-enable-template-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"enableTemplate",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-enable-template-btn]").prop("disabled",!1),$('[data-template="'+e.id+'"]').remove()},error:function(e){$("[js-enable-template-btn]").prop("disabled",!1)}})}function saveRow(e){$("[js-save-row]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveRow",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addRowToFrontList(e),$("[js-menu-create-row]").removeClass("is-open"),checkBodyHidden(),$("[js-row-form]").trigger("reset"),$("[js-save-row]").prop("disabled",!1)},error:function(e){$("[js-save-row]").prop("disabled",!1)}})}function addRowToFrontList(e){$("[table-body]").html('<tr class="custom-table__body-row"><td class="custom-table__body-col"></td><td class="custom-table__body-col">'+e.date+'</td>                        <td class="custom-table__body-col">'+e.count+'</td>                        <td class="custom-table__body-col">'+e.course+'</td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-menu class="column-links display-flex-none is-open">                                <form delete-row-form class="column-form" action="#">                                    <input type="hidden" value="'+e.id+'" name="id" required>                                    <button delete-row type="button" class="column_mwidth column_mwidth-delete"></button>                                </form>                            </div>                        </td>                    </tr>'+$("[table-body]").html()),initDeleteRowFromList()}function initDatePicker(){$(".datepicker-here-cs").datepicker({autoClose:!0})}$(document).on("click","[js-tab]",(function(e){var t=$(this),i=t.data("tab");$tabs.removeClass("active"),t.addClass("active"),$tabPanels.removeClass("is-open").filter("[data-tab="+i+"]").addClass("is-open")})),$(document).on("click","[js-add-rate-level]",(function(e){var t=$(".rate-levels"),i=t.find(".rate-level").last(),n=t.find(".rate-titles");0!==i.length?(i.after(getLevelField()),recountRateLevel()):n.after(getLevelField()),setLevels()})),$(document).on("click",".rate-level__delete",(function(e){$(this).closest(".rate-level").remove(),setLevels(),recountRateLevel()})),$(document).on("click","[js-save-template]",(function(e){e.preventDefault();var t=$(this).attr("disabled");void 0!==t&&!1!==t||$("[js-template-form]").trigger("submit")})),$(document).on("submit","[js-template-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-template-form]")[0]);saveTemplate(t)}})),$(document).on("change","[template-metric]",(function(e){var t=0;$("[template-metric]").each((function(e){$(this).is(":checked")?($(this).attr("name","metrics["+t+"].id"),t++):$(this).attr("name","templateMetric")}))})),$(document).on("click","[js-disable-template-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите удалить шаблон?"),$("[dialog]").find(".dialog__text").html("Шаблон будет помещен в архив"),$("[dialog]").find("[accept-dialog]").attr("disable-template",""),$("[dialog]").addClass("is-open"),DISABLE_TEMPLATE_FORM=$(this).closest("[js-disable-template-form]")})),$(document).on("click","[close-dialog]",(function(e){removeAcceptBtnAttribute($(this).siblings("[accept-dialog]")),$(this).closest(".dialog").removeClass("is-open")})),$(document).on("click","[disable-template]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),DISABLE_TEMPLATE_FORM.trigger("submit")})),$(document).on("submit","[js-disable-template-form]",(function(e){(e.preventDefault(),validateForm(this))&&disableTemplate($(this).serializeObject())})),$(document).on("click","[js-enable-template-btn]",(function(e){e.preventDefault(),$("[dialog]").find(".dialog__title").html("Вы действительно хотите восстановить шаблон?"),$("[dialog]").find(".dialog__text").html("Шаблон будет помещен в список доступных шаблонов"),$("[dialog]").find("[accept-dialog]").attr("enable-template",""),$("[dialog]").addClass("is-open"),ENABLE_TEMPLATE_FORM=$(this).closest("[js-enable-template-form]")})),$(document).on("click","[enable-template]",(function(e){e.preventDefault(),$("[dialog]").removeClass("is-open"),removeAcceptBtnAttribute($(this)),ENABLE_TEMPLATE_FORM.trigger("submit")})),$(document).on("submit","[js-enable-template-form]",(function(e){(e.preventDefault(),validateForm(this))&&enableTemplate($(this).serializeObject())})),$(document).on("change","[qs-filter]",(function(){$("[qs-filter-form]").trigger("submit")})),
/*!
 * Quill Editor v1.3.6
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Quill=t():e.Quill=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=109)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),a=i(18),s=i(19),o=i(45),r=i(46),l=i(47),d=i(48),c=i(49),u=i(12),p=i(32),h=i(33),f=i(31),m=i(1),v={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:n.default,Format:a.default,Leaf:s.default,Embed:d.default,Scroll:o.default,Block:l.default,Inline:r.default,Text:c.default,Attributor:{Attribute:u.default,Class:p.default,Style:h.default,Store:f.default}};t.default=v},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var i=this;return t="[Parchment] "+t,(i=e.call(this,t)||this).message=t,i.name=i.constructor.name,i}return a(t,e),t}(Error);t.ParchmentError=s;var o,r={},l={},d={},c={};function u(e,t){var i;if(void 0===t&&(t=o.ANY),"string"==typeof e)i=c[e]||r[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)i=c.text;else if("number"==typeof e)e&o.LEVEL&o.BLOCK?i=c.block:e&o.LEVEL&o.INLINE&&(i=c.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var a in n)if(i=l[n[a]])break;i=i||d[e.tagName]}return null==i?null:t&o.LEVEL&i.scope&&t&o.TYPE&i.scope?i:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=function(e,t){var i=u(e);if(null==i)throw new s("Unable to create "+e+" blot");var n=i,a=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(a,t)},t.find=function e(i,n){return void 0===n&&(n=!1),null==i?null:null!=i[t.DATA_KEY]?i[t.DATA_KEY].blot:n?e(i.parentNode,n):null},t.query=u,t.register=function e(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(t.length>1)return t.map((function(t){return e(t)}));var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new s("Invalid definition");if("abstract"===n.blotName)throw new s("Cannot register abstract class");if(c[n.blotName||n.attrName]=n,"string"==typeof n.keyName)r[n.keyName]=n;else if(null!=n.className&&(l[n.className]=n),null!=n.tagName){Array.isArray(n.tagName)?n.tagName=n.tagName.map((function(e){return e.toUpperCase()})):n.tagName=n.tagName.toUpperCase();var a=Array.isArray(n.tagName)?n.tagName:[n.tagName];a.forEach((function(e){null!=d[e]&&null!=n.className||(d[e]=n)}))}return n}},function(e,t,i){var n=i(51),a=i(11),s=i(3),o=i(20),r=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var i={};return 0===e.length?this:(i.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(i.attributes=t),this.push(i))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var i={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(i.attributes=t),this.push(i)},l.prototype.push=function(e){var t=this.ops.length,i=this.ops[t-1];if(e=s(!0,{},e),"object"==typeof i){if("number"==typeof e.delete&&"number"==typeof i.delete)return this.ops[t-1]={delete:i.delete+e.delete},this;if("number"==typeof i.delete&&null!=e.insert&&(t-=1,"object"!=typeof(i=this.ops[t-1])))return this.ops.unshift(e),this;if(a(e.attributes,i.attributes)){if("string"==typeof e.insert&&"string"==typeof i.insert)return this.ops[t-1]={insert:i.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof i.retain)return this.ops[t-1]={retain:i.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],i=[];return this.forEach((function(n){(e(n)?t:i).push(n)})),[t,i]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+o.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+o.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var i=[],n=o.iterator(this.ops),a=0;a<t&&n.hasNext();){var s;a<e?s=n.next(e-a):(s=n.next(t-a),i.push(s)),a+=o.length(s)}return new l(i)},l.prototype.compose=function(e){for(var t=o.iterator(this.ops),i=o.iterator(e.ops),n=new l;t.hasNext()||i.hasNext();)if("insert"===i.peekType())n.push(i.next());else if("delete"===t.peekType())n.push(t.next());else{var a=Math.min(t.peekLength(),i.peekLength()),s=t.next(a),r=i.next(a);if("number"==typeof r.retain){var d={};"number"==typeof s.retain?d.retain=a:d.insert=s.insert;var c=o.attributes.compose(s.attributes,r.attributes,"number"==typeof s.retain);c&&(d.attributes=c),n.push(d)}else"number"==typeof r.delete&&"number"==typeof s.retain&&n.push(r)}return n.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var i=[this,e].map((function(t){return t.map((function(i){if(null!=i.insert)return"string"==typeof i.insert?i.insert:r;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),s=new l,d=n(i[0],i[1],t),c=o.iterator(this.ops),u=o.iterator(e.ops);return d.forEach((function(e){for(var t=e[1].length;t>0;){var i=0;switch(e[0]){case n.INSERT:i=Math.min(u.peekLength(),t),s.push(u.next(i));break;case n.DELETE:i=Math.min(t,c.peekLength()),c.next(i),s.delete(i);break;case n.EQUAL:i=Math.min(c.peekLength(),u.peekLength(),t);var r=c.next(i),l=u.next(i);a(r.insert,l.insert)?s.retain(i,o.attributes.diff(r.attributes,l.attributes)):s.push(l).delete(i)}t-=i}})),s.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var i=o.iterator(this.ops),n=new l,a=0;i.hasNext();){if("insert"!==i.peekType())return;var s=i.peek(),r=o.length(s)-i.peekLength(),d="string"==typeof s.insert?s.insert.indexOf(t,r)-r:-1;if(d<0)n.push(i.next());else if(d>0)n.push(i.next(d));else{if(!1===e(n,i.next(1).attributes||{},a))return;a+=1,n=new l}}n.length()>0&&e(n,{},a)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var i=o.iterator(this.ops),n=o.iterator(e.ops),a=new l;i.hasNext()||n.hasNext();)if("insert"!==i.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())a.push(n.next());else{var s=Math.min(i.peekLength(),n.peekLength()),r=i.next(s),d=n.next(s);if(r.delete)continue;d.delete?a.push(d):a.retain(s,o.attributes.transform(r.attributes,d.attributes,t))}else a.retain(o.length(i.next()));return a.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var i=o.iterator(this.ops),n=0;i.hasNext()&&n<=e;){var a=i.peekLength(),s=i.peekType();i.next(),"delete"!==s?("insert"===s&&(n<e||!t)&&(e+=a),n+=a):e-=Math.min(a,e-n)}return e},e.exports=l},function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,a=i.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!a&&!s)return!1;for(t in e);return void 0===t||i.call(e,t)};e.exports=function e(){var t,i,n,o,r,l,d=arguments[0],c=1,u=arguments.length,p=!1;for("boolean"==typeof d&&(p=d,d=arguments[1]||{},c=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});c<u;++c)if(null!=(t=arguments[c]))for(i in t)n=d[i],d!==(o=t[i])&&(p&&o&&(s(o)||(r=a(o)))?(r?(r=!1,l=n&&a(n)?n:[]):l=n&&s(n)?n:{},d[i]=e(p,l,o)):void 0!==o&&(d[i]=o));return d}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},s=u(i(3)),o=u(i(2)),r=u(i(0)),l=u(i(16)),d=u(i(6)),c=u(i(7));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),n(t,[{key:"attach",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new r.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new o.default).insert(this.value(),(0,s.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var i=r.default.query(e,r.default.Scope.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,t)}},{key:"formatAt",value:function(e,t,i,n){this.format(i,n)}},{key:"insertAt",value:function(e,i,n){if("string"==typeof i&&i.endsWith("\n")){var s=r.default.create(v.blotName);this.parent.insertBefore(s,0===e?this:this.next),s.insertAt(0,i.slice(0,-1))}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,i,n)}}]),t}(r.default.Embed);m.scope=r.default.Scope.BLOCK_BLOT;var v=function(e){function t(e){p(this,t);var i=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.cache={},i}return f(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(r.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),b(t))}),new o.default).insert("\n",b(this))),this.cache.delta}},{key:"deleteAt",value:function(e,i){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,i),this.cache={}}},{key:"formatAt",value:function(e,i,n,s){i<=0||(r.default.query(n,r.default.Scope.BLOCK)?e+i===this.length()&&this.format(n,s):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(i,this.length()-e-1),n,s),this.cache={})}},{key:"insertAt",value:function(e,i,n){if(null!=n)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,i,n);if(0!==i.length){var s=i.split("\n"),o=s.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var r=this;s.reduce((function(e,t){return(r=r.split(e,!0)).insertAt(0,t),t.length}),e+o.length)}}},{key:"insertBefore",value:function(e,i){var n=this.children.head;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,i),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,i){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,i),this.cache={}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var s=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,i);return this.cache={},s}}]),t}(r.default.Block);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,s.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:b(e.parent,t))}v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[d.default,r.default.Embed,c.default],t.bubbleFormats=b,t.BlockEmbed=m,t.default=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(50);var o=v(i(2)),r=v(i(14)),l=v(i(8)),d=v(i(9)),c=v(i(0)),u=i(15),p=v(u),h=v(i(3)),f=v(i(10)),m=v(i(34));function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=(0,f.default)("quill"),y=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(this,e),this.options=$(t,n),this.container=this.options.container,null==this.container)return _.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var a=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=c.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new r.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e){e===l.default.events.TEXT_CHANGE&&i.root.classList.toggle("ql-blank",i.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(e,t){var n=i.selection.lastRange,a=n&&0===n.length?n.index:void 0;w.call(i,(function(){return i.editor.update(null,t,a)}),e)}));var s=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+a+"<p><br></p></div>");this.setContents(s),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),f.default.level(e)}},{key:"find",value:function(e){return e.__quill||c.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&_.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var a=e.attrName||e.blotName;"string"==typeof a?this.register("formats/"+a,e,t):Object.keys(e).forEach((function(n){i.register(n,e[n],t)}))}else null==this.imports[e]||n||_.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?c.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),s(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var i=e;(e=document.createElement("div")).classList.add(i)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,i){var n=this,s=k(e,t,i),o=a(s,4);return e=o[0],t=o[1],i=o[3],w.call(this,(function(){return n.editor.deleteText(e,t)}),i,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,(function(){var n=i.getSelection(!0),a=new o.default;if(null==n)return a;if(c.default.query(e,c.default.Scope.BLOCK))a=i.editor.formatLine(n.index,n.length,b({},e,t));else{if(0===n.length)return i.selection.format(e,t),a;a=i.editor.formatText(n.index,n.length,b({},e,t))}return i.setSelection(n,l.default.sources.SILENT),a}),n)}},{key:"formatLine",value:function(e,t,i,n,s){var o,r=this,l=k(e,t,i,n,s),d=a(l,4);return e=d[0],t=d[1],o=d[2],s=d[3],w.call(this,(function(){return r.editor.formatLine(e,t,o)}),s,e,0)}},{key:"formatText",value:function(e,t,i,n,s){var o,r=this,l=k(e,t,i,n,s),d=a(l,4);return e=d[0],t=d[1],o=d[2],s=d[3],w.call(this,(function(){return r.editor.formatText(e,t,o)}),s,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=void 0;i="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,i=k(e,t),n=a(i,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,i=k(e,t),n=a(i,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,i,n){var a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,(function(){return a.editor.insertEmbed(t,i,n)}),s,t)}},{key:"insertText",value:function(e,t,i,n,s){var o,r=this,l=k(e,0,i,n,s),d=a(l,4);return e=d[0],o=d[2],s=d[3],w.call(this,(function(){return r.editor.insertText(e,t,o)}),s,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,i){this.clipboard.dangerouslyPasteHTML(e,t,i)}},{key:"removeFormat",value:function(e,t,i){var n=this,s=k(e,t,i),o=a(s,4);return e=o[0],t=o[1],i=o[3],w.call(this,(function(){return n.editor.removeFormat(e,t)}),i,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){e=new o.default(e);var i=t.getLength(),n=t.editor.deleteText(0,i),a=t.editor.applyDelta(e),s=a.ops[a.ops.length-1];return null!=s&&"string"==typeof s.insert&&"\n"===s.insert[s.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),a.delete(1)),n.compose(a)}),i)}},{key:"setSelection",value:function(t,i,n){if(null==t)this.selection.setRange(null,i||e.sources.API);else{var s=k(t,i,n),o=a(s,4);t=o[0],i=o[1],n=o[3],this.selection.setRange(new u.Range(t,i),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,i=(new o.default).insert(e);return this.setContents(i,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){return e=new o.default(e),t.editor.applyDelta(e,i)}),i,!0)}}]),e}();function $(e,t){if((t=(0,h.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==y.DEFAULTS.theme){if(t.theme=y.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=m.default;var i=(0,h.default)(!0,{},t.theme.DEFAULTS);[i,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var n=Object.keys(i.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var i=y.import("modules/"+t);return null==i?_.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=i.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,h.default)(!0,{},y.DEFAULTS,{modules:n},i,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,i){return t.modules[i]&&(e[i]=t.modules[i]),e}),{}),t}function w(e,t,i,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new o.default;var a=null==i?null:this.getSelection(),s=this.editor.delta,r=e();if(null!=a&&(!0===i&&(i=a.index),null==n?a=C(a,r,t):0!==n&&(a=C(a,i,n,t)),this.setSelection(a,l.default.sources.SILENT)),r.length()>0){var d,c,u=[l.default.events.TEXT_CHANGE,r,s,t];if((d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT)(c=this.emitter).emit.apply(c,u)}return r}function k(e,t,i,a,s){var o={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(s=a,a=i,i=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(s=a,a=i,i=t,t=0),"object"===(void 0===i?"undefined":n(i))?(o=i,s=a):"string"==typeof i&&(null!=a?o[i]=a:s=i),[e,t,o,s=s||l.default.sources.API]}function C(e,t,i,n){if(null==e)return null;var s=void 0,r=void 0;if(t instanceof o.default){var d=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,n!==l.default.sources.USER)})),c=a(d,2);s=c[0],r=c[1]}else{var p=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&n===l.default.sources.USER?e:i>=0?e+i:Math.max(t,e+i)})),h=a(p,2);s=h[0],r=h[1]}return new u.Range(s,r-s)}y.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},y.events=l.default.events,y.sources=l.default.sources,y.version="1.3.6",y.imports={delta:o.default,parchment:c.default,"core/module":d.default,"core/theme":m.default},t.expandConfig=$,t.overload=k,t.default=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},s=r(i(7)),o=r(i(0));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return l(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,i,n,s){if(t.compare(this.statics.blotName,n)<0&&o.default.query(n,o.default.Scope.BLOT)){var r=this.isolate(e,i);s&&r.wrap(n,s)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,i,n,s)}},{key:"optimize",value:function(e){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var i=this.parent.isolate(this.offset(),this.length());this.moveChildren(i),i.wrap(this)}}}],[{key:"compare",value:function(e,i){var n=t.order.indexOf(e),a=t.order.indexOf(i);return n>=0||a>=0?n-a:e===i?0:e<i?-1:1}}]),t}(o.default.Inline);c.allowedChildren=[c,o.default.Embed,s.default],c.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default.Text);t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},s=o(i(54));function o(e){return e&&e.__esModule?e:{default:e}}var r=(0,o(i(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var i;e.__quill&&e.__quill.emitter&&(i=e.__quill.emitter).handleDOM.apply(i,t)}))}))}));var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",r.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){r.log.apply(r,arguments),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach((function(t){var n=t.node,a=t.handler;(e.target===n||n.contains(e.target))&&a.apply(void 0,[e].concat(i))}))}},{key:"listenDOM",value:function(e,t,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:i})}}]),t}(s.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.quill=t,this.options=i};a.DEFAULTS={},t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],a="warn";function s(e){if(n.indexOf(e)<=n.indexOf(a)){for(var t,i=arguments.length,s=Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];(t=console)[e].apply(t,s)}}function o(e){return n.reduce((function(t,i){return t[i]=s.bind(console,i,e),t}),{})}s.level=o.level=function(e){a=e},t.default=o},function(e,t,i){var n=Array.prototype.slice,a=i(52),s=i(53),o=e.exports=function(e,t,i){return i||(i={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?i.strict?e===t:e==t:function(e,t,i){var d,c;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(s(e))return!!s(t)&&(e=n.call(e),t=n.call(t),o(e,t,i));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(d=0;d<e.length;d++)if(e[d]!==t[d])return!1;return!0}try{var u=a(e),p=a(t)}catch(e){return!1}if(u.length!=p.length)return!1;for(u.sort(),p.sort(),d=u.length-1;d>=0;d--)if(u[d]!=p[d])return!1;for(d=u.length-1;d>=0;d--)if(c=u[d],!o(e[c],t[c],i))return!1;return typeof e==typeof t}(e,t,i))};function r(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),a=function(){function e(e,t,i){void 0===i&&(i={}),this.attrName=e,this.keyName=t;var a=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=i.scope?this.scope=i.scope&n.Scope.LEVEL|a:this.scope=n.Scope.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=u(i(2)),r=u(i(0)),l=u(i(4)),d=u(i(6)),c=u(i(7));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(d.default);m.blotName="code",m.tagName="CODE";var v=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),a(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,i){return t.insert(i).insert("\n",e.formats())}),new o.default)}},{key:"format",value:function(e,i){if(e!==this.statics.blotName||!i){var a=this.descendant(c.default,this.length()-1),o=n(a,1)[0];null!=o&&o.deleteAt(o.length()-1,1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,i)}}},{key:"formatAt",value:function(e,i,n,a){if(0!==i&&null!=r.default.query(n,r.default.Scope.BLOCK)&&(n!==this.statics.blotName||a!==this.statics.formats(this.domNode))){var s=this.newlineIndex(e);if(!(s<0||s>=e+i)){var o=this.newlineIndex(e,!0)+1,l=s-o+1,d=this.isolate(o,l),c=d.next;d.format(n,a),c instanceof t&&c.formatAt(0,e-o+i-l,n,a)}}}},{key:"insertAt",value:function(e,t,i){if(null==i){var a=this.descendant(c.default,e),s=n(a,2),o=s[0],r=s[1];o.insertAt(r,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var i=this.domNode.textContent.slice(e).indexOf("\n");return i>-1?e+i:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(r.default.create("text","\n")),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var i=this.next;null!=i&&i.prev===this&&i.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===i.statics.formats(i.domNode)&&(i.optimize(e),i.moveChildren(this),i.remove())}},{key:"replace",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=r.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof r.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var i=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return i.setAttribute("spellcheck",!1),i}},{key:"formats",value:function(){return!0}}]),t}(l.default);v.blotName="code-block",v.tagName="PRE",v.TAB="  ",t.Code=m,t.default=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=b(i(2)),r=b(i(20)),l=b(i(0)),d=b(i(13)),c=b(i(24)),u=i(4),p=b(u),h=b(i(16)),f=b(i(21)),m=b(i(11)),v=b(i(3));function b(e){return e&&e.__esModule?e:{default:e}}var g=/^[ -~]*$/,_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return s(e,[{key:"applyDelta",value:function(e){var t=this,i=!1;this.scroll.update();var s=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var i=(0,f.default)(t.attributes);return delete i.image,e.insert({image:t.attributes.image},i)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,f.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new o.default)}(e)).reduce((function(e,o){var d=o.retain||o.delete||o.insert.length||1,c=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var h=o.insert;h.endsWith("\n")&&i&&(i=!1,h=h.slice(0,-1)),e>=s&&!h.endsWith("\n")&&(i=!0),t.scroll.insertAt(e,h);var f=t.scroll.line(e),m=a(f,2),b=m[0],g=m[1],_=(0,v.default)({},(0,u.bubbleFormats)(b));if(b instanceof p.default){var y=b.descendant(l.default.Leaf,g),$=a(y,1)[0];_=(0,v.default)(_,(0,u.bubbleFormats)($))}c=r.default.attributes.diff(_,c)||{}}else if("object"===n(o.insert)){var w=Object.keys(o.insert)[0];if(null==w)return e;t.scroll.insertAt(e,w,o.insert[w])}s+=d}return Object.keys(c).forEach((function(i){t.scroll.formatAt(e,d,i,c[i])})),e+d}),0),e.reduce((function(e,i){return"number"==typeof i.delete?(t.scroll.deleteAt(e,i.delete),e):e+(i.retain||i.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new o.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach((function(a){if(null==i.scroll.whitelist||i.scroll.whitelist[a]){var s=i.scroll.lines(e,Math.max(t,1)),o=t;s.forEach((function(t){var s=t.length();if(t instanceof d.default){var r=e-t.offset(i.scroll),l=t.newlineIndex(r+o)-r+1;t.formatAt(r,l,a,n[a])}else t.format(a,n[a]);o-=s}))}})),this.scroll.optimize(),this.update((new o.default).retain(e).retain(t,(0,f.default)(n)))}},{key:"formatText",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach((function(a){i.scroll.formatAt(e,t,a,n[a])})),this.update((new o.default).retain(e).retain(t,(0,f.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new o.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===t?this.scroll.path(e).forEach((function(e){var t=a(e,1)[0];t instanceof p.default?i.push(t):t instanceof l.default.Leaf&&n.push(t)})):(i=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var s=[i,n].map((function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var i=e.shift();if(null==i)return t;t=y((0,u.bubbleFormats)(i),t)}return t}));return v.default.apply(v.default,s)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"==typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,i){return this.scroll.insertAt(e,t,i),this.update((new o.default).retain(e).insert(function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},t,i)))}},{key:"insertText",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach((function(a){i.scroll.formatAt(e,t.length,a,n[a])})),this.update((new o.default).retain(e).insert(t,(0,f.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===p.default.blotName&&(!(e.children.length>1)&&e.children.head instanceof h.default)}},{key:"removeFormat",value:function(e,t){var i=this.getText(e,t),n=this.scroll.line(e+t),s=a(n,2),r=s[0],l=s[1],c=0,u=new o.default;null!=r&&(c=r instanceof d.default?r.newlineIndex(l)-l+1:r.length()-l,u=r.delta().slice(l,l+c-1).insert("\n"));var p=this.getContents(e,t+c).diff((new o.default).insert(i).concat(u)),h=(new o.default).retain(e).concat(p);return this.applyDelta(h)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(g)&&l.default.find(t[0].target)){var a=l.default.find(t[0].target),s=(0,u.bubbleFormats)(a),r=a.offset(this.scroll),d=t[0].oldValue.replace(c.default.CONTENTS,""),p=(new o.default).insert(d),h=(new o.default).insert(a.value()),f=(new o.default).retain(r).concat(p.diff(h,i));e=f.reduce((function(e,t){return t.insert?e.insert(t.insert,s):e.push(t)}),new o.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,m.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,i));return e}}]),e}();function y(e,t){return Object.keys(t).reduce((function(i,n){return null==e[n]||(t[n]===e[n]?i[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(i[n]=t[n].concat([e[n]])):i[n]=[t[n],e[n]]),i}),{})}t.default=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=d(i(0)),o=d(i(21)),r=d(i(11)),l=d(i(8));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=(0,d(i(10)).default)("quill:selection"),h=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=i},f=function(){function e(t,i){var n=this;u(this,e),this.emitter=i,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=s.default.create("cursor",this),this.lastRange=this.savedRange=new h(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var i=t.range,a=i.startNode,s=i.startOffset,o=i.endNode,r=i.endOffset;n.setNativeRange(a,s,o,r)}})),this.update(l.default.sources.SILENT)}return a(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!s.default.query(e,s.default.Scope.BLOCK)){if(i.start.node!==this.cursor.textNode){var n=s.default.find(i.start.node,!1);if(null==n)return;if(n instanceof s.default.Leaf){var a=n.split(i.start.offset);n.parent.insertBefore(this.cursor,a)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.scroll.length();e=Math.min(e,i-1),t=Math.min(e+t,i-1)-e;var a=void 0,s=this.scroll.leaf(e),o=n(s,2),r=o[0],l=o[1];if(null==r)return null;var d=r.position(l,!0),c=n(d,2);a=c[0],l=c[1];var u=document.createRange();if(t>0){u.setStart(a,l);var p=this.scroll.leaf(e+t),h=n(p,2);if(r=h[0],l=h[1],null==r)return null;var f=r.position(l,!0),m=n(f,2);return a=m[0],l=m[1],u.setEnd(a,l),u.getBoundingClientRect()}var v="left",b=void 0;return a instanceof Text?(l<a.data.length?(u.setStart(a,l),u.setEnd(a,l+1)):(u.setStart(a,l-1),u.setEnd(a,l),v="right"),b=u.getBoundingClientRect()):(b=r.domNode.getBoundingClientRect(),l>0&&(v="right")),{bottom:b.top+b.height,height:b.height,left:b[v],right:b[v],top:b.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var i=this.normalizeNative(t);return p.info("getNativeRange",i),i}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,i=[[e.start.node,e.start.offset]];e.native.collapsed||i.push([e.end.node,e.end.offset]);var a=i.map((function(e){var i=n(e,2),a=i[0],o=i[1],r=s.default.find(a,!0),l=r.offset(t.scroll);return 0===o?l:r instanceof s.default.Container?l+r.length():l+r.index(a,o)})),o=Math.min(Math.max.apply(Math,c(a)),this.scroll.length()-1),r=Math.min.apply(Math,[o].concat(c(a)));return new h(r,o-r)}},{key:"normalizeNative",value:function(e){if(!m(this.root,e.startContainer)||!e.collapsed&&!m(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,i=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>i)t=t.childNodes[i],i=0;else{if(t.childNodes.length!==i)break;i=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=i})),t}},{key:"rangeToNative",value:function(e){var t=this,i=e.collapsed?[e.index]:[e.index,e.index+e.length],a=[],s=this.scroll.length();return i.forEach((function(e,i){e=Math.min(s-1,e);var o,r=t.scroll.leaf(e),l=n(r,2),d=l[0],c=l[1],u=d.position(c,0!==i),p=n(u,2);o=p[0],c=p[1],a.push(o,c)})),a.length<2&&(a=a.concat(a)),a}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var i=this.getBounds(t.index,t.length);if(null!=i){var a=this.scroll.length()-1,s=this.scroll.line(Math.min(t.index,a)),o=n(s,1)[0],r=o;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,a));r=n(l,1)[0]}if(null!=o&&null!=r){var d=e.getBoundingClientRect();i.top<d.top?e.scrollTop-=d.top-i.top:i.bottom>d.bottom&&(e.scrollTop+=i.bottom-d.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",e,t,i,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=i.parentNode){var s=document.getSelection();if(null!=s)if(null!=e){this.hasFocus()||this.root.focus();var o=(this.getNativeRange()||{}).native;if(null==o||a||e!==o.startContainer||t!==o.startOffset||i!==o.endContainer||n!==o.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==i.tagName&&(n=[].indexOf.call(i.parentNode.childNodes,i),i=i.parentNode);var r=document.createRange();r.setStart(e,t),r.setEnd(i,n),s.removeAllRanges(),s.addRange(r)}}else s.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(i=t,t=!1),p.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,c(n).concat([t]))}else this.setNativeRange(null);this.update(i)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,i=this.getRange(),a=n(i,2),s=a[0],d=a[1];if(this.lastRange=s,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,r.default)(t,this.lastRange)){var c;!this.composing&&null!=d&&d.native.collapsed&&d.start.node!==this.cursor.textNode&&this.cursor.restore();var u,p=[l.default.events.SELECTION_CHANGE,(0,o.default)(this.lastRange),(0,o.default)(t),e];if((c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(p)),e!==l.default.sources.SILENT)(u=this.emitter).emit.apply(u,p)}}}]),e}();function m(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=h,t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"insertInto",value:function(e,i){0===e.children.length?function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,i):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default.Embed);l.blotName="break",l.tagName="BR",t.default=l},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(44),o=i(30),r=i(1),l=function(e){function t(t){var i=e.call(this,t)||this;return i.build(),i}return a(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var i=d(t);e.insertBefore(i,e.children.head||void 0)}catch(e){if(e instanceof r.ParchmentError)return;throw e}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,i){e.deleteAt(t,i)}))},t.prototype.descendant=function(e,i){var n=this.children.find(i),a=n[0],s=n[1];return null==e.blotName&&e(a)||null!=e.blotName&&a instanceof e?[a,s]:a instanceof t?a.descendant(e,s):[null,-1]},t.prototype.descendants=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=Number.MAX_VALUE);var a=[],s=n;return this.children.forEachAt(i,n,(function(i,n,o){(null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e)&&a.push(i),i instanceof t&&(a=a.concat(i.descendants(e,n,s))),s-=o})),a},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,i,n){this.children.forEachAt(e,t,(function(e,t,a){e.formatAt(t,a,i,n)}))},t.prototype.insertAt=function(e,t,i){var n=this.children.find(e),a=n[0],s=n[1];if(a)a.insertAt(s,t,i);else{var o=null==i?r.create("text",t):r.create(t,i);this.appendChild(o)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new r.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(i){e.insertBefore(i,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var i=r.create(this.statics.defaultChild);this.appendChild(i),i.optimize(t)}else this.remove()},t.prototype.path=function(e,i){void 0===i&&(i=!1);var n=this.children.find(e,i),a=n[0],s=n[1],o=[[this,e]];return a instanceof t?o.concat(a.path(s,i)):(null!=a&&o.push([a,s]),o)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(i){i instanceof t&&i.moveChildren(this),e.prototype.replace.call(this,i)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var i=this.clone();return this.parent.insertBefore(i,this.next),this.children.forEachAt(e,this.length(),(function(e,n,a){e=e.split(n,t),i.appendChild(e)})),i},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var i=this,n=[],a=[];e.forEach((function(e){e.target===i.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),a.push.apply(a,e.removedNodes))})),a.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=r.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==i.domNode||t.detach())}})),n.filter((function(e){return e.parentNode==i.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=r.find(e.nextSibling));var n=d(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(i),i.insertBefore(n,t||void 0))}))},t}(o.default);function d(e){var t=r.find(e);if(null==t)try{t=r.create(e)}catch(i){t=r.create(r.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(12),o=i(31),r=i(17),l=i(1),d=function(e){function t(t){var i=e.call(this,t)||this;return i.attributes=new o.default(i.domNode),i}return a(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var i=l.query(e);i instanceof s.default?this.attributes.attribute(i,t):t&&(null==i||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,i){var n=e.prototype.replaceWith.call(this,t,i);return this.attributes.copy(n),n},t.prototype.update=function(t,i){var n=this;e.prototype.update.call(this,t,i),t.some((function(e){return e.target===n.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(i,n){var a=e.prototype.wrap.call(this,i,n);return a instanceof t&&a.statics.scope===this.statics.scope&&this.attributes.move(a),a},t}(r.default);t.default=d},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(30),o=i(1),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var i=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(i+=1),[this.parent.domNode,i]},t.prototype.value=function(){return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e;var e},t.scope=o.Scope.INLINE_BLOT,t}(s.default);t.default=r},function(e,t,i){var n=i(11),a=i(3),s={attributes:{compose:function(e,t,i){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=a(!0,{},t);for(var s in i||(n=Object.keys(n).reduce((function(e,t){return null!=n[t]&&(e[t]=n[t]),e}),{})),e)void 0!==e[s]&&void 0===t[s]&&(n[s]=e[s]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var i=Object.keys(e).concat(Object.keys(t)).reduce((function(i,a){return n(e[a],t[a])||(i[a]=void 0===t[a]?null:t[a]),i}),{});return Object.keys(i).length>0?i:void 0},transform:function(e,t,i){if("object"!=typeof e)return t;if("object"==typeof t){if(!i)return t;var n=Object.keys(t).reduce((function(i,n){return void 0===e[n]&&(i[n]=t[n]),i}),{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new o(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function o(e){this.ops=e,this.index=0,this.offset=0}o.prototype.hasNext=function(){return this.peekLength()<1/0},o.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var i=this.offset,n=s.length(t);if(e>=n-i?(e=n-i,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var a={};return t.attributes&&(a.attributes=t.attributes),"number"==typeof t.retain?a.retain=e:"string"==typeof t.insert?a.insert=t.insert.substr(i,e):a.insert=t.insert,a}return{retain:1/0}},o.prototype.peek=function(){return this.ops[this.index]},o.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},o.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},e.exports=s},function(e,t){var i=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,i,n;try{t=Map}catch(e){t=function(){}}try{i=Set}catch(e){i=function(){}}try{n=Promise}catch(e){n=function(){}}function a(s,r,l,d,c){"object"==typeof r&&(l=r.depth,d=r.prototype,c=r.includeNonEnumerable,r=r.circular);var u=[],p=[],h="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===l&&(l=1/0),function s(l,f){if(null===l)return null;if(0===f)return l;var m,v;if("object"!=typeof l)return l;if(e(l,t))m=new t;else if(e(l,i))m=new i;else if(e(l,n))m=new n((function(e,t){l.then((function(t){e(s(t,f-1))}),(function(e){t(s(e,f-1))}))}));else if(a.__isArray(l))m=[];else if(a.__isRegExp(l))m=new RegExp(l.source,o(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(a.__isDate(l))m=new Date(l.getTime());else{if(h&&Buffer.isBuffer(l))return m=new Buffer(l.length),l.copy(m),m;e(l,Error)?m=Object.create(l):void 0===d?(v=Object.getPrototypeOf(l),m=Object.create(v)):(m=Object.create(d),v=d)}if(r){var b=u.indexOf(l);if(-1!=b)return p[b];u.push(l),p.push(m)}for(var g in e(l,t)&&l.forEach((function(e,t){var i=s(t,f-1),n=s(e,f-1);m.set(i,n)})),e(l,i)&&l.forEach((function(e){var t=s(e,f-1);m.add(t)})),l){var _;v&&(_=Object.getOwnPropertyDescriptor(v,g)),_&&null==_.set||(m[g]=s(l[g],f-1))}if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(l);for(g=0;g<y.length;g++){var $=y[g];(!(k=Object.getOwnPropertyDescriptor(l,$))||k.enumerable||c)&&(m[$]=s(l[$],f-1),k.enumerable||Object.defineProperty(m,$,{enumerable:!1}))}}if(c){var w=Object.getOwnPropertyNames(l);for(g=0;g<w.length;g++){var k,C=w[g];(k=Object.getOwnPropertyDescriptor(l,C))&&k.enumerable||(m[C]=s(l[C],f-1),Object.defineProperty(m,C,{enumerable:!1}))}}return m}(s,l)}function s(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=s,a.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},a.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},a.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},a.__getRegExpFlags=o,a}();"object"==typeof e&&e.exports&&(e.exports=i)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=h(i(0)),r=h(i(8)),l=i(4),d=h(l),c=h(i(16)),u=h(i(13)),p=h(i(25));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof d.default||e instanceof l.BlockEmbed}var m=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=i.emitter,Array.isArray(i.whitelist)&&(n.whitelist=i.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),n.domNode.addEventListener("DOMNodeInserted",(function(){})),n.optimize(),n.enable(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,i){var a=this.line(e),o=n(a,2),r=o[0],d=o[1],p=this.line(e+i),h=n(p,1)[0];if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,i),null!=h&&r!==h&&d>0){if(r instanceof l.BlockEmbed||h instanceof l.BlockEmbed)return void this.optimize();if(r instanceof u.default){var f=r.newlineIndex(r.length(),!0);if(f>-1&&(r=r.split(f+1))===h)return void this.optimize()}else if(h instanceof u.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var v=h.children.head instanceof c.default?null:h.children.head;r.moveChildren(h,v),r.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,i,n,a){(null==this.whitelist||this.whitelist[n])&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,i,n,a),this.optimize())}},{key:"insertAt",value:function(e,i,n){if(null==n||null==this.whitelist||this.whitelist[i]){if(e>=this.length())if(null==n||null==o.default.query(i,o.default.Scope.BLOCK)){var a=o.default.create(this.statics.defaultChild);this.appendChild(a),null==n&&i.endsWith("\n")&&(i=i.slice(0,-1)),a.insertAt(0,i,n)}else{var r=o.default.create(i,n);this.appendChild(r)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,i,n);this.optimize()}}},{key:"insertBefore",value:function(e,i){if(e.statics.scope===o.default.Scope.INLINE_BLOT){var n=o.default.create(this.statics.defaultChild);n.appendChild(e),e=n}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,i)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=function e(t,i,n){var a=[],s=n;return t.children.forEachAt(i,n,(function(t,i,n){f(t)?a.push(t):t instanceof o.default.Container&&(a=a.concat(e(t,i,s))),s-=n})),a};return i(this,e,t)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,i),e.length>0&&this.emitter.emit(r.default.events.SCROLL_OPTIMIZE,e,i))}},{key:"path",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var i=r.default.sources.USER;"string"==typeof e&&(i=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(r.default.events.SCROLL_BEFORE_UPDATE,i,e),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(r.default.events.SCROLL_UPDATE,i,e)}}}]),t}(o.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[d.default,l.BlockEmbed,p.default],t.default=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=m(i(21)),r=m(i(11)),l=m(i(3)),d=m(i(2)),c=m(i(20)),u=m(i(0)),p=m(i(5)),h=m(i(10)),f=m(i(9));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b=(0,h.default)("quill:keyboard"),g=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",_=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.bindings={},Object.keys(n.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])})),n.addBinding({key:t.keys.ENTER,shiftKey:null},C),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},$),n.addBinding({key:t.keys.DELETE},{collapsed:!0},w)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},w)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},k),n.addBinding({key:t.keys.DELETE},{collapsed:!1},k),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$),n.listen(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"match",value:function(e,t){return t=T(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(i){return!!t[i]!==e[i]&&null!==t[i]}))&&t.key===(e.which||e.keyCode)}}]),s(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=T(e);if(null==n||null==n.key)return b.warn("Attempted to add invalid keyboard binding",n);"function"==typeof t&&(t={handler:t}),"function"==typeof i&&(i={handler:i}),n=(0,l.default)(n,t,i),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(i){if(!i.defaultPrevented){var s=i.which||i.keyCode,o=(e.bindings[s]||[]).filter((function(e){return t.match(i,e)}));if(0!==o.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var d=e.quill.getLine(l.index),c=a(d,2),p=c[0],h=c[1],f=e.quill.getLeaf(l.index),m=a(f,2),v=m[0],b=m[1],g=0===l.length?[v,b]:e.quill.getLeaf(l.index+l.length),_=a(g,2),y=_[0],$=_[1],w=v instanceof u.default.Text?v.value().slice(0,b):"",k=y instanceof u.default.Text?y.value().slice($):"",C={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:e.quill.getFormat(l),offset:h,prefix:w,suffix:k};o.some((function(t){if(null!=t.collapsed&&t.collapsed!==C.collapsed)return!1;if(null!=t.empty&&t.empty!==C.empty)return!1;if(null!=t.offset&&t.offset!==C.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==C.format[e]})))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=C.format[e]:!1===t.format[e]?null==C.format[e]:(0,r.default)(t.format[e],C.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(C.prefix))&&(!(null!=t.suffix&&!t.suffix.test(C.suffix))&&!0!==t.handler.call(e,l,C))}))&&i.preventDefault()}}}}))}}]),t}(f.default);function y(e,t){var i,n=e===_.keys.LEFT?"prefix":"suffix";return v(i={key:e,shiftKey:t,altKey:null},n,/^$/),v(i,"handler",(function(i){var n=i.index;e===_.keys.RIGHT&&(n+=i.length+1);var s=this.quill.getLeaf(n);return!(a(s,1)[0]instanceof u.default.Embed)||(e===_.keys.LEFT?t?this.quill.setSelection(i.index-1,i.length+1,p.default.sources.USER):this.quill.setSelection(i.index-1,p.default.sources.USER):t?this.quill.setSelection(i.index,i.length+1,p.default.sources.USER):this.quill.setSelection(i.index+i.length+1,p.default.sources.USER),!1)})),i}function $(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var i=this.quill.getLine(e.index),n=a(i,1)[0],s={};if(0===t.offset){var o=this.quill.getLine(e.index-1),r=a(o,1)[0];if(null!=r&&r.length()>1){var l=n.formats(),d=this.quill.getFormat(e.index-1,1);s=c.default.attributes.diff(l,d)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,p.default.sources.USER),Object.keys(s).length>0&&this.quill.formatLine(e.index-u,u,s,p.default.sources.USER),this.quill.focus()}}function w(e,t){var i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-i)){var n={},s=0,o=this.quill.getLine(e.index),r=a(o,1)[0];if(t.offset>=r.length()-1){var l=this.quill.getLine(e.index+1),d=a(l,1)[0];if(d){var u=r.formats(),h=this.quill.getFormat(e.index,1);n=c.default.attributes.diff(u,h)||{},s=d.length()}}this.quill.deleteText(e.index,i,p.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+s-1,i,n,p.default.sources.USER)}}function k(e){var t=this.quill.getLines(e),i={};if(t.length>1){var n=t[0].formats(),a=t[t.length-1].formats();i=c.default.attributes.diff(a,n)||{}}this.quill.deleteText(e,p.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(e.index,1,i,p.default.sources.USER),this.quill.setSelection(e.index,p.default.sources.SILENT),this.quill.focus()}function C(e,t){var i=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce((function(e,i){return u.default.query(i,u.default.Scope.BLOCK)&&!Array.isArray(t.format[i])&&(e[i]=t.format[i]),e}),{});this.quill.insertText(e.index,"\n",n,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&i.quill.format(e,t.format[e],p.default.sources.USER))}))}function x(e){return{key:_.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var i=u.default.query("code-block"),n=t.index,s=t.length,o=this.quill.scroll.descendant(i,n),r=a(o,2),l=r[0],d=r[1];if(null!=l){var c=this.quill.getIndex(l),h=l.newlineIndex(d,!0)+1,f=l.newlineIndex(c+d+s),m=l.domNode.textContent.slice(h,f).split("\n");d=0,m.forEach((function(t,a){e?(l.insertAt(h+d,i.TAB),d+=i.TAB.length,0===a?n+=i.TAB.length:s+=i.TAB.length):t.startsWith(i.TAB)&&(l.deleteAt(h+d,i.TAB.length),d-=i.TAB.length,0===a?n-=i.TAB.length:s-=i.TAB.length),d+=t.length+1})),this.quill.update(p.default.sources.USER),this.quill.setSelection(n,s,p.default.sources.SILENT)}}}}function j(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,i){this.quill.format(e,!i.format[e],p.default.sources.USER)}}}function T(e){if("string"==typeof e||"number"==typeof e)return T({key:e});if("object"===(void 0===e?"undefined":n(e))&&(e=(0,o.default)(e,!1)),"string"==typeof e.key)if(null!=_.keys[e.key.toUpperCase()])e.key=_.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[g]=e.shortKey,delete e.shortKey),e}_.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},_.DEFAULTS={bindings:{bold:j("bold"),italic:j("italic"),underline:j("underline"),indent:{key:_.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:_.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:_.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":x(!0),"outdent code-block":x(!1),"remove tab":{key:_.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,p.default.sources.USER)}},tab:{key:_.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new d.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,p.default.sources.SILENT)}},"list empty enter":{key:_.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,p.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:_.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),i=a(t,2),n=i[0],s=i[1],o=(0,l.default)({},n.formats(),{list:"checked"}),r=(new d.default).retain(e.index).insert("\n",o).retain(n.length()-s-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:_.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var i=this.quill.getLine(e.index),n=a(i,2),s=n[0],o=n[1],r=(new d.default).retain(e.index).insert("\n",t.format).retain(s.length()-o-1).retain(1,{header:null});this.quill.updateContents(r,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var i=t.prefix.length,n=this.quill.getLine(e.index),s=a(n,2),o=s[0],r=s[1];if(r>i)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",p.default.sources.USER),this.quill.history.cutoff();var c=(new d.default).retain(e.index-r).delete(i+1).retain(o.length()-2-r).retain(1,{list:l});this.quill.updateContents(c,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-i,p.default.sources.SILENT)}},"code exit":{key:_.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),i=a(t,2),n=i[0],s=i[1],o=(new d.default).retain(e.index+n.length()-s-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(o,p.default.sources.USER)}},"embed left":y(_.keys.LEFT,!1),"embed left shift":y(_.keys.LEFT,!0),"embed right":y(_.keys.RIGHT,!1),"embed right shift":y(_.keys.RIGHT,!0)}},t.default=_,t.SHORTKEY=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=l(i(0)),r=l(i(7));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=i,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"value",value:function(){}}]),s(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,i){if(0!==this._length)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,i);for(var n=this,s=0;null!=n&&n.statics.scope!==o.default.Scope.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(s,t.CONTENTS.length,e,i),this._length=0)}},{key:"index",value:function(e,i){return e===this.textNode?0:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,i)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,i=this.selection.getNativeRange(),a=void 0,s=void 0,l=void 0;if(null!=i&&i.start.node===e&&i.end.node===e){var d=[e,i.start.offset,i.end.offset];a=d[0],s=d[1],l=d[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var c=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof r.default?(a=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=t.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(o.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=s){var u=[s,l].map((function(e){return Math.max(0,Math.min(a.data.length,e-1))})),p=n(u,2);return s=p[0],l=p[1],{startNode:a,startOffset:s,endNode:a,endOffset:l}}}}},{key:"update",value:function(e,t){var i=this;if(e.some((function(e){return"characterData"===e.type&&e.target===i.textNode}))){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(o.default.Embed);d.blotName="cursor",d.className="ql-cursor",d.tagName="span",d.CONTENTS="\ufeff",t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i(0)),a=i(4),s=o(a);function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);d.allowedChildren=[s.default,a.BlockEmbed,d],t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),o=(n=s)&&n.__esModule?n:{default:n};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){var i=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return i.startsWith("rgb(")?(i=i.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+i.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):i}}]),t}(o.default.Attributor.Style),c=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),u=new d("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=d,t.ColorClass=c,t.ColorStyle=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=i(6);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,i){if(e!==this.statics.blotName||!i)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,i);i=this.constructor.sanitize(i),this.domNode.setAttribute("href",i)}}],[{key:"create",value:function(e){var i=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),i.setAttribute("href",e),i.setAttribute("target","_blank"),i}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return c(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);function c(e,t){var i=document.createElement("a");i.href=e;var n=i.href.slice(0,i.href.indexOf(":"));return t.indexOf(n)>-1}d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=d,t.sanitize=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=r(i(23)),o=r(i(107));function r(e){return e&&e.__esModule?e:{default:e}}var l=0;function d(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var c=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){i.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case s.default.keys.ENTER:i.togglePicker();break;case s.default.keys.ESCAPE:i.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return a(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),d(this.label,"aria-expanded"),d(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,i=document.createElement("span");return i.tabIndex="0",i.setAttribute("role","button"),i.classList.add("ql-picker-item"),e.hasAttribute("value")&&i.setAttribute("data-value",e.getAttribute("value")),e.textContent&&i.setAttribute("data-label",e.textContent),i.addEventListener("click",(function(){t.selectItem(i,!0)})),i.addEventListener("keydown",(function(e){switch(e.keyCode){case s.default.keys.ENTER:t.selectItem(i,!0),e.preventDefault();break;case s.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),i}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=o.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(i){var n=e.buildItem(i);t.appendChild(n),!0===i.selected&&e.selectItem(n)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.container.querySelector(".ql-selected");if(e!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var a=document.createEvent("Event");a.initEvent("change",!0,!0),this.select.dispatchEvent(a)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var i=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}}]),e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(i(0)),a=b(i(5)),s=i(4),o=b(s),r=b(i(16)),l=b(i(25)),d=b(i(24)),c=b(i(35)),u=b(i(6)),p=b(i(22)),h=b(i(7)),f=b(i(55)),m=b(i(42)),v=b(i(23));function b(e){return e&&e.__esModule?e:{default:e}}a.default.register({"blots/block":o.default,"blots/block/embed":s.BlockEmbed,"blots/break":r.default,"blots/container":l.default,"blots/cursor":d.default,"blots/embed":c.default,"blots/inline":u.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":f.default,"modules/history":m.default,"modules/keyboard":v.default}),n.default.register(o.default,r.default,d.default,u.default,p.default,h.default),t.default=a.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),a=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,i,a){var s=this.isolate(e,t);if(null!=n.query(i,n.Scope.BLOT)&&a)s.wrap(i,a);else if(null!=n.query(i,n.Scope.ATTRIBUTE)){var o=n.create(this.statics.scope);s.wrap(o),o.format(i,a)}},e.prototype.insertAt=function(e,t,i){var a=null==i?n.create("text",t):n.create(t,i),s=this.split(e);this.parent.insertBefore(a,s)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var i=null;e.children.insertBefore(this,t),null!=t&&(i=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==i||e.domNode.insertBefore(this.domNode,i),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var i=this.split(e);return i.split(t),i},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var i="string"==typeof e?n.create(e,t):e;return i.replace(this),i},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var i="string"==typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(i,this.next),i.appendChild(this),i},e.blotName="abstract",e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),a=i(32),s=i(33),o=i(1),r=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),i=a.default.keys(this.domNode),r=s.default.keys(this.domNode);t.concat(i).concat(r).forEach((function(t){var i=o.query(t,o.Scope.ATTRIBUTE);i instanceof n.default&&(e.attributes[i.attrName]=i)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(i){var n=t.attributes[i].value(t.domNode);e.format(i,n)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,i){return t[i]=e.attributes[i].value(e.domNode),t}),{})},e}();t.default=r},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function s(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){s(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(s(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(i(12).default);t.default=o},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function s(e){var t=e.split("-"),i=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+i}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[s(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[s(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[s(this.keyName)];return this.canAdd(e,t)?t:""},t}(i(12).default);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=i,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();a.DEFAULTS={modules:{}},a.themes={default:a},t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=o(i(0)),s=o(i(7));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable",!1),[].slice.call(i.domNode.childNodes).forEach((function(e){i.contentNode.appendChild(e)})),i.leftGuard=document.createTextNode("\ufeff"),i.rightGuard=document.createTextNode("\ufeff"),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,i){return e===this.leftGuard?0:e===this.rightGuard?1:function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,i)}},{key:"restore",value:function(e){var t=void 0,i=void 0,n=e.data.split("\ufeff").join("");if(e===this.leftGuard)if(this.prev instanceof s.default){var o=this.prev.length();this.prev.insertAt(o,n),t={startNode:this.prev.domNode,startOffset:o+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(a.default.create(i),this),t={startNode:i,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(a.default.create(i),this.next),t={startNode:i,startOffset:n.length}));return e.data="\ufeff",t}},{key:"update",value:function(e,t){var i=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===i.leftGuard||e.target===i.rightGuard)){var n=i.restore(e.target);n&&(t.range=n)}}))}}]),t}(a.default.Embed);t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,a=i(0),s=(n=a)&&n.__esModule?n:{default:n};var o={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},r=new s.default.Attributor.Attribute("align","align",o),l=new s.default.Attributor.Class("align","ql-align",o),d=new s.default.Attributor.Style("align","text-align",o);t.AlignAttribute=r,t.AlignClass=l,t.AlignStyle=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,a=i(0),s=(n=a)&&n.__esModule?n:{default:n},o=i(26);var r=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),l=new o.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});t.BackgroundClass=r,t.BackgroundStyle=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,a=i(0),s=(n=a)&&n.__esModule?n:{default:n};var o={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},r=new s.default.Attributor.Attribute("direction","dir",o),l=new s.default.Attributor.Class("direction","ql-direction",o),d=new s.default.Attributor.Style("direction","direction",o);t.DirectionAttribute=r,t.DirectionClass=l,t.DirectionStyle=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),o=(n=s)&&n.__esModule?n:{default:n};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new o.default.Attributor.Class("font","ql-font",d),u=new(function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){return function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style))("font","font-family",d);t.FontStyle=u,t.FontClass=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,a=i(0),s=(n=a)&&n.__esModule?n:{default:n};var o=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),r=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=o,t.SizeStyle=r},function(e,t,i){"use strict";e.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=o(i(0)),s=o(i(5));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t,i,a){e!==s.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&a!==s.default.sources.USER?n.transform(t):n.record(t,i))})),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var i=this.stack[e].pop();this.stack[t].push(i),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i[e],s.default.sources.USER),this.ignoreChange=!1;var n=l(i[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var i=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var a=this.stack.undo.pop();i=i.compose(a.undo),e=a.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(o(i(9)).default);function l(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),i=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=a.default.query(e,a.default.Scope.BLOCK)})))}(e)&&(i-=1),i}r.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=r,t.getLastChangeIndex=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=h(i(3)),s=h(i(2)),o=h(i(8)),r=h(i(23)),l=h(i(34)),d=h(i(59)),c=h(i(60)),u=h(i(28)),p=h(i(61));function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[!1,"center","right","justify"],g=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],y=["1","2","3",!1],$=["small",!1,"large","huge"],w=function(e){function t(e,i){f(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return e.emitter.listenDOM("click",document.body,(function t(i){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(i.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach((function(e){e.container.contains(i.target)||e.close()}))})),n}return v(t,e),n(t,[{key:"addModule",value:function(e){var i=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(i),i}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(i){if(i.startsWith("ql-")&&(i=i.slice("ql-".length),null!=t[i]))if("direction"===i)e.innerHTML=t[i][""]+t[i].rtl;else if("string"==typeof t[i])e.innerHTML=t[i];else{var n=e.value||"";null!=n&&t[i][n]&&(e.innerHTML=t[i][n])}}))}))}},{key:"buildPickers",value:function(e,t){var i=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&C(e,b),new c.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var i=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&C(e,g,"background"===i?"#ffffff":"#000000"),new d.default(e,t[i])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?C(e,_):e.classList.contains("ql-header")?C(e,y):e.classList.contains("ql-size")&&C(e,$)),new u.default(e)}));this.quill.on(o.default.events.EDITOR_CHANGE,(function(){i.pickers.forEach((function(e){e.update()}))}))}}]),t}(l.default);w.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var i=new FileReader;i.onload=function(i){var n=e.quill.getSelection(!0);e.quill.updateContents((new s.default).retain(n.index).delete(n.length).insert({image:i.target.result}),o.default.sources.USER),e.quill.setSelection(n.index+1,o.default.sources.SILENT),t.value=""},i.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var k=function(e){function t(e,i){f(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return v(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){r.default.match(t,"enter")?(e.save(),t.preventDefault()):r.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,o.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,o.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(t)return(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0";if(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/";return e}(e);case"formula":if(!e)break;var i=this.quill.getSelection(!0);if(null!=i){var n=i.index+i.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,o.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",o.default.sources.USER),this.quill.setSelection(n+2,o.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(p.default);function C(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var n=document.createElement("option");t===i?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)}))}t.BaseTooltip=k,t.default=w},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,i=this.iterator();t=i();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,i=this.head;null!=i;){if(i===e)return t;t+=i.length(),i=i.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var i,n=this.iterator();i=n();){var a=i.length();if(e<a||t&&e===a&&(null==i.next||0!==i.next.length()))return[i,e];e-=a}return[null,0]},e.prototype.forEach=function(e){for(var t,i=this.iterator();t=i();)e(t)},e.prototype.forEachAt=function(e,t,i){if(!(t<=0))for(var n,a=this.find(e),s=a[0],o=e-a[1],r=this.iterator(s);(n=r())&&o<e+t;){var l=n.length();e>o?i(n,e-o,Math.min(t,o+l-e)):i(n,0,Math.min(l,e+t-o)),o+=l}},e.prototype.map=function(e){return this.reduce((function(t,i){return t.push(e(i)),t}),[])},e.prototype.reduce=function(e,t){for(var i,n=this.iterator();i=n();)t=e(t,i);return t},e}();t.default=n},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(17),o=i(1),r={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var i=e.call(this,t)||this;return i.scroll=i,i.observer=new MutationObserver((function(e){i.update(e)})),i.observer.observe(i.domNode,r),i.attach(),i}return a(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,i){this.update(),0===t&&i===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,i)},t.prototype.formatAt=function(t,i,n,a){this.update(),e.prototype.formatAt.call(this,t,i,n,a)},t.prototype.insertAt=function(t,i,n){this.update(),e.prototype.insertAt.call(this,t,i,n)},t.prototype.optimize=function(t,i){var n=this;void 0===t&&(t=[]),void 0===i&&(i={}),e.prototype.optimize.call(this,i);for(var a=[].slice.call(this.observer.takeRecords());a.length>0;)t.push(a.pop());for(var r=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[o.DATA_KEY].mutations&&(e.domNode[o.DATA_KEY].mutations=[]),t&&r(e.parent))},l=function(e){null!=e.domNode[o.DATA_KEY]&&null!=e.domNode[o.DATA_KEY].mutations&&(e instanceof s.default&&e.children.forEach(l),e.optimize(i))},d=t,c=0;d.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(d.forEach((function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(r(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=o.find(e,!1);r(t,!1),t instanceof s.default&&t.children.forEach((function(e){r(e,!1)}))}))):"attributes"===e.type&&r(t.prev)),r(t))})),this.children.forEach(l),a=(d=[].slice.call(this.observer.takeRecords())).slice();a.length>0;)t.push(a.pop())}},t.prototype.update=function(t,i){var n=this;void 0===i&&(i={}),(t=t||this.observer.takeRecords()).map((function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==n&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],i)})),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,i),this.optimize(t,i)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(s.default);t.default=l},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(18),o=i(1);var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.formats=function(i){if(i.tagName!==t.tagName)return e.formats.call(this,i)},t.prototype.format=function(i,n){var a=this;i!==this.statics.blotName||n?e.prototype.format.call(this,i,n):(this.children.forEach((function(e){e instanceof s.default||(e=e.wrap(t.blotName,!0)),a.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,i,n,a){null!=this.formats()[n]||o.query(n,o.Scope.ATTRIBUTE)?this.isolate(t,i).format(n,a):e.prototype.formatAt.call(this,t,i,n,a)},t.prototype.optimize=function(i){e.prototype.optimize.call(this,i);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var a=this.next;a instanceof t&&a.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(e[i]!==t[i])return!1;return!0}(n,a.formats())&&(a.moveChildren(this),a.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(s.default);t.default=r},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(18),o=i(1),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.formats=function(i){var n=o.query(t.blotName).tagName;if(i.tagName!==n)return e.formats.call(this,i)},t.prototype.format=function(i,n){null!=o.query(i,o.Scope.BLOCK)&&(i!==this.statics.blotName||n?e.prototype.format.call(this,i,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,i,n,a){null!=o.query(n,o.Scope.BLOCK)?this.format(n,a):e.prototype.formatAt.call(this,t,i,n,a)},t.prototype.insertAt=function(t,i,n){if(null==n||null!=o.query(i,o.Scope.INLINE))e.prototype.insertAt.call(this,t,i,n);else{var a=this.split(t),s=o.create(i,n);a.parent.insertBefore(s,a)}},t.prototype.update=function(t,i){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,i)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(s.default);t.default=r},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.formats=function(e){},t.prototype.format=function(t,i){e.prototype.formatAt.call(this,0,this.length(),t,i)},t.prototype.formatAt=function(t,i,n,a){0===t&&i===this.length()?this.format(n,a):e.prototype.formatAt.call(this,t,i,n,a)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(i(19).default);t.default=s},function(e,t,i){"use strict";var n,a=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var s=i(19),o=i(1),r=function(e){function t(t){var i=e.call(this,t)||this;return i.text=i.statics.value(i.domNode),i}return a(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,i,n){null==n?(this.text=this.text.slice(0,t)+i+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,i,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(i){e.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var i=o.create(this.domNode.splitText(e));return this.parent.insertBefore(i,this.next),this.text=this.statics.value(this.domNode),i},t.prototype.update=function(e,t){var i=this;e.some((function(e){return"characterData"===e.type&&e.target===i.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(s.default);t.default=r},function(e,t,i){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:a.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var i=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=e.length;var n=i.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,a=arguments[1],s=0;s<n;s++)if(t=i[s],e.call(a,t,s,i))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){function i(e,t,o){if(e==t)return e?[[0,e]]:[];(o<0||e.length<o)&&(o=null);var l=a(e,t),d=e.substring(0,l);l=s(e=e.substring(l),t=t.substring(l));var c=e.substring(e.length-l),u=function(e,t){var o;if(!e)return[[1,t]];if(!t)return[[-1,e]];var r=e.length>t.length?e:t,l=e.length>t.length?t:e,d=r.indexOf(l);if(-1!=d)return o=[[1,r.substring(0,d)],[0,l],[1,r.substring(d+l.length)]],e.length>t.length&&(o[0][0]=o[2][0]=-1),o;if(1==l.length)return[[-1,e],[1,t]];var c=function(e,t){var i=e.length>t.length?e:t,n=e.length>t.length?t:e;if(i.length<4||2*n.length<i.length)return null;function o(e,t,i){for(var n,o,r,l,d=e.substring(i,i+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(d,c+1));){var p=a(e.substring(i),t.substring(c)),h=s(e.substring(0,i),t.substring(0,c));u.length<h+p&&(u=t.substring(c-h,c)+t.substring(c,c+p),n=e.substring(0,i-h),o=e.substring(i+p),r=t.substring(0,c-h),l=t.substring(c+p))}return 2*u.length>=e.length?[n,o,r,l,u]:null}var r,l,d,c,u,p=o(i,n,Math.ceil(i.length/4)),h=o(i,n,Math.ceil(i.length/2));if(!p&&!h)return null;r=h?p&&p[4].length>h[4].length?p:h:p;e.length>t.length?(l=r[0],d=r[1],c=r[2],u=r[3]):(c=r[0],u=r[1],l=r[2],d=r[3]);var f=r[4];return[l,d,c,u,f]}(e,t);if(c){var u=c[0],p=c[1],h=c[2],f=c[3],m=c[4],v=i(u,h),b=i(p,f);return v.concat([[0,m]],b)}return function(e,t){for(var i=e.length,a=t.length,s=Math.ceil((i+a)/2),o=s,r=2*s,l=new Array(r),d=new Array(r),c=0;c<r;c++)l[c]=-1,d[c]=-1;l[o+1]=0,d[o+1]=0;for(var u=i-a,p=u%2!=0,h=0,f=0,m=0,v=0,b=0;b<s;b++){for(var g=-b+h;g<=b-f;g+=2){for(var _=o+g,y=(x=g==-b||g!=b&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-g;x<i&&y<a&&e.charAt(x)==t.charAt(y);)x++,y++;if(l[_]=x,x>i)f+=2;else if(y>a)h+=2;else if(p){if((k=o+u-g)>=0&&k<r&&-1!=d[k]){var $=i-d[k];if(x>=$)return n(e,t,x,y)}}}for(var w=-b+m;w<=b-v;w+=2){for(var k=o+w,C=($=w==-b||w!=b&&d[k-1]<d[k+1]?d[k+1]:d[k-1]+1)-w;$<i&&C<a&&e.charAt(i-$-1)==t.charAt(a-C-1);)$++,C++;if(d[k]=$,$>i)v+=2;else if(C>a)m+=2;else if(!p){if((_=o+u-w)>=0&&_<r&&-1!=l[_]){var x=l[_];y=o+x-_;if(x>=($=i-$))return n(e,t,x,y)}}}}return[[-1,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-l),t=t.substring(0,t.length-l));return d&&u.unshift([0,d]),c&&u.push([0,c]),function e(t){t.push([0,""]);var i,n=0,o=0,r=0,l="",d="";for(;n<t.length;)switch(t[n][0]){case 1:r++,d+=t[n][1],n++;break;case-1:o++,l+=t[n][1],n++;break;case 0:o+r>1?(0!==o&&0!==r&&(0!==(i=a(d,l))&&(n-o-r>0&&0==t[n-o-r-1][0]?t[n-o-r-1][1]+=d.substring(0,i):(t.splice(0,0,[0,d.substring(0,i)]),n++),d=d.substring(i),l=l.substring(i)),0!==(i=s(d,l))&&(t[n][1]=d.substring(d.length-i)+t[n][1],d=d.substring(0,d.length-i),l=l.substring(0,l.length-i))),0===o?t.splice(n-r,o+r,[1,d]):0===r?t.splice(n-o,o+r,[-1,l]):t.splice(n-o-r,o+r,[-1,l],[1,d]),n=n-o-r+(o?1:0)+(r?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,o=0,l="",d=""}""===t[t.length-1][1]&&t.pop();var c=!1;n=1;for(;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),c=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),c=!0)),n++;c&&e(t)}(u),null!=o&&(u=function(e,t){var i=function(e,t){if(0===t)return[0,e];for(var i=0,n=0;n<e.length;n++){var a=e[n];if(-1===a[0]||0===a[0]){var s=i+a[1].length;if(t===s)return[n+1,e];if(t<s){e=e.slice();var o=t-i,r=[a[0],a[1].slice(0,o)],l=[a[0],a[1].slice(o)];return e.splice(n,1,r,l),[n+1,e]}i=s}}throw new Error("cursor_pos is out of bounds!")}(e,t),n=i[1],a=i[0],s=n[a],o=n[a+1];if(null==s)return e;if(0!==s[0])return e;if(null!=o&&s[1]+o[1]===o[1]+s[1])return n.splice(a,2,o,s),r(n,a,2);if(null!=o&&0===o[1].indexOf(s[1])){n.splice(a,2,[o[0],s[1]],[0,s[1]]);var l=o[1].slice(s[1].length);return l.length>0&&n.splice(a+2,0,[o[0],l]),r(n,a,3)}return e}(u,o)),u=function(e){for(var t=!1,i=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},n=2;n<e.length;n+=1)0===e[n-2][0]&&((a=e[n-2][1]).charCodeAt(a.length-1)>=55296&&a.charCodeAt(a.length-1)<=56319)&&-1===e[n-1][0]&&i(e[n-1][1])&&1===e[n][0]&&i(e[n][1])&&(t=!0,e[n-1][1]=e[n-2][1].slice(-1)+e[n-1][1],e[n][1]=e[n-2][1].slice(-1)+e[n][1],e[n-2][1]=e[n-2][1].slice(0,-1));var a;if(!t)return e;var s=[];for(n=0;n<e.length;n+=1)e[n][1].length>0&&s.push(e[n]);return s}(u)}function n(e,t,n,a){var s=e.substring(0,n),o=t.substring(0,a),r=e.substring(n),l=t.substring(a),d=i(s,o),c=i(r,l);return d.concat(c)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var i=0,n=Math.min(e.length,t.length),a=n,s=0;i<a;)e.substring(s,a)==t.substring(s,a)?s=i=a:n=a,a=Math.floor((n-i)/2+i);return a}function s(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var i=0,n=Math.min(e.length,t.length),a=n,s=0;i<a;)e.substring(e.length-a,e.length-s)==t.substring(t.length-a,t.length-s)?s=i=a:n=a,a=Math.floor((n-i)/2+i);return a}var o=i;function r(e,t,i){for(var n=t+i-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var a=e[n],s=e[n+1];a[0]===s[1]&&e.splice(n,2,[a[0],a[1]+s[1]])}return e}o.INSERT=1,o.DELETE=-1,o.EQUAL=0,e.exports=o},function(e,t){function i(e){var t=[];for(var i in e)t.push(i);return t}(e.exports="function"==typeof Object.keys?Object.keys:i).shim=i},function(e,t){var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=i?n:a).supported=n,t.unsupported=a},function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function a(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,t,a=[];if(0===this._eventsCount)return a;for(t in e=this._events)i.call(e,t)&&a.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e,t){var i=n?n+e:e,a=this._events[i];if(t)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var s=0,o=a.length,r=new Array(o);s<o;s++)r[s]=a[s].fn;return r},o.prototype.emit=function(e,t,i,a,s,o){var r=n?n+e:e;if(!this._events[r])return!1;var l,d,c=this._events[r],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,a),!0;case 5:return c.fn.call(c.context,t,i,a,s),!0;case 6:return c.fn.call(c.context,t,i,a,s,o),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var p,h=c.length;for(d=0;d<h;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,a);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];c[d].fn.apply(c[d].context,l)}}return!0},o.prototype.on=function(e,t,i){var a=new s(t,i||this),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],a]:this._events[o].push(a):(this._events[o]=a,this._eventsCount++),this},o.prototype.once=function(e,t,i){var a=new s(t,i||this,!0),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],a]:this._events[o].push(a):(this._events[o]=a,this._eventsCount++),this},o.prototype.removeListener=function(e,t,i,s){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new a:delete this._events[o],this;var r=this._events[o];if(r.fn)r.fn!==t||s&&!r.once||i&&r.context!==i||(0==--this._eventsCount?this._events=new a:delete this._events[o]);else{for(var l=0,d=[],c=r.length;l<c;l++)(r[l].fn!==t||s&&!r[l].once||i&&r[l].context!==i)&&d.push(r[l]);d.length?this._events[o]=1===d.length?d[0]:d:0==--this._eventsCount?this._events=new a:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new a:delete this._events[t])):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,void 0!==e&&(e.exports=o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=_(i(3)),r=_(i(2)),l=_(i(0)),d=_(i(5)),c=_(i(10)),u=_(i(9)),p=i(36),h=i(37),f=_(i(13)),m=i(26),v=i(38),b=i(39),g=i(40);function _(e){return e&&e.__esModule?e:{default:e}}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $=(0,c.default)("quill:clipboard"),w="__ql-matcher",k=[[Node.TEXT_NODE,I],[Node.TEXT_NODE,N],["br",function(e,t){S(t,"\n")||t.insert("\n");return t}],[Node.ELEMENT_NODE,N],[Node.ELEMENT_NODE,A],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,function(e,t){var i={},n=e.style||{};n.fontStyle&&"italic"===E(e).fontStyle&&(i.italic=!0);n.fontWeight&&(E(e).fontWeight.startsWith("bold")||parseInt(E(e).fontWeight)>=700)&&(i.bold=!0);Object.keys(i).length>0&&(t=T(t,i));parseFloat(n.textIndent||0)>0&&(t=(new r.default).insert("\t").concat(t));return t}],["li",function(e,t){var i=l.default.query(e);if(null==i||"list-item"!==i.blotName||!S(t,"\n"))return t;var n=-1,a=e.parentNode;for(;!a.classList.contains("ql-clipboard");)"list"===(l.default.query(a)||{}).blotName&&(n+=1),a=a.parentNode;return n<=0?t:t.compose((new r.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",O.bind(O,"bold")],["i",O.bind(O,"italic")],["style",function(){return new r.default}]],C=[p.AlignAttribute,v.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),x=[p.AlignStyle,h.BackgroundStyle,m.ColorStyle,v.DirectionStyle,b.FontStyle,g.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),j=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],k.concat(n.options.matchers).forEach((function(e){var t=a(e,2),s=t[0],o=t[1];(i.matchVisual||o!==M)&&n.addMatcher(s,o)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[f.default.blotName]){var i=this.container.innerText;return this.container.innerHTML="",(new r.default).insert(i,y({},f.default.blotName,t[f.default.blotName]))}var n=this.prepareMatching(),s=a(n,2),o=s[0],l=s[1],d=function e(t,i,n){return t.nodeType===t.TEXT_NODE?n.reduce((function(e,i){return i(t,e)}),new r.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],(function(a,s){var o=e(s,i,n);return s.nodeType===t.ELEMENT_NODE&&(o=i.reduce((function(e,t){return t(s,e)}),o),o=(s[w]||[]).reduce((function(e,t){return t(s,e)}),o)),a.concat(o)}),new r.default):new r.default}(this.container,o,l);return S(d,"\n")&&null==d.ops[d.ops.length-1].attributes&&(d=d.compose((new r.default).retain(d.length()-1).delete(1))),$.log("convert",this.container.innerHTML,d),this.container.innerHTML="",d}},{key:"dangerouslyPasteHTML",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,d.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new r.default).retain(e).concat(n),i),this.quill.setSelection(e+n.length(),d.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var i=this.quill.getSelection(),n=(new r.default).retain(i.index),a=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(d.default.sources.SILENT),setTimeout((function(){n=n.concat(t.convert()).delete(i.length),t.quill.updateContents(n,d.default.sources.USER),t.quill.setSelection(n.length()-i.length,d.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=a,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],i=[];return this.matchers.forEach((function(n){var s=a(n,2),o=s[0],r=s[1];switch(o){case Node.TEXT_NODE:i.push(r);break;case Node.ELEMENT_NODE:t.push(r);break;default:[].forEach.call(e.container.querySelectorAll(o),(function(e){e[w]=e[w]||[],e[w].push(r)}))}})),[t,i]}}]),t}(u.default);function T(e,t,i){return"object"===(void 0===t?"undefined":n(t))?Object.keys(t).reduce((function(e,i){return T(e,i,t[i])}),e):e.reduce((function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,o.default)({},y({},t,i),n.attributes))}),new r.default)}function E(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};return e["__ql-computed-style"]||(e["__ql-computed-style"]=window.getComputedStyle(e))}function S(e,t){for(var i="",n=e.ops.length-1;n>=0&&i.length<t.length;--n){var a=e.ops[n];if("string"!=typeof a.insert)break;i=a.insert+i}return i.slice(-1*t.length)===t}function D(e){if(0===e.childNodes.length)return!1;var t=E(e);return["block","list-item"].indexOf(t.display)>-1}function O(e,t,i){return T(i,e,!0)}function P(e,t){var i=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),a=l.default.Attributor.Style.keys(e),s={};return i.concat(n).concat(a).forEach((function(t){var i=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=i&&(s[i.attrName]=i.value(e),s[i.attrName])||(null==(i=C[t])||i.attrName!==t&&i.keyName!==t||(s[i.attrName]=i.value(e)||void 0),null==(i=x[t])||i.attrName!==t&&i.keyName!==t||(i=x[t],s[i.attrName]=i.value(e)||void 0))})),Object.keys(s).length>0&&(t=T(t,s)),t}function A(e,t){var i=l.default.query(e);if(null==i)return t;if(i.prototype instanceof l.default.Embed){var n={},a=i.value(e);null!=a&&(n[i.blotName]=a,t=(new r.default).insert(n,i.formats(e)))}else"function"==typeof i.formats&&(t=T(t,i.blotName,i.formats(e)));return t}function N(e,t){return S(t,"\n")||(D(e)||t.length()>0&&e.nextSibling&&D(e.nextSibling))&&t.insert("\n"),t}function M(e,t){if(D(e)&&null!=e.nextElementSibling&&!S(t,"\n\n")){var i=e.offsetHeight+parseFloat(E(e).marginTop)+parseFloat(E(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*i&&t.insert("\n")}return t}function I(e,t){var i=e.data;if("O:P"===e.parentNode.tagName)return t.insert(i.trim());if(0===i.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!E(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&D(e.parentNode)||null!=e.previousSibling&&D(e.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&D(e.parentNode)||null!=e.nextSibling&&D(e.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))}return t.insert(i)}j.DEFAULTS={matchers:[],matchVisual:!0},t.default=j,t.matchAttributor=P,t.matchBlot=A,t.matchNewline=N,t.matchSpacing=M,t.matchText=I},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=i(6);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);d.blotName="bold",d.tagName=["STRONG","B"],t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=c(i(2)),o=c(i(0)),r=c(i(5)),l=c(i(10)),d=c(i(9));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,l.default)("quill:toolbar"),h=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,s=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));if(Array.isArray(s.options.container)){var o=document.createElement("div");m(o,s.options.container),e.container.parentNode.insertBefore(o,e.container),s.container=o}else"string"==typeof s.options.container?s.container=document.querySelector(s.options.container):s.container=s.options.container;return s.container instanceof HTMLElement?(s.container.classList.add("ql-toolbar"),s.controls=[],s.handlers={},Object.keys(s.options.handlers).forEach((function(e){s.addHandler(e,s.options.handlers[e])})),[].forEach.call(s.container.querySelectorAll("button, select"),(function(e){s.attach(e)})),s.quill.on(r.default.events.EDITOR_CHANGE,(function(e,t){e===r.default.events.SELECTION_CHANGE&&s.update(t)})),s.quill.on(r.default.events.SCROLL_OPTIMIZE,(function(){var e=s.quill.selection.getRange(),t=n(e,1)[0];s.update(t)})),s):(a=p.error("Container required for toolbar",s.options),u(s,a))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,i=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(i){if(i=i.slice("ql-".length),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[i]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[i])return void p.warn("ignoring attaching to disabled format",i,e);if(null==o.default.query(i))return void p.warn("ignoring attaching to nonexistent format",i,e)}var a="SELECT"===e.tagName?"change":"click";e.addEventListener(a,(function(a){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var d=e.options[e.selectedIndex];l=!d.hasAttribute("selected")&&(d.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),a.preventDefault();t.quill.focus();var c=t.quill.selection.getRange(),u=n(c,1)[0];if(null!=t.handlers[i])t.handlers[i].call(t,l);else if(o.default.query(i).prototype instanceof o.default.Embed){if(!(l=prompt("Enter "+i)))return;t.quill.updateContents((new s.default).retain(u.index).delete(u.length).insert(function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},i,l)),r.default.sources.USER)}else t.quill.format(i,l,r.default.sources.USER);t.update(u)})),this.controls.push([i,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(i){var a=n(i,2),s=a[0],o=a[1];if("SELECT"===o.tagName){var r=void 0;if(null==e)r=null;else if(null==t[s])r=o.querySelector("option[selected]");else if(!Array.isArray(t[s])){var l=t[s];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),r=o.querySelector('option[value="'+l+'"]')}null==r?(o.value="",o.selectedIndex=-1):r.selected=!0}else if(null==e)o.classList.remove("ql-active");else if(o.hasAttribute("value")){var d=t[s]===o.getAttribute("value")||null!=t[s]&&t[s].toString()===o.getAttribute("value")||null==t[s]&&!o.getAttribute("value");o.classList.toggle("ql-active",d)}else o.classList.toggle("ql-active",null!=t[s])}))}}]),t}(d.default);function f(e,t,i){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=i&&(n.value=i),e.appendChild(n)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var i=document.createElement("span");i.classList.add("ql-formats"),t.forEach((function(e){if("string"==typeof e)f(i,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,i){var n=document.createElement("select");n.classList.add("ql-"+t),i.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)})),e.appendChild(n)}(i,t,n):f(i,t,n)}})),e.appendChild(i)}))}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var i=this.quill.getFormat();Object.keys(i).forEach((function(t){null!=o.default.query(t,o.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,r.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",r.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,r.default.sources.USER),this.quill.format("direction",e,r.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),i=this.quill.getFormat(t),n=parseInt(i.indent||0);if("+1"===e||"-1"===e){var a="+1"===e?1:-1;"rtl"===i.direction&&(a*=-1),this.quill.format("indent",n+a,r.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,r.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),i=this.quill.getFormat(t);"check"===e?"checked"===i.list||"unchecked"===i.list?this.quill.format("list",!1,r.default.sources.USER):this.quill.format("list","unchecked",r.default.sources.USER):this.quill.format("list",e,r.default.sources.USER)}}},t.default=h,t.addControls=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=i(28);var r=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=i,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildItem",value:function(e){var i=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return i.style.backgroundColor=e.getAttribute("value")||"",i}},{key:"selectItem",value:function(e,i){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,i);var n=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=a:n.style.fill=a)}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(28);var o=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=i[e.getAttribute("data-value")||""]})),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"selectItem",value:function(e,i){(function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,i),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=i||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"})),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,i=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=i+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect(),s=0;if(a.right>n.right&&(s=n.right-a.right,this.root.style.left=t+s+"px"),a.left<n.left&&(s=n.left-a.left,this.root.style.left=t+s+"px"),a.bottom>n.bottom){var o=a.bottom-a.top,r=e.bottom-e.top+o;this.root.style.top=i-r+"px",this.root.classList.add("ql-flip")}return s}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=h(i(3)),r=h(i(8)),l=i(43),d=h(l),c=h(i(27)),u=i(15),p=h(i(41));function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],g=function(e){function t(e,i){f(this,t),null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=b);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.quill.container.classList.add("ql-snow"),n}return v(t,e),s(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),p.default),this.tooltip=new _(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,i){e.handlers.link.call(e,!i.format.link)}))}}]),t}(d.default);g.DEFAULTS=(0,o.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var i=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(i)&&0!==i.indexOf("mailto:")&&(i="mailto:"+i),this.quill.theme.tooltip.edit("link",i)}else this.quill.format("link",!1)}}}}});var _=function(e){function t(e,i){f(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.preview=n.root.querySelector("a.ql-preview"),n}return v(t,e),s(t,[{key:"listen",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var i=e.linkRange;e.restoreFocus(),e.quill.formatText(i,"link",!1,r.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(r.default.events.SELECTION_CHANGE,(function(t,i,a){if(null!=t){if(0===t.length&&a===r.default.sources.USER){var s=e.quill.scroll.descendant(c.default,t.index),o=n(s,2),l=o[0],d=o[1];if(null!=l){e.linkRange=new u.Range(t.index-d,l.length());var p=c.default.formats(l.domNode);return e.preview.textContent=p,e.preview.setAttribute("href",p),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);_.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=M(i(29)),a=i(36),s=i(38),o=i(64),r=M(i(65)),l=M(i(66)),d=i(67),c=M(d),u=i(37),p=i(26),h=i(39),f=i(40),m=M(i(56)),v=M(i(68)),b=M(i(27)),g=M(i(69)),_=M(i(70)),y=M(i(71)),$=M(i(72)),w=M(i(73)),k=i(13),C=M(k),x=M(i(74)),j=M(i(75)),T=M(i(57)),E=M(i(41)),S=M(i(28)),D=M(i(59)),O=M(i(60)),P=M(i(61)),A=M(i(108)),N=M(i(62));function M(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":s.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":s.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":s.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":f.SizeStyle},!0),n.default.register({"formats/align":a.AlignClass,"formats/direction":s.DirectionClass,"formats/indent":o.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":f.SizeClass,"formats/blockquote":r.default,"formats/code-block":C.default,"formats/header":l.default,"formats/list":c.default,"formats/bold":m.default,"formats/code":k.Code,"formats/italic":v.default,"formats/link":b.default,"formats/script":g.default,"formats/strike":_.default,"formats/underline":y.default,"formats/image":$.default,"formats/video":w.default,"formats/list/item":d.ListItem,"modules/formula":x.default,"modules/syntax":j.default,"modules/toolbar":T.default,"themes/bubble":A.default,"themes/snow":N.default,"ui/icons":E.default,"ui/picker":S.default,"ui/icon-picker":O.default,"ui/color-picker":D.default,"ui/tooltip":P.default},!0),t.default=n.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=i(0),r=(n=o)&&n.__esModule?n:{default:n};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=new(function(e){function t(){return l(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"add",value:function(e,i){if("+1"===i||"-1"===i){var n=this.value(e)||0;i="+1"===i?n+1:n-1}return 0===i?(this.remove(e),!0):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,i)}},{key:"canAdd",value:function(e,i){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,i)||s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(i))}},{key:"value",value:function(e){return parseInt(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(r.default.Attributor.Class))("indent","ql-indent",{scope:r.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(4);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);r.blotName="blockquote",r.tagName="blockquote",t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(4);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},s=l(i(0)),o=l(i(4)),r=l(i(25));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"format",value:function(e,i){e!==h.blotName||i?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,i):this.replaceWith(s.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,i){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,i),this):(this.parent.unwrap(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,i))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:a(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(o.default);p.blotName="list-item",p.tagName="LI";var h=function(e){function t(e){d(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=i.statics.formats(e),a=s.default.find(t.target);"checked"===n?a.format("list","unchecked"):"unchecked"===n&&a.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),i}return u(t,e),n(t,null,[{key:"create",value:function(e){var i="ordered"===e?"OL":"UL",n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,i);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,i=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e;var e,t,i}},{key:"insertBefore",value:function(e,i){if(e instanceof p)a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,i);else{var n=null==i?this.length():i.offset(this),s=this.split(n);s.parent.insertBefore(e,s)}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var i=this.next;null!=i&&i.prev===this&&i.statics.blotName===this.statics.blotName&&i.domNode.tagName===this.domNode.tagName&&i.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(i.moveChildren(this),i.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var i=s.default.create(this.statics.defaultChild);e.moveChildren(i),this.appendChild(i)}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(r.default);h.blotName="list",h.scope=s.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],t.ListItem=p,t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(56);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);r.blotName="italic",r.tagName=["EM","I"],t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(6);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);l.blotName="script",l.tagName=["SUB","SUP"],t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);r.blotName="strike",r.tagName="S",t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);r.blotName="underline",r.tagName="U",t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=i(0),r=(n=o)&&n.__esModule?n:{default:n},l=i(27);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=["alt","height","width"],p=function(e){function t(){return d(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,i){u.indexOf(e)>-1?i?this.domNode.setAttribute(e,i):this.domNode.removeAttribute(e):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,i)}}],[{key:"create",value:function(e){var i=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&i.setAttribute("src",this.sanitize(e)),i}},{key:"formats",value:function(e){return u.reduce((function(t,i){return e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(r.default.Embed);p.blotName="image",p.tagName="IMG",t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o=i(4),r=i(27),l=(n=r)&&n.__esModule?n:{default:n};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=["height","width"],p=function(e){function t(){return d(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,i){u.indexOf(e)>-1?i?this.domNode.setAttribute(e,i):this.domNode.removeAttribute(e):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,i)}}],[{key:"create",value:function(e){var i=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(e)),i}},{key:"formats",value:function(e){return u.reduce((function(t,i){return e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=r(i(35)),s=r(i(5)),o=r(i(9));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(){return l(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,null,[{key:"create",value:function(e){var i=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",e)),i}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(a.default);u.blotName="formula",u.className="ql-formula",u.tagName="SPAN";var p=function(e){function t(){l(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return c(t,e),n(t,null,[{key:"register",value:function(){s.default.register(u,!0)}}]),t}(o.default);t.FormulaBlot=u,t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=r(i(0)),s=r(i(5)),o=r(i(9));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(){return l(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(r(i(13)).default);u.className="ql-syntax";var p=new a.default.Attributor.Class("token","hljs",{scope:a.default.Scope.INLINE}),h=function(e){function t(e,i){l(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var a=null;return n.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(a),a=setTimeout((function(){n.highlight(),a=null}),n.options.interval)})),n.highlight(),n}return c(t,e),n(t,null,[{key:"register",value:function(){s.default.register(p,!0),s.default.register(u,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(u).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=t&&this.quill.setSelection(t,s.default.sources.SILENT)}}}]),t}(o.default);h.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=u,t.CodeToken=p,t.default=h},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=u(i(3)),o=u(i(8)),r=i(43),l=u(r),d=i(15),c=u(i(41));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(e){function t(e,i){p(this,t),null!=i.modules.toolbar&&null==i.modules.toolbar.container&&(i.modules.toolbar.container=m);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.quill.container.classList.add("ql-bubble"),n}return f(t,e),a(t,[{key:"extendToolbar",value:function(e){this.tooltip=new b(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),c.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),c.default)}}]),t}(l.default);v.DEFAULTS=(0,s.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var b=function(e){function t(e,i){p(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.quill.on(o.default.events.EDITOR_CHANGE,(function(e,t,i,a){if(e===o.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&a===o.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var s=n.quill.getLines(t.index,t.length);if(1===s.length)n.position(n.quill.getBounds(t));else{var r=s[s.length-1],l=n.quill.getIndex(r),c=Math.min(r.length()-1,t.index+t.length-l),u=n.quill.getBounds(new d.Range(l,c));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()})),n}return f(t,e),a(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(o.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var i=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),a=this.root.querySelector(".ql-tooltip-arrow");if(a.style.marginLeft="",0===i)return i;a.style.marginLeft=-1*i-a.offsetWidth/2+"px"}}]),t}(r.BaseTooltip);b.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=b,t.default=v},function(e,t,i){e.exports=i(63)}]).default})),$(document).ready((function(){const e=$("[js-create-row]"),t=$("[js-menu-create-row-close-btn]"),i=$("[js-menu-create-row]"),n=$("[js-save-row]"),a=$("[js-row-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){(e.preventDefault(),validateForm(this))&&saveRow(a.serializeObject())})),initDeleteRowFromList(),initDatePicker()}));var CURRENT_ROW={};function initDeleteRowFromList(){$("[delete-row]").on("click",(function(e){e.preventDefault(),CURRENT_ROW=$(this),$(this).closest("[delete-row-form]").trigger("submit")})),$("[delete-row-form]").submit((function(e){(e.preventDefault(),validateForm(this))&&deleteRowFromList($(this).serializeObject())}))}function deleteRowFromList(e){$("[delete-row]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteRow",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){CURRENT_ROW.closest(".custom-table__body-row").remove(),$("[delete-row]").prop("disabled",!1)},error:function(e){$("[delete-row]").prop("disabled",!1)}})}function createCheck(e){$("[js-save-check]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveCheck",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addRowToTable(e),$("[js-menu-create-check]").removeClass("is-open"),checkBodyHidden(),$("[js-check-form]").trigger("reset"),$("[js-save-check]").prop("disabled",!1)},error:function(e){$("[js-save-check]").prop("disabled",!1)}})}function addRowToTable(e){$("[table-body]").html('<tr class="custom-table__body-row">  <input type="hidden" s-id value="'+e.id+'" name="id" required>     <td class="custom-table__body-col">'+e.id+'</td>     <td class="custom-table__body-col custom-table__body-col_medium">        <input s-date           data-position="top left"           name="date"           class="datepicker-here menu-input__input menu-input__input_small editable"           autocomplete="off"           value="'+e.date+'"           disabled           data-autoclose="true"           placeholder="—"           required>     </td>     <td class="custom-table__body-col custom-table__body-col_full" >        <input s-text name="text"            class="menu-input__input menu-input__input_small editable"           title="'+e.text+'"           value="'+e.text+'"           disabled           placeholder="—"           required>     </td>     <td class="custom-table__body-col custom-table__body-col_medium">        <div class="indicated-select menu-input__wrapper indicated-select_false">           <div class="menu-input__input menu-input__input_xxsmall menu-input__input_white">Не забран</div>       </div>     </td>     <td class="custom-table__body-col custom-table__body-col_last">         <div edit-btns class="column-links display-flex-none">             <div edit-check-accept class="column_mwidth column_mwidth-accept"></div>             <div edit-check-cancel class="column_mwidth column_mwidth-cancel"></div>         </div>         <div edit-menu class="column-links display-flex-none is-open">             <div edit-check class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>         </div>     </td> </tr>'+$("[table-body]").html()),initDatePicker()}function initDatePicker(){$(".datepicker-here-sc").datepicker({autoClose:!0,todayButton:!0})}$(document).on("click",".datepicker-here",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).ready((function(){const e=$("[js-create-check]"),t=$("[js-menu-create-check-close-btn]"),i=$("[js-menu-create-check]"),n=$("[js-save-check]"),a=$("[js-check-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){(e.preventDefault(),validateForm(this))&&createCheck(a.serializeObject())})),initDatePicker()}));var CHECKS_INFO_TEMP={},CHECKS_ACCEPT_BTN,$coursesMap,$projects;function tieSmsCheck(e){$("[js-select-sms-check]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/sms-checks/tieSmsCheck",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-select-sms-check]").prop("disabled",!1),updateSmsCheckButton(e.idBill,e.text),$("[js-menu-sms-checks-list]").removeClass("is-open"),resetSmsCheckListForm(),checkBodyHidden()},error:function(e){$("[js-select-sms-check]").prop("disabled",!1)}})}function resetSmsCheckListForm(){$("[js-sms-checks-list-form]").trigger("reset"),$("[sms-checks-list]").html(""),$("[js-select-sms-check-btn]").attr("js-select-sms-check","")}function openSmsChecksMenu(e){var t="";0===e.length&&$("[js-select-sms-check-btn]").removeAttr("js-select-sms-check"),$.each(e,(function(e,i){t+='<div sms-check-row class="div-table__row">       <div class="div-table__row-wrapper">           <div class="div-table__body-row">               <div class="div-table__body-col div-table__body-col_exsmall">                    <div class="input-element__radio ">                         <input type="radio" id="'+i.id+'" class="radio radio_circle" name="id" value="'+i.id+'" required>                         <label for="'+i.id+'" class="circle "></label>                   </div>              </div>              <div class="div-table__body-col div-table__body-col_small">'+i.date+'</div>              <div sms-check-text class="div-table__body-col div-table__body-col_full">'+i.text+"</div>          </div>      </div></div>"})),$("[sms-checks-list]").html(t),$("[js-menu-sms-checks-list]").addClass("is-open"),checkBodyHidden()}function updateSmsCheckButton(e,t){var i=$('[data-bill-id="'+e+'"]').find("[js-check-btn]"),n=i.attr("js-delete-sms-check");void 0!==n&&!1!==n?i.removeAttr("js-delete-sms-check").removeAttr("title").removeClass("column_mwidth-delete-check").attr("js-add-sms-check","").addClass("column_mwidth-add-check"):i.removeAttr("js-add-sms-check").removeClass("column_mwidth-add-check").attr("js-delete-sms-check","").attr("title",t).addClass("column_mwidth-delete-check")}function setCoursesMap(e){$coursesMap=e}function setProjectsList(e){$projects=e}function initTimePicker(){$(".only-time").datepicker({dateFormat:" ",timepicker:!0,classes:"only-timepicker"})}function resetAddStreamsMenu(){$("[js-add-streams-form]").trigger("reset")}function setCourses(e){var t="";$.each($coursesMap[$("option:selected",e).val()],(function(e,i){t+='<option value="'+i.id+'">'+i.name+"</option>"}));var i=e.closest("[block-wrapper]").find("[courses]");i.html(i.html()+t)}function resetCourses(e){e.closest("[block-wrapper]").find("[courses]").html('<option value="" disabled>Выберите продукт</option>')}function saveStreams(e){$("[js-add-streams]").prop("disabled",!0),$.ajax({type:"POST",url:"saveStreams",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$.each(e,(function(e,t){var i="";$.each(t,(function(e,t){i+='<div class="calendar-stream '+(t.isStarted?"calendar-stream_started":"")+'"><span>'+t.nameCourse+"</span></div>"})),$('[data-date="'+e+'"]').find("[stream-list]").html('<div class="calendar-streams c-tooltip">   <div class="c-tooltip__wrapper c-tooltip__wrapper_right">   '+i+'   </div>   <div class="calendar-stream calendar-stream_hover"><span>'+t.length+" потоков</span></div></div>")})),$("[js-menu-add-streams]").removeClass("is-open"),checkBodyHidden(),$("[js-add-streams]").prop("disabled",!1)},error:function(e){$("[js-add-streams]").prop("disabled",!1)}})}function resetUpdateStreamsMenu(){$("[u-date]").html(""),$("[u-start-list]").html(""),DELETE_STARTS_LIST=[]}$(document).on("click","[edit-check]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[s-date]");i.removeAttr("disabled"),t.date=i.val();var n=$(this).closest(".custom-table__body-row").find("[s-text]");n.removeAttr("disabled"),t.text=n.val(),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),CHECKS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[s-id]").val()]=t})),$(document).on("click","[edit-check-cancel]",(function(e){e.preventDefault();var t=CHECKS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[s-id]").val()];$(this).closest(".custom-table__body-row").find("[s-date]").val(t.date).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[s-text]").val(t.text).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete CHECKS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[s-id]").val()]})),$(document).on("click","[edit-check-accept]",(function(e){e.preventDefault(),CHECKS_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[s-id]").val(),t.date=$(this).closest(".custom-table__body-row").find("[s-date]").val(),t.text=$(this).closest(".custom-table__body-row").find("[s-text]").val(),$("[edit-check-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/sms-checks/update",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){CHECKS_ACCEPT_BTN.closest(".custom-table__body-row").find("[s-date]").val(t.date).attr("disabled",!0),CHECKS_ACCEPT_BTN.closest(".custom-table__body-row").find("[s-text]").val(t.text).attr("disabled",!0),CHECKS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete CHECKS_INFO_TEMP[t.id],$("[edit-check-accept]").prop("disabled",!1)},error:function(e){var i=CHECKS_INFO_TEMP[t.id];CHECKS_ACCEPT_BTN.closest(".custom-table__body-row").find("[s-text]").val(i.text).attr("disabled",!0),CHECKS_ACCEPT_BTN.closest(".custom-table__body-row").find("[s-date]").val(i.date).attr("disabled",!0),CHECKS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete CHECKS_INFO_TEMP[t.id],$("[edit-check-accept]").prop("disabled",!1)}})})),$(document).on("click","[delete-check]",(function(e){var t=$(this).closest(".custom-table__body-row"),i=new Object;i.id=t.find("[s-id]").val(),$("[delete-check]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/sms-checks/delete",data:JSON.stringify(i),dataType:"json",cache:!1,success:function(e){t.remove(),$("[delete-check]").prop("disabled",!1)},error:function(e){$("[delete-check]").prop("disabled",!1)}})})),$(document).on("keyup","[js-sms-checks-search]",(function(e){var t=$(this).val().toLowerCase();$("[sms-check-row]").each((function(){~$(this).find("[sms-check-text]").text().toLowerCase().indexOf(t)?$(this).removeClass("none"):$(this).addClass("none")}))})),$(document).on("click","[sms-check-row]",(function(e){$(this).find("input[type=radio]").prop("checked",!0),$("[sms-check-row]").removeClass("div-table__row_selected"),$(this).addClass("div-table__row_selected")})),$(document).on("click","[js-delete-sms-check]",(function(e){var t=$(this).closest("[data-bill-id]").attr("data-bill-id");$("[js-delete-sms-check]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/sms-checks/untieSmsCheck",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$("[js-delete-sms-check]").prop("disabled",!1),updateSmsCheckButton(t,"")},error:function(e){$("[js-delete-sms-check]").prop("disabled",!1)}})})),$(document).on("click","[js-add-sms-check]",(function(e){var t=$(this).closest("[data-bill-id]").attr("data-bill-id");$("[js-add-sms-check]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/sms-checks/getUnusedSmsChecks",dataType:"json",cache:!1,success:function(e){$("[js-sms-checks-list-form]").find("[js-id-bill]").val(t),openSmsChecksMenu(e),$("[js-add-sms-check]").prop("disabled",!1)},error:function(e){$("[js-add-sms-check]").prop("disabled",!1)}})})),$(document).on("click","[js-select-sms-check]",(function(e){e.preventDefault(),$("[js-sms-checks-list-form]").trigger("submit")})),$(document).on("submit","[js-sms-checks-list-form]",(function(e){(e.preventDefault(),validateForm(this))&&tieSmsCheck($("[js-sms-checks-list-form]").serializeObject())})),$(document).ready((function(){const e=$("[js-menu-sms-checks-list-close-btn]"),t=$("[js-menu-sms-checks-list]");e.on("click",(function(){t.removeClass("is-open"),resetSmsCheckListForm(),checkBodyHidden()}))})),function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(e){return n(s(e),arguments)}function i(e,i){return t.apply(null,[e].concat(i||[]))}function n(i,n){var a,s,o,r,l,d,c,u,p,h=1,f=i.length,m="";for(s=0;s<f;s++)if("string"==typeof i[s])m+=i[s];else if("object"==typeof i[s]){if((r=i[s]).keys)for(a=n[h],o=0;o<r.keys.length;o++){if(null==a)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',r.keys[o],r.keys[o-1]));a=a[r.keys[o]]}else a=r.param_no?n[r.param_no]:n[h++];if(e.not_type.test(r.type)&&e.not_primitive.test(r.type)&&a instanceof Function&&(a=a()),e.numeric_arg.test(r.type)&&"number"!=typeof a&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %T",a));switch(e.number.test(r.type)&&(u=a>=0),r.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,r.width?parseInt(r.width):0);break;case"e":a=r.precision?parseFloat(a).toExponential(r.precision):parseFloat(a).toExponential();break;case"f":a=r.precision?parseFloat(a).toFixed(r.precision):parseFloat(a);break;case"g":a=r.precision?String(Number(a.toPrecision(r.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=r.precision?a.substring(0,r.precision):a;break;case"t":a=String(!!a),a=r.precision?a.substring(0,r.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=r.precision?a.substring(0,r.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=r.precision?a.substring(0,r.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}e.json.test(r.type)?m+=a:(!e.number.test(r.type)||u&&!r.sign?p="":(p=u?"+":"-",a=a.toString().replace(e.sign,"")),d=r.pad_char?"0"===r.pad_char?"0":r.pad_char.charAt(1):" ",c=r.width-(p+a).length,l=r.width&&c>0?d.repeat(c):"",m+=r.align?p+a+l:"0"===d?p+l+a:l+p+a)}return m}var a=Object.create(null);function s(t){if(a[t])return a[t];for(var i,n=t,s=[],o=0;n;){if(null!==(i=e.text.exec(n)))s.push(i[0]);else if(null!==(i=e.modulo.exec(n)))s.push("%");else{if(null===(i=e.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){o|=1;var r=[],l=i[2],d=[];if(null===(d=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r.push(d[1]);""!==(l=l.substring(d[0].length));)if(null!==(d=e.key_access.exec(l)))r.push(d[1]);else{if(null===(d=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(d[1])}i[2]=r}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}n=n.substring(i[0].length)}return a[t]=s}"undefined"!=typeof exports&&(exports.sprintf=t,exports.vsprintf=i),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=i,"function"==typeof define&&define.amd&&define((function(){return{sprintf:t,vsprintf:i}})))}(),$(document).on("change","[s-filter]",(function(){$("[s-filter-form]").trigger("submit")})),$(document).on("click",".datepicker-here",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-start",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).ready((function(){initTimePicker(),$(".datepicker-here-start").datepicker({autoClose:!0,minDate:new Date,todayButton:!0}),$(".datepicker-here").datepicker({autoClose:!0,todayButton:!0})})),$(document).on("click","[add-streams]",(function(e){resetAddStreamsMenu(),$("[add-streams-project]").trigger("change"),$("[js-menu-add-streams]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-add-streams-close-btn]",(function(e){$("[js-menu-add-streams]").removeClass("is-open"),checkBodyHidden()})),$(document).on("change","[projects]",(function(){var e=$(this);resetCourses(e),setCourses(e)})),$(document).on("click","[js-add-streams]",(function(e){e.preventDefault(),$("[js-add-streams-form]").trigger("submit")})),$(document).on("submit","[js-add-streams-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-add-streams-form]")[0]);saveStreams(t)}})),$(document).on("click","[edit-streams]",(function(e){resetUpdateStreamsMenu();var t=new FormData;t.append("startDate",$(this).data("date")),openEditStreamsMenu(t)})),$(document).on("click","[js-menu-update-streams-close-btn]",(function(e){$("[js-menu-update-streams]").removeClass("is-open"),checkBodyHidden()}));var STREAM_COUNTER=0;function openEditStreamsMenu(e){$("[edit-streams]").prop("disabled",!0),$.ajax({type:"POST",url:"getStreamsByDate",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[u-date]").html(e.startDate),$("[update-start-date]").val(e.startDate);var t="";$.each($projects,(function(e,i){t+='<option value="'+i.id+'">'+i.name+"</option>"}));var i,n=$("[u-start-list]");STREAM_COUNTER=e.streams.length,$.each(e.streams,(function(e,a){n.append((0===a.dealsCounter?'<div class="collapse-block__header collapsed" data-toggle="collapse" data-target="#stream'+a.id+'" aria-expanded="false" aria-controls="stream'+a.id+'">':'<div class="collapse-block__header collapse-block__header_hidden">')+'    <div class="collapse-desc">        <div class="collapse-desc__title">'+a.nameCourse+'</div>            <div class="collapse-desc__wrapper">                <div class="collapse-desc__text">'+a.nameProject+'</div>                <div class="collapse-desc__delim"><span></span></div>                <div class="collapse-desc__text">№ потока  <span>'+a.id+'</span></div>                <div class="collapse-desc__delim"><span></span></div>                <div class="collapse-desc__text">Учеников  <span>'+a.dealsCounter+"</span></div>            </div>        </div>"+(0===a.dealsCounter?'<div delete-start data-id="'+a.id+'" class="collapse-delete"></div>':"")+"</div>"+(0===a.dealsCounter?'    <div class="collapse-block__body collapse" id="stream'+a.id+'">       <input type="hidden" name="streams['+e+'].id" value="'+a.id+'">        <div block-wrapper class="collapse-body">            <div class="menu-input menu-input_xsmall menu-input_t20">                 <div class="menu-input__title">Проект *</div>                 <div class="menu-input__wrapper menu-input__wrapper_select">                           <select projects class="menu-input__input menu-input__input_small menu-input__input_select" required>'+t+'                           </select>                 </div>             </div>             <div class="menu-input menu-input_xsmall">                 <div class="menu-input__title">Продукт *</div>                 <div class="menu-input__wrapper menu-input__wrapper_select">                     <select courses name="streams['+e+'].idCourse" class="menu-input__input menu-input__input_small menu-input__input_select" required>                         <option value="" disabled>Выберите продукт</option>                     </select>                 </div>              </div>              <div class="menu-input menu-input_xsmall">                  <div class="menu-input__title">Время старта *</div>                  <div class="menu-input__wrapper menu-input__wrapper_cal">                      <input value="'+a.startTime+'" name="streams['+e+'].startTime" autocomplete="off" class="only-time menu-input__input menu-input__input_small" placeholder="Выберите время" required/>                  </div>              </div>           </div>        </div>':"")),(i=$("#stream"+a.id).find("[projects]")).val(a.idProject),setCourses(i),$("#stream"+a.id).find("[courses]").val(a.idCourse)})),initTimePicker(),$("[js-menu-update-streams]").addClass("is-open"),checkBodyHidden(),$("[edit-streams]").prop("disabled",!1)},error:function(e){$("[edit-streams]").prop("disabled",!1)}})}function updateStreams(e){$("[js-update-streams]").prop("disabled",!0),$.ajax({type:"POST",url:"updateStreams",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateDayStreams(e),$("[js-menu-update-streams]").removeClass("is-open"),checkBodyHidden(),$("[js-update-streams]").prop("disabled",!1)},error:function(e){$("[js-update-streams]").prop("disabled",!1)}})}$(document).on("click","[add-start]",(function(e){var t="";$.each($projects,(function(e,i){t+='<option value="'+i.id+'">'+i.name+"</option>"})),$("[u-start-list]").append('<div class="collapse-block__header" data-toggle="collapse" data-target="#new'+STREAM_COUNTER+'" aria-expanded="true" aria-controls="new'+STREAM_COUNTER+'">    <div class="collapse-desc">        <div class="collapse-desc__title">Новый поток</div>        </div>        <div delete-start class="collapse-delete"></div></div>    <div class="collapse-block__body collapse show" id="new'+STREAM_COUNTER+'">        <div block-wrapper class="collapse-body">            <div class="menu-input menu-input_xsmall menu-input_t20">                 <div class="menu-input__title">Проект *</div>                 <div class="menu-input__wrapper menu-input__wrapper_select">                           <select projects class="menu-input__input menu-input__input_small menu-input__input_select" required>'+t+'                           </select>                 </div>             </div>             <div class="menu-input menu-input_xsmall">                 <div class="menu-input__title">Продукт *</div>                 <div class="menu-input__wrapper menu-input__wrapper_select">                     <select courses name="streams['+STREAM_COUNTER+'].idCourse" class="menu-input__input menu-input__input_small menu-input__input_select" required>                         <option value="" disabled>Выберите продукт</option>                     </select>                 </div>              </div>              <div class="menu-input menu-input_xsmall">                  <div class="menu-input__title">Время старта *</div>                  <div class="menu-input__wrapper menu-input__wrapper_cal">                      <input name="streams['+STREAM_COUNTER+'].startTime" autocomplete="off" class="only-time menu-input__input menu-input__input_small" placeholder="Выберите время" required/>                  </div>              </div>           </div>        </div>'),$("#new"+STREAM_COUNTER).find("[projects]").trigger("change"),$("#new"+STREAM_COUNTER).find(".only-time").datepicker({dateFormat:" ",timepicker:!0,classes:"only-timepicker"}),STREAM_COUNTER++})),$(document).on("click","[js-update-streams]",(function(e){e.preventDefault(),$("[js-update-streams-form]").trigger("submit")})),$(document).on("submit","[js-update-streams-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-update-streams-form]")[0]);t.append("deletedStreams",DELETE_STARTS_LIST),updateStreams(t)}}));var DELETE_STARTS_LIST=[],$coursesMap,$projects;function updateDayStreams(e){if(0!==e.streams.length){var t="";$.each(e.streams,(function(e,i){t+='<div class="calendar-stream '+(i.isStarted?"calendar-stream_started":"")+'"><span>'+i.nameCourse+"</span></div>"})),$('[data-date="'+e.startDate+'"]').find("[stream-list]").html('<div class="calendar-streams c-tooltip">   <div class="c-tooltip__wrapper c-tooltip__wrapper_right">   '+t+'   </div>   <div class="calendar-stream calendar-stream_hover"><span>'+e.streams.length+" потоков</span></div></div>")}else $('[data-date="'+e.startDate+'"]').find("[stream-list]").html('<div class="calendar-streams">   <div class="calendar-text">Нет потоков</div></div>')}function createArticle(e){$("[js-save-article]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"saveArticle",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateArticleInTheme(e),$("[js-menu-create-article]").removeClass("is-open"),checkBodyHidden(),$("[js-article-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 280x180"),$("[js-save-article]").prop("disabled",!1)},error:function(e){$("[js-save-article]").prop("disabled",!1)}})}function updateArticleInTheme(e){var t=$('.theme[data-theme="'+e.idTheme+'"]').find(".theme__articles");t.html(t.html()+'<div class="article" data-article="'+e.id+'">   <div class="article-wrapper">       <div class="article__title">'+e.name+'</div>       <div class="article-preview">           <div class="article__preview">               <div class="article__preview-hover"></div>               <img src="/'+e.previewImg+'" alt="" class="article__img">               <div class="article__link-wrapper">                   <a href="'+e.link+'" target="_blank" class="article__link">Открыть</a>                   <div js-update-article  class="article__btn-link">Редактировать</div>               </div>           </div>       </div>   </div></div>')}function initDeleteArticle(){$("[js-delete-article]").on("click",(function(e){var t=$("[js-update-article-form-id]").val();$("[js-delete-article]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteArticle",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('.article[data-article="'+t+'"]').remove(),$("[js-menu-update-article]").removeClass("is-open"),checkBodyHidden(),$("[js-update-article-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 280x180"),$("[js-delete-article]").prop("disabled",!1)},error:function(e){$("[js-delete-article]").prop("disabled",!1)}})}))}function setUpdateArticleFormData(e){$("[js-update-article]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getArticle",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-update-article-form-id]").val(e.id),$("[js-update-article-form-name]").val(e.name),$("[js-update-article-form-link]").val(e.link),$("[js-update-article-form-img]").val(e.previewImg),$("[js-update-article]").prop("disabled",!1)},error:function(e){$("[js-update-article]").prop("disabled",!1)}})}function updateArticle(e){$("[js-save-update-article]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"updateArticle",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateArticleInContainer(e),$("[js-menu-update-article]").removeClass("is-open"),checkBodyHidden(),$("[js-update-article-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 280x180"),$("[js-save-update-article]").prop("disabled",!1)},error:function(e){$("[js-save-update-article]").prop("disabled",!1)}})}function updateArticleInContainer(e){var t=$('.article[data-article="'+e.id+'"]');t.find(".article__title").html(e.name),t.find(".article__img").attr("src","/"+e.previewImg),t.find(".article__link").attr("href",e.link)}function createTheme(e){$("[js-save-theme]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveTheme",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateThemeContainer(e),$("[js-menu-create-theme]").removeClass("is-open"),checkBodyHidden(),$("[js-theme-form]").trigger("reset"),$("[js-save-theme]").prop("disabled",!1)},error:function(e){$("[js-save-theme]").prop("disabled",!1)}})}function updateThemeContainer(e){$(".theme-container").html($(".theme-container").html()+'<div class="theme" data-theme="'+e.id+'">   <div class="theme-wrapper">       <div class="theme__title-wrapper">           <div theme-name class="theme-title theme-title_delim">'+e.name+'</div>           <div js-update-theme class="theme-setting"></div>           <div js-create-article class="add-button add-button_right">+ Добавить файл</div>       </div>       <div class="theme__articles">       </div>   </div></div>')}function initDeleteTheme(){$("[js-delete-theme]").on("click",(function(e){var t=$("[js-update-theme-form-id]").val();$("[js-delete-theme]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteTheme",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('.theme[data-theme="'+t+'"]').remove(),$("[js-menu-update-theme]").removeClass("is-open"),checkBodyHidden(),$("[js-update-theme-form]").trigger("reset"),$("[js-delete-theme]").prop("disabled",!1)},error:function(e){$("[js-delete-theme]").prop("disabled",!1)}})}))}function setUpdateThemeFormData(e){$("[js-update-theme]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getTheme",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-update-theme-form-id]").val(e.id),$("[js-update-theme-form-name]").val(e.name),$("[js-update-theme-form-type]").val(e.type),$("[js-update-theme]").prop("disabled",!1)},error:function(e){$("[js-update-theme]").prop("disabled",!1)}})}function updateTheme(e){$("[js-save-update-theme]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateTheme",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){updateThemeInContainer(e),$("[js-menu-update-theme]").removeClass("is-open"),checkBodyHidden(),$("[js-update-theme-form]").trigger("reset"),$("[js-save-update-theme]").prop("disabled",!1)},error:function(e){$("[js-save-update-theme]").prop("disabled",!1)}})}function updateThemeInContainer(e){e.type===$("[js-type]").attr("type")?$('.theme[data-theme="'+e.id+'"]').find("[theme-name]").html(e.name):$('.theme[data-theme="'+e.id+'"]').remove()}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.parent().last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function resetCreateForm(){$("[js-theme-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 280x180")}function getTimeRemaining(e,t){var i=Date.parse(t)-e,n=Math.floor(i/1e3%60),a=Math.floor(i/1e3/60%60),s=Math.floor(i/36e5%24);return{total:i,days:Math.floor(i/864e5),hours:s,minutes:a,seconds:n}}function initializeClock(e,t,i){var n=Date.parse(t),a=document.getElementById(e),s=a.querySelector(".days"),o=a.querySelector(".hours"),r=a.querySelector(".minutes"),l=a.querySelector(".seconds");function d(){var e=getTimeRemaining(n+=1e3,i);s.innerHTML=e.days,o.innerHTML=("0"+e.hours).slice(-2),r.innerHTML=("0"+e.minutes).slice(-2),l.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&clearInterval(c)}d();var c=setInterval(d,1e3)}function setCoursesMap(e){$coursesMap=e}function setProjectsList(e){$projects=e}function resetAddStreamsMenu(){$("[js-add-streams-form]").trigger("reset")}function openAddStreamMenu(){$("[add-streams]").prop("disabled",!0),$.ajax({type:"POST",url:"getCompanyProjects",processData:!1,contentType:!1,cache:!1,success:function(e){setMenuProjects($("[add-streams-project]"),e),$("[add-streams-project]").trigger("change"),$("[js-menu-add-streams]").addClass("is-open"),checkBodyHidden(),$("[add-streams]").prop("disabled",!1)},error:function(e){$("[add-streams]").prop("disabled",!1)}})}function setMenuProjects(e,t){var i="";$.each(t,(function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"})),e.html(i)}function resetCourses(e){e.closest("[block-wrapper]").find("[courses]").html('<option value="" disabled>Выберите продукт</option>')}function saveStreams(e){$("[js-add-streams]").prop("disabled",!0),$.ajax({type:"POST",url:"saveStreams",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$.each(e,(function(e,t){var i="";$.each(t,(function(e,t){i+='<div class="calendar-stream"><span>'+t.nameCourse+"</span></div>"})),$('[data-date="'+e+'"]').find("[stream-list]").html(i)})),$("[js-menu-add-streams]").removeClass("is-open"),checkBodyHidden(),$("[js-add-streams]").prop("disabled",!1)},error:function(e){$("[js-add-streams]").prop("disabled",!1)}})}$(document).on("click","[delete-start]",(function(e){var t=$(this).attr("data-id");void 0!==t&&!1!==t&&DELETE_STARTS_LIST.push($(this).data("id"));var i=$(this).closest(".collapse-block__header").attr("aria-controls");$(this).closest(".collapse-block__header").remove(),$("#"+i).remove()})),$(document).ready((function(){$("#is-need-sort-table").tablesorter({headers:{0:{sorter:!1},1:{sorter:!1},2:{sorter:!1},3:{sorter:!1},4:{sorter:!1},5:{sorter:!1},7:{sorter:!1},8:{sorter:!1},9:{sorter:!1}}})})),$(document).ready((function(){$("#is-need-sort-table").tablesorter({sortList:[[0,1]],headers:{1:{sorter:!1},2:{sorter:!1},3:{sorter:!1},6:{sorter:!1},7:{sorter:!1},8:{sorter:!1},9:{sorter:!1},10:{sorter:!1},11:{sorter:!1}}})})),$(document).on("click","[js-tab]",(function(e){var t=$(this),i=t.data("tab");t.closest(".tabs__wrapper").find("[js-tab]").removeClass("active"),t.closest(".tabs__wrapper").find("[lesson-tab]").removeClass("active"),t.addClass("active"),t.closest(".tabs__wrapper").find("[js-tab-panel]").removeClass("is-open"),t.closest(".tabs__wrapper").find("[js-tab-panel]").filter("[data-tab="+i+"]").addClass("is-open")})),$(document).ready((function(e){$("[js-tabby-tab]",e).tabby()})),$(document).on("click","[js-save-update-theme]",(function(e){e.preventDefault(),$("[js-update-theme-form]").trigger("submit")})),$(document).on("submit","[js-update-theme-form]",(function(e){(e.preventDefault(),validateForm(this))&&updateTheme($("[js-update-theme-form]").serializeObject())})),$(document).on("click","[js-update-theme]",(function(e){setUpdateThemeFormData($(this).closest(".theme").attr("data-theme")),$("[js-menu-update-theme]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-create-article]",(function(e){$("[js-menu-create-article]").addClass("is-open");var t=$(this).closest(".theme").attr("data-theme");$("[js-article-form-id-theme]").val(t),checkBodyHidden()})),$(document).on("click","[js-update-article]",(function(e){setUpdateArticleFormData($(this).closest(".article").attr("data-article")),$("[js-menu-update-article]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-update-save-article]",(function(e){e.preventDefault(),$("[js-update-article-form]").trigger("submit")})),$(document).on("submit","[js-update-article-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("#update-article-form")[0];updateArticle(new FormData(t))}})),$(document).ready((function(){const e=$("[js-create-theme]"),t=$("[js-menu-create-theme-close-btn]"),i=$("[js-menu-create-theme]"),n=$("[js-save-theme]"),a=$("[js-theme-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){(e.preventDefault(),validateForm(this))&&createTheme(a.serializeObject())})),$("[js-menu-update-theme-close-btn]").on("click",(function(){$("[js-menu-update-theme]").removeClass("is-open"),$("[js-update-theme-form]").trigger("reset"),checkBodyHidden()}));const s=$("[js-menu-create-article-close-btn]"),o=$("[js-menu-create-article]"),r=$("[js-save-article]"),l=$("[js-article-form]");s.on("click",(function(){o.removeClass("is-open"),l.trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 280x180"),checkBodyHidden()})),r.on("click",(function(e){e.preventDefault(),l.trigger("submit")})),l.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=l[0],i=new FormData(t);createArticle(i)}})),$("[js-menu-update-article-close-btn]").on("click",(function(){$("[js-menu-update-article]").removeClass("is-open"),$("[js-update-article-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку 280x180"),checkBodyHidden()})),initDeleteTheme(),initDeleteArticle()})),$(document).on("change","[s-filter]",(function(){$("[s-filter-form]").trigger("submit")})),$(document).on("click",".datepicker-here",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).on("click",".datepicker-here-start",(function(e){$(".datepicker.active").find('[data-action="today"]').trigger("click")})),$(document).ready((function(){$(".only-time").datepicker({dateFormat:" ",timepicker:!0,classes:"only-timepicker"}),$(".datepicker-here-start").datepicker({autoClose:!0,minDate:new Date,todayButton:!0}),$(".datepicker-here").datepicker({autoClose:!0,todayButton:!0})})),$(document).on("click","[add-streams]",(function(e){resetAddStreamsMenu(),openAddStreamMenu()})),$(document).on("click","[js-menu-add-streams-close-btn]",(function(e){$("[js-menu-add-streams]").removeClass("is-open"),checkBodyHidden()})),$(document).on("change","[projects]",(function(){var e=$(this);resetCourses(e);var t=new FormData;t.append("id",Number($("option:selected",this).val())),$("[projects]").prop("disabled",!0),$.ajax({type:"POST",url:"getProjectCourses",data:t,processData:!1,contentType:!1,cache:!1,success:function(t){var i="";$.each(t,(function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"}));var n=e.closest("[block-wrapper]").find("[courses]");n.html(n.html()+i),$("[projects]").prop("disabled",!1)},error:function(e){$("[projects]").prop("disabled",!1)}})})),$(document).on("click","[js-add-streams]",(function(e){e.preventDefault(),$("[js-add-streams-form]").trigger("submit")})),$(document).on("submit","[js-add-streams-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=new FormData($("[js-add-streams-form]")[0]);saveStreams(t)}}));var LIST_PROJECTS={},FILTER_FROM_BACK,$filterFromBack;function resetUpdateStreamsMenu(){$("[u-date]").html(""),$("[u-start-list]").html("")}function openEditStreamsMenu(e){$("[edit-streams]").prop("disabled",!0),$.ajax({type:"POST",url:"getStreamsByDate",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[u-date]").html(e.startDate);var t="";$.each(LIST_PROJECTS,(function(e,i){t+='<option value="'+i.id+'">'+i.name+"</option>"}));var i=$("[u-start-list]");$.each(e.streams,(function(e,n){i.html(i.html()+'<div class="collapse-block__header collapsed" data-toggle="collapse" data-target="#stream'+n.id+'" aria-expanded="false" aria-controls="stream'+n.id+'">    <div class="collapse-desc">        <div class="collapse-desc__title">'+n.nameCourse+'</div>            <div class="collapse-desc__wrapper">                <div class="collapse-desc__text">'+n.nameProject+'</div>                <div class="collapse-desc__delim"><span></span></div>                <div class="collapse-desc__text">№ потока  '+n.id+'</div>            </div>        </div>        <div delete-start class="collapse-delete"></div></div>    <div class="collapse-block__body collapse" id="stream'+n.id+'">        <div block-wrapper class="collapse-body">            <div class="menu-input menu-input_xsmall menu-input_t20">                 <div class="menu-input__title">Проект *</div>                 <div class="menu-input__wrapper menu-input__wrapper_select">                           <select projects class="menu-input__input menu-input__input_small menu-input__input_select" required>'+t+'                           </select>                 </div>             </div>             <div class="menu-input menu-input_xsmall">                 <div class="menu-input__title">Продукт *</div>                 <div class="menu-input__wrapper menu-input__wrapper_select">                     <select courses name="idCourse" class="menu-input__input menu-input__input_small menu-input__input_select" required>                         <option value="" disabled>Выберите продукт</option>                     </select>                 </div>              </div>              <div class="menu-input menu-input_xsmall">                  <div class="menu-input__title">Время старта *</div>                  <div class="menu-input__wrapper menu-input__wrapper_cal">                      <input name="startTime" autocomplete="off" class="only-time menu-input__input menu-input__input_small" placeholder="Выберите время" required/>                  </div>              </div>           </div>        </div>');var a=$("#stream"+n.id).find("[projects]");a.val(n.idProject);var s=new FormData;s.append("id",Number(n.idProject)),$.ajax({type:"POST",url:"getProjectCourses",data:s,processData:!1,contentType:!1,cache:!1,success:function(e){var t="";$.each(e,(function(e,i){t+='<option value="'+i.id+'">'+i.name+"</option>"}));var i=a.closest("[block-wrapper]").find("[courses]");i.html(i.html()+t),i.val(n.idCourse)},error:function(e){}})})),$("[js-menu-update-streams]").addClass("is-open"),checkBodyHidden(),$("[edit-streams]").prop("disabled",!1)},error:function(e){$("[edit-streams]").prop("disabled",!1)}})}function setDashboardFilter(e){FILTER_FROM_BACK=e}function resetFilter(e){$("#idManager option:selected").removeAttr("selected"),$("#idManager").val(e.idManager),$("#course option:selected").removeAttr("selected"),$("#course").val(e.projectId),$("#startPeriod").val(e.startPeriod),$("#endPeriod").val(e.endPeriod),$("#payDate").val(e.payDate),$("#dealDate").val(e.dealDate),$("#client").val(e.client),$("#link").val(e.link),$("#number").val(e.number),$("#sum").val(e.sum)}function setFilter(e){$filterFromBack=e}function resetFilter(e){$("#idManager option:selected").removeAttr("selected"),$("#idManager").val(e.idManager),$("#idSocial option:selected").removeAttr("selected"),$("#idSocial").val(e.idSocial),$("#projectId option:selected").removeAttr("selected"),$("#projectId").val(e.projectId),$("#product option:selected").removeAttr("selected"),$("#product").val(e.product),setKindToFilter($("[filter-courses]")),selectKind($filterFromBack.kind),$("#saleType option:selected").removeAttr("selected"),$("#saleType").val(e.saleType),$("#paymentMethod option:selected").removeAttr("selected"),$("#paymentMethod").val(e.paymentMethod),$('input:radio[name="trial"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$('input:radio[name="trial"]').filter('[value="'+e.trial+'"]').attr("checked",!0).prop("checked",!0),$('input:radio[name="mailing"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$('input:radio[name="mailing"]').filter('[value="'+e.mailing+'"]').attr("checked",!0).prop("checked",!0),$("#tag").val(e.tag),$("#comment").val(e.comment),$("#createDateFrom").val(e.createDateFrom),$("#createDateTo").val(e.createDateTo),$("#startDateFrom").val(e.startDateFrom),$("#startDateTo").val(e.startDateTo),$("#dealDateFrom").val(e.dealDateFrom),$("#dealDateTo").val(e.dealDateTo),$("#payDateFrom").val(e.payDateFrom),$("#payDateTo").val(e.payDateTo),$("#reminderDateFrom").val(e.reminderDateFrom),$("#reminderDateTo").val(e.reminderDateTo),$("#priceFrom").val(e.priceFrom),$("#priceTo").val(e.priceTo),$("#paidFrom").val(e.paidFrom),$("#paidTo").val(e.paidTo),$('input:checkbox[name="other"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$.each(e.other,(function(e,t){$('input:checkbox[name="other"]').filter('[value="'+t+'"]').attr("checked",!0).prop("checked",!0)})),$('input:checkbox[name="statuses"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$.each(e.statuses,(function(e,t){$('input:checkbox[name="statuses"]').filter('[value="'+t+'"]').attr("checked",!0).prop("checked",!0)})),$('input:checkbox[name="empties"]').prop("checked",!1).attr("checked",!1).removeAttr("checked"),$.each(e.statuses,(function(e,t){$('input:checkbox[name="empties"]').filter('[value="'+t+'"]').attr("checked",!0).prop("checked",!0)}))}function downloadDealsExcel(){$("[js-download-deals-excel]").on("click",(function(){$("[js-download-deals-excel]").prop("disabled",!0),$.ajax({type:"POST",contentType:"text/html",url:"download/deals.xslx",data:"",dataType:"json",cache:!1,success:function(e){$("[js-download-deals-excel]").prop("disabled",!1)},error:function(e){$("[js-download-deals-excel]").prop("disabled",!1)}})}))}function showLoader(){$(".transition-loader").addClass("show")}function hideLoader(){$(".transition-loader").removeClass("show")}function updateTutorial(e){$("[js-save-update-tutorial]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"updateTutorial",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateTutorialAfterUpdate(e),$("[js-menu-update-tutorial]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm(),$("[js-save-update-tutorial]").prop("disabled",!1)},error:function(e){$("[js-save-update-tutorial]").prop("disabled",!1)}})}function updateTutorialAfterUpdate(e){e.type===$("[js-type]").attr("type")?($('.theme[data-tutorial="'+e.id+'"]').find("[tutorial-name]").html(e.name),$('.theme[data-tutorial="'+e.id+'"]').find("[tutorial-preview]").attr("src","/"+e.previewImg)):$('.theme[data-tutorial="'+e.id+'"]').remove()}function setUpdateTutorialFormData(e){$("[js-update-tutorial]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getTutorial",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-update-tutorial-form-id]").val(e.id),$("[js-update-tutorial-form-name]").val(e.name),$("[js-update-tutorial-form-type]").val(e.type),$("[js-update-tutorial-form-img]").val(e.previewImg),$("[js-update-tutorial]").prop("disabled",!1)},error:function(e){$("[js-update-tutorial]").prop("disabled",!1)}})}function createTutorial(e){$("[js-save-tutorial]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"saveTutorial",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){updateTutorialInContainer(e),$("[js-menu-create-tutorial]").removeClass("is-open"),resetCreateForm(),checkBodyHidden(),$("[js-save-tutorial]").prop("disabled",!1)},error:function(e){$("[js-save-tutorial]").prop("disabled",!1)}})}function updateTutorialInContainer(e){e.type===$("[js-type]").attr("type")&&$(".theme-container").html($(".theme-container").html()+'<div class="theme " data-tutorial="'+e.id+'">   <div class="theme-wrapper">       <div class="theme__title-wrapper theme__title-wrapper_b20">           <div tutorial-name class="theme-title theme-title_delim">'+e.name+'</div>           <div js-update-tutorial class="theme-setting"></div>           <div js-create-lesson class="add-button add-button_right">+ Добавить урок</div>       </div>       <div class="theme__img">           <img tutorial-preview class="article__img"src="/'+e.previewImg+'">       </div>       <div class="theme__lessons">       </div>   </div></div>')}function resetCreateForm(){$("[js-tutorial-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку курса 1180x350")}function resetUpdateForm(){$("[js-update-tutorial-form]").trigger("reset"),$(".js-labelFile").removeClass("has-file"),$(".js-fileName").html("Загрузите обложку курса 1180x350")}function validateForm(e){return $(e).validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(e,t){e.addClass("error-wrapper"),e.insertAfter(t.parent().last())},wrapper:"span"}),$(e).rules("add",{messages:{required:"Заполните это поле."}}),$(e).valid()}function initDeleteTutorial(){$("[js-delete-tutorial]").on("click",(function(e){var t=$("[js-update-tutorial-form-id]").val();$("[js-delete-tutorial]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"deleteTutorial",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){$('.theme[data-tutorial="'+t+'"]').remove(),$("[js-menu-update-tutorial]").removeClass("is-open"),checkBodyHidden(),resetUpdateForm(),$("[js-delete-tutorial]").prop("disabled",!1)},error:function(e){$("[js-delete-tutorial]").prop("disabled",!1)}})}))}function closeEdit(){$("[js-client-card-name]").attr("disabled",!0),$("[js-client-card-link]").attr("disabled",!0),$("[js-client-card-link]").closest(".menu-input").find(".menu-input__title").html("Ссылка ВК"),$("[js-client-card-phone]").attr("disabled",!0),$("[js-client-card-phone]").closest(".menu-input").find(".menu-input__title").html("Номер телефона"),$("[js-client-card-email]").attr("disabled",!0),$("[js-client-card-email]").closest(".menu-input").find(".menu-input__title").html("Email"),$("[js-client-card-desc]").removeClass("is-open"),$("[js-edit-footer]").removeClass("is-open")}function updateClient(e){$("[js-update-deal]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/clients/updateClient",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){closeEdit(),updateClientNameOnFront(e),updateClientLinkOnFront(e),updateClientPhoneOnFront(e),updateClientNameOnList(e),$("[js-update-deal]").prop("disabled",!1),$("[js-client-name-copy]").text(e.name),$("[js-client-name-copy]").attr("data-link",e.name)},error:function(e){$("[js-update-deal]").prop("disabled",!1)}})}function updateClientNameOnFront(e){$('[data-client="'+e.id+'"]').siblings("span").html(e.name)}function updateClientLinkOnFront(e){var t=$('[data-link-client="'+e.id+'"]');null===e.link||""===e.link?t.html("<div>—</div>"):t.html('<div class="column-links"><div js-copy-link class="column_mwidth column_mwidth-copy" data-link="'+e.link+'"></div><a href="'+e.link+'" target="_blank" class="column_mwidth column_mwidth-open"></a></div>')}function updateClientPhoneOnFront(e){var t=$('[data-phone-client="'+e.id+'"]');null===e.phone||""===e.phone?t.html(""):t.html('<div js-copy-link class="client-phone" data-link="'+e.phone+'">'+e.phone+"</div>")}function updateClientNameOnList(e){var t=$('[value="'+e.id+'"].js-client-id-l').closest("[js-client-card]");t.find(".client-card__title").html(e.name),t.find(".client-card__info-link").html(e.link),t.find(".client-card__info-phone").html(e.phone)}function updateDealCard(e){void 0!==e&&$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getDeals",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){var t=$("[js-deals-list]");t.html(""),$.each(e,(function(e,i){updateDealPriceOnList(i);i.reminder&&(i.reminderMessage,i.reminderMessage);var n=$("<div/>").attr("class","deal deal_low deal_white").append($("<div/>").attr("class","deal-wrapper").append($("<div/>").attr("class","deal__wrapper deal__wrapper_bordered deal__wrapper_column").append($("<div/>").attr("class","deal__title").html(1===i.status?"Целевая заявка":i.course)).append($("<div/>").attr("class","deal__subtitle").append($("<div/>").attr("class",null!==i.kind?"deal__kind deal__kind_del":"deal__kind").html(i.kind)).append($("<div/>").attr("class","deal__date").html(i.createDate)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_overflow deal__wrapper_bordered c-tooltip").append($("<div/>").attr("class","c-tooltip__wrapper").append($("<div/>").attr("class","c-tooltip__text").html(i.managerAccessName))).append($("<div/>").attr("class","deal__social").append($("<div/>").attr("class","deal-social deal-social_"+i.socialCode))).append($("<div/>").attr("class","deal__manager").html(i.managerName)).append($("<div/>").attr("class","deal__sale-type").html(i.type))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_between deal__wrapper_bordered ").append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Стоимость")).append($("<div/>").attr("class","deal__sum-value").html(i.price))).append($("<div/>").attr("class","deal__sum").append($("<div/>").attr("class","deal__sum-title").html("Получено")).append($("<div/>").attr("class","deal__sum-value deal__sum-value_blue").html(i.paid)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__select deal__select_"+i.statusCode).append($("<div/>").attr("class","deal-select menu-input__input_select").html(i.statusName)))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column deal__wrapper_bordered").append($("<div/>").attr("class","deal__reminder").append($("<div/>").attr("class",i.reminder?i.reminderExpiration?"deal__reminder-title deal-reminder deal-reminder_red ":i.reminderToday?"deal__reminder-title deal-reminder deal-reminder_green ":"deal__reminder-title deal-reminder deal-reminder_gray ":"deal__reminder-title deal__reminder-title_left").html(i.reminder?i.reminderDate:"Нет напоминания")))).append($("<div/>").attr("class","deal__wrapper deal__wrapper_column").append($("<form/>").attr("class","button_full").attr("action","#").attr("js-view-deal-form","").append($("<input/>").attr("name","id").attr("type","hidden").val(i.id)).append($("<button/>").attr("type","button").attr("class","button button_white button_full").attr("js-view-deal-btn","").html("Посмотреть сделку")))));t.append(n)}))}})}function initFancy(){$("[data-fancybox]").fancybox({infobar:!1,buttons:["close"]})}$(document).on("click","[edit-streams]",(function(e){resetUpdateStreamsMenu();var t=new FormData;t.append("startDate",$(this).data("date")),$.ajax({type:"POST",url:"getCompanyProjects",processData:!1,contentType:!1,cache:!1,success:function(e){LIST_PROJECTS=e,openEditStreamsMenu(t),$("[add-streams]").prop("disabled",!1)},error:function(e){$("[add-streams]").prop("disabled",!1)}})})),$(document).on("click","[js-menu-update-streams-close-btn]",(function(e){$("[js-menu-update-streams]").removeClass("is-open"),checkBodyHidden()})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter(FILTER_FROM_BACK)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")}))})),$(document).on("change","[filter-parameter]",(function(){$(this).closest("form").trigger("submit")})),$(document).ready((function(){const e=$("[tr-filter-form]"),t=$("[tr-filter-form-btn]"),i=$("[tr-filter]"),n=$("[tr-filter-btn]"),a=$("[tr-filter-close-btn]");n.on("click",(function(){$("body").addClass("hiddenOverflow"),i.addClass("is-open")})),a.on("click",(function(){$("body").removeClass("hiddenOverflow"),i.removeClass("is-open"),resetFilter($filterFromBack)})),t.on("click",(function(t){t.preventDefault(),e.trigger("submit")})),$(".datepicker-here-f").datepicker({autoClose:!0}),downloadDealsExcel(),$searchClient=$("[search-client]"),$searchClientForm=$("[search-client-form]"),$searchClientBtn=$("[search-client-btn]"),$searchClientClear=$("[search-client-clear]"),$searchClient.on("keyup",(function(){$searchClientClear.removeClass("is-open"),$searchClientBtn.addClass("is-open"),$(this).addClass("active")})),$searchClientBtn.on("click",(function(e){e.preventDefault(),$searchClientForm.trigger("submit")})),$searchClientClear.on("click",(function(e){e.preventDefault(),$searchClient.val(""),$searchClientForm.trigger("submit")}))})),$(document).on("click","[js-update-tutorial]",(function(e){setUpdateTutorialFormData($(this).closest(".theme").attr("data-tutorial")),$("[js-menu-update-tutorial]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-update-tutorial-close-btn]",(function(e){$("[js-menu-update-tutorial]").removeClass("is-open"),resetUpdateForm(),checkBodyHidden()})),$(document).on("click","[js-update-save-tutorial]",(function(e){e.preventDefault(),$("[js-update-tutorial-form]").trigger("submit")})),$(document).on("submit","[js-update-tutorial-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("[js-update-tutorial-form]")[0];updateTutorial(new FormData(t))}})),$(document).ready((function(){const e=$("[js-create-tutorial]"),t=$("[js-menu-create-tutorial-close-btn]"),i=$("[js-menu-create-tutorial]"),n=$("[js-save-tutorial]"),a=$("[js-tutorial-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),resetCreateForm(),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=a[0];createTutorial(new FormData(t))}})),initDeleteTutorial()})),$(document).on("click","[js-edit-btn]",(function(e){$("[js-client-card-name]").removeAttr("disabled"),$("[js-client-card-link]").removeAttr("disabled"),$("[js-client-card-link]").closest(".menu-input").find(".menu-input__title").html("Ссылка ВК **"),$("[js-client-card-phone]").removeAttr("disabled"),$("[js-client-card-phone]").closest(".menu-input").find(".menu-input__title").html("Номер телефона **"),$("[js-client-card-email]").removeAttr("disabled"),$("[js-client-card-email]").closest(".menu-input").find(".menu-input__title").html("Email **"),$('[check-required="edit-client-info"]').trigger("change"),$("[js-client-card-desc]").addClass("is-open"),$("[js-edit-footer]").addClass("is-open")})),$(document).on("click","[js-edit-client-btn]",(function(e){e.preventDefault(),$(this).closest("[js-edit-client-form]").trigger("submit")})),$(document).on("submit","[js-edit-client-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$(this).serializeObject();updateClient(t)}})),$(document).on("click","[js-menu-client-card-close-btn]",(function(e){$("[js-menu-client-card]").removeClass("is-open"),checkBodyHidden()})),$(document).ready((function(){$("[js-action-status-form]").find("[js-action-status]").on("change",(function(){$(this).parent().trigger("submit")}))})),$(document).ready((function(){$("[js-status-form]").find("[js-status]").on("change",(function(){$(this).parent().parent().trigger("submit")})),initFancy()}));var FILES=new FormData;function setFiles(e){for(var t=0;t<e.length;t++)FILES.append(e[t].name,e[t])}function updateFiles(e){var t="";for(var i of FILES.entries()){var n=i[1].name,a=n.substr(0,n.lastIndexOf(".")),s=n.substr(n.lastIndexOf(".")+1,n.length);t+='<div class="input-element__document-wrapper"><div class="lesson-document lesson-document_full lesson-document_without-hover"><div class="lesson-document__type lesson-document__type_'+s+'">'+s+'</div><div class="lesson-document__name">'+a+'</div></div><div data-file="'+n+'" js-delete-doc class="lesson-document__delete-btn"></div></div>'}e.closest(".menu-input").find(".input-element__documents-new").html(t)}function addFilesToFormData(e){for(var t of FILES.entries())e.append("files",t[1])}function clearFiles(e){for(var t of(e.find(".input-element__documents-new").html(""),FILES.entries()))FILES.delete(t[0])}$(document).on("click","[js-delete-doc]",(function(){FILES.delete($(this).attr("data-file")),$(this).closest(".input-element__document-wrapper").remove()})),$(document).on("change",".input-upload-file",(function(){setFiles(this.files),updateFiles($(this)),$(this).val("")})),$(document).ready((function(){$("[js-input-file]").on("change",(function(e){var t="",i=$(this).siblings(".js-labelFile"),n=i.html();e.target.value&&(t=e.target.value.split("\\").pop()),t?i.addClass("has-file").children(".js-fileName").html(t):i.removeClass("has-file").html(n)}))})),$(document).on("change",".input-file",(function(e){var t=$(this).next(".js-labelFile"),i=t.html(),n="";e.target.value&&(n=e.target.value.split("\\").pop()),n?t.addClass("has-file").find(".js-fileName").html(n):t.removeClass("has-file").html(i)}));var TEMP_ITEM_FILES={};function setFilesToFormData(e){$.each(TEMP_ITEM_FILES,(function(t,i){e.append(i.name,i.file)})),TEMP_ITEM_FILES={}}function processReport(e){$("[js-report-file]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"processReport",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[dialog]").find(".dialog__title").html("Результат обработки таблицы"),$("[dialog]").find(".dialog__text").html("<div>Прочитано строк из таблицы: "+e+"</div>"),$("[dialog]").addClass("is-open"),$("[js-report-file]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-report-file]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()}})}function processReport(e){$("[js-report-file]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"processReport",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[dialog]").find(".dialog__title").html("Результат обработки отчета"),$("[dialog]").find(".dialog__text").html("<div>Прочитано строк из отчета: "+e.reportRowCount+"</div><div>Найдено совпадений в базе: "+e.dataBaseRowCount+"</div><div>Было обновлено в базе: "+e.processedRowCount+"</div>"),$("[dialog]").addClass("is-open"),$("[js-report-file]").prop("disabled",!1),hideLoader()},error:function(e){$("[js-report-file]").prop("disabled",!1),hideLoader()},beforeSend:function(){showLoader()}})}function setSaleTypeFormData(e){$("[js-set-sale-type]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getSaleType",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-sale-type-id-company]").val(e),$('input:radio[sale-type][value="'+t.id+'"]').attr("checked",!0).prop("checked",!0),$("[js-set-sale-type]").prop("disabled",!1)},error:function(e){$("[js-set-sale-type]").prop("disabled",!1)}})}function saveSaleType(e){$("[js-save-sale-type]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"updateSaleType",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-menu-sale-type]").removeClass("is-open"),$("[js-sale-type-form]").trigger("reset"),$('input:radio[sale-type][name="id"]').attr("checked",!1).prop("checked",!1),checkBodyHidden(),$("[js-save-sale-type]").prop("disabled",!1)},error:function(e){$("[js-save-sale-type]").prop("disabled",!1)}})}function setAccessFormData(e){$("[js-set-access]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getAccess",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-access-fotm-id-company]").val(e),$('input:checkbox[name="about"]').attr("checked",t.about).prop("checked",t.about),$('input:checkbox[name="regulations"]').attr("checked",t.regulations).prop("checked",t.regulations),$('input:checkbox[name="bookmarks"]').attr("checked",t.bookmarks).prop("checked",t.bookmarks),$('input:checkbox[name="training"]').attr("checked",t.training).prop("checked",t.training),$('input:checkbox[name="events"]').attr("checked",t.events).prop("checked",t.events),$('input:checkbox[name="production"]').attr("checked",t.production).prop("checked",t.production),$("[js-set-access]").prop("disabled",!1)},error:function(e){$("[js-set-access]").prop("disabled",!1)}})}function saveAccessInformation(e){$("[js-save-access]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveAccess",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-menu-set-access]").removeClass("is-open"),checkBodyHidden(),resetAccessForm(),$("[js-save-access]").prop("disabled",!1)},error:function(e){$("[js-save-access]").prop("disabled",!1)}})}function resetAccessForm(){$("[js-access-form]").trigger("reset"),$('input:checkbox[name="about"]').attr("checked",!1).prop("checked",!1),$('input:checkbox[name="regulations"]').attr("checked",!1).prop("checked",!1),$('input:checkbox[name="bookmarks"]').attr("checked",!1).prop("checked",!1),$('input:checkbox[name="training"]').attr("checked",!1).prop("checked",!1),$('input:checkbox[name="events"]').attr("checked",!1).prop("checked",!1),$('input:checkbox[name="production"]').attr("checked",!1).prop("checked",!1)}function changeSelectorIndicator(){$(".indicated-select select").on("change",(function(e){var t=$("option:selected",this).attr("value");$(this).closest(".indicated-select").removeClassWild("indicated-select_*").addClass("indicated-select_"+t)}))}function createAdvertiser(e){$("[js-save-advertiser]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"createAdvertiser",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-menu-create-user]").removeClass("is-open"),checkBodyHidden(),$("[js-advertiser-form]").trigger("reset"),$("[js-save-advertiser]").prop("disabled",!1)},error:function(e){$("[js-save-advertiser]").prop("disabled",!1)}})}function createAdmin(e){$("[js-save-advertiser]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveAdmin",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-menu-create-user]").removeClass("is-open"),checkBodyHidden(),$("[js-advertiser-form]").trigger("reset"),$("[js-save-advertiser]").prop("disabled",!1)},error:function(e){$("[js-save-advertiser]").prop("disabled",!1)}})}function createManager(e){$("[js-save-manager]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveManager",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){$("[js-menu-create-user]").removeClass("is-open"),checkBodyHidden(),$("[js-manager-form]").trigger("reset"),$("[js-save-manager]").prop("disabled",!1)},error:function(e){$("[js-save-manager]").prop("disabled",!1)}})}function initDatePicker(){$(".datepicker-here-cs").datepicker({autoClose:!0})}$(document).on("change",".upload-btn__item-file",(function(e){if(e.target.value){var t=$(this).closest("[upload-block]").find("[upload-list]"),i=$(this).data("name");$.each(e.target.files,(function(n,a){var s=URL.createObjectURL(a),o=s.split("\\").pop(),r=e.target.value.split("\\").pop(),l=r.split(".").pop(),d=r.split(".").shift();"doc"===l||"docx"===l||"pdf"===l?t.prepend('<div id="'+o+'" class="gallery__item">   <div class="gallery-item gallery-item_small gallery-item_'+l+'">       <div class="gallery-item__title">'+l+'</div>       <div class="gallery-item__subtitle">'+d+'</div>   </div>   <span class="gallery__delete-btn"></span></div>'):t.prepend('<div id="'+o+'" class="gallery__item">   <a href="'+s+'" data-fancybox="'+a.name+'" class="gallery-item gallery-item_small">       <img class="gallery-item__preview" src="'+s+'">   </a>   <span class="gallery__delete-btn"></span></div>');var c={};c.name=i,c.file=a,TEMP_ITEM_FILES[o]=c})),$(this).val("")}})),$(document).on("click",".gallery__delete-btn",(function(e){var t=$(this).closest(".gallery__item");delete TEMP_ITEM_FILES[t.attr("id")],t.remove()})),$(document).on("change","[js-report-file]",(function(e){var t="";e.target.value&&(t=e.target.value.split("\\").pop()),t&&$(this).closest("form").trigger("submit")})),$(document).on("submit","[js-report-form]",(function(e){e.preventDefault(),validateForm(this)&&processReport(new FormData($("[js-report-form]")[0]))})),$(document).on("click","[close-dialog]",(function(e){location.reload()})),$(document).on("change","[js-report-file]",(function(e){var t="";e.target.value&&(t=e.target.value.split("\\").pop()),t&&$(this).closest("form").trigger("submit")})),$(document).on("submit","[js-report-form]",(function(e){e.preventDefault(),validateForm(this)&&processReport(new FormData($("[js-report-form]")[0]))})),$(document).on("click","[close-dialog]",(function(e){location.reload()})),$(document).on("click","[js-set-sale-type]",(function(e){setSaleTypeFormData($(this).closest(".custom-table__body-row").find("[u-id-company]").val()),$("[js-menu-sale-type]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-sale-type-close-btn]",(function(e){$("[js-menu-sale-type]").removeClass("is-open"),$("[js-sale-type-form]").trigger("reset"),$('input:radio[sale-type][name="id"]').attr("checked",!1).prop("checked",!1),checkBodyHidden()})),$(document).on("click","[js-save-sale-type]",(function(e){e.preventDefault(),$("[js-sale-type-form]").trigger("submit")})),$(document).on("submit","[js-sale-type-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveSaleType($("[js-sale-type-form]").serializeObject())})),$(document).on("click","[js-set-access]",(function(e){setAccessFormData($(this).closest(".custom-table__body-row").find("[u-id-company]").val()),$("[js-menu-set-access]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-set-access-close-btn]",(function(e){$("[js-menu-set-access]").removeClass("is-open"),resetAccessForm(),checkBodyHidden()})),$(document).on("click","[js-save-access]",(function(e){e.preventDefault(),$("[js-access-form]").trigger("submit")})),$(document).on("submit","[js-access-form]",(function(e){(e.preventDefault(),validateForm(this))&&saveAccessInformation($("[js-access-form]").serializeObject())})),$(document).ready((function(){const e=$("[js-create-user]"),t=$("[js-menu-create-user-close-btn]"),i=$("[js-menu-create-user]"),n=$("[js-save-manager]"),a=$("[js-manager-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=a.serializeObject();createManager(t)}}));const s=$("[js-save-advertiser]"),o=$("[js-advertiser-form]");s.on("click",(function(e){e.preventDefault(),o.trigger("submit")})),o.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=o.serializeObject();createAdvertiser(t)}}));const r=$("[js-save-admin]"),l=$("[js-admin-form]");r.on("click",(function(e){e.preventDefault(),l.trigger("submit")})),l.submit((function(e){(e.preventDefault(),validateForm(this))&&createAdmin(l.serializeObject())})),initEditUsersFromList(),initCancelEditUserFromList(),initAcceptEditUserFromList(),initDatePicker(),uploadAvatar(),changeSelectorIndicator()}));var USERS_INFO_TEMP={},USERS_ACCEPT_BTN,$managerTypeList,$advertiserTypeList;function initEditUsersFromList(){$("[edit-user]").on("click",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[u-name]");t.name=i.val();var n=$(this).closest(".custom-table__body-row").find("[u-company-name]");n.removeAttr("disabled"),t.companyName=n.val();var a=$(this).closest(".custom-table__body-row").find("[u-legal-name]");a.removeAttr("disabled"),t.legalName=a.val();var s=$(this).closest(".custom-table__body-row").find("[u-username]");s.removeAttr("disabled"),t.username=s.val();var o=$(this).closest(".custom-table__body-row").find("[u-password]");o.removeAttr("disabled"),t.password=o.val();var r=$(this).closest(".custom-table__body-row").find("[u-timezone]");r.removeAttr("disabled"),t.timezone=r.val();var l=$(this).closest(".custom-table__body-row").find("[u-phone]");l.removeAttr("disabled"),t.phone=l.val();var d=$(this).closest(".custom-table__body-row").find("[u-link]");d.removeAttr("disabled"),t.link=d.val();var c=$(this).closest(".custom-table__body-row").find("[u-company-code]");c.removeAttr("disabled"),t.companyCode=c.val();var u=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]");u.removeAttr("disabled"),t.doorsCardNumber=u.val();var p=$(this).closest(".custom-table__body-row").find("[u-birthday]");p.removeAttr("disabled"),t.birthday=p.val();var h=$(this).closest(".custom-table__body-row").find("[u-ishaskey]");h.removeAttr("disabled"),t.isHasKey=h.prop("checked"),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").removeAttr("disabled");var f=$(this).closest(".custom-table__body-row").find("[u-type-selector]");t.type=f.val(),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").removeAttr("disabled");var m=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]");t.dismiss=m.val(),$(this).closest(".custom-table__body-row").find("[u-access-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-access-selector]").removeAttr("disabled");var v=$(this).closest(".custom-table__body-row").find("[u-access-selector]");t.access=v.val(),$(this).closest(".custom-table__body-row").find("[u-partner-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-partner-selector]").removeAttr("disabled");var b=$(this).closest(".custom-table__body-row").find("[u-partner-selector]");t.isPartner=b.val(),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]=t}))}function initCancelEditUserFromList(){$("[edit-user-cancel]").on("click",(function(e){e.preventDefault();var t=USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()];$(this).closest(".custom-table__body-row").find("[u-name]").val(t.name).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-company-name]").val(t.companyName).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-legal-name]").val(t.legalName).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-username]").val(t.username).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-password]").val(t.password).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-timezone]").val(t.timezone).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-phone]").val(t.phone).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-link]").val(t.link).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-company-code]").val(t.companyCode).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(t.doorsCardNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-birthday]").val(t.birthday).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",t.isHasKey).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(t.type).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.dismiss).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(t.dismiss).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-access-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.access).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-access-selector]").val(t.access).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-partner-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.isPartner).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-partner-selector]").val(t.isPartner).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]}))}function initAcceptEditUserFromList(){$("[edit-user-accept]").on("click",(function(e){e.preventDefault(),USERS_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[u-id]").val(),t.idCompany=$(this).closest(".custom-table__body-row").find("[u-id-company]").val(),t.name=$(this).closest(".custom-table__body-row").find("[u-name]").val(),t.companyName=$(this).closest(".custom-table__body-row").find("[u-company-name]").val(),t.legalName=$(this).closest(".custom-table__body-row").find("[u-legal-name]").val(),t.username=$(this).closest(".custom-table__body-row").find("[u-username]").val(),t.password=$(this).closest(".custom-table__body-row").find("[u-password]").val(),t.timezoneHour=$(this).closest(".custom-table__body-row").find("[u-timezone]").val(),t.phone=$(this).closest(".custom-table__body-row").find("[u-phone]").val(),t.link=$(this).closest(".custom-table__body-row").find("[u-link]").val(),t.companyCode=$(this).closest(".custom-table__body-row").find("[u-company-code]").val(),t.doorsCardNumber=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(),t.birthday=$(this).closest(".custom-table__body-row").find("[u-birthday]").val(),t.isHasKey=$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked"),t.type=$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(),t.isNotDisMiss=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(),t.access=$(this).closest(".custom-table__body-row").find("[u-access-selector]").val(),t.isPartner=$(this).closest(".custom-table__body-row").find("[u-partner-selector]").val(),$("[edit-user-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"update",data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(e.name).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-company-name]").val(e.companyName).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-legal-name]").val(e.legalName).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-username]").val(e.username).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-password]").val("").attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-timezone]").val(e.timezoneHour).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(e.phone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(e.link).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-company-code]").val(e.companyCode).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(e.doorsCardNumber).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(e.birthday).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",e.isHasKey).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(e.type).attr("disabled",!0),void 0!==e.isNotDisMiss&&(USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(e.isNotDisMiss.toString()).attr("disabled",!0)),void 0!==e.access&&(USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-access-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-access-selector]").val(e.access.toString()).attr("disabled",!0)),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-partner-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-partner-selector]").val(e.isPartner.toString()).attr("disabled",!0),USERS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[e.id],$("[edit-user-accept]").prop("disabled",!1)},error:function(e){var i=USERS_INFO_TEMP[t.id];USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(i.name).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-company-name]").val(i.companyName).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-legal-name]").val(i.legalName).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-username]").val(i.username).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-password]").val("").attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-timezone]").val(i.timezone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(i.phone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(i.link).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-company-code]").val(i.companyCode).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(i.doorsCardNumber).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(i.birthday).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",i.isHasKey).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(i.type).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(i.dismiss).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-access-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-access-selector]").val(i.access).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-partner-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-partner-selector]").val(i.isPartner).attr("disabled",!0),USERS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[e.id],$("[edit-user-accept]").prop("disabled",!1)}})}))}function uploadAvatar(){$("[u-upload-avatar]").on("change",(function(){var e=$(this).closest("[u-upload-avatar-form]"),t=new FormData(e[0]);$("[u-upload-avatar]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"uploadAvatar",data:t,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(t){e.find(".avatar-upload__upload").removeClassWild("avatar-upload__upload_*"),e.find(".avatar-upload__upload").html('<img src="/'+t+'" alt>'),$("[u-upload-avatar]").prop("disabled",!1)},error:function(e){$("[u-upload-avatar]").prop("disabled",!1)}})}))}function createAdvertiser(e){$("[js-save-advertiser]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"createAdvertiser",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addAdvertiserToTable(e),$("[js-menu-create-advertiser]").removeClass("is-open"),checkBodyHidden(),$("[js-advertiser-form]").trigger("reset"),$("[js-save-advertiser]").prop("disabled",!1)},error:function(e){$("[js-save-advertiser]").prop("disabled",!1)}})}function createManager(e){$("[js-save-manager]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"saveManager",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){addManagerToTable(e),$("[js-menu-create-manager]").removeClass("is-open"),checkBodyHidden(),$("[js-manager-form]").trigger("reset"),$("[js-save-manager]").prop("disabled",!1)},error:function(e){$("[js-save-manager]").prop("disabled",!1)}})}function addManagerToTable(e){var t="";$.each($managerTypeList,(function(i,n){t+='<option value="'+n.id+'" '+(n.id===e.type?'selected="selected" ':"")+">"+n.title+"</option>"}));var i=$('[department="manager"]').closest(".custom-table__body");i.html('<tr data-manager="'+e.id+'" department="manager" class="custom-table__body-row">                        <input type="hidden" u-id value="'+e.id+'" name="id" required>                        <td class="custom-table__body-col" >'+e.idManager+'</td>                        <td class="custom-table__body-col">                            <div class="avatar-upload">                                <form u-upload-avatar-form action="#" enctype="multipart/form-data">                                    <input type="hidden" value="'+e.idManager+'" name="id" required>                                    <input u-upload-manager-avatar accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="avatarM'+e.id+'">                                    <label for="avatarM'+e.id+'">                                            <span class="avatar-upload__upload avatar-upload__upload_default-user" ></span>                                    </label>                                </form>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_xlarge" >                            <input u-name name="name"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.name+'"                                   value="'+e.name+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_xlarge">                            <input u-username name="username"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.username+'"                                   value="'+e.username+'"                                   disabled                                   placeholder="—"                                   required>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-password name="password"                                   class="menu-input__input menu-input__input_small editable"                                   value=""                                   disabled                                   placeholder="✱✱✱✱✱✱"                                   required>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-phone name="phone"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.phone+'"                                   value="'+e.phone+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-link name="link"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.link+'"                                   value="'+e.link+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-doorscardnumber name="doorsCardNumber"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.doorsCardNumber+'"                                   value="'+e.doorsCardNumber+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_small">                            <input u-birthday                                   data-position="top left"                                   name="birthday"                                   class="datepicker-here-u menu-input__input menu-input__input_small editable"                                   autocomplete="off"                                   value="'+e.birthday+'"                                   disabled                                   data-autoclose="true"                                   placeholder="—">                        </td>                        <td class="custom-table__body-col">                            <div class="input-element__checkbox input-element__checkbox_mid">                                <input u-ishaskey                                       name="isHasKey"                                       type="checkbox"                                       class="checkbox"                                       value="true"                                       disabled                                       id="keyM'+ +e.id+'"'+(e.isHasKey?"checked=checked":"")+'                                               >                                <label class="checkbox-label checkbox-label_gray" for="keyM'+e.id+'"></label>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-type-wrapper class="menu-input__wrapper menu-input__wrapper_select disabled">                                <select u-type-selector disabled class="editable menu-input__input menu-input__input_medium menu-input__input_select menu-input__input_white">                                    <option th:value="0" disabled>Выберите тип</option>'+t+'                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-dismiss-wrapper class="indicated-select menu-input__wrapper menu-input__wrapper_select disabled indicated-select_true" >                                <select u-dismiss-selector disabled class="editable menu-input__input menu-input__input_xsmall menu-input__input_select menu-input__input_white">                                    <option value="true" selected=selected>Работает</option>                                    <option value="false">Уволен</option>                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_small">                            <div js-set-projects="" class="setting-wrapper">                                   <div class="theme-setting theme-setting_big theme-setting_m"></div>                           </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-btns class="column-links display-flex-none">                                <div edit-user-accept class="column_mwidth column_mwidth-accept"></div>                                <div edit-user-cancel class="column_mwidth column_mwidth-cancel"></div>                            </div>                            <div edit-menu class="column-links display-flex-none is-open">                                <div edit-user class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>                            </div>                        </td>                    </tr>'+i.html()),initDateUserPicker()}function addAdvertiserToTable(e){var t="";$.each($advertiserTypeList,(function(i,n){t+='<option value="'+n.id+'" '+(n.id===e.type?'selected="selected" ':"")+">"+n.title+"</option>"}));var i=$('[department="advertiser"]').closest(".custom-table__body");i.html('<tr data-advertiser="'+e.id+'" department="advertiser" class="custom-table__body-row" >                        <input type="hidden" u-id value="'+e.id+'" name="id" required>                        <td class="custom-table__body-col" >'+e.idManager+'</td>                        <td class="custom-table__body-col">                            <div class="avatar-upload">                                <form u-upload-avatar-form action="#" enctype="multipart/form-data">                                    <input type="hidden" th:value="${advertiser.idManager}" name="id" required>                                    <input u-upload-avatar accept="image/*,image/jpeg" class="input-file" name="file" type="file" id="avatarA'+e.id+'">                                    <label for="avatarA'+e.id+'">                                            <span class="avatar-upload__upload avatar-upload__upload_default-user"></span>                                    </label>                                </form>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_xlarge" >                            <input u-name name="name"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.name+'"                                   value="'+e.name+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_xlarge">                            <input u-username name="username"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.username+'"                                   value="'+e.username+'"                                   disabled                                   placeholder="—"                                   required>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-password name="password"                                   class="menu-input__input menu-input__input_small editable"                                   value=""                                   disabled                                   placeholder="✱✱✱✱✱✱"                                   required>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-phone name="phone"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.phone+'"                                   value="'+e.phone+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-link name="link"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.link+'"                                   value="'+e.link+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <input u-doorscardnumber name="doorsCardNumber"                                   class="menu-input__input menu-input__input_small editable"                                   title="'+e.doorsCardNumber+'"                                   value="'+e.doorsCardNumber+'"                                   disabled                                   placeholder="—">                        </td>                        <td class="custom-table__body-col custom-table__body-col_small">                            <input u-birthday                                   data-position="top left"                                   name="birthday"                                   class="datepicker-here-u menu-input__input menu-input__input_small editable"                                   autocomplete="off"                                   value="'+e.birthday+'"                                   disabled                                   data-autoclose="true"                                   placeholder="—">                        </td>                        <td class="custom-table__body-col">                            <div class="input-element__checkbox input-element__checkbox_mid">                                <input u-ishaskey                                       name="isHasKey"                                       type="checkbox"                                       class="checkbox"                                       value="true"                                       disabled                                       id="keyA'+e.id+'"'+(e.isHasKey?"checked=checked":"")+'>                                <label class="checkbox-label checkbox-label_gray" for="keyA'+e.id+'"></label>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-type-wrapper class="menu-input__wrapper menu-input__wrapper_select disabled">                                <select u-type-selector disabled class="editable menu-input__input menu-input__input_medium menu-input__input_select menu-input__input_white">                                    <option th:value="0" disabled>Выберите тип</option>'+t+'                                </select>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_medium">                            <div u-dismiss-wrapper class="indicated-select menu-input__wrapper menu-input__wrapper_select disabled indicated-select_true" >                                <select u-dismiss-selector disabled class="editable menu-input__input menu-input__input_xsmall menu-input__input_select menu-input__input_white">                                    <option value="true" selected=selected>Работает</option>                                    <option value="false">Уволен</option>                                </select>                            </div>                        </td>                           <td class="custom-table__body-col custom-table__body-col_small">                            <div class="input-element__checkbox input-element__checkbox_mid">                                <input u-access                                       name="access"                                       type="checkbox"                                       class="checkbox"                                       value="true"                                       disabled                                       id="keyAccess'+e.id+'"'+(e.access?"checked=checked":"")+'>                                <label class="label-pk" for="keyAccess'+e.id+'"></label>                            </div>                        </td>                        <td class="custom-table__body-col custom-table__body-col_last">                            <div edit-btns class="column-links display-flex-none">                                <div edit-user-accept class="column_mwidth column_mwidth-accept"></div>                                <div edit-user-cancel class="column_mwidth column_mwidth-cancel"></div>                            </div>                            <div edit-menu class="column-links display-flex-none is-open">                                <div edit-user class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>                            </div>                        </td>                    </tr>'+i.html()),initDateUserPicker()}function initDateUserPicker(){$(".datepicker-here-u").datepicker({autoClose:!0})}function setManagerTypes(e){$managerTypeList=e}function setAdvertiserTypes(e){$advertiserTypeList=e}$(document).on("change","[u-upload-background]",(function(e){var t=$(this).closest("[u-upload-background-form]"),i=new FormData(t[0]);$("[u-upload-background]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"uploadBackground",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){t.find(".avatar-upload__upload").removeClassWild("avatar-upload__upload_*"),t.find(".avatar-upload__upload").html('<img src="/'+e+'" alt>'),$("[u-upload-background]").prop("disabled",!1)},error:function(e){$("[u-upload-background]").prop("disabled",!1)}})})),$(document).on("click","[js-copy-company-link]",(function(e){var t=$("<textarea>");$("body").append(t),t.val($(this).attr("data-link")+$(this).closest(".custom-table__body-row").find("[u-company-code]").val()).select(),document.execCommand("copy"),t.remove()})),$(document).on("click","[js-open-company-link]",(function(e){window.open($(this).attr("data-link")+$(this).closest(".custom-table__body-row").find("[u-company-code]").val(),"_blank")})),$(document).on("change","[u-upload-manager-avatar]",(function(e){var t=$(this).closest("[u-upload-avatar-form]"),i=new FormData(t[0]);$("[u-upload-manager-avatar]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"uploadManagerAvatar",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){t.find(".avatar-upload__upload").removeClassWild("avatar-upload__upload_*"),t.find(".avatar-upload__upload").html('<img src="/'+e+'" alt>'),$("[u-upload-manager-avatar]").prop("disabled",!1)},error:function(e){$("[u-upload-manager-avatar]").prop("disabled",!1)}})})),$(document).on("change","[u-upload-advertiser-avatar]",(function(e){var t=$(this).closest("[u-upload-avatar-form]"),i=new FormData(t[0]);$("[u-upload-advertiser-avatar]").prop("disabled",!0),$.ajax({type:"POST",enctype:"multipart/form-data",url:"uploadAdvertiserAvatar",data:i,processData:!1,contentType:!1,cache:!1,timeout:3e5,success:function(e){t.find(".avatar-upload__upload").removeClassWild("avatar-upload__upload_*"),t.find(".avatar-upload__upload").html('<img src="/'+e+'" alt>'),$("[u-upload-advertiser-avatar]").prop("disabled",!1)},error:function(e){$("[u-upload-advertiser-avatar]").prop("disabled",!1)}})})),$(document).ready((function(){const e=$("[js-create-manager]"),t=$("[js-menu-create-manager-close-btn]"),i=$("[js-menu-create-manager]"),n=$("[js-save-manager]"),a=$("[js-manager-form]");e.on("click",(function(){i.addClass("is-open"),checkBodyHidden()})),t.on("click",(function(){i.removeClass("is-open"),a.trigger("reset"),checkBodyHidden()})),n.on("click",(function(e){e.preventDefault(),a.trigger("submit")})),a.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=a.serializeObject();createManager(t)}}));const s=$("[js-create-advertiser]"),o=$("[js-menu-create-advertiser-close-btn]"),r=$("[js-menu-create-advertiser]"),l=$("[js-save-advertiser]"),d=$("[js-advertiser-form]");s.on("click",(function(){r.addClass("is-open"),checkBodyHidden()})),o.on("click",(function(){r.removeClass("is-open"),d.trigger("reset"),checkBodyHidden()})),l.on("click",(function(e){e.preventDefault(),d.trigger("submit")})),d.submit((function(e){if(e.preventDefault(),validateForm(this)){var t=d.serializeObject();createAdvertiser(t)}}));const c=$("[js-menu-managers-list-close-btn]"),u=$("[js-menu-managers-list]"),p=$("[manager-list]");c.on("click",(function(){u.removeClass("is-open"),p.html(""),TEMP_ROW.find("option:selected").removeAttr("selected"),TEMP_ROW.val("true"),TEMP_ROW.closest("[u-dismiss-wrapper]").removeClass("indicated-select_false").addClass("indicated-select_true"),checkBodyHidden()})),initDateUserPicker()})),$(document).on("change","[manager-access]",(function(e){var t=$("option:selected",this).attr("data-access");void 0!==t&&"false"===t&&(TEMP_MANAGER_ID=$(this).siblings('[name="idManagerAccess"]').val(),TEMP_MANAGER_ID_LIST[TEMP_MANAGER_ID]=null,TEMP_ROW=$(this),$.ajax({type:"POST",contentType:"application/json",url:"getManagers",dataType:"json",cache:!1,success:function(e){openManagersMenu(e)},error:function(e){}}))}));var USERS_INFO_TEMP={},USERS_ACCEPT_BTN;$(document).on("click","[edit-user]",(function(e){e.preventDefault(),$(this).closest("[edit-menu]").removeClass("is-open").siblings("[edit-btns]").addClass("is-open");var t={},i=$(this).closest(".custom-table__body-row").find("[u-name]");t.name=i.val();var n=$(this).closest(".custom-table__body-row").find("[u-id-manager]");t.idManager=n.val();var a=$(this).closest(".custom-table__body-row").find("[u-username]");a.removeAttr("disabled"),t.username=a.val();var s=$(this).closest(".custom-table__body-row").find("[u-password]");s.removeAttr("disabled"),t.password=s.val();var o=$(this).closest(".custom-table__body-row").find("[u-phone]");o.removeAttr("disabled"),t.phone=o.val();var r=$(this).closest(".custom-table__body-row").find("[u-link]");r.removeAttr("disabled"),t.link=r.val();var l=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]");l.removeAttr("disabled"),t.doorsCardNumber=l.val();var d=$(this).closest(".custom-table__body-row").find("[u-birthday]");d.removeAttr("disabled"),t.birthday=d.val();var c=$(this).closest(".custom-table__body-row").find("[u-ishaskey]");c.removeAttr("disabled"),t.isHasKey=c.prop("checked");var u=$(this).closest(".custom-table__body-row").find("[u-isneedshow]");u.removeAttr("disabled"),t.isNeedShow=u.prop("checked"),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").removeAttr("disabled");var p=$(this).closest(".custom-table__body-row").find("[u-type-selector]");t.type=p.val(),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").removeAttr("disabled");var h=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]");t.dismiss=h.val();var f=$(this).closest(".custom-table__body-row").find("[u-access]");f.removeAttr("disabled"),t.access=f.prop("checked"),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()]=t})),$(document).on("click","[edit-user-cancel]",(function(e){e.preventDefault();var t=USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()];$(this).closest(".custom-table__body-row").find("[u-name]").val(t.name).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-username]").val(t.username).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-password]").val(t.password).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-phone]").val(t.phone).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-link]").val(t.link).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(t.doorsCardNumber).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-birthday]").val(t.birthday).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",t.isHasKey).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-isneedshow]").prop("checked",t.isNeedShow).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(t.type).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-dismiss-wrapper]").removeClassWild("indicated-select_*").addClass("indicated-select_"+t.dismiss).addClass("disabled"),$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(t.dismiss).attr("disabled",!0),$(this).closest(".custom-table__body-row").find("[u-access]").prop("checked",t.access).attr("disabled",!0),$(this).closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[$(this).closest(".custom-table__body-row").find("[u-id]").val()],delete TEMP_MANAGER_ID_LIST[$(this).closest(".custom-table__body-row").find("[u-id-manager]").val()]})),$(document).on("click","[edit-user-accept]",(function(e){e.preventDefault(),USERS_ACCEPT_BTN=$(this);var t=new Object;t.id=$(this).closest(".custom-table__body-row").find("[u-id]").val(),t.idCompany=$(this).closest(".custom-table__body-row").find("[u-id-company]").val(),t.name=$(this).closest(".custom-table__body-row").find("[u-name]").val(),t.username=$(this).closest(".custom-table__body-row").find("[u-username]").val(),t.password=$(this).closest(".custom-table__body-row").find("[u-password]").val(),t.phone=$(this).closest(".custom-table__body-row").find("[u-phone]").val(),t.link=$(this).closest(".custom-table__body-row").find("[u-link]").val(),t.doorsCardNumber=$(this).closest(".custom-table__body-row").find("[u-doorscardnumber]").val(),t.birthday=$(this).closest(".custom-table__body-row").find("[u-birthday]").val(),t.isHasKey=$(this).closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked"),t.isNeedShow=$(this).closest(".custom-table__body-row").find("[u-isneedshow]").prop("checked"),t.type=$(this).closest(".custom-table__body-row").find("[u-type-selector]").val(),t.isNotDisMiss=$(this).closest(".custom-table__body-row").find("[u-dismiss-selector]").val(),t.access=$(this).closest(".custom-table__body-row").find("[u-access]").prop("checked");var i=$(this).closest(".custom-table__body-row").attr("department"),n="";"manager"===i?(n="updateManager",t.idManager=$(this).closest(".custom-table__body-row").find("[u-id-manager]").val(),t.idManagerAccess=TEMP_MANAGER_ID_LIST[$(this).closest(".custom-table__body-row").find("[u-id-manager]").val()]):"advertiser"===i&&(n="updateAdvertiser"),$("[edit-user-accept]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:n,data:JSON.stringify(t),dataType:"json",cache:!1,success:function(e){USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(e.name).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-username]").val(e.username).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-password]").val("").attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(e.phone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(e.link).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(e.doorsCardNumber).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(e.birthday).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",e.isHasKey).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-isneedshow]").prop("checked",e.isNeedShow).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(e.type).attr("disabled",!0),void 0!==e.isNotDisMiss&&(USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(e.isNotDisMiss.toString()).attr("disabled",!0),"false"===e.isNotDisMiss.toString()&&USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").find("[data-access]").attr("data-access","true")),void 0!==e.access&&USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-access]").prop("checked",e.access).attr("disabled",!0),USERS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[e.id],delete TEMP_MANAGER_ID_LIST[USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-id-manager]").val()],$("[edit-user-accept]").prop("disabled",!1)},error:function(e){var i=USERS_INFO_TEMP[t.id];USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-name]").val(i.name).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-username]").val(i.username).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-password]").val("").attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-phone]").val(i.phone).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-link]").val(i.link).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-doorscardnumber]").val(i.doorsCardNumber).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-birthday]").val(i.birthday).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-ishaskey]").prop("checked",i.isHasKey).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-isneedshow]").prop("checked",i.isNeedShow).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-type-selector]").val(i.type).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-wrapper]").addClass("disabled"),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-dismiss-selector]").val(i.dismiss).attr("disabled",!0),USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-access]").prop("checked",i.access).attr("disabled",!0),USERS_ACCEPT_BTN.closest("[edit-btns]").removeClass("is-open").siblings("[edit-menu]").addClass("is-open"),delete USERS_INFO_TEMP[e.id],delete TEMP_MANAGER_ID_LIST[USERS_ACCEPT_BTN.closest(".custom-table__body-row").find("[u-id-manager]").val()],$("[edit-user-accept]").prop("disabled",!1)}})}));var TEMP_MANAGER_ID_LIST={},TEMP_MANAGER_ID,TEMP_ROW;function openManagersMenu(e){var t="";$.each(e,(function(e,i){t+='<div manager-row class="div-table__row">       <div class="div-table__row-wrapper">           <div class="div-table__body-row">               <div class="div-table__body-col div-table__body-col_exsmall">                    <div class="input-element__radio ">                         <input type="radio" id="man'+i.id+'" class="radio radio_circle" name="idManager" value="'+i.id+'" required>                         <label for="man'+i.id+'" class="circle "></label>                   </div>              </div>              <div sms-check-text class="div-table__body-col div-table__body-col_full">'+i.name+"</div>          </div>      </div></div>"})),$("[manager-list]").html(t),$("[js-menu-managers-list]").addClass("is-open"),checkBodyHidden()}function setManagerProjectsFormData(e){$("[js-set-projects]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getManagerProjects",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(t){$("[js-projects-form-id-manager]").val(e),$.each(t.projects,(function(e,t){$('input:checkbox[name="projects"][id="project'+t+'"]').attr("checked",!0).prop("checked",!0)})),$("[js-set-projects]").prop("disabled",!1)},error:function(e){$("[js-set-projects]").prop("disabled",!1)}})}function saveManagerProjects(e){$("[jjs-save-projects]").prop("disabled",!0),$.ajax({type:"POST",url:"saveManagerProjects",data:e,processData:!1,contentType:!1,cache:!1,success:function(e){$("[js-menu-set-projects]").removeClass("is-open"),checkBodyHidden(),$("[js-projects-form]").trigger("reset"),$('input:checkbox[name="projects"]').attr("checked",!1).prop("checked",!1),$("[js-save-projects]").prop("disabled",!1)},error:function(e){$("[js-save-projects]").prop("disabled",!1)}})}function getViewDealInfo(e){$("[js-view-deal-btn]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"/api/deals/getViewDeal",data:JSON.stringify(e),dataType:"json",cache:!1,success:function(e){setViewDealInfo(e),$("[js-view-deal-btn]").prop("disabled",!1)},error:function(e){$("[js-view-deal-btn]").prop("disabled",!1)}})}function setViewDealInfo(e){resetViewDealMenu(),$("[d-view-status]").html(e.statusName),$("[d-view-social]").html(e.socialName),$("[d-view-deal-date]").html(e.dealDate),$("[d-view-product]").html(e.product),$("[d-view-course]").html(e.course),$("[d-view-type]").html(e.type),$("[d-view-price]").html(e.price),$("[d-view-tag]").html(e.tag),$("[d-view-comment]").html(e.comment),"Трафик"===e.type&&($("[view-deal-mailing-block]").addClass("is-open"),$("[d-view-mailing]").prop("checked",e.isMailing)),null!==e.kind&&($("[view-deal-kind-block]").addClass("is-open"),$("[d-view-kind]").prop("checked",e.kind)),2===e.idSaleType&&($("[view-deal-start-date-block]").addClass("is-open"),$("[d-view-start-date]").html(e.startDate),$("[view-deal-trial-block]").addClass("is-open"),$("[d-view-mailing]").prop("checked",e.trial)),$("[js-menu-view-deal]").addClass("is-open"),checkBodyHidden()}function resetViewDealMenu(){$("[d-view-status]").html(""),$("[d-view-social]").html(""),$("[d-view-deal-date]").html(""),$("[d-view-product]").html(""),$("[d-view-course]").html(""),$("[d-view-type]").html(""),$("[d-view-price]").html(""),$("[d-view-tag]").html(""),$("[d-view-comment]").html(""),$("[view-deal-mailing-block]").removeClass("is-open"),$("[d-view-mailing]").prop("checked",!1),$("[view-deal-kind-block]").removeClass("is-open"),$("[d-view-kind]").prop("checked",!1),$("[view-deal-start-date-block]").removeClass("is-open"),$("[d-view-start-date]").html(""),$("[view-deal-trial-block]").removeClass("is-open"),$("[d-view-mailing]").prop("checked",!1)}$(document).on("submit","[delete-user-form]",(function(e){e.preventDefault(),TEMP_MANAGER_ID_LIST=$(this).find('[name="idManagerAccess"]').val(),TEMP_ROW=$(this),$("[delete-user]").prop("disabled",!0),$.ajax({type:"POST",contentType:"application/json",url:"getManagers",dataType:"json",cache:!1,success:function(e){openManagersMenu(e),$("[delete-user]").prop("disabled",!1)},error:function(e){$("[delete-user]").prop("disabled",!1)}})})),$(document).on("click","[manager-row]",(function(e){$(this).find("input[type=radio]").prop("checked",!0),$("[sms-check-row]").removeClass("div-table__row_selected"),$(this).addClass("div-table__row_selected")})),$(document).on("click","[js-select-manager-btn]",(function(e){e.preventDefault(),$("[js-managers-list-form]").trigger("submit")})),$(document).on("submit","[js-managers-list-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("[js-managers-list-form]").serializeObject();TEMP_MANAGER_ID_LIST[TEMP_MANAGER_ID]=t.idManager,$("[js-menu-managers-list]").removeClass("is-open"),$("[manager-list]").html(""),checkBodyHidden()}})),$(document).on("click","[js-set-projects]",(function(e){setManagerProjectsFormData($(this).closest(".custom-table__body-row").find("[u-id-manager]").val()),$("[js-menu-set-projects]").addClass("is-open"),checkBodyHidden()})),$(document).on("click","[js-menu-set-projects-close-btn]",(function(e){$("[js-menu-set-projects]").removeClass("is-open"),checkBodyHidden(),$("[js-projects-form]").trigger("reset"),$('input:checkbox[name="projects"]').attr("checked",!1).prop("checked",!1)})),$(document).on("click","[js-save-projects]",(function(e){e.preventDefault(),$("[js-projects-form]").trigger("submit")})),$(document).on("submit","[js-projects-form]",(function(e){if(e.preventDefault(),validateForm(this)){var t=$("[js-projects-form]");saveManagerProjects(new FormData(t[0]))}})),window.chartColors={white:"rgb(255, 255, 255)",red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)",grey_half:"rgba(201, 203, 207, 0.5)",custom_red:"rgb(255, 40, 79)",custom_red_half:"rgba(255, 40, 79, 0.5)",custom_yellow:"rgb(255, 165, 21)",custom_yellow_half:"rgba(255, 165, 21, 0.5)",custom_orange:"rgb(255, 77, 0)",custom_blue:"rgb(3, 108, 181)",custom_light_blue:"rgb(29, 185, 242)",custom_violet:"rgb(133, 73, 186)",custom_pink:"rgb(255, 20, 147)",custom_dblue:"rgb(1, 69, 118)",custom_lblue:"rgb(103, 137, 229)",custom_green:"rgb(39, 174, 96)",custom_green_half:"rgba(39, 174, 96, 0.5)",custom_dgreen:"rgb(13, 113, 56)",custom_lgreen:"rgb(90, 215, 144)"},window.pieColors=["#20a620","#4426aa","#f53794","#e10000","#ffa9a9","#63ff63","#c5b3ff","#2553a6","#ff63c5","#7ea620","#a62020","#ffff63","#ff6363","#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba","#ff63dd","#a62088","#ffeb8a","#a9ffa9"],function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"],n=e.Samples||(e.Samples={}),a=e.Color;n.utils={srand:function(e){this._seed=e},rand:function(e,t){var i=this._seed;return e=void 0===e?0:e,t=void 0===t?1:t,this._seed=(9301*i+49297)%233280,e+this._seed/233280*(t-e)},numbers:function(e){var t,i,n=e||{},a=n.min||0,s=n.max||1,o=n.from||[],r=n.count||8,l=n.decimals||8,d=n.continuity||1,c=Math.pow(10,l)||0,u=[];for(t=0;t<r;++t)i=(o[t]||0)+this.rand(a,s),this.rand()<=d?u.push(Math.round(c*i)/c):u.push(null);return u},labels:function(e){var t,i=e||{},n=i.min||0,a=i.max||100,s=(a-n)/(i.count||8),o=i.decimals||8,r=Math.pow(10,o)||0,l=i.prefix||"",d=[];for(t=n;t<a;t+=s)d.push(l+Math.round(r*t)/r);return d},months:function(e){var i,n,a=e||{},s=a.count||12,o=a.section,r=[];for(i=0;i<s;++i)n=t[Math.ceil(i)%12],r.push(n.substring(0,o));return r},color:function(e){return i[e%i.length]},transparentize:function(e,t){var i=void 0===t?.5:1-t;return a(e).alpha(i).rgbString()}},window.randomScalingFactor=function(){return Math.round(n.utils.rand(-100,100))},n.utils.srand(Date.now()),document.location.hostname.match(/^(www\.)?chartjs\.org$/)&&(!function(e,t,i,n,a,s,o){e.GoogleAnalyticsObject=a,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,s=t.createElement(i),o=t.getElementsByTagName(i)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(s,o)}(window,document,"script",0,"ga"),ga("create","UA-28909194-3","auto"),ga("send","pageview"))}(this),$(document).on("click","[js-view-deal-btn]",(function(e){e.preventDefault(),$(this).closest("[js-view-deal-form]").trigger("submit")})),$(document).on("submit","[js-view-deal-form]",(function(e){(e.preventDefault(),validateForm(this))&&getViewDealInfo($(this).serializeObject())})),$(document).on("click","[js-menu-view-deal-close-btn]",(function(e){$("[js-menu-view-deal]").removeClass("is-open"),checkBodyHidden()})),jQuery.fn.datepicker.language.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"mm/dd/yyyy",timeFormat:"hh:ii aa",firstDay:0},jQuery.fn.datepicker.language.ru={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Ферваль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii aa",firstDay:0},function(e){"function"==typeof define&&define.amd?define(["jquery","../jquery.validate.min"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){return e.extend(e.validator.messages,{required:"Заполните это поле.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:e.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:e.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:e.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:e.validator.format("Пожалуйста, введите число от {0} до {1}."),max:e.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:e.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),e}));